exports.id=137,exports.ids=[137],exports.modules={59601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];function n(e,t){r.push({getServiceDefinition:e,getHandlers:t})}function i(e){for(let{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}t.registerAdminService=n,t.addAdminServicesToServer=i},84934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,n=1.6,i=12e4,s=.2;function o(e,t){return Math.random()*(t-e)+e}class a{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=n,this.maxDelay=i,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+o(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}}t.BackoffTimeout=a},90420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentialsFilterFactory=t.CallCredentialsFilter=void 0;let n=r(78152),i=r(32678),s=r(18429);class o extends n.BaseFilter{constructor(e,t){var r,n;super(),this.channel=e,this.stream=t,this.channel=e,this.stream=t;let i=t.getMethod().split("/"),o="";i.length>=2&&(o=i[1]);let a=null!==(n=null===(r=s.splitHostPort(t.getHost()))||void 0===r?void 0:r.host)&&void 0!==n?n:"localhost";this.serviceUrl=`https://${a}/${o}`}async sendMetadata(e){let t=this.stream.getCredentials().generateMetadata({service_url:this.serviceUrl}),r=await e;try{r.merge(await t)}catch(e){return this.stream.cancelWithStatus(i.Status.UNAUTHENTICATED,`Failed to retrieve auth metadata with error: ${e.message}`),Promise.reject("Failed to retrieve auth metadata")}return r.get("authorization").length>1?(this.stream.cancelWithStatus(i.Status.INTERNAL,'"authorization" metadata cannot have multiple values'),Promise.reject('"authorization" metadata cannot have multiple values')):r}}t.CallCredentialsFilter=o;class a{constructor(e){this.channel=e,this.channel=e}createFilter(e){return new o(this.channel,e)}}t.CallCredentialsFilterFactory=a},78931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let n=r(62252);function i(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new a(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=i(e)?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>{if(e){n(e);return}r(t)})})).then(e=>{let t=new n.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class o extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new n.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new o(this.creds.concat([e]))}_equals(e){return this===e||e instanceof o&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class a extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new o([this,e])}_equals(e){return this===e||e instanceof a&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},71925:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2CallStream=t.InterceptingListenerImpl=t.isInterceptingListener=void 0;let n=r(85158),i=r(22037),s=r(32678),o=r(62252),a=r(38326),l=r(97504),u=r(32678),c="call_stream",{HTTP2_HEADER_STATUS:d,HTTP2_HEADER_CONTENT_TYPE:h,NGHTTP2_CANCEL:f}=n.constants;function p(e){for(let[t,r]of Object.entries(i.constants.errno))if(r===e)return t;return"Unknown system error "+e}function m(e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t}function g(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length}t.isInterceptingListener=g;class y{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=y;class v{constructor(e,t,r,n,i,l){this.methodName=e,this.channel=t,this.options=r,this.channelCallCredentials=i,this.callNumber=l,this.http2Stream=null,this.pendingRead=!1,this.isWriteFilterPending=!1,this.pendingWrite=null,this.pendingWriteCallback=null,this.writesClosed=!1,this.decoder=new a.StreamDecoder,this.isReadFilterPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.unfilteredReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.subchannel=null,this.listener=null,this.internalError=null,this.configDeadline=1/0,this.statusWatchers=[],this.streamEndWatchers=[],this.callStatsTracker=null,this.filterStack=n.createFilter(this),this.credentials=i,this.disconnectListener=()=>{this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new o.Metadata})},this.options.parentCall&&this.options.flags&s.Propagate.CANCELLATION&&this.options.parentCall.on("cancelled",()=>{this.cancelWithStatus(s.Status.CANCELLED,"Cancelled by parent call")})}outputStatus(){var e;if(this.listener&&!this.statusOutput){this.statusOutput=!0;let t=this.filterStack.receiveTrailers(this.finalStatus);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)}),null===(e=this.http2Stream)||void 0===e||e.resume(),this.subchannel&&(this.subchannel.callUnref(),this.subchannel.removeDisconnectListener(this.disconnectListener))}}trace(e){l.trace(u.LogVerbosity.DEBUG,c,"["+this.callNumber+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null!==this.finalStatus&&(this.finalStatus.code!==s.Status.OK||this.readsClosed&&0===this.unpushedReadMessages.length&&0===this.unfilteredReadMessages.length&&!this.isReadFilterPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,process.nextTick(()=>{var t;this.statusOutput||(null===(t=this.listener)||void 0===t||t.onReceiveMessage(e),this.maybeOutputStatus())})}handleFilterError(e){this.cancelWithStatus(s.Status.INTERNAL,e.message)}handleFilteredRead(e){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.maybeOutputStatus();return}if(this.isReadFilterPending=!1,this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e)),this.unfilteredReadMessages.length>0){let e=this.unfilteredReadMessages.shift();this.filterReceivedMessage(e)}}filterReceivedMessage(e){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.maybeOutputStatus();return}this.trace("filterReceivedMessage of length "+e.length),this.isReadFilterPending=!0,this.filterStack.receiveMessage(Promise.resolve(e)).then(this.handleFilteredRead.bind(this),this.handleFilterError.bind(this))}tryPush(e){this.isReadFilterPending?(this.trace("unfilteredReadMessages.push message of length "+(e&&e.length)),this.unfilteredReadMessages.push(e)):this.filterReceivedMessage(e)}handleTrailers(e){let t;this.streamEndWatchers.forEach(e=>e(!0));let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=o.Metadata.fromHttp2Headers(e)}catch(e){t=new o.Metadata}let n=t.getMap(),i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){let e=Number(n["grpc-status"]);e in s.Status&&(i=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let a="";if("string"==typeof n["grpc-message"]){try{a=decodeURI(n["grpc-message"])}catch(e){a=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+a+'" from server')}let l={code:i,details:a,metadata:t};this.endCall(l)}writeMessageToStream(e,t){var r;null===(r=this.callStatsTracker)||void 0===r||r.addMessageSent(),this.http2Stream.write(e,t)}attachHttp2Stream(e,t,r,i){if(this.filterStack.push(r),null!==this.finalStatus)e.close(f);else{if(this.trace("attachHttp2Stream from subchannel "+t.getAddress()),this.http2Stream=e,this.subchannel=t,this.callStatsTracker=i,t.addDisconnectListener(this.disconnectListener),t.callRef(),e.on("response",(e,t)=>{var r;let i="";for(let t of Object.keys(e))i+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+i),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=o.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new o.Metadata});return}try{let e=this.filterStack.receiveMetadata(t);null===(r=this.listener)||void 0===r||r.onReceiveMetadata(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new o.Metadata})}}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{if(!this.statusOutput)for(let t of(this.trace("receive HTTP/2 data frame of length "+e.length),this.decoder.write(e)))this.trace("parsed message of length "+t.length),this.callStatsTracker.addMessageReceived(),this.tryPush(t)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,i=this.internalError.message):i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new o.Metadata})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+p(e.errno)+" syscall="+e.syscall),this.internalError=e),this.streamEndWatchers.forEach(e=>e(!1))}),this.pendingWrite){if(!this.pendingWriteCallback)throw Error("Invalid state in write handling code");this.trace("sending data chunk of length "+this.pendingWrite.length+" (deferred)");try{this.writeMessageToStream(this.pendingWrite,this.pendingWriteCallback)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}}this.maybeCloseWrites()}}start(e,t){this.trace("Sending metadata"),this.listener=t,this.channel._startCallStream(this,e),this.maybeOutputStatus()}destroyHttp2Stream(){var e;if(null!==this.http2Stream&&!this.http2Stream.destroyed){let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new o.Metadata})}getDeadline(){let e=[this.options.deadline];return this.options.parentCall&&this.options.flags&s.Propagate.DEADLINE&&e.push(this.options.parentCall.getDeadline()),this.configDeadline&&e.push(this.configDeadline),m(e)}getCredentials(){return this.credentials}setCredentials(e){this.credentials=this.channelCallCredentials.compose(e)}getStatus(){return this.finalStatus}getPeer(){var e,t;return null!==(t=null===(e=this.subchannel)||void 0===e?void 0:e.getAddress())&&void 0!==t?t:this.channel.getTarget()}getMethod(){return this.methodName}getHost(){return this.options.host}setConfigDeadline(e){this.configDeadline=e}addStatusWatcher(e){this.statusWatchers.push(e)}addStreamEndWatcher(e){this.streamEndWatchers.push(e)}addFilters(e){this.filterStack.push(e)}getCallNumber(){return this.callNumber}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,null===this.http2Stream)this.pendingRead=!0;else{if(this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}}maybeCloseWrites(){this.writesClosed&&!this.isWriteFilterPending&&null!==this.http2Stream&&(this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end())}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r={message:t,flags:e.flags},n=t=>{var r,n;let i=s.Status.UNAVAILABLE;(null===(r=t)||void 0===r?void 0:r.code)==="ERR_STREAM_WRITE_AFTER_END"&&(i=s.Status.INTERNAL),t&&this.cancelWithStatus(i,`Write error: ${t.message}`),null===(n=e.callback)||void 0===n||n.call(e)};this.isWriteFilterPending=!0,this.filterStack.sendMessage(Promise.resolve(r)).then(e=>{if(this.isWriteFilterPending=!1,null===this.http2Stream)this.trace("deferring writing data chunk of length "+e.message.length),this.pendingWrite=e.message,this.pendingWriteCallback=n;else{this.trace("sending data chunk of length "+e.message.length);try{this.writeMessageToStream(e.message,n)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}this.maybeCloseWrites()}},this.handleFilterError.bind(this))}halfClose(){this.trace("end() called"),this.writesClosed=!0,this.maybeCloseWrites()}}t.Http2CallStream=v},78439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let n=r(82361),i=r(12781),s=r(32678);function o(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=Error(r),i=`${n.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:i})}t.callErrorFromStatus=o;class a extends n.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=a;class l extends i.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=l;class u extends i.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(i,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=u;class c extends i.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null===(n=this.call)||void 0===n||n.sendMessageWithContext(i,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=c},92528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let n=r(24404),i=r(78931),s=r(43009);function o(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class a{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var a;if(o(e,"Root certificate"),o(t,"Private key"),o(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new u(n.createSecureContext({ca:null!==(a=null!=e?e:s.getDefaultRootsData())&&void 0!==a?a:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=i?i:{})}static createFromSecureContext(e,t){return new u(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=a;class l extends a{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class u extends a{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new c(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class c extends a{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new c(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof c&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},79387:(e,t)=>{"use strict";function r(e,t){let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc-node.max_session_memory":!0},t.channelOptionsEqual=r},46261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let n=r(71925),i=r(92528),s=r(82380),o=r(42328),a=r(17064),l=r(32678),u=r(2472),c=r(90420),d=r(18065),h=r(44299),f=r(40492),p=r(97504),m=r(25538),g=r(82039),y=r(18429),v=r(33955),b=r(5993),_=2147483647,w=0;function S(){let e=w;return(w+=1)>=Number.MAX_SAFE_INTEGER&&(w=0),e}let E=[l.Status.OK,l.Status.INVALID_ARGUMENT,l.Status.NOT_FOUND,l.Status.ALREADY_EXISTS,l.Status.FAILED_PRECONDITION,l.Status.ABORTED,l.Status.OUT_OF_RANGE,l.Status.DATA_LOSS];function T(e,t){return E.includes(e)?{code:l.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${l.Status[e]} ${t}`}:{code:e,details:t}}class O{constructor(e,t,r){var n,w,S,E;if(this.credentials=t,this.options=r,this.connectivityState=v.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.channelzEnabled=!0,this.callTracker=new b.ChannelzCallTracker,this.childrenTracker=new b.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof i.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let O=y.parseUri(e);if(null===O)throw Error(`Could not parse target name "${e}"`);let C=f.mapUriDefaultScheme(O);if(null===C)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},_),null===(w=(n=this.callRefTimer).unref)||void 0===w||w.call(n),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new b.ChannelzTrace,this.channelzRef=b.registerChannelzChannel(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=f.getDefaultAuthority(C);let k=g.mapProxyName(C,r);this.target=k.target,this.options=Object.assign({},this.options,k.extraOptions),this.subchannelPool=o.getSubchannelPool((null!==(S=r["grpc.use_local_subchannel_pool"])&&void 0!==S?S:0)===0);let x={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);return this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef()),r},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let{callStream:e,callMetadata:t,callConfig:n,dynamicFilters:i}of(this.pickQueue=[],this.callRefTimerUnref(),r))this.tryPick(e,t,n,i);this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new s.ResolvingLoadBalancer(this.target,x,r,e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=e,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let{callStream:t,callMetadata:r}of(this.configSelectionQueue=[],this.callRefTimerUnref(),e))this.tryGetConfig(t,r);this.configSelectionQueue=[]})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},T(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let{callStream:r,callMetadata:n}of(this.configSelectionQueue=[],this.callRefTimerUnref(),t))n.getOptions().waitForReady?(this.callRefTimerRef(),this.configSelectionQueue.push({callStream:r,callMetadata:n})):r.cancelWithStatus(e.code,e.details)}),this.filterStackFactory=new u.FilterStackFactory([new c.CallCredentialsFilterFactory(this),new d.DeadlineFilterFactory(this),new m.MaxMessageSizeFilterFactory(this.options),new h.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let A=Error();p.trace(l.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(E=A.stack)||void 0===E?void 0:E.substring(A.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){p.trace(null!=t?t:l.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+y.uriToString(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(n=(r=this.callRefTimer).ref)||void 0===n||n.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(t=(e=this.callRefTimer).unref)||void 0===t||t.call(e))}pushPick(e,t,r,n){this.pickQueue.push({callStream:e,callMetadata:t,callConfig:r,dynamicFilters:n}),this.callRefTimerRef()}tryPick(e,t,r,n){var i,s;let o=this.currentPicker.pick({metadata:t,extraPickInfo:r.pickInformation}),u=o.subchannel?"("+o.subchannel.getChannelzRef().id+") "+o.subchannel.getAddress():""+o.subchannel;switch(this.trace("Pick result for call ["+e.getCallNumber()+"]: "+a.PickResultType[o.pickResultType]+" subchannel: "+u+" status: "+(null===(i=o.status)||void 0===i?void 0:i.code)+" "+(null===(s=o.status)||void 0===s?void 0:s.details)),o.pickResultType){case a.PickResultType.COMPLETE:if(null===o.subchannel)e.cancelWithStatus(l.Status.UNAVAILABLE,"Request dropped by load balancing policy");else{if(o.subchannel.getConnectivityState()!==v.ConnectivityState.READY){p.log(l.LogVerbosity.ERROR,"Error: COMPLETE pick result subchannel "+u+" has state "+v.ConnectivityState[o.subchannel.getConnectivityState()]),this.pushPick(e,t,r,n);break}e.filterStack.sendMetadata(Promise.resolve(t.clone())).then(i=>{var s,a,c;let d=o.subchannel.getConnectivityState();if(d===v.ConnectivityState.READY)try{let t=o.extraFilterFactories.map(t=>t.createFilter(e));null===(s=o.subchannel)||void 0===s||s.getRealSubchannel().startCallStream(i,e,[...n,...t]),null===(a=r.onCommitted)||void 0===a||a.call(r),null===(c=o.onCallStarted)||void 0===c||c.call(o)}catch(s){let i=s.code;"ERR_HTTP2_GOAWAY_SESSION"===i||"ERR_HTTP2_INVALID_SESSION"===i?(this.trace("Failed to start call on picked subchannel "+u+" with error "+s.message+". Retrying pick",l.LogVerbosity.INFO),this.tryPick(e,t,r,n)):(this.trace("Failed to start call on picked subchanel "+u+" with error "+s.message+". Ending call",l.LogVerbosity.INFO),e.cancelWithStatus(l.Status.INTERNAL,`Failed to start HTTP/2 stream with error: ${s.message}`))}else this.trace("Picked subchannel "+u+" has state "+v.ConnectivityState[d]+" after metadata filters. Retrying pick",l.LogVerbosity.INFO),this.tryPick(e,t,r,n)},t=>{let{code:r,details:n}=T("number"==typeof t.code?t.code:l.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${t.message}`);e.cancelWithStatus(r,n)})}break;case a.PickResultType.QUEUE:this.pushPick(e,t,r,n);break;case a.PickResultType.TRANSIENT_FAILURE:if(t.getOptions().waitForReady)this.pushPick(e,t,r,n);else{let{code:t,details:r}=T(o.status.code,o.status.details);e.cancelWithStatus(t,r)}break;case a.PickResultType.DROP:let{code:c,details:d}=T(o.status.code,o.status.details);e.cancelWithStatus(c,d);break;default:throw Error(`Invalid state: unknown pickResultType ${o.pickResultType}`)}}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of(p.trace(l.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+y.uriToString(this.target)+" "+v.ConnectivityState[this.connectivityState]+" -> "+v.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",v.ConnectivityState[this.connectivityState]+" -> "+v.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==v.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}tryGetConfig(e,t){if(null===e.getStatus()){if(null===this.configSelector)this.resolvingLoadBalancer.exitIdle(),this.currentResolutionError&&!t.getOptions().waitForReady?e.cancelWithStatus(this.currentResolutionError.code,this.currentResolutionError.details):(this.configSelectionQueue.push({callStream:e,callMetadata:t}),this.callRefTimerRef());else{let r=this.configSelector(e.getMethod(),t);if(r.status===l.Status.OK){if(r.methodConfig.timeout){let t=new Date;t.setSeconds(t.getSeconds()+r.methodConfig.timeout.seconds),t.setMilliseconds(t.getMilliseconds()+r.methodConfig.timeout.nanos/1e6),e.setConfigDeadline(t),e.filterStack.refresh()}if(r.dynamicFilterFactories.length>0){let n=new u.FilterStackFactory(r.dynamicFilterFactories).createFilter(e);n.sendMetadata(Promise.resolve(t)).then(t=>{this.tryPick(e,t,r,n.getFilters())})}else this.tryPick(e,t,r,[])}else{let{code:t,details:n}=T(r.status,"Failed to route call to method "+e.getMethod());e.cancelWithStatus(t,n)}}}}_startCallStream(e,t){this.tryGetConfig(e,t.clone())}close(){this.resolvingLoadBalancer.destroy(),this.updateState(v.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.channelzEnabled&&b.unregisterChannelzRef(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return y.uriToString(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&this.resolvingLoadBalancer.exitIdle(),t}watchConnectivityState(e,t,r){if(this.connectivityState===v.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let n=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s){process.nextTick(r,Error("Deadline passed without connectivity state change"));return}n=setTimeout(()=>{this.removeConnectivityStateWatcher(i),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,s){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===v.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let o=S();this.trace("createCall ["+o+'] method="'+e+'", deadline='+t);let a={deadline:t,flags:null!=s?s:l.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:i},u=new n.Http2CallStream(e,this,a,this.filterStackFactory,this.credentials._getCallCredentials(),o);return this.channelzEnabled&&(this.callTracker.addCallStarted(),u.addStatusWatcher(e=>{e.code===l.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()})),u}}t.ChannelImplementation=O},5993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let n=r(41808),i=r(33955),s=r(32678),o=r(23906),a=r(59601),l=r(35085);function u(e){return{channel_id:e.id,name:e.name}}function c(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{server_id:e.id}}function h(e){return{socket_id:e.id,name:e.name}}let f=32;class p{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*f&&(this.events=this.events.slice(f)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:P(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:P(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?c(e.childSubchannel):null}))}}}t.ChannelzTrace=p;class m{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!==(t=this.channelChildren.get(e.id))&&void 0!==t?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!==(r=this.subchannelChildren.get(e.id))&&void 0!==r?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!==(n=this.socketChildren.get(e.id))&&void 0!==n?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=m;class g{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=g;let y=1;function v(){return y++}let b=[],_=[],w=[],S=[];function E(e,t,r){let n=v(),i={id:n,name:e,kind:"channel"};return r&&(b[n]={ref:i,getInfo:t}),i}function T(e,t,r){let n=v(),i={id:n,name:e,kind:"subchannel"};return r&&(_[n]={ref:i,getInfo:t}),i}function O(e,t){let r=v(),n={id:r,kind:"server"};return t&&(w[r]={ref:n,getInfo:e}),n}function C(e,t,r){let n=v(),i={id:n,name:e,kind:"socket"};return r&&(S[n]={ref:i,getInfo:t}),i}function k(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete _[e.id];return;case"server":delete w[e.id];return;case"socket":delete S[e.id];return}}function x(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function A(e){return""===e?[]:[].concat(...e.split(":").map(e=>x(e)))}function R(e){if(n.isIPv4(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!n.isIPv6(e))return null;{let t,r;let n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));let i=Buffer.from(A(t)),s=Buffer.from(A(r)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}}function I(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function P(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function D(e){let t=e.getInfo();return{ref:u(e.ref),data:{target:t.target,state:I(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:P(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>u(e)),subchannel_ref:t.children.subchannels.map(e=>c(e))}}function N(e,t){let r=Number.parseInt(e.request.channel_id),n=b[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});return}t(null,{channel:D(n)})}function M(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_channel_id);for(;i<b.length;i++){let e=b[i];if(void 0!==e&&(n.push(D(e)),n.length>=r))break}t(null,{channel:n,end:i>=w.length})}function j(e){let t=e.getInfo();return{ref:d(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:P(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>h(e))}}function L(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}t(null,{server:j(n)})}function F(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_server_id);for(;i<w.length;i++){let e=w[i];if(void 0!==e&&(n.push(j(e)),n.length>=r))break}t(null,{server:n,end:i>=w.length})}function U(e,t){let r=Number.parseInt(e.request.subchannel_id),n=_[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}let i=n.getInfo();t(null,{subchannel:{ref:c(n.ref),data:{target:i.target,state:I(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:P(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(e=>h(e))}})}function B(e){var t;return o.isTcpSubchannelAddress(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=R(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function V(e,t){var r,n,i,o,a;let l=Number.parseInt(e.request.socket_id),u=S[l];if(void 0===u){t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});return}let c=u.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=c.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(n=c.security.cipherSuiteOtherName)&&void 0!==n?n:void 0,local_certificate:null!==(i=c.security.localCertificate)&&void 0!==i?i:void 0,remote_certificate:null!==(o=c.security.remoteCertificate)&&void 0!==o?o:void 0}}:null;t(null,{socket:{ref:h(u.ref),local:c.localAddress?B(c.localAddress):null,remote:c.remoteAddress?B(c.remoteAddress):null,remote_name:null!==(a=c.remoteName)&&void 0!==a?a:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:P(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:P(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:P(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:P(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}}})}function H(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}let i=Number.parseInt(e.request.start_socket_id),o=Number.parseInt(e.request.max_results),a=n.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],u=0;for(;u<a.length&&(!(a[u].id>=i)||(l.push(h(a[u])),!(l.length>=o)));u++);t(null,{socket_ref:l,end:u>=a.length})}function z(){return{GetChannel:N,GetTopChannels:M,GetServer:L,GetServers:F,GetSubchannel:U,GetSocket:V,GetServerSockets:H}}t.registerChannelzChannel=E,t.registerChannelzSubchannel=T,t.registerChannelzServer=O,t.registerChannelzSocket=C,t.unregisterChannelzRef=k,t.getChannelzHandlers=z;let W=null;function q(){if(W)return W;let e=(0,r(52894).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return W=l.loadPackageDefinition(e).grpc.channelz.v1.Channelz.service}function $(){a.registerAdminService(q,z)}t.getChannelzServiceDefinition=q,t.setup=$},68601:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let n=r(62252),i=r(71925),s=r(32678);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class a{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=a;class l{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=l;let u={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},c={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class d{constructor(e,t){var r,n,i,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!==(r=t.start)&&void 0!==r?r:c.start,sendMessage:null!==(n=t.sendMessage)&&void 0!==n?n:c.sendMessage,halfClose:null!==(i=t.halfClose)&&void 0!==i?i:c.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:c.cancel}:this.requester=c}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,o,a,l;let c={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:null!==(o=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==o?o:e=>{},onReceiveStatus:null!==(l=null===(a=null==t?void 0:t.onReceiveStatus)||void 0===a?void 0:a.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,c,(e,t)=>{var r,n,s;let o;if(this.processingMetadata=!1,i.isInterceptingListener(t))o=t;else{let e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:u.onReceiveMetadata,onReceiveMessage:null!==(n=t.onReceiveMessage)&&void 0!==n?n:u.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:u.onReceiveStatus};o=new i.InterceptingListenerImpl(e,c)}this.nextCall.start(e,o),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}setCredentials(e){this.nextCall.setCredentials(e)}}function h(e,t,r){var n,i;let s=null!==(n=r.deadline)&&void 0!==n?n:1/0,o=r.host,a=null!==(i=r.parent)&&void 0!==i?i:null,l=r.propagate_flags,u=r.credentials,c=e.createCall(t,s,o,a,l);return u&&c.setCredentials(u),c}t.InterceptingCall=d;class f{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}setCredentials(e){this.call.setCredentials(e)}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${e.message}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${e.message}`,metadata:new n.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null===(i=null==t?void 0:t.onReceiveMessage)||void 0===i||i.call(t,o)},onReceiveStatus:e=>{var n,i;r?null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,r):null===(i=null==t?void 0:t.onReceiveStatus)||void 0===i||i.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class p extends f{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=!1,s={onReceiveMetadata:null!==(n=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e=>{},onReceiveMessage:e=>{var r;i=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,n;i||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class m extends f{}function g(e,t,r){let n=h(e,r.path,t);return r.responseStream?new m(n,r):new p(n,r)}function y(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];i=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return i.reduceRight((e,t)=>r=>t(r,e),e=>g(n,e,t))(s)}t.getInterceptingCall=y},69800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let n=r(78439),i=r(46261),s=r(33955),o=r(32678),a=r(62252),l=r(68601),u=Symbol(),c=Symbol(),d=Symbol(),h=Symbol();function f(e){return"function"==typeof e}function p(e){return e.stack.split("\n").slice(1).join("\n")}class m{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[c]=null!==(n=r.interceptors)&&void 0!==n?n:[],delete r.interceptors,this[d]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[c].length>0&&this[d].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[u]=r.channelOverride;else if(r.channelFactoryOverride){let n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[u]=n(e,t,r)}else this[u]=new i.ChannelImplementation(e,t,r)}close(){this[u].close()}getChannel(){return this[u]}waitForReady(e,t){let r=n=>{let i;if(n){t(Error("Failed to connect before the deadline"));return}try{i=this[u].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(i===s.ConnectivityState.READY)t();else try{this[u].watchConnectivityState(i,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(f(e))return{metadata:new a.Metadata,options:{},callback:e};if(f(t))return e instanceof a.Metadata?{metadata:e,options:{},callback:t}:{metadata:new a.Metadata,options:e,callback:t};if(!(e instanceof a.Metadata&&t instanceof Object&&f(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,a,f){var m,g;let y=this.checkOptionalUnaryResponseArguments(s,a,f),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:i,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[u],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(b=this[h](b));let _=b.call,w={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=l.getInterceptingCall(w,b.methodDefinition,b.callOptions,b.channel);_.call=S,b.callOptions.credentials&&S.setCredentials(b.callOptions.credentials);let E=null,T=!1,O=Error();return S.start(b.metadata,{onReceiveMetadata:e=>{_.emit("metadata",e)},onReceiveMessage(e){null!==E&&S.cancelWithStatus(o.Status.INTERNAL,"Too many responses received"),E=e},onReceiveStatus(e){if(!T){if(T=!0,e.code===o.Status.OK){if(null===E){let t=p(O);b.callback(n.callErrorFromStatus({code:o.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,E)}else{let t=p(O);b.callback(n.callErrorFromStatus(e,t))}_.emit("status",e)}}}),S.sendMessage(i),S.halfClose(),_}makeClientStreamRequest(e,t,r,i,s,a){var f,m;let g=this.checkOptionalUnaryResponseArguments(i,s,a),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:g.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[u],methodDefinition:y,callOptions:g.options,callback:g.callback};this[h]&&(v=this[h](v));let b=v.call,_={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(f=v.callOptions.interceptors)&&void 0!==f?f:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},w=l.getInterceptingCall(_,v.methodDefinition,v.callOptions,v.channel);b.call=w,v.callOptions.credentials&&w.setCredentials(v.callOptions.credentials);let S=null,E=!1,T=Error();return w.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==S&&w.cancelWithStatus(o.Status.INTERNAL,"Too many responses received"),S=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===o.Status.OK){if(null===S){let t=p(T);v.callback(n.callErrorFromStatus({code:o.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,S)}else{let t=p(T);v.callback(n.callErrorFromStatus(e,t))}b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,n;return e instanceof a.Metadata?(r=e,n=t||{}):(n=e||{},r=new a.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,a){var f,m;let g=this.checkMetadataAndOptions(s,a),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:g.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[u],methodDefinition:y,callOptions:g.options};this[h]&&(v=this[h](v));let b=v.call,_={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(f=v.callOptions.interceptors)&&void 0!==f?f:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},w=l.getInterceptingCall(_,v.methodDefinition,v.callOptions,v.channel);b.call=w,v.callOptions.credentials&&w.setCredentials(v.callOptions.credentials);let S=!1,E=Error();return w.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!S){if(S=!0,b.push(null),e.code!==o.Status.OK){let t=p(E);b.emit("error",n.callErrorFromStatus(e,t))}b.emit("status",e)}}}),w.sendMessage(i),w.halfClose(),b}makeBidiStreamRequest(e,t,r,i,s){var a,f;let m=this.checkMetadataAndOptions(i,s),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:m.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[u],methodDefinition:g,callOptions:m.options};this[h]&&(y=this[h](y));let v=y.call,b={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!==(a=y.callOptions.interceptors)&&void 0!==a?a:[],callInterceptorProviders:null!==(f=y.callOptions.interceptor_providers)&&void 0!==f?f:[]},_=l.getInterceptingCall(b,y.methodDefinition,y.callOptions,y.channel);v.call=_,y.callOptions.credentials&&_.setCredentials(y.callOptions.credentials);let w=!1,S=Error();return _.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!w){if(w=!0,v.push(null),e.code!==o.Status.OK){let t=p(S);v.emit("error",n.callErrorFromStatus(e,t))}v.emit("status",e)}}}),v}}t.Client=m},59286:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r=t.CompressionAlgorithms||(t.CompressionAlgorithms={}))},44299:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let n=r(59796),i=r(59286),s=r(32678),o=r(78152),a=r(97504),l=e=>"number"==typeof e&&"string"==typeof i.CompressionAlgorithms[e];class u{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(t?1:0,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends u{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends u{compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{n.inflate(e,(e,n)=>{e?r(e):t(n)})})}}class h extends u{compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{n.unzip(e,(e,n)=>{e?r(e):t(n)})})}}class f extends u{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function p(e){switch(e){case"identity":return new c;case"deflate":return new d;case"gzip":return new h;default:return new f(e)}}class m extends o.BaseFilter{constructor(e,t){var r;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";let n=e["grpc.default_compression_algorithm"];if(void 0!==n){if(l(n)){let e=i.CompressionAlgorithms[n],s=null===(r=t.serverSupportedEncodingHeader)||void 0===r?void 0:r.split(",");(!s||s.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm))}else a.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${n}`)}}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=p(e))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r;let n=await e;return r=!(this.sendCompression instanceof c)&&((null!==(t=n.flags)&&void 0!==t?t:0)&2)==0,{message:await this.sendCompression.writeMessage(n.message,r),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=m;class g{constructor(e,t){this.channel=e,this.options=t,this.sharedFilterConfig={}}createFilter(e){return new m(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=g},33955:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r=t.ConnectivityState||(t.ConnectivityState={}))},32678:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r=t.Status||(t.Status={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n=t.LogVerbosity||(t.LogVerbosity={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(i=t.Propagate||(t.Propagate={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},18065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeadlineFilterFactory=t.DeadlineFilter=void 0;let n=r(32678),i=r(78152),s=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function o(e){let t=Math.max(e-new Date().getTime(),0);for(let[e,r]of s){let n=t/r;if(n<1e8)return String(Math.ceil(n))+e}throw Error("Deadline is too far in the future")}class a extends i.BaseFilter{constructor(e,t){super(),this.channel=e,this.callStream=t,this.timer=null,this.deadline=1/0,this.retreiveDeadline(),this.runTimer()}retreiveDeadline(){let e=this.callStream.getDeadline();e instanceof Date?this.deadline=e.getTime():this.deadline=e}runTimer(){var e,t;this.timer&&clearTimeout(this.timer);let r=new Date().getTime(),i=this.deadline-r;i<=0?process.nextTick(()=>{this.callStream.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")}):this.deadline!==1/0&&(this.timer=setTimeout(()=>{this.callStream.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")},i),null===(t=(e=this.timer).unref)||void 0===t||t.call(e))}refresh(){this.retreiveDeadline(),this.runTimer()}async sendMetadata(e){if(this.deadline===1/0)return e;let t=await e,r=o(this.deadline);return t.set("grpc-timeout",r),t}receiveTrailers(e){return this.timer&&clearTimeout(this.timer),e}}t.DeadlineFilter=a;class l{constructor(e){this.channel=e}createFilter(e){return new a(this.channel,e)}}t.DeadlineFilterFactory=l},95330:(e,t)=>{"use strict";function r(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}}function n(e){return 1e3*e.seconds+e.nanos/1e6|0}function i(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=r,t.durationToMs=n,t.isDuration=i},30345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97504);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var i=r(40492);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return i.registerResolver}});var s=r(18429);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var o=r(95330);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return o.durationToMs}});var a=r(84934);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return a.BackoffTimeout}});var l=r(27176);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var u=r(23906);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}});var c=r(982);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return c.ChildLoadBalancerHandler}});var d=r(17064);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(78152);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var f=r(2472);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return f.FilterStackFactory}});var p=r(59601);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return p.registerAdminService}});var m=r(21407);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return m.BaseSubchannelWrapper}});var g=r(81433);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return g.OutlierDetectionLoadBalancingConfig}})},2472:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}refresh(){for(let e of this.filters)e.refresh()}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}createFilter(e){return new r(this.factories.map(t=>t.createFilter(e)))}}t.FilterStackFactory=n},78152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}refresh(){}}t.BaseFilter=r},82039:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let n=r(97504),i=r(32678),s=r(40492),o=r(13685),a=r(24404),l=r(97504),u=r(23906),c=r(18429),d=r(57310),h="proxy";function f(e){l.trace(i.LogVerbosity.DEBUG,h,e)}function p(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return n.log(i.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return n.log(i.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?(n.log(i.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let o=e.hostname,a=e.port;""===a&&(a="80");let l={address:`${o}:${a}`};return s&&(l.creds=s),f("Proxy server "+l.address+" set by environment variable "+r),l}function m(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(f("No proxy server list set by environment variable "+t),e.split(",")):[]}function g(e,t){var r;let n={target:e,extraOptions:{}};if((null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1)===0||"unix"===e.scheme)return n;let i=p();if(!i.address)return n;let s=c.splitHostPort(e.path);if(!s)return n;let o=s.host;for(let t of m())if(t===o)return f("Not using proxy for target in no_proxy list: "+c.uriToString(e)),n;let a={"grpc.http_connect_target":c.uriToString(e)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}function y(e,t,r){if(!("grpc.http_connect_target"in t))return Promise.resolve({});let l=t["grpc.http_connect_target"],d=c.parseUri(l);if(null===d)return Promise.resolve({});let h={method:"CONNECT",path:d.path},p={Host:d.path};u.isTcpSubchannelAddress(e)?(h.host=e.host,h.port=e.port):h.socketPath=e.path,"grpc.http_connect_creds"in t&&(p["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),h.headers=p;let m=u.subchannelAddressToString(e);return f("Using proxy "+m+" to connect to "+h.path),new Promise((e,t)=>{let l=o.request(h);l.once("connect",(o,u,p)=>{var g;if(l.removeAllListeners(),u.removeAllListeners(),200===o.statusCode){if(f("Successfully connected to "+h.path+" through proxy "+m),"secureContext"in r){let n=s.getDefaultAuthority(d),i=c.splitHostPort(n),o=null!==(g=null==i?void 0:i.host)&&void 0!==g?g:n,l=a.connect(Object.assign({host:o,servername:o,socket:u},r),()=>{f("Successfully established a TLS connection to "+h.path+" through proxy "+m),e({socket:l,realTarget:d})});l.on("error",e=>{f("Failed to establish a TLS connection to "+h.path+" through proxy "+m+" with error "+e.message),t()})}else f("Successfully established a plaintext connection to "+h.path+" through proxy "+m),e({socket:u,realTarget:d})}else n.log(i.LogVerbosity.ERROR,"Failed to connect to "+h.path+" through proxy "+m+" with status "+o.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),n.log(i.LogVerbosity.ERROR,"Failed to connect to proxy "+m+" with error "+e.message),t()}),l.end()})}t.mapProxyName=g,t.getProxiedConnection=y},22165:(e,t,r)=>{"use strict";g={value:!0},g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=t.Rz=g=g=g=g=g=g=t.SF=t.K9=void 0;let n=r(78931);g={enumerable:!0,get:function(){return n.CallCredentials}};let i=r(46261);g={enumerable:!0,get:function(){return i.ChannelImplementation}};let s=r(59286);g={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let o=r(33955);g={enumerable:!0,get:function(){return o.ConnectivityState}};let a=r(92528);g={enumerable:!0,get:function(){return a.ChannelCredentials}};let l=r(69800);g={enumerable:!0,get:function(){return l.Client}};let u=r(32678);g={enumerable:!0,get:function(){return u.LogVerbosity}},g={enumerable:!0,get:function(){return u.Status}},g={enumerable:!0,get:function(){return u.Propagate}};let c=r(97504),d=r(35085);Object.defineProperty(t,"Rz",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),g={enumerable:!0,get:function(){return d.makeClientConstructor}},g={enumerable:!0,get:function(){return d.makeClientConstructor}};let h=r(62252);Object.defineProperty(t,"SF",{enumerable:!0,get:function(){return h.Metadata}});let f=r(57691);g={enumerable:!0,get:function(){return f.Server}};let p=r(74181);g={enumerable:!0,get:function(){return p.ServerCredentials}};let m=r(39932);g={enumerable:!0,get:function(){return m.StatusBuilder}},t.K9={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},g=e=>e.close(),g=(e,t,r)=>e.waitForReady(t,r),g=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=e=>{c.setLogger(e)},g=e=>{c.setLoggerVerbosity(e)},g=e=>l.Client.prototype.getChannel.call(e);var g,y=r(68601);g={enumerable:!0,get:function(){return y.ListenerBuilder}},g={enumerable:!0,get:function(){return y.RequesterBuilder}},g={enumerable:!0,get:function(){return y.InterceptingCall}},g={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(5993);g={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},g={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(59601);g={enumerable:!0,get:function(){return b.addAdminServicesToServer}},g=r(30345);let _=r(54605),w=r(45862),S=r(53562),E=r(56170),T=r(99438),O=r(81433),C=r(5993),k=r(81513).i8;(()=>{c.trace(u.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+k),_.setup(),w.setup(),S.setup(),E.setup(),T.setup(),O.setup(),C.setup()})()},982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let n=r(27176),i=r(33955),s="child_load_balancer_helper";class o{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(e,t,r){let i;if(null===this.currentChild||this.currentChild.getTypeName()!==t.getLoadBalancerName()){let e=new this.ChildPolicyHelper(this),r=n.createLoadBalancer(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=o},81433:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let i=r(33955),s=r(32678),o=r(95330),a=r(30345),l=r(78152),u=r(27176),c=r(982),d=r(17064),h=r(23906),f=r(21407),p=r(97504),m="outlier_detection";function g(e){p.trace(s.LogVerbosity.DEBUG,m,e)}let y="outlier_detection",v=(null!==(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==n?n:"true")==="true",b={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},_={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function w(e,t,r,n){if(t in e&&typeof e[t]!==r){let i=n?`${n}.${t}`:t;throw Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function S(e,t,r){let n=r?`${r}.${t}`:t;if(t in e){if(!o.isDuration(e[t]))throw Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function E(e,t,r){let n=r?`${r}.${t}`:t;if(w(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class T{constructor(e,t,r,n,i,s,o){this.childPolicy=o,this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=i?Object.assign(Object.assign({},b),i):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},_),s):null}getLoadBalancerName(){return y}toJsonObject(){return{interval:o.msToDuration(this.intervalMs),base_ejection_time:o.msToDuration(this.baseEjectionTimeMs),max_ejection_time:o.msToDuration(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new T(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(S(e,"interval"),S(e,"base_ejection_time"),S(e,"max_ejection_time"),E(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");w(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),E(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),w(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),w(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");E(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),E(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),w(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),w(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new T(e.interval?o.durationToMs(e.interval):null,e.base_ejection_time?o.durationToMs(e.base_ejection_time):null,e.max_ejection_time?o.durationToMs(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(u.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=T;class O extends f.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r)})}getConnectivityState(){return this.ejected?i.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function C(){return{success:0,failure:0}}class k{constructor(){this.activeBucket=C(),this.inactiveBucket=C()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=C()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class x extends l.BaseFilter{constructor(e){super(),this.callCounter=e}receiveTrailers(e){return e.code===s.Status.OK?this.callCounter.addSuccess():this.callCounter.addFailure(),e}}class A{constructor(e){this.callCounter=e}createFilter(e){return new x(this.callCounter)}}class R{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==d.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let n=[...t.extraFilterFactories];return this.countCalls&&n.push(new A(r.counter)),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),extraFilterFactories:n})}}}}class I{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new c.ChildLoadBalancerHandler(a.createChildChannelControlHelper(e,{createSubchannel:(t,r)=>{let n=e.createSubchannel(t,r),i=this.addressMap.get(h.subchannelAddressToString(t)),s=new O(n,i);return(null==i?void 0:i.currentEjectionTimestamp)!==null&&s.eject(),null==i||i.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===i.ConnectivityState.READY?e.updateState(t,new R(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;g("Running success rate check");let r=t.request_volume,n=0,i=[];for(let e of this.addressMap.values()){let t=e.counter.getLastSuccesses(),s=e.counter.getLastFailures();t+s>=r&&(n+=1,i.push(t/(t+s)))}if(g("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]"),n<t.minimum_hosts)return;let s=i.reduce((e,t)=>e+t)/i.length,o=0;for(let e of i){let t=e-s;o+=t*t}let a=Math.sqrt(o/i.length),l=s-t.stdev_factor/1e3*a;for(let[n,i]of(g("stdev="+a+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();if(s+o<r)continue;let a=s/(s+o);if(g("Checking candidate "+n+" successRate="+a),a<l){let r=100*Math.random();g("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(g("Ejecting candidate "+n),this.eject(i,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;g("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let i=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if(g("Candidate successes="+i+" failures="+s),!(i+s<t.request_volume)&&100*s/(s+i)>t.threshold){let i=100*Math.random();g("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(g("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){this.ejectionTimer=setTimeout(()=>this.runChecks(),e)}runChecks(){let e=new Date;if(g("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),i=new Date(r.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,n))),i<new Date&&(g("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof T))return;let n=new Set;for(let t of e)n.add(h.subchannelAddressToString(t));for(let e of n)this.addressMap.has(e)||(g("Adding map entry for "+e),this.addressMap.set(e,{counter:new k,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())n.has(e)||(g("Removing map entry for "+e),this.addressMap.delete(e));let i=u.getFirstUsableConfig(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig()){if(this.timerStartTime){g("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else g("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets()}else for(let e of(g("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return y}}function P(){v&&a.registerLoadBalancerType(y,I,T)}t.OutlierDetectionLoadBalancer=I,t.setup=P},56170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0;let n=r(27176),i=r(33955),s=r(17064),o=r(23906),a=r(97504),l=r(32678),u="pick_first";function c(e){a.trace(l.LogVerbosity.DEBUG,u,e)}let d="pick_first",h=250;class f{getLoadBalancerName(){return d}constructor(){}toJsonObject(){return{[d]:{}}}static createFromJson(e){return new f}}t.PickFirstLoadBalancingConfig=f;class p{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,extraFilterFactories:[],onCallStarted:null}}}class m{constructor(e){this.channelControlHelper=e,this.latestAddressList=[],this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.triedAllSubchannels=!1,this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{if(this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,e===this.subchannels[this.currentSubchannelIndex]&&r===i.ConnectivityState.TRANSIENT_FAILURE&&this.startNextSubchannelConnecting(),r===i.ConnectivityState.READY){this.pickSubchannel(e);return}if(this.triedAllSubchannels&&this.subchannelStateCounts[i.ConnectivityState.IDLE]===this.subchannels.length){this.resetSubchannelList(!1),this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this));return}if(null===this.currentPick){if(this.triedAllSubchannels){let e;(e=this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0?i.ConnectivityState.CONNECTING:this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0?i.ConnectivityState.TRANSIENT_FAILURE:i.ConnectivityState.IDLE)!==this.currentState&&(e===i.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this)))}else this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}},this.pickedSubchannelStateListener=(e,t,r)=>{if(r!==i.ConnectivityState.READY){if(this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef()),this.subchannels.length>0){if(this.triedAllSubchannels){let e;(e=this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0?i.ConnectivityState.CONNECTING:this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0?i.ConnectivityState.TRANSIENT_FAILURE:i.ConnectivityState.IDLE)===i.ConnectivityState.TRANSIENT_FAILURE?this.updateState(e,new s.UnavailablePicker):this.updateState(e,new s.QueuePicker(this))}else this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}else this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}},this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(!this.triedAllSubchannels){for(let[e,t]of this.subchannels.entries())if(e>this.currentSubchannelIndex){let r=t.getConnectivityState();if(r===i.ConnectivityState.IDLE||r===i.ConnectivityState.CONNECTING){this.startConnecting(e);return}}this.triedAllSubchannels=!0}}startConnecting(e){clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.subchannels[e].getConnectivityState()===i.ConnectivityState.IDLE&&(c("Start connecting to subchannel with address "+this.subchannels[e].getAddress()),process.nextTick(()=>{this.subchannels[e].startConnecting()})),this.connectionDelayTimeout=setTimeout(()=>{this.startNextSubchannelConnecting()},h)}pickSubchannel(e){c("Pick subchannel with address "+e.getAddress()),null!==this.currentPick&&(this.currentPick.unref(),this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)),this.currentPick=e,this.updateState(i.ConnectivityState.READY,new p(e)),e.addConnectivityStateListener(this.pickedSubchannelStateListener),e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout)}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(e=!0){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.currentSubchannelIndex=0,this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[],e&&(this.triedAllSubchannels=!1)}connectToAddressList(){for(let e of(this.resetSubchannelList(),c("Connect to address list "+this.latestAddressList.map(e=>o.subchannelAddressToString(e))),this.subchannels=this.latestAddressList.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels))e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let e of this.subchannels)if(e.addConnectivityStateListener(this.subchannelStateListener),this.subchannelStateCounts[e.getConnectivityState()]+=1,e.getConnectivityState()===i.ConnectivityState.READY){this.pickSubchannel(e),this.resetSubchannelList();return}for(let[e,t]of this.subchannels.entries()){let r=t.getConnectivityState();if(r===i.ConnectivityState.IDLE||r===i.ConnectivityState.CONNECTING){this.startConnecting(e),null===this.currentPick&&this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this));return}}null===this.currentPick&&this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker)}updateAddressList(e,t){0!==this.subchannels.length&&this.latestAddressList.every((t,r)=>e[r]===t)||(this.latestAddressList=e,this.connectToAddressList())}exitIdle(){for(let e of((this.currentState===i.ConnectivityState.IDLE||this.triedAllSubchannels)&&this.channelControlHelper.requestReresolution(),this.subchannels))e.startConnecting();this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList.length>0&&this.connectToAddressList()}resetBackoff(){}destroy(){if(this.resetSubchannelList(),null!==this.currentPick){let e=this.currentPick;e.unref(),e.removeConnectivityStateListener(this.pickedSubchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}getTypeName(){return d}}function g(){n.registerLoadBalancerType(d,m,f),n.registerDefaultLoadBalancerType(d)}t.PickFirstLoadBalancer=m,t.setup=g},99438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let n=r(27176),i=r(33955),s=r(17064),o=r(23906),a=r(97504),l=r(32678),u="round_robin";function c(e){a.trace(l.LogVerbosity.DEBUG,u,e)}let d="round_robin";class h{getLoadBalancerName(){return d}constructor(){}toJsonObject(){return{[d]:{}}}static createFromJson(e){return new h}}class f{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,extraFilterFactories:[],onCallStarted:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentReadyPicker=null,this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannelStateListener=(e,t,r)=>{this.subchannelStateCounts[t]-=1,this.subchannelStateCounts[r]+=1,this.calculateAndUpdateState(),(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE)&&(this.channelControlHelper.requestReresolution(),e.startConnecting())}}calculateAndUpdateState(){if(this.subchannelStateCounts[i.ConnectivityState.READY]>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===i.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(i.ConnectivityState.READY,new f(e,t))}else this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0?this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker):this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0},this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),c("Connect to address list "+e.map(e=>o.subchannelAddressToString(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();this.subchannelStateCounts[e]+=1,(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return d}}function m(){n.registerLoadBalancerType(d,p,h)}t.RoundRobinLoadBalancer=p,t.setup=m},27176:(e,t)=>{"use strict";function r(e,t){var r,n,i,s,o,a,l,u,c,d;return{createSubchannel:null!==(n=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==n?n:e.createSubchannel.bind(e),updateState:null!==(s=null===(i=t.updateState)||void 0===i?void 0:i.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(a=null===(o=t.requestReresolution)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:e.requestReresolution.bind(e),addChannelzChild:null!==(u=null===(l=t.addChannelzChild)||void 0===l?void 0:l.bind(t))&&void 0!==u?u:e.addChannelzChild.bind(e),removeChannelzChild:null!==(d=null===(c=t.removeChannelzChild)||void 0===c?void 0:c.bind(t))&&void 0!==d?d:e.removeChannelzChild.bind(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=r;let n={},i=null;function s(e,t,r){n[e]={LoadBalancer:t,LoadBalancingConfig:r}}function o(e){i=e}function a(e,t){let r=e.getLoadBalancerName();return r in n?new n[r].LoadBalancer(t):null}function l(e){return e in n}function u(e,t=!1){for(let t of e)if(t.getLoadBalancerName() in n)return t;return t&&i?new n[i].LoadBalancingConfig:null}function c(e){if(!(null!==e&&"object"==typeof e))throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let r=t[0];if(r in n)return n[r].LoadBalancingConfig.createFromJson(e[r]);throw Error(`Unrecognized load balancing config name ${r}`)}t.registerLoadBalancerType=s,t.registerDefaultLoadBalancerType=o,t.createLoadBalancer=a,t.isLoadBalancerNameRegistered=l,t.getFirstUsableConfig=u,t.validateLoadBalancingConfig=c},97504:(e,t,r)=>{"use strict";var n,i,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let a=r(32678),l={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},u=a.LogVerbosity.ERROR;switch((null!==(i=null!==(n=process.env.GRPC_NODE_VERBOSITY)&&void 0!==n?n:process.env.GRPC_VERBOSITY)&&void 0!==i?i:"").toUpperCase()){case"DEBUG":u=a.LogVerbosity.DEBUG;break;case"INFO":u=a.LogVerbosity.INFO;break;case"ERROR":u=a.LogVerbosity.ERROR;break;case"NONE":u=a.LogVerbosity.NONE}t.getLogger=()=>l,t.setLogger=e=>{l=e},t.setLoggerVerbosity=e=>{u=e},t.log=(e,...t)=>{let r;if(e>=u){switch(e){case a.LogVerbosity.DEBUG:r=l.debug;break;case a.LogVerbosity.INFO:r=l.info;break;case a.LogVerbosity.ERROR:r=l.error}r||(r=l.error),r&&r.bind(l)(...t)}};let c=null!==(o=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==o?o:"",d=new Set,h=new Set;for(let e of c.split(","))e.startsWith("-")?h.add(e.substring(1)):d.add(e);let f=d.has("all");function p(e,r,n){m(r)&&t.log(e,new Date().toISOString()+" | "+r+" | "+n)}function m(e){return!h.has(e)&&(f||d.has(e))}t.trace=p,t.isTracerEnabled=m},35085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let n=r(69800),i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function o(e,t,r){r||(r={});class o extends n.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let n=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=n.requestStream?n.responseStream?"bidi":"client_stream":n.responseStream?"server_stream":"unary";let l=n.requestSerialize,u=n.responseDeserialize,c=a(i[r],n.path,l,u);o.prototype[t]=c,Object.assign(o.prototype[t],n),n.originalName&&!s(n.originalName)&&(o.prototype[n.originalName]=o.prototype[t])}),o.service=e,o.serviceName=t,o}function a(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function l(e){return"format"in e}function u(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r],i=r.split(".");if(i.some(e=>s(e)))continue;let a=i[i.length-1],u=t;for(let e of i.slice(0,-1))u[e]||(u[e]={}),u=u[e];l(n)?u[a]=n:u[a]=o(n,a,{})}return t}t.makeClientConstructor=o,t.loadPackageDefinition=u},25538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxMessageSizeFilterFactory=t.MaxMessageSizeFilter=void 0;let n=r(78152),i=r(32678);class s extends n.BaseFilter{constructor(e,t){super(),this.options=e,this.callStream=t,this.maxSendMessageSize=i.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=i.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}async sendMessage(e){if(-1===this.maxSendMessageSize)return e;{let t=await e;return t.message.length>this.maxSendMessageSize?(this.callStream.cancelWithStatus(i.Status.RESOURCE_EXHAUSTED,`Sent message larger than max (${t.message.length} vs. ${this.maxSendMessageSize})`),Promise.reject("Message too large")):t}}async receiveMessage(e){if(-1===this.maxReceiveMessageSize)return e;{let t=await e;return t.length>this.maxReceiveMessageSize?(this.callStream.cancelWithStatus(i.Status.RESOURCE_EXHAUSTED,`Received message larger than max (${t.length} vs. ${this.maxReceiveMessageSize})`),Promise.reject("Message too large")):t}}}t.MaxMessageSizeFilter=s;class o{constructor(e){this.options=e}createFilter(e){return new s(this.options,e)}}t.MaxMessageSizeFilterFactory=o},62252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let n=r(97504),i=r(32678),s=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function a(e){return s.test(e)}function l(e){return o.test(e)}function u(e){return e.endsWith("-bin")}function c(e){return!e.startsWith("grpc-")}function d(e){return e.toLowerCase()}function h(e,t){if(!a(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t){if(u(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!l(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}}class f{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){h(e=d(e),t),this.internalRepr.set(e,[t])}add(e,t){h(e=d(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=d(e),this.internalRepr.delete(e)}get(e){return e=d(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){let e=new f(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(p);return e}_getCoreRepresentation(){return this.internalRepr}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new f;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let s=e[r];try{u(r)?Array.isArray(s)?s.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==s&&(c(r)?s.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(s,"base64"))):Array.isArray(s)?s.forEach(e=>{t.add(r,e)}):void 0!==s&&t.add(r,s)}catch(t){let e=`Failed to add metadata entry ${r}: ${s}. ${t.message}. For more information see https://github.com/grpc/grpc-node/issues/1173`;n.log(i.LogVerbosity.ERROR,e)}}return t}}t.Metadata=f;let p=e=>Buffer.isBuffer(e)?e.toString("base64"):e},17064:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let i=r(62252),s=r(32678);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n=t.PickResultType||(t.PickResultType={}));class o{constructor(e){void 0!==e?this.status=e:this.status={code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new i.Metadata}}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,extraFilterFactories:[],onCallStarted:null}}}t.UnavailablePicker=o;class a{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:n.QUEUE,subchannel:null,status:null,extraFilterFactories:[],onCallStarted:null}}}t.QueuePicker=a},54605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(40492),i=r(9523),s=r(73837),o=r(26262),a=r(32678),l=r(62252),u=r(97504),c=r(32678),d=r(18429),h=r(41808),f=r(84934),p="dns_resolver";function m(e){u.trace(c.LogVerbosity.DEBUG,p,e)}let g=443,y=3e4,v=s.promisify(i.resolveTxt),b=s.promisify(i.lookup);function _(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let n of e)r<n.length&&t.push(n[r]);return t}class w{constructor(e,t,r){var n,i,s;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,m("Resolver constructed for target "+d.uriToString(e));let o=d.splitHostPort(e.path);null===o?(this.ipResult=null,this.dnsHostname=null,this.port=null):h.isIPv4(o.host)||h.isIPv6(o.host)?(this.ipResult=[{host:o.host,port:null!==(n=o.port)&&void 0!==n?n:g}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=o.host,this.port=null!==(i=o.port)&&void 0!==i?i:g),this.percentage=100*Math.random(),this.defaultResolutionError={code:a.Status.UNAVAILABLE,details:`Name resolution failed for target ${d.uriToString(this.target)}`,metadata:new l.Metadata};let u={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new f.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},u),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(s=r["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==s?s:y,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){m("Returning IP address for target "+d.uriToString(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.backoff.stop(),this.backoff.reset();return}if(null===this.dnsHostname)m("Failed to parse DNS address "+d.uriToString(this.target)),setImmediate(()=>{this.listener.onError({code:a.Status.UNAVAILABLE,details:`Failed to parse DNS address ${d.uriToString(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=b(e,{all:!0}),this.pendingLookupPromise.then(e=>{this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=_(r,t).map(e=>({host:e.address,port:+this.port}));let n="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(m("Resolved addresses for target "+d.uriToString(this.target)+": "+n),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{m("Resolution error for target "+d.uriToString(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError)}),null===this.pendingTxtPromise&&(this.pendingTxtPromise=v(e),this.pendingTxtPromise.then(e=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=o.extractAndSelectServiceConfig(e,this.percentage)}catch(e){this.latestServiceConfigError={code:a.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===t?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.startResolution(),this.backoff.runOnce(),this.startNextResolutionTimer())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?this.continueResolving=!0:this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.stop(),this.stopNextResolutionTimer()}static getDefaultAuthority(e){return e.path}}function S(){n.registerResolver("dns",w),n.registerDefaultScheme("dns")}t.setup=S},53562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(41808),i=r(32678),s=r(62252),o=r(40492),a=r(18429),l=r(97504),u="ip_resolver";function c(e){l.trace(i.LogVerbosity.DEBUG,u,e)}let d="ipv4",h="ipv6",f=443;class p{constructor(e,t,r){var o;this.target=e,this.listener=t,this.addresses=[],this.error=null,c("Resolver constructed for target "+a.uriToString(e));let l=[];if(!(e.scheme===d||e.scheme===h)){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=a.splitHostPort(t);if(null===r||e.scheme===d&&!n.isIPv4(r.host)||e.scheme===h&&!n.isIPv6(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!==(o=r.port)&&void 0!==o?o:f})}this.addresses=l,c("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})})}destroy(){}static getDefaultAuthority(e){return e.path.split(",")[0]}}function m(){o.registerResolver(d,p),o.registerResolver(h,p)}t.setup=m},45862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(40492);class i{constructor(e,t,r){let n;this.listener=t,this.addresses=[],n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(e){return"localhost"}}function s(){n.registerResolver("unix",i)}t.setup=s},40492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let n=r(18429),i={},s=null;function o(e,t){i[e]=t}function a(e){s=e}function l(e,t,r){if(void 0!==e.scheme&&e.scheme in i)return new i[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${n.uriToString(e)}`)}function u(e){if(void 0!==e.scheme&&e.scheme in i)return i[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${n.uriToString(e)}`)}function c(e){return void 0!==e.scheme&&e.scheme in i?e:null!==s?{scheme:s,authority:void 0,path:n.uriToString(e)}:null}t.registerResolver=o,t.registerDefaultScheme=a,t.createResolver=l,t.getDefaultAuthority=u,t.mapUriDefaultScheme=c},82380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let n=r(27176),i=r(26262),s=r(33955),o=r(40492),a=r(17064),l=r(84934),u=r(32678),c=r(62252),d=r(97504),h=r(32678),f=r(18429),p=r(982),m="resolving_load_balancer";function g(e){d.trace(h.LogVerbosity.DEBUG,m,e)}function y(e){return function(t,r){var n,i;let s=t.split("/").filter(e=>e.length>0),o=null!==(n=s[0])&&void 0!==n?n:"",a=null!==(i=s[1])&&void 0!==i?i:"";if(e&&e.methodConfig){for(let t of e.methodConfig)for(let e of t.name)if(e.service===o&&(void 0===e.method||e.method===a))return{methodConfig:t,pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}}class v{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.channelOptions=r,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new a.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=i.validateServiceConfig(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new a.QueuePicker(this)),this.childLoadBalancer=new p.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=o.createResolver(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var o;let a=null;null===t?null===r?(this.previousServiceConfig=null,a=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):a=this.previousServiceConfig:(a=t,this.previousServiceConfig=t);let l=null!==(o=null==a?void 0:a.loadBalancingConfig)&&void 0!==o?o:[],d=n.getFirstUsableConfig(l,!0);if(null===d){this.handleResolutionFailure({code:u.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new c.Metadata});return}this.childLoadBalancer.updateAddressList(e,d,s);let h=null!=a?a:this.defaultServiceConfig;this.onSuccessfulResolution(null!=i?i:y(h))},onError:e=>{this.handleResolutionFailure(e)}},r);let f={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},f),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new a.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){g(f.uriToString(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new a.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.updateState(s.ConnectivityState.SHUTDOWN,new a.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=v},37061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let n=r(82361),i=r(85158),s=r(12781),o=r(59796),a=r(73837),l=r(32678),u=r(62252),c=r(38326),d=r(97504),h="server_call",f=a.promisify(o.unzip),p=a.promisify(o.inflate);function m(e){d.trace(l.LogVerbosity.DEBUG,h,e)}let g="grpc-message",y="grpc-status",v="grpc-timeout",b=/(\d{1,8})\s*([HMSmun])/,_={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},w={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity",[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},S={waitForTrailers:!0};class E extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=E;class T extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=T;class O extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new u.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t)){this.call.once("drain",r);return}}catch(e){e.code=l.Status.INTERNAL,this.emit("error",e)}r()}_final(e){this.call.sendStatus({code:l.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=O;class C extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new u.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=C,C.prototype._read=T.prototype._read,C.prototype._write=O.prototype._write,C.prototype._final=O.prototype._final;class k extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.options=r,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=l.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=l.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;m("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:l.Status.CANCELLED,details:"Cancelled by client",metadata:null}))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){return"deflate"===t?p(e.subarray(5)):"gzip"===t?f(e.subarray(5)):"identity"===t?e.subarray(5):Promise.reject({code:l.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign({},w),t);this.stream.respond(r,S)}receiveMetadata(e){let t=u.Metadata.fromHttp2Headers(e);d.isTracerEnabled(h)&&m("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(v);if(r.length>0){let e=r[0].toString().match(b);if(null===e){let e=Error("Invalid deadline");return e.code=l.Status.OUT_OF_RANGE,this.sendError(e),t}let n=+e[1]*_[e[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(x,n,this),t.remove(v)}return t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(i.constants.HTTP2_HEADER_TE),t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e,t){let{stream:r}=this,n=0,i=this,s=[],o=this.maxReceiveMessageSize;function a(e){if(n+=e.byteLength,-1!==o&&n>o){r.removeListener("data",a),r.removeListener("end",u),r.removeListener("error",u),t({code:l.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n} vs. ${o})`});return}s.push(e)}function u(o){if(r.removeListener("data",a),r.removeListener("end",u),r.removeListener("error",u),void 0!==o){t({code:l.Status.INTERNAL,details:o.message});return}if(0===n){t({code:l.Status.INTERNAL,details:"received empty unary message"});return}i.emit("receiveMessage");let c=Buffer.concat(s,n),d=1===c.readUInt8(0)?e:"identity",h=i.getDecompressedMessage(c,d);if(Buffer.isBuffer(h)){i.safeDeserializeMessage(h,t);return}h.then(e=>i.safeDeserializeMessage(e,t),r=>t(r.code?r:{code:l.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}r.on("data",a),r.on("end",u),r.on("error",u)}safeDeserializeMessage(e,t){try{t(null,this.deserializeMessage(e))}catch(e){e.code=l.Status.INTERNAL,t(e)}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:l.Status.OK,details:"OK",metadata:r})}catch(e){e.code=l.Status.INTERNAL,this.sendError(e)}}}sendStatus(e){var t;this.emit("callEnd",e.code),this.emit("streamEnd",e.code===l.Status.OK),!this.checkCancelled()&&(m("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+l.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[y]:e.code,[g]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.sendMetadata(),this.stream.end()))}sendError(e){let t={code:l.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize){this.sendError({code:l.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new c.StreamDecoder,n=!1,i=!1,s=!1,o=()=>{s||!n||i||(s=!0,this.pushOrBufferMessage(e,null))};this.stream.on("data",async n=>{let s=r.write(n);for(let r of(i=!0,this.stream.pause(),s)){if(-1!==this.maxReceiveMessageSize&&r.length>this.maxReceiveMessageSize){this.sendError({code:l.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${r.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let n=1===r.readUInt8(0)?t:"identity",i=await this.getDecompressedMessage(r,n);if(!i)return;this.pushOrBufferMessage(e,i)}i=!1,this.stream.resume(),o()}),this.stream.once("end",()=>{n=!0,o()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){m("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}m("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(t){this.bufferedMessages.length=0,"code"in t&&"number"==typeof t.code&&Number.isInteger(t.code)&&t.code>=l.Status.OK&&t.code<=l.Status.UNAUTHENTICATED||(t.code=l.Status.INTERNAL),e.emit("error",t)}this.isPushPending=!1,this.bufferedMessages.length>0&&this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){let e=this.stream.session.socket;return e.remoteAddress?e.remotePort?`${e.remoteAddress}:${e.remotePort}`:e.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function x(e){let t=Error("Deadline exceeded");t.code=l.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=k},74181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let n=r(43009);class i{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),s.push(r.private_key)}return new o({ca:e||n.getDefaultRootsData()||void 0,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=i;class s extends i{_isSecure(){return!1}_getSettings(){return null}}class o extends i{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},57691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let n=r(85158),i=r(32678),s=r(37061),o=r(74181),a=r(40492),l=r(97504),u=r(23906),c=r(18429),d=r(5993),{HTTP2_HEADER_PATH:h}=n.constants,f="server";function p(){}function m(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function g(e,t){let r=m(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class y{constructor(e){this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=d.registerChannelzServer(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;let i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?u.stringToSubchannelAddress(o.remoteAddress,o.remotePort):null,l=o.localAddress?u.stringToSubchannelAddress(o.localAddress,o.localPort):null;if(e.encrypted){let e=o,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();i={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:a,localAddress:l,security:i,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(n=e.state.remoteWindowSize)&&void 0!==n?n:null}}}trace(e){l.trace(i.LogVerbosity.DEBUG,f,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let n,i;let s=e[r];n=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let o=t[r];if(void 0===o&&"string"==typeof s.originalName&&(o=t[s.originalName]),i=void 0!==o?o.bind(t):g(n,r),!1===this.register(s.path,i,s.responseSerialize,s.requestDeserialize,n))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof o.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=c.parseUri(e);if(null===s)throw Error(`Could not parse port "${e}"`);let h=a.mapUriDefaultScheme(s);if(null===h)throw Error(`Could not get a default scheme for port "${e}"`);let f={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?f.maxSessionMemory=this.options["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(f.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let m=(e,t)=>{process.nextTick(()=>r(e,t))},g=()=>{let e;if(t._isSecure()){let r=Object.assign(f,t._getSettings());(e=n.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=n.createServer(f);return e.setTimeout(0,p),this._setupHandlers(e),e},y=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+u.subchannelAddressToString(e)),r=u.isTcpSubchannelAddress(e)?{host:e.host,port:t}:e;let n=g();return new Promise((i,s)=>{let o=t=>{this.trace("Failed to bind "+u.subchannelAddressToString(e)+" with error "+t.message),i(t)};n.once("error",o),n.listen(r,()=>{let e,r;let s=n.address();e="string"==typeof s?{path:s}:{host:s.address,port:s.port},r=d.registerChannelzSocket(u.subchannelAddressToString(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(r),this.http2ServerList.push({server:n,channelzRef:r}),this.trace("Successfully bound "+u.subchannelAddressToString(e)),i("port"in e?e.port:t),n.removeListener("error",o)})})})).then(e=>{let n=0;for(let r of e)if("number"==typeof r&&(n+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=g();return new Promise((n,i)=>{let s=r=>{this.trace("Failed to bind "+u.subchannelAddressToString(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{let t;let i=r.address(),o={host:i.address,port:i.port};t=d.registerChannelzSocket(u.subchannelAddressToString(o),()=>({localAddress:o,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled),this.channelzEnabled&&this.listenerChildrenTracker.refChild(t),this.http2ServerList.push({server:r,channelzRef:t}),this.trace("Successfully bound "+u.subchannelAddressToString(o)),n(y(e.slice(1),i.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,n)=>{let s;if(b.onSuccessfulResolution=()=>{},0===t.length){m(Error(`No addresses resolved for port ${e}`),0);return}(s=u.isTcpSubchannelAddress(t[0])?0===t[0].port?v(t):y(t,t[0].port,0):y(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,e),m(Error(e),0)}else e.count<t.length&&l.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),m(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,r),m(Error(r),0)})},onError:e=>{m(Error(e.details),0)}};a.createResolver(h,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),d.unregisterChannelzRef(t))});this.started=!1,this.sessions.forEach((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&d.unregisterChannelzRef(this.channelzRef)}register(e,t,r,n,i){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&d.unregisterChannelzRef(this.channelzRef),e(t)},r=0;function n(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),d.unregisterChannelzRef(t)),n()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(n))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof r&&r.startsWith("application/grpc"))||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){let t=e[h];this.trace("Received call to method "+t+" at address "+this.serverAddressString);let r=this.handlers.get(t);if(void 0===r)throw this.trace("No handler registered for method "+t+". Sending UNIMPLEMENTED status."),m(t);return r}_respondWithError(e,t,r=null){let n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=i.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){let r;let n=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==n||n.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed();return}try{r=this._retrieveHandler(t)}catch(t){this._respondWithError(t,e,n);return}let o=new s.Http2ServerCallStream(e,r,this.options);o.once("callEnd",e=>{e===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),n&&(o.once("streamEnd",e=>{e?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{n.messagesSent+=1,n.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,r,t)||(this.callTracker.addCallFailed(),null==n||n.streamTracker.addCallFailed(),o.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${r.type}`}))}_streamHandler(e,t){let r;if(!0!==this._verifyContentType(e,t))return;try{r=this._retrieveHandler(t)}catch(t){this._respondWithError(t,e,null);return}let n=new s.Http2ServerCallStream(e,r,this.options);this._runHandlerForCall(n,r,t)||n.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${r.type}`})}_runHandlerForCall(e,t,r){var n;let i=e.receiveMetadata(r),s=null!==(n=i.get("grpc-encoding")[0])&&void 0!==n?n:"identity";i.remove("grpc-encoding");let{type:o}=t;if("unary"===o)v(e,t,i,s);else if("clientStream"===o)b(e,t,i,s);else if("serverStream"===o)_(e,t,i,s);else{if("bidi"!==o)return!1;w(e,t,i,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let n=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",n.bind(this)),e.on("session",e=>{var t;let r;if(!this.started){e.destroy();return}let n={ref:r=d.registerChannelzSocket(null!==(t=e.socket.remoteAddress)&&void 0!==t?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,n);let i=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+i),this.sessionChildrenTracker.refChild(r)),e.on("close",()=>{this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+i),this.sessionChildrenTracker.unrefChild(r),d.unregisterChannelzRef(r)),this.sessions.delete(e)})})}}function v(e,t,r,n){e.receiveUnaryMessage(n,(n,i)=>{if(n){e.sendError(n);return}if(void 0===i||e.cancelled)return;let o=new s.ServerUnaryCallImpl(e,r,i);t.func(o,(t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)})})}function b(e,t,r,n){let i=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function o(t,r,n,s){i.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(i.on("error",o),t.func(i,o))}function _(e,t,r,n){e.receiveUnaryMessage(n,(n,i)=>{if(n){e.sendError(n);return}if(void 0===i||e.cancelled)return;let o=new s.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(o)})}function w(e,t,r,n){let i=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(i)}t.Server=y},26262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=void 0;let n=r(22037),i=r(27176),s=/^\d+(\.\d{1,9})?s$/,o="node";function a(e){if(!("service"in e)||"string"!=typeof e.service)throw Error("Invalid method config name: invalid service");let t={service:e.service};if("method"in e){if("string"==typeof e.method)t.method=e.method;else throw Error("Invalid method config name: invalid method")}return t}function l(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(a(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e){if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&s.test(e.timeout)){let n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:(null!==(t=n[1])&&void 0!==t?t:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}return r}function u(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in e){if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push(i.validateLoadBalancingConfig(r));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(l(r));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function c(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:u(e.serviceConfig)};if("clientLanguage"in e){if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in e){if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in e){if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage")}let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function d(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=c(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}function h(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return d(JSON.parse(r.join("").substring(12)),t);return null}t.validateServiceConfig=u,t.extractAndSelectServiceConfig=h},39932:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},38326:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class n{constructor(){this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0,i=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,i.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,i.push(t)}break;default:throw Error("Unexpected read state")}return i}}t.StreamDecoder=n},23906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let n=r(41808);function i(e){return"port"in e}function s(e,t){return i(e)?i(t)&&e.host===t.host&&e.port===t.port:!i(t)&&e.path===t.path}function o(e){return i(e)?e.host+":"+e.port:e.path}t.isTcpSubchannelAddress=i,t.subchannelAddressEqual=s,t.subchannelAddressToString=o;let a=443;function l(e,t){return n.isIP(e)?{host:e,port:null!=t?t:a}:{path:e}}t.stringToSubchannelAddress=l},21407:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}t.BaseSubchannelWrapper=r},42328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let n=r(79387),i=r(91727),s=r(23906),o=r(18429),a=1e4;class l{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},a),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,a){this.ensureCleanupTask();let l=o.uriToString(e);if(l in this.pool){for(let e of this.pool[l])if(s.subchannelAddressEqual(t,e.subchannelAddress)&&n.channelOptionsEqual(r,e.channelArguments)&&a._equals(e.channelCredentials))return e.subchannel}let u=new i.Subchannel(e,t,r,a);return l in this.pool||(this.pool[l]=[]),this.pool[l].push({subchannelAddress:t,channelArguments:r,channelCredentials:a,subchannel:u}),u.ref(),u}}t.SubchannelPool=l;let u=new l;function c(e){return e?u:new l}t.getSubchannelPool=c},91727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let n=r(85158),i=r(24404),s=r(33955),o=r(84934),a=r(40492),l=r(97504),u=r(32678),c=r(82039),d=r(41808),h=r(18429),f=r(23906),p=r(5993),m=r(81513).i8,g="subchannel",y="subchannel_flowctrl",v=2147483647,b=2e4,{HTTP2_HEADER_AUTHORITY:_,HTTP2_HEADER_CONTENT_TYPE:w,HTTP2_HEADER_METHOD:S,HTTP2_HEADER_PATH:E,HTTP2_HEADER_TE:T,HTTP2_HEADER_USER_AGENT:O}=n.constants,C=Buffer.from("too_many_pings","ascii");class k{constructor(e,t,r,n){this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=n,this.connectivityState=s.ConnectivityState.IDLE,this.session=null,this.continueConnecting=!1,this.stateListeners=[],this.disconnectListeners=new Set,this.keepaliveTimeMs=v,this.keepaliveTimeoutMs=b,this.keepaliveWithoutCalls=!1,this.callRefcount=0,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new p.ChannelzCallTracker,this.childrenTracker=new p.ChannelzChildrenTracker,this.channelzSocketRef=null,this.remoteName=null,this.streamTracker=new p.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${m}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,this.keepaliveIntervalId=setTimeout(()=>{},0),clearTimeout(this.keepaliveIntervalId),this.keepaliveTimeoutId=setTimeout(()=>{},0),clearTimeout(this.keepaliveTimeoutId);let i={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new o.BackoffTimeout(()=>{this.handleBackoffTimer()},i),this.subchannelAddressString=f.subchannelAddressToString(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new p.ChannelzTrace,this.channelzRef=p.registerChannelzSubchannel(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}getChannelzSocketInfo(){var e,t,r;let n;if(null===this.session)return null;let i=this.session.socket,s=i.remoteAddress?f.stringToSubchannelAddress(i.remoteAddress,i.remotePort):null,o=i.localAddress?f.stringToSubchannelAddress(i.localAddress,i.localPort):null;if(this.session.encrypted){let t=i,r=t.getCipher(),s=t.getCertificate(),o=t.getPeerCertificate();n={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:o&&"raw"in o?o.raw:null}}else n=null;return{remoteAddress:s,localAddress:o,security:n,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}resetChannelzSocketInfo(){this.channelzEnabled&&(this.channelzSocketRef&&(p.unregisterChannelzRef(this.channelzSocketRef),this.childrenTracker.unrefChild(this.channelzSocketRef),this.channelzSocketRef=null),this.remoteName=null,this.streamTracker=new p.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null)}trace(e){l.trace(u.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){l.trace(u.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(u.LogVerbosity.DEBUG,y,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(u.LogVerbosity.DEBUG,"subchannel_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(u.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.CONNECTING):this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}sendPing(){var e,t;this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimeoutId).unref)||void 0===t||t.call(e);try{this.session.ping((e,t,r)=>{this.keepaliveTrace("Received ping response"),clearTimeout(this.keepaliveTimeoutId)})}catch(e){this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE)}}startKeepalivePings(){var e,t;this.keepaliveIntervalId=setInterval(()=>{this.sendPing()},this.keepaliveTimeMs),null===(t=(e=this.keepaliveIntervalId).unref)||void 0===t||t.call(e)}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId),clearTimeout(this.keepaliveTimeoutId)}createSession(e){var t,r,o;e.realTarget?(this.remoteName=h.uriToString(e.realTarget),this.trace("creating HTTP/2 session through proxy to "+e.realTarget)):(this.remoteName=null,this.trace("creating HTTP/2 session"));let c=a.getDefaultAuthority(null!==(t=e.realTarget)&&void 0!==t?t:this.channelTarget),f=this.credentials._getConnectionOptions()||{};f.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in this.options?f.maxSessionMemory=this.options["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER;let m="http://";if("secureContext"in f){if(m="https://",this.options["grpc.ssl_target_name_override"]){let e=this.options["grpc.ssl_target_name_override"];f.checkServerIdentity=(t,r)=>i.checkServerIdentity(e,r),f.servername=e}else{let e=null!==(o=null===(r=h.splitHostPort(c))||void 0===r?void 0:r.host)&&void 0!==o?o:"localhost";f.servername=e}e.socket&&(f.createConnection=(t,r)=>e.socket)}else f.createConnection=(t,r)=>e.socket?e.socket:d.connect(this.subchannelAddress);f=Object.assign(Object.assign({},f),this.subchannelAddress);let y=n.connect(m+c,f);this.session=y,this.channelzSocketRef=p.registerChannelzSocket(this.subchannelAddressString,()=>this.getChannelzSocketInfo(),this.channelzEnabled),this.channelzEnabled&&this.childrenTracker.refChild(this.channelzSocketRef),y.unref(),y.once("connect",()=>{this.session===y&&this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.READY)}),y.once("close",()=>{this.session===y&&(this.trace("connection closed"),this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.TRANSIENT_FAILURE),this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.IDLE))}),y.once("goaway",(e,t,r)=>{this.session===y&&(e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r.equals(C)&&(this.keepaliveTimeMs=Math.min(2*this.keepaliveTimeMs,v),l.log(u.LogVerbosity.ERROR,`Connection to ${h.uriToString(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTimeMs} ms`)),this.trace("connection closed by GOAWAY with code "+e),this.transitionToState([s.ConnectivityState.CONNECTING,s.ConnectivityState.READY],s.ConnectivityState.IDLE))}),y.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(g)&&(y.on("remoteSettings",e=>{this.trace("new settings received"+(this.session!==y?" on the old connection":"")+": "+JSON.stringify(e))}),y.on("localSettings",e=>{this.trace("local settings acknowledged by remote"+(this.session!==y?" on the old connection":"")+": "+JSON.stringify(e))}))}startConnectingInternal(){var e,t;let r=this.credentials._getConnectionOptions()||{};if("secureContext"in r){if(r.ALPNProtocols=["h2"],this.options["grpc.ssl_target_name_override"]){let e=this.options["grpc.ssl_target_name_override"];r.checkServerIdentity=(t,r)=>i.checkServerIdentity(e,r),r.servername=e}else if("grpc.http_connect_target"in this.options){let n=a.getDefaultAuthority(null!==(e=h.parseUri(this.options["grpc.http_connect_target"]))&&void 0!==e?e:{path:"localhost"}),i=h.splitHostPort(n);r.servername=null!==(t=null==i?void 0:i.host)&&void 0!==t?t:n}}c.getProxiedConnection(this.subchannelAddress,this.options,r).then(e=>{this.createSession(e)},e=>{this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.TRANSIENT_FAILURE)})}handleDisconnect(){for(let e of(this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE),this.disconnectListeners.values()))e()}transitionToState(e,t){if(-1===e.indexOf(this.connectivityState))return!1;this.trace(s.ConnectivityState[this.connectivityState]+" -> "+s.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO",s.ConnectivityState[this.connectivityState]+" -> "+s.ConnectivityState[t]);let r=this.connectivityState;switch(this.connectivityState=t,t){case s.ConnectivityState.READY:this.stopBackoff();let n=this.session;n.socket.once("close",()=>{this.session===n&&this.handleDisconnect()}),this.keepaliveWithoutCalls&&this.startKeepalivePings();break;case s.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case s.ConnectivityState.TRANSIENT_FAILURE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings(),this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case s.ConnectivityState.IDLE:this.session&&this.session.close(),this.session=null,this.resetChannelzSocketInfo(),this.stopKeepalivePings();break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of[...this.stateListeners])e(this,r,t);return!0}checkBothRefcounts(){0===this.callRefcount&&0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.transitionToState([s.ConnectivityState.CONNECTING,s.ConnectivityState.READY],s.ConnectivityState.IDLE),this.channelzEnabled&&p.unregisterChannelzRef(this.channelzRef))}callRef(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount+1)),0!==this.callRefcount||(this.session&&this.session.ref(),this.backoffTimeout.ref(),this.keepaliveWithoutCalls||this.startKeepalivePings()),this.callRefcount+=1}callUnref(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount-1)),this.callRefcount-=1,0===this.callRefcount&&(this.session&&this.session.unref(),this.backoffTimeout.unref(),this.keepaliveWithoutCalls||clearInterval(this.keepaliveIntervalId),this.checkBothRefcounts())}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.checkBothRefcounts()}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}startCallStream(e,t,r){let n,i;let o=e.toHttp2Headers();o[_]=t.getHost(),o[O]=this.userAgent,o[w]="application/grpc",o[S]="POST",o[E]=t.getMethod(),o[T]="trailers";try{n=this.session.request(o)}catch(e){throw this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE),e}let a="";for(let e of Object.keys(o))a+="		"+e+": "+o[e]+"\n";l.trace(u.LogVerbosity.DEBUG,"call_stream","Starting stream ["+t.getCallNumber()+"] on subchannel ("+this.channelzRef.id+") "+this.subchannelAddressString+" with headers\n"+a),this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize);let c=this.session;this.internalsTrace("session.closed="+c.closed+" session.destroyed="+c.destroyed+" session.socket.destroyed="+c.socket.destroyed),this.channelzEnabled?(this.callTracker.addCallStarted(),t.addStatusWatcher(e=>{e.code===u.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),this.streamTracker.addCallStarted(),t.addStreamEndWatcher(e=>{c===this.session&&(e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed())}),i={addMessageSent:()=>{this.messagesSent+=1,this.lastMessageSentTimestamp=new Date},addMessageReceived:()=>{this.messagesReceived+=1}}):i={addMessageSent:()=>{},addMessageReceived:()=>{}},t.attachHttp2Stream(n,this,r,i)}startConnecting(){this.transitionToState([s.ConnectivityState.IDLE],s.ConnectivityState.CONNECTING)||this.connectivityState!==s.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}addDisconnectListener(e){this.disconnectListeners.add(e)}removeDisconnectListener(e){this.disconnectListeners.delete(e)}resetBackoff(){this.backoffTimeout.reset(),this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}}t.Subchannel=k},43009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let n=r(57147);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;function o(){return i?(null===s&&(s=n.readFileSync(i)),s):null}t.getDefaultRootsData=o},18429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function n(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}}t.parseUri=n;let i=/^\d+$/;function s(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let n=e.substring(t+2);return i.test(n)?{host:r,port:+n}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:i.test(t[1])?{host:t[0],port:+t[1]}:null}}function o(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}t.splitHostPort=s,t.uriToString=o},52894:(e,t,r)=>{"use strict";var n;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */n={value:!0},n=n=n=t.J_=n=n=n=void 0;let i=r(51382),s=r(94534),o=r(26361),a=r(90371);n=r(69802),n=function(e){return"@type"in e&&"string"==typeof e["@type"]};let l={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function u(e,t){return""===e?t:e+"."+t}function c(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}function d(e){return e instanceof s.Namespace||e instanceof s.Root}function h(e,t){let r=u(t,e.name);return c(e)?[[r,e]]:d(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>h(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function f(e,t){return function(r){return e.toObject(e.decode(r),t)}}function p(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function m(e,t,r,n){let s=e.resolvedRequestType,o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:p(s),requestDeserialize:f(s,r),responseSerialize:p(o),responseDeserialize:f(o,r),originalName:i(e.name),requestType:y(s,n),responseType:y(o,n)}}function g(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=m(s,t,r,n);return i}function y(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function v(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function b(e,t,r,n){if(e instanceof s.Service)return g(e,t,r,n);if(e instanceof s.Type)return y(e,n);if(e instanceof s.Enum)return v(e,n);throw Error("Type mismatch in reflection object handling")}function _(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of h(e,""))r[i]=b(s,i,t,n);return r}function w(e,t){t=t||{};let r=s.Root.fromDescriptor(e);return r.resolveAll(),_(r,t)}function S(e,t){return _((0,a.loadProtosWithOptionsSync)(e,t),t)}n=function(e,t){return(0,a.loadProtosWithOptions)(e,t).then(e=>_(e,t))},t.J_=S,n=function(e,t){t=t||{};let r=s.Root.fromJSON(e);return r.resolveAll(),_(r,t)},n=function(e,t){return w(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return w(o.FileDescriptorSet.fromObject(e),t)},(0,a.addCommonProtos)()},90371:(e,t,r)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let n=r(57147),i=r(71017),s=r(94534);function o(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}async function a(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));o(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n}function l(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");o(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n}function u(){let e=r(38883),t=r(53242),n=r(88681),i=r(58702);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}t.loadProtosWithOptions=a,t.loadProtosWithOptionsSync=l,t.addCommonProtos=u},26361:(e,t,r)=>{"use strict";var n=r(94534);e.exports=t=n.descriptor=n.Root.fromJSON(r(53242)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,o=n.Enum,a=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,d=n.Service,h=n.Method;function f(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,h=0;h<e.nestedArray.length;++h)(c=e._nestedArray[h])instanceof a?u.messageType.push(c.toDescriptor(n)):c instanceof o?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof d?u.service.push(c.toDescriptor()):c instanceof i&&f(c,r,n);u.options=T(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(a.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(o.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var h=E(n.options,t.FileOptions);if(h){var f=Object.keys(h);for(u=0;u<f.length;++u)i.setOption(f[u],h[f[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return f(this,r.file,e),r};var p=0;a.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new a(e.name.length?e.name:"Type"+p++,E(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(a.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(o.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},a.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=S(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=S(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=11===c||14===c?this._fieldsArray[n].resolvedType&&O(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=T(this.options,t.MessageOptions),i};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:_(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var o=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(o.options=E(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:m.exec(a)&&(a=parseInt(a))}o.setOption("default",a)}return w(e.type)&&("proto3"===r?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=S(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?O(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=T(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;o.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new o(e.name&&e.name.length?e.name:"Enum"+g++,r,E(e.options,t.EnumOptions))},o.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:T(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,E(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:T(this.options,t.ServiceOptions)})};var b=0;function _(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function w(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function S(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof a)return t.group?10:11;throw Error("illegal type: "+e)}function E(e,t){if(e){for(var r,i,s,a=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof o&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),a.push(C(i),s));return a.length?n.util.toObject(a):void 0}}function T(e,t){if(e){for(var r,i,s=[],o=0,a=Object.keys(e);o<a.length;++o)if(i=e[r=a[o]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function O(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,a=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;o<r.length&&a<l&&r[o]===n[a];){var u=t.lookup(r[o++],!0);if(null!==u&&u!==t)break;++a}else for(;o<r.length&&a<l&&r[o]===n[a];++o,++a);return n.slice(a).join(".")}function C(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,E(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:T(this.options,t.MethodOptions)})}},94534:(e,t,r)=>{"use strict";e.exports=r(25532)},26515:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},29497:(e,t,r)=>{"use strict";var n=t,i=r(96136),s=r(91603);function o(e,t,r,n){var s=!1;if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var o=t.resolvedType.values,a=Object.keys(o),l=0;l<a.length;++l)o[a[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",a[l])("case %i:",o[a[l]])("m%s=%j",n,o[a[l]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),l=s.safeProp(a.name);a.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),o(r,a,n,l+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),o(r,a,n,l+"[i]")("}")("}")):(a.resolvedType instanceof i||r("if(d%s!=null){",l),o(r,a,n,l),a.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?o:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),u=0;u<o.length;++u)r("d%s={}",s.safeProp(o[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],d=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,c.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){var c=t[u],p=e._fieldsArray.indexOf(c),d=s.safeProp(c.name);c.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,c,p,d+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,c,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,c.name),a(r,c,p,d),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},84666:(e,t,r)=>{"use strict";e.exports=a;var n=r(96136),i=r(60650),s=r(91603);function o(e){return"missing required '"+e.name+"'"}function a(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),l=a.resolvedType instanceof n?"int32":a.type,u="m"+s.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[a.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",o(c))}return t("return m")}},75625:(e,t,r)=>{"use strict";e.exports=a;var n=r(96136),i=r(60650),s=r(91603);function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function a(e){for(var t,r,a=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];r="m"+s.safeProp(u.name),u.map?(a("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?a("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):a(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,r),a("}")("}")):u.repeated?(a("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[d]?a("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(a("for(var i=0;i<%s.length;++i)",r),void 0===h?o(a,u,c,r+"[i]"):a("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,r)),a("}")):(u.optional&&a("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===h?o(a,u,c,r):a("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,r))}return a("return w")}},96136:(e,t,r)=>{"use strict";e.exports=o;var n=r(62068);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var i=r(23346),s=r(91603);function o(e,t,r,i,s,o){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=o,this.reserved=void 0,t)for(var a=Object.keys(t),l=0;l<a.length;++l)"number"==typeof t[a[l]]&&(this.valuesById[this.values[a[l]]=t[a[l]]]=a[l])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},94834:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(62068);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(96136),o=r(60650),a=r(91603),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(a.isObject(n)?(c=s,u=n,n=s=void 0):a.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,s){a.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},4872:(e,t,r)=>{"use strict";var n=e.exports=r(62255);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(75625),n.decoder=r(84666),n.verifier=r(32420),n.converter=r(29497),n.ReflectionObject=r(62068),n.Namespace=r(23346),n.Root=r(41224),n.Enum=r(96136),n.Type=r(88905),n.Field=r(94834),n.OneOf=r(8119),n.MapField=r(22461),n.Service=r(35931),n.Method=r(82006),n.Message=r(92942),n.wrappers=r(30578),n.types=r(60650),n.util=r(91603),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},62255:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(9846),n.BufferWriter=r(15655),n.Reader=r(26848),n.BufferReader=r(33809),n.util=r(64647),n.rpc=r(14864),n.roots=r(34941),n.configure=i,i()},25532:(e,t,r)=>{"use strict";var n=e.exports=r(4872);n.build="full",n.tokenize=r(18343),n.parse=r(74332),n.common=r(26515),n.Root._configure(n.Type,n.parse,n.common)},22461:(e,t,r)=>{"use strict";e.exports=o;var n=r(94834);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var i=r(60650),s=r(91603);function o(e,t,r,i,o,a){if(n.call(this,e,t,i,void 0,void 0,o,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new o(i,e,t,r))}}},92942:(e,t,r)=>{"use strict";e.exports=i;var n=r(64647);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},82006:(e,t,r)=>{"use strict";e.exports=s;var n=r(62068);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(91603);function s(e,t,r,s,o,a,l,u,c){if(i.isObject(o)?(l=o,o=a=void 0):i.isObject(a)&&(l=a,a=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},23346:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,o=r(62068);((d.prototype=Object.create(o.prototype)).constructor=d).className="Namespace";var a=r(94834),l=r(91603),u=r(8119);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){o.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=c,d.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},d.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},d.prototype.addJSON=function(e){var t=this;if(e)for(var r,o=Object.keys(e),l=0;l<o.length;++l)r=e[o[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?a.fromJSON:d.fromJSON)(o[l],r));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof n||e instanceof u||e instanceof s||e instanceof i||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(t instanceof d&&e instanceof d&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,o=0;o<r.length;++o)e.add(r[o]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){n=e,i=t,s=r}},62068:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(91603);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var o=s[e];i.setProperty(o,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},8119:(e,t,r)=>{"use strict";e.exports=o;var n=r(62068);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var i=r(94834),s=r(91603);function o(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},74332:(e,t,r)=>{"use strict";e.exports=T,T.filename=null,T.defaults={keepCase:!1};var n=r(18343),i=r(41224),s=r(88905),o=r(94834),a=r(22461),l=r(8119),u=r(96136),c=r(35931),d=r(82006),h=r(60650),f=r(91603),p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function T(e,t,r){t instanceof i||(r=t,t=new i),r||(r=T.defaults);var O,C,k,x,A,R=r.preferTrailingComment||!1,I=n(e,r.alternateCommentMode||!1),P=I.next,D=I.push,N=I.peek,M=I.skip,j=I.cmnt,L=!0,F=!1,U=t,B=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=T.filename;return r||(T.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+I.line+")")}function H(){var e,t=[];do{if('"'!==(e=P())&&"'"!==e)throw V(e);t.push(P()),M(e),e=N()}while('"'===e||"'"===e);return t.join("")}function z(e){var t=P();switch(t){case"'":case'"':return D(t),H();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return q(t,!0)}catch(r){if(e&&S.test(t))return t;throw V(t,"value")}}function W(e,t){var r,n;do t&&('"'===(r=N())||"'"===r)?e.push(H()):e.push([n=$(P()),M("to",!0)?$(P()):n]);while(M(",",!0));M(";")}function q(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(_.test(e))return r*parseFloat(e);throw V(e,"number",t)}function $(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw V(e,"id")}function K(){if(void 0!==C)throw V("package");if(C=P(),!S.test(C))throw V(C,"name");U=U.define(C),M(";")}function J(){var e,t=N();switch(t){case"weak":e=x||(x=[]),P();break;case"public":P();default:e=k||(k=[])}t=H(),M(";"),e.push(t)}function G(){if(M("="),!(F="proto3"===(A=H()))&&"proto2"!==A)throw V(A,"syntax");M(";")}function Q(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return X(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return eh(e,t),!0}return!1}function Y(e,t,r){var n,i=I.line;if(e&&("string"!=typeof e.comment&&(e.comment=j()),e.filename=T.filename),M("{",!0)){for(;"}"!==(n=P());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||R)&&(e.comment=j(i)||e.comment)}function X(e,t){if(!w.test(t=P()))throw V(t,"type name");var r=new s(t);Y(r,function(e){if(!Q(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":F?Z(r,"proto3_optional"):Z(r,"optional");break;case"oneof":er(r,e);break;case"extensions":W(r.extensions||(r.extensions=[]));break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:if(!F||!S.test(e))throw V(e);D(e),Z(r,"optional")}}),e.add(r)}function Z(e,t,r){var n=P();if("group"===n){ee(e,t);return}for(;n.endsWith(".")||N().startsWith(".");)n+=P();if(!S.test(n))throw V(n,"type");var i=P();if(!w.test(i))throw V(i,"name");i=B(i),M("=");var s=new o(i,$(P()),n,t,r);if(Y(s,function(e){if("option"===e)es(s,e),M(";");else throw V(e)},function(){eu(s)}),"proto3_optional"===t){var a=new l("_"+i);s.setOption("proto3_optional",!0),a.add(s),e.add(a)}else e.add(s);!F&&s.repeated&&(void 0!==h.packed[n]||void 0===h.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=P();if(!w.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),M("=");var i=$(P()),a=new s(r);a.group=!0;var l=new o(n,i,r,t);l.filename=T.filename,Y(a,function(e){switch(e){case"option":es(a,e),M(";");break;case"required":case"repeated":Z(a,e);break;case"optional":F?Z(a,"proto3_optional"):Z(a,"optional");break;case"message":X(a,e);break;case"enum":en(a,e);break;default:throw V(e)}}),e.add(a).add(l)}function et(e){M("<");var t=P();if(void 0===h.mapKey[t])throw V(t,"type");M(",");var r=P();if(!S.test(r))throw V(r,"type");M(">");var n=P();if(!w.test(n))throw V(n,"name");M("=");var i=new a(B(n),$(P()),t,r);Y(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!w.test(t=P()))throw V(t,"name");var r=new l(B(t));Y(r,function(e){"option"===e?(es(r,e),M(";")):(D(e),Z(r,"optional"))}),e.add(r)}function en(e,t){if(!w.test(t=P()))throw V(t,"name");var r=new u(t);Y(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!w.test(t))throw V(t,"name");M("=");var r=$(P(),!0),n={options:void 0};n.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},Y(n,function(e){if("option"===e)es(n,e),M(";");else throw V(e)},function(){eu(n)}),e.add(t,r,n.comment,n.options)}function es(e,t){var r,n=M("(",!0);if(!S.test(t=P()))throw V(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=N(),E.test(t)&&(r=t.slice(1),i+=t,P())),M("=");var o=eo(e,i);el(e,s,o,r)}function eo(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!w.test(O=P()))throw V(O,"name");if(null===O)throw V(O,"end of input");var n,i,s=O;if(M(":",!0),"{"===N())n=eo(e,t+"."+O);else if("["===N()){if(n=[],M("[",!0)){do i=z(!0),n.push(i);while(M(",",!0));M("]"),void 0!==i&&ea(e,t+"."+O,i)}}else n=z(!0),ea(e,t+"."+O,n);var o=r[s];o&&(n=[].concat(o).concat(n)),r[s]=n,M(",",!0),M(";",!0)}return r}var a=z(!0);return ea(e,t,a),a}function ea(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!w.test(t=P()))throw V(t,"service name");var r=new c(t);Y(r,function(e){if(!Q(r,e)){if("rpc"===e)ed(r,e);else throw V(e)}}),e.add(r)}function ed(e,t){var r=j(),n=t;if(!w.test(t=P()))throw V(t,"name");var i,s,o,a,l=t;if(M("("),M("stream",!0)&&(s=!0),!S.test(t=P())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(a=!0),!S.test(t=P())))throw V(t);o=t,M(")");var u=new d(l,n,i,o,s,a);u.comment=r,Y(u,function(e){if("option"===e)es(u,e),M(";");else throw V(e)}),e.add(u)}function eh(e,t){if(!S.test(t=P()))throw V(t,"reference");var r=t;Y(null,function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":F?Z(e,"proto3_optional",r):Z(e,"optional",r);break;default:if(!F||!S.test(t))throw V(t);D(t),Z(e,"optional",r)}})}for(;null!==(O=P());)switch(O){case"package":if(!L)throw V(O);K();break;case"import":if(!L)throw V(O);J();break;case"syntax":if(!L)throw V(O);G();break;case"option":es(U,O),M(";");break;default:if(Q(U,O)){L=!1;continue}throw V(O)}return T.filename=null,{package:C,imports:k,weakImports:x,syntax:A,root:t}}},26848:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(64647),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},33809:(e,t,r)=>{"use strict";e.exports=s;var n=r(26848);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(64647);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},41224:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,o=r(23346);((d.prototype=Object.create(o.prototype)).constructor=d).className="Root";var a=r(94834),l=r(96136),u=r(8119),c=r(91603);function d(e){o.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=c.path.resolve,d.prototype.fetch=c.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return c.asPromise(e,o,t,r);var a=n===h;function l(e,t){if(n){if(a)throw e;var r=n;n=null,r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,o,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||o.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||o.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}a||p||l(null,o)}function f(e,t){if(e=u(e)||e,!(o.files.indexOf(e)>-1)){if(o.files.push(e),e in s){a?d(e,s[e]):(++p,setTimeout(function(){--p,d(e,s[e])}));return}if(a){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}d(e,r)}else++p,o.fetch(e,function(r,i){if(--p,n){if(r){t?p||l(null,o):l(r);return}d(e,i)}})}}var p=0;c.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=o.resolvePath("",t[g]))&&f(m);if(a)return o;p||l(null,o)},d.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return o.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n),!0)}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend){if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof o){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){n=e,i=t,s=r}},34941:e=>{"use strict";e.exports={}},14864:(e,t,r)=>{"use strict";t.Service=r(41963)},41963:(e,t,r)=>{"use strict";e.exports=i;var n=r(64647);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return a.emit("error",e,t),o(e);if(null===r){a.end(!0);return}if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)})}catch(e){a.emit("error",e,t),setTimeout(function(){o(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},35931:(e,t,r)=>{"use strict";e.exports=a;var n=r(23346);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var i=r(82006),s=r(91603),o=r(14864);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,i=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var l=s.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},18343:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,l=/\\(.?)/g,u={0:"\x00",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function d(e,l){e=e.toString();var u=0,d=e.length,h=1,f=0,p={},m=[],g=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(){var t="'"===g?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,T(g),g=null,c(i[1])}function b(t){return e.charAt(t)}function _(t,r,n){var a,u,c={type:e.charAt(t++),lineEmpty:!1,leading:n},d=t-(a=l?2:3);do if(--d<0||"\n"===(u=e.charAt(d))){c.lineEmpty=!0;break}while(" "===u||"	"===u);for(var m=e.substring(t,r).split(o),g=0;g<m.length;++g)m[g]=m[g].replace(l?s:i,"").trim();c.text=m.join("\n").trim(),p[h]=c,f=h}function w(t){var r=S(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function S(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function E(){if(m.length>0)return m.shift();if(g)return v();var r,n,i,s,o,c=0===u;do{if(u===d)return null;for(r=!1;a.test(i=b(u));)if("\n"===i&&(c=!0,++h),++u===d)return null;if("/"===b(u)){if(++u===d)throw y("comment");if("/"===b(u)){if(l){if(s=u,o=!1,w(u-1)){o=!0;do if((u=S(u))===d||(u++,!c))break;while(w(u))}else u=Math.min(d,S(u)+1);o&&(_(s,u,c),c=!0),h++,r=!0}else{for(o="/"===b(s=u+1);"\n"!==b(++u);)if(u===d)return null;++u,o&&(_(s,u-1,c),c=!0),++h,r=!0}}else{if("*"!==(i=b(u)))return"/";s=u+1,o=l||"*"===b(s);do{if("\n"===i&&++h,++u===d)throw y("comment");n=i,i=b(u)}while("*"!==n||"/"!==i);++u,o&&(_(s,u-2,c),c=!0),r=!0}}}while(r);var f=u;if(t.lastIndex=0,!t.test(b(f++)))for(;f<d&&!t.test(b(f));)++f;var p=e.substring(u,u=f);return('"'===p||"'"===p)&&(g=p),p}function T(e){m.push(e)}function O(){if(!m.length){var e=E();if(null===e)return null;T(e)}return m[0]}function C(e,t){var r=O();if(r===e)return E(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function k(e){var t,r=null;return void 0===e?(t=p[h-1],delete p[h-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(f<e&&O(),t=p[e],delete p[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:E,peek:O,push:T,skip:C,cmnt:k},"line",{get:function(){return h}})}d.unescape=c},88905:(e,t,r)=>{"use strict";e.exports=v;var n=r(23346);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(96136),s=r(8119),o=r(94834),a=r(22461),l=r(35931),u=r(92942),c=r(26848),d=r(9846),h=r(91603),f=r(75625),p=r(84666),m=r(32420),g=r(29497),y=r(30578);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?a.fromJSON:o.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var d=t.nested[u[c]];r.add((void 0!==d.id?o.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?l.fromJSON:n.fromJSON)(u[c],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:c,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},60650:(e,t,r)=>{"use strict";var n=t,i=r(91603),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},91603:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(64647),o=r(34941);s.codegen=r(52012),s.fetch=r(63035),s.path=r(29986),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var a=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(88905));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(96136));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(41224)))}})},96862:(e,t,r)=>{"use strict";e.exports=i;var n=r(64647);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},64647:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(70799),n.base64=r(92130),n.EventEmitter=r(80854),n.float=r(14324),n.inquire=r(20449),n.utf8=r(78131),n.pool=r(56035),n.LongBits=r(96862),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},32420:(e,t,r)=>{"use strict";e.exports=l;var n=r(96136),i=r(91603);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),o(t,u,l,c+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}o(t,u,l,c)}u.optional&&t("}")}return t("return null")}},30578:(e,t,r)=>{"use strict";var n=t,i=r(92942);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+l,a["@type"]=s,a}return this.toObject(e,t)}}},9846:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(64647),s=i.LongBits,o=i.base64,a=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},m.prototype=Object.create(l.prototype),m.prototype.fn=p,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},15655:(e,t,r)=>{"use strict";e.exports=s;var n=r(9846);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(64647);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},58715:(e,t,r)=>{"use strict";var n;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */n={value:!0};let i=r(51382),s=r(25269),o=r(21725),a=r(72916);n=r(69802),n=function(e){return"@type"in e&&"string"==typeof e["@type"]};let l={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function u(e,t){return""===e?t:e+"."+t}function c(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}function d(e){return e instanceof s.Namespace||e instanceof s.Root}function h(e,t){let r=u(t,e.name);return c(e)?[[r,e]]:d(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>h(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function f(e,t){return function(r){return e.toObject(e.decode(r),t)}}function p(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function m(e,t,r,n){let s=e.resolvedRequestType,o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:p(s),requestDeserialize:f(s,r),responseSerialize:p(o),responseDeserialize:f(o,r),originalName:i(e.name),requestType:y(s,n),responseType:y(o,n)}}function g(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=m(s,t,r,n);return i}function y(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function v(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function b(e,t,r,n){if(e instanceof s.Service)return g(e,t,r,n);if(e instanceof s.Type)return y(e,n);if(e instanceof s.Enum)return v(e,n);throw Error("Type mismatch in reflection object handling")}function _(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of h(e,""))r[i]=b(s,i,t,n);return r}function w(e,t){t=t||{};let r=s.Root.fromDescriptor(e);return r.resolveAll(),_(r,t)}function S(e,t){t=t||{};let r=s.Root.fromJSON(e);return r.resolveAll(),_(r,t)}n=function(e,t){return a.loadProtosWithOptions(e,t).then(e=>_(e,t))},n=function(e,t){return _(a.loadProtosWithOptionsSync(e,t),t)},t.im=S,n=function(e,t){return w(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return w(o.FileDescriptorSet.fromObject(e),t)},a.addCommonProtos()},72916:(e,t,r)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:!0});let n=r(57147),i=r(71017),s=r(25269);function o(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}async function a(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));o(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n}function l(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");o(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n}function u(){let e=r(56541),t=r(89987),n=r(57674),i=r(73795);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}t.loadProtosWithOptions=a,t.loadProtosWithOptionsSync=l,t.addCommonProtos=u},70799:e=>{"use strict";function t(e,t){for(var r=Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,o){r[n]=function(e){if(s){if(s=!1,e)o(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,o(e))}})}e.exports=t},92130:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,o=[],a=0,l=0;t<r;){var u=e[t++];switch(l){case 0:o[a++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:o[a++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:o[a++]=n[i|u>>6],o[a++]=n[63&u],l=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return(l&&(o[a++]=n[i],o[a++]=61,1===l&&(o[a++]=61)),s)?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,a=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&a>1)break;if(void 0===(u=i[u]))throw Error(o);switch(a){case 0:n=u,a=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:t[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(o);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},52012:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var o=Object.keys(e),a=Array(o.length+1),l=Array(o.length),u=0;u<o.length;)a[u]=o[u],l[u]=e[o[u++]];return a[u]=r,Function.apply(null,a).apply(null,l)}return Function(r)()}for(var c=Array(arguments.length-1),d=0;d<c.length;)c[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=c[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),d!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},80854:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},63035:(e,t,r)=>{"use strict";e.exports=s;var n=r(70799),i=r(20449)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&i&&i.readFile?i.readFile(e,function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},14324:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),o=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|o)>>>0,r,n)}}function o(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,o=8388607&n;return 255===s?o?NaN:1/0*i:0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,i),e.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,r,n,i,s){var o,a=n<0?1:0;if(a&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:2147483648,i,s+r);else if(isNaN(n))e(0,i,s+t),e(2146959360,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((a<<31|2146435072)>>>0,i,s+r);else if(n<22250738585072014e-324)e((o=n/5e-324)>>>0,i,s+t),e((a<<31|o/4294967296)>>>0,i,s+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(o=n*Math.pow(2,-l))>>>0,i,s+t),e((a<<31|l+1023<<20|1048576*o&1048575)>>>0,i,s+r)}}function o(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r),a=(o>>31)*2+1,l=o>>>20&2047,u=4294967296*(1048575&o)+s;return 2047===l?u?NaN:1/0*a:0===l?5e-324*a*u:a*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,i,0,4),e.readDoubleBE=o.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},20449:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},29986:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return(r||(t=i(t)),n(t))?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},56035:e=>{"use strict";function t(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(r){if(r<1||r>i)return e(r);o+r>n&&(s=e(n),o=0);var a=t.call(s,o,o+=r);return 7&o&&(o=(7|o)+1),a}}e.exports=t},78131:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],o=0;t<r;)(n=e[t++])<128?s[o++]=n:n>191&&n<224?s[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[o++]=55296+(n>>10),s[o++]=56320+(1023&n)):s[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))},r.write=function(e,t,r){for(var n,i,s=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(o+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}},34998:(e,t,r)=>{"use strict";var n=r(99619),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return n.isMemo(e)?a:l[e.$$typeof]||i}l[n.ForwardRef]=o,l[n.Memo]=a;var c=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;function g(e,t,r){if("string"!=typeof t){if(m){var n=p(t);n&&n!==m&&g(e,n,r)}var i=d(t);h&&(i=i.concat(h(t)));for(var o=u(e),a=u(t),l=0;l<i.length;++l){var y=i[l];if(!s[y]&&!(r&&r[y])&&!(a&&a[y])&&!(o&&o[y])){var v=f(t,y);try{c(e,y,v)}catch(e){}}}}return e}e.exports=g},51382:e=>{var t=1/0,r="[object Symbol]",n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",a="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",h="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",p="["+s+"]",m="["+h+"]",g="["+o+a+"]",y="\\d+",v="["+l+"]",b="["+u+"]",_="[^"+s+h+y+l+u+c+"]",w="\ud83c[\udffb-\udfff]",S="[^"+s+"]",E="(?:\ud83c[\udde6-\uddff]){2}",T="[\ud800-\udbff][\udc00-\udfff]",O="["+c+"]",C="\\u200d",k="(?:"+b+"|"+_+")",x="(?:"+O+"|"+_+")",A="(?:"+f+"(?:d|ll|m|re|s|t|ve))?",R="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?",I="(?:"+g+"|"+w+")?",P="["+d+"]?",D="(?:"+C+"(?:"+[S,E,T].join("|")+")"+P+I+")*",N=P+I+D,M="(?:"+[v,E,T].join("|")+")"+N,j="(?:"+[S+g+"?",g,E,T,p].join("|")+")",L=RegExp(f,"g"),F=RegExp(g,"g"),U=RegExp(w+"(?="+w+")|"+j+N,"g"),B=RegExp([O+"?"+b+"+"+A+"(?="+[m,O,"$"].join("|")+")",x+"+"+R+"(?="+[m,O+k,"$"].join("|")+")",O+"?"+k+"+"+A,O+"+"+R,y,M].join("|"),"g"),V=RegExp("["+C+s+o+a+d+"]"),H=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,z={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},W="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,$=W||q||Function("return this")();function K(e,t,r,n){var i=-1,s=e?e.length:0;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function J(e){return e.split("")}function G(e){return e.match(n)||[]}var Q=function(e){return function(t){return null==e?void 0:e[t]}}(z);function Y(e){return V.test(e)}function X(e){return H.test(e)}function Z(e){return Y(e)?ee(e):J(e)}function ee(e){return e.match(U)||[]}function et(e){return e.match(B)||[]}var er=Object.prototype.toString,en=$.Symbol,ei=en?en.prototype:void 0,es=ei?ei.toString:void 0;function eo(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function ea(e){if("string"==typeof e)return e;if(ed(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:eo(e,t,r)}function eu(e){return function(t){var r=Y(t=eh(t))?Z(t):void 0,n=r?r[0]:t.charAt(0),i=r?el(r,1).join(""):t.slice(1);return n[e]()+i}}function ec(e){return!!e&&"object"==typeof e}function ed(e){return"symbol"==typeof e||ec(e)&&er.call(e)==r}function eh(e){return null==e?"":ea(e)}var ef=function(e){return function(t){return K(ey(em(t).replace(L,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ep(t):t)});function ep(e){return eg(eh(e).toLowerCase())}function em(e){return(e=eh(e))&&e.replace(i,Q).replace(F,"")}var eg=eu("toUpperCase");function ey(e,t,r){return(e=eh(e),void 0===(t=r?void 0:t))?X(e)?et(e):G(e):e.match(t)||[]}e.exports=ef},69802:e=>{e.exports=r;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},s={};function o(e,t){var r,n,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(n=s[e]))?n:(r=l(e,(0|e)<0?-1:0,!0),o&&(s[e]=r),r):(e|=0,(o=-128<=e&&e<128)&&(n=i[e]))?n:(r=l(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function a(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=f)return S}else{if(e<=-p)return E;if(e+1>=p)return w}return e<0?a(-e,t).neg():l(e%h|0,e/h|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=a,r.fromBits=l;var u=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,r).neg();for(var n,i=a(u(r,8)),s=g,o=0;o<e.length;o+=8){var l=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+l),r);if(l<8){var h=a(u(r,l));s=s.mul(h).add(a(d))}else s=(s=s.mul(i)).add(a(d))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var h=4294967296,f=18446744073709552e3,p=0x7fffffffffffffff,m=o(16777216),g=o(0);r.ZERO=g;var y=o(0,!0);r.UZERO=y;var v=o(1);r.ONE=v;var b=o(1,!0);r.UONE=b;var _=o(-1);r.NEG_ONE=_;var w=l(-1,2147483647,!1);r.MAX_VALUE=w;var S=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=S;var E=l(0,-2147483648,!1);r.MIN_VALUE=E;var T=r.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(E))return"-"+this.neg().toString(e);var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=a(u(e,6),this.unsigned),s=this,o="";;){var l=s.div(i),c=(s.sub(l.mul(i)).toInt()>>>0).toString(e);if((s=l).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(1&this.low)==1},T.isEven=function(){return(1&this.low)==0},T.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return 0>this.comp(e)},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return 0>=this.comp(e)},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(v)},T.neg=T.negate,T.add=function(e){n(e)||(e=d(e));var t,r,i=this.high>>>16,s=65535&this.high,o=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,f=65535&e.low,p=0,m=0;return t=0+((r=0+(a+f))>>>16),r&=65535,t+=o+h,m+=t>>>16,t&=65535,m+=s+c,p+=m>>>16,m&=65535,p+=i+u,l(t<<16|r,(p&=65535)<<16|m,this.unsigned)},T.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return g;if(n(e)||(e=d(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(E))return e.isOdd()?E:g;if(e.eq(E))return this.isOdd()?E:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return a(this.toNumber()*e.toNumber(),this.unsigned);var r,i,s=this.high>>>16,o=65535&this.high,u=this.low>>>16,c=65535&this.low,h=e.high>>>16,f=65535&e.high,p=e.low>>>16,y=65535&e.low,v=0,b=0;return r=0+((i=0+c*y)>>>16),i&=65535,r+=u*y,b+=r>>>16,r&=65535,r+=c*p,b+=r>>>16,r&=65535,b+=o*y,v+=b>>>16,b&=65535,b+=u*p,v+=b>>>16,b&=65535,b+=c*f,v+=b>>>16,b&=65535,v+=s*y+o*p+u*f+c*h,l(r<<16|i,(v&=65535)<<16|b,this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){var r,i,s;return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;s=y}else{if(this.eq(E))return e.eq(v)||e.eq(_)?E:e.eq(E)?v:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?v:_:(i=this.sub(e.mul(r)),s=r.add(i.div(e)));if(e.eq(E))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=g}for(i=this;i.gte(e);){for(var o=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),c=o<=48?1:u(2,o-48),h=a(r),f=h.mul(e);f.isNegative()||f.gt(i);)r-=c,f=(h=a(r,this.unsigned)).mul(e);h.isZero()&&(h=v),s=s.add(h),i=i.sub(f)}return s},T.div=T.divide,T.modulo=function(e){return(n(e)||(e=d(e)),t)?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return l(~this.low,~this.high,this.unsigned)},T.and=function(e){return n(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return n(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return n(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):32===e?l(t,0,this.unsigned):l(t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},45310:(e,t,r)=>{"use strict";var n=r(69286);Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastChannel=f,t.apiBaseUrl=d,t.fetchData=u,t.now=h;var i=n(r(7475)),s=n(r(97307)),o=n(r(36644));function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e,t,r){return c.apply(this,arguments)}function c(){return(c=(0,o.default)(i.default.mark(function e(t,r,n){var s,o,a,u,c,h,f,p,m,g=arguments;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=(s=g.length>3&&void 0!==g[3]?g[3]:{}).ctx,u=void 0===(a=s.req)?null==o?void 0:o.req:a,c="".concat(d(r),"/").concat(t),e.prev=2,f={headers:l({"Content-Type":"application/json"},null!=u&&null!==(h=u.headers)&&void 0!==h&&h.cookie?{cookie:u.headers.cookie}:{})},null!=u&&u.body&&(f.body=JSON.stringify(u.body),f.method="POST"),e.next=7,fetch(c,f);case 7:return p=e.sent,e.next=10,p.json();case 10:if(m=e.sent,p.ok){e.next=13;break}throw m;case 13:return e.abrupt("return",Object.keys(m).length>0?m:null);case 16:return e.prev=16,e.t0=e.catch(2),n.error("CLIENT_FETCH_ERROR",{error:e.t0,url:c}),e.abrupt("return",null);case 20:case"end":return e.stop()}},e,null,[[2,16]])}))).apply(this,arguments)}function d(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function h(){return Math.floor(Date.now()/1e3)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nextauth.message";return{receive:function(t){var r=function(r){if(r.key===e){var n,i=JSON.parse(null!==(n=r.newValue)&&void 0!==n?n:"{}");(null==i?void 0:i.event)==="session"&&null!=i&&i.data&&t(i)}};return window.addEventListener("storage",r),function(){return window.removeEventListener("storage",r)}},post:function(t){if("undefined"!=typeof window)try{localStorage.setItem(e,JSON.stringify(l(l({},t),{},{timestamp:h()})))}catch(e){}}}}},36829:(e,t,r)=>{"use strict";var n=r(69286);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedStrategy=t.UnknownError=t.OAuthCallbackError=t.MissingSecret=t.MissingAuthorize=t.MissingAdapterMethods=t.MissingAdapter=t.MissingAPIRoute=t.InvalidCallbackUrl=t.AccountNotLinkedError=void 0,t.adapterErrorHandler=x,t.capitalize=C,t.eventsErrorHandler=k,t.upperSnake=O;var i=n(r(7475)),s=n(r(36644)),o=n(r(9529)),a=n(r(97307)),l=n(r(78513)),u=n(r(53388)),c=n(r(82522)),d=n(r(27296)),h=n(r(82066));function f(e){var t=p();return function(){var r,n=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var m=function(e){(0,c.default)(r,e);var t=f(r);function r(e){var n,i;return(0,l.default)(this,r),(i=t.call(this,null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e)).name="UnknownError",i.code=e.code,e instanceof Error&&(i.stack=e.stack),i}return(0,u.default)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),r}((0,n(r(56112)).default)(Error));t.UnknownError=m;var g=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","OAuthCallbackError"),e}return(0,u.default)(r)}(m);t.OAuthCallbackError=g;var y=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","AccountNotLinkedError"),e}return(0,u.default)(r)}(m);t.AccountNotLinkedError=y;var v=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAPIRouteError"),(0,a.default)((0,o.default)(e),"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAPIRoute=v;var b=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingSecretError"),(0,a.default)((0,o.default)(e),"code","NO_SECRET"),e}return(0,u.default)(r)}(m);t.MissingSecret=b;var _=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAuthorizeError"),(0,a.default)((0,o.default)(e),"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAuthorize=_;var w=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAdapterError"),(0,a.default)((0,o.default)(e),"code","EMAIL_REQUIRES_ADAPTER_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAdapter=w;var S=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAdapterMethodsError"),(0,a.default)((0,o.default)(e),"code","MISSING_ADAPTER_METHODS_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAdapterMethods=S;var E=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","UnsupportedStrategyError"),(0,a.default)((0,o.default)(e),"code","CALLBACK_CREDENTIALS_JWT_ERROR"),e}return(0,u.default)(r)}(m);t.UnsupportedStrategy=E;var T=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","InvalidCallbackUrl"),(0,a.default)((0,o.default)(e),"code","INVALID_CALLBACK_URL_ERROR"),e}return(0,u.default)(r)}(m);function O(e){return e.replace(/([A-Z])/g,"_$1").toUpperCase()}function C(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}function k(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(i.default.mark(function r(){var s,o=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=e[n],r.next=4,s.apply(void 0,o);case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),t.error("".concat(O(n),"_EVENT_ERROR"),r.t0);case 10:case"end":return r.stop()}},r,null,[[0,7]])})),r},{})}function x(e,t){if(e)return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(i.default.mark(function r(){var s,o,a,l,u,c=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,o=Array(s=c.length),a=0;a<s;a++)o[a]=c[a];return t.debug("adapter_".concat(n),{args:o}),l=e[n],r.next=6,l.apply(void 0,o);case 6:return r.abrupt("return",r.sent);case 9:throw r.prev=9,r.t0=r.catch(0),t.error("adapter_error_".concat(n),r.t0),(u=new m(r.t0)).name="".concat(C(n),"Error"),u;case 15:case"end":return r.stop()}},r,null,[[0,9]])})),r},{})}t.InvalidCallbackUrl=T},47674:(e,t,r)=>{"use strict";var n,i,s,o,a,l=r(69286),u=r(16347);Object.defineProperty(t,"__esModule",{value:!0});var c={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};t.SessionContext=void 0,t.SessionProvider=V,t.getCsrfToken=D,t.getProviders=M,t.getSession=I,t.signIn=L,t.signOut=U,t.useSession=R;var d=l(r(7475)),h=l(r(97307)),f=l(r(36644)),p=l(r(13279)),m=S(r(3729)),g=S(r(51375)),y=l(r(19468)),v=r(45310),b=r(95344),_=r(23539);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.keys(_).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(c,e))&&(e in t&&t[e]===_[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return _[e]}}))});var O={baseUrl:(0,y.default)(null!==(n=process.env.NEXTAUTH_URL)&&void 0!==n?n:process.env.VERCEL_URL).origin,basePath:(0,y.default)(process.env.NEXTAUTH_URL).path,baseUrlServer:(0,y.default)(null!==(i=null!==(s=process.env.NEXTAUTH_URL_INTERNAL)&&void 0!==s?s:process.env.NEXTAUTH_URL)&&void 0!==i?i:process.env.VERCEL_URL).origin,basePathServer:(0,y.default)(null!==(o=process.env.NEXTAUTH_URL_INTERNAL)&&void 0!==o?o:process.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},C=(0,v.BroadcastChannel)(),k=(0,g.proxyLogger)(g.default,O.basePath);function x(){var e=m.useState("undefined"!=typeof navigator&&navigator.onLine),t=(0,p.default)(e,2),r=t[0],n=t[1],i=function(){return n(!0)},s=function(){return n(!1)};return m.useEffect(function(){return window.addEventListener("online",i),window.addEventListener("offline",s),function(){window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),r}var A=null===(a=m.createContext)||void 0===a?void 0:a.call(m,void 0);function R(e){if(!A)throw Error("React Context is unavailable in Server Components");var t=m.useContext(A),r=null!=e?e:{},n=r.required,i=r.onUnauthenticated,s=n&&"unauthenticated"===t.status;return(m.useEffect(function(){if(s){var e="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));i?i():window.location.href=e}},[s,i]),s)?{data:t.data,update:t.update,status:"loading"}:t}function I(e){return P.apply(this,arguments)}function P(){return(P=(0,f.default)(d.default.mark(function e(t){var r,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("session",O,k,t);case 2:return n=e.sent,(null===(r=null==t?void 0:t.broadcast)||void 0===r||r)&&C.post({event:"session",data:{trigger:"getSession"}}),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return N.apply(this,arguments)}function N(){return(N=(0,f.default)(d.default.mark(function e(t){var r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("csrf",O,k,t);case 2:return r=e.sent,e.abrupt("return",null==r?void 0:r.csrfToken);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(){return j.apply(this,arguments)}function j(){return(j=(0,f.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.fetchData)("providers",O,k);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t,r){return F.apply(this,arguments)}function F(){return(F=(0,f.default)(d.default.mark(function e(t,r,n){var i,s,o,a,l,u,c,h,f,p,m,g,y,b,_,w,S;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0===(s=(i=null!=r?r:{}).callbackUrl)?window.location.href:s,l=void 0===(a=i.redirect)||a,u=(0,v.apiBaseUrl)(O),e.next=4,M();case 4:if(c=e.sent){e.next=8;break}return window.location.href="".concat(u,"/error"),e.abrupt("return");case 8:if(!(!t||!(t in c))){e.next=11;break}return window.location.href="".concat(u,"/signin?").concat(new URLSearchParams({callbackUrl:o})),e.abrupt("return");case 11:return h="credentials"===c[t].type,f="email"===c[t].type,p=h||f,m="".concat(u,"/").concat(h?"callback":"signin","/").concat(t),g="".concat(m).concat(n?"?".concat(new URLSearchParams(n)):""),e.t0=fetch,e.t1=g,e.t2={"Content-Type":"application/x-www-form-urlencoded"},e.t3=URLSearchParams,e.t4=T,e.t5=T({},r),e.t6={},e.next=25,D();case 25:return e.t7=e.sent,e.t8=o,e.t9={csrfToken:e.t7,callbackUrl:e.t8,json:!0},e.t10=(0,e.t4)(e.t5,e.t6,e.t9),e.t11=new e.t3(e.t10),e.t12={method:"post",headers:e.t2,body:e.t11},e.next=33,(0,e.t0)(e.t1,e.t12);case 33:return y=e.sent,e.next=36,y.json();case 36:if(b=e.sent,!(l||!p)){e.next=42;break}return w=null!==(_=b.url)&&void 0!==_?_:o,window.location.href=w,w.includes("#")&&window.location.reload(),e.abrupt("return");case 42:if(S=new URL(b.url).searchParams.get("error"),!y.ok){e.next=46;break}return e.next=46,O._getSession({event:"storage"});case 46:return e.abrupt("return",{error:S,status:y.status,ok:y.ok,url:S?null:b.url});case 47:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e){return B.apply(this,arguments)}function B(){return(B=(0,f.default)(d.default.mark(function e(t){var r,n,i,s,o,a,l,u,c;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=void 0===(n=(null!=t?t:{}).callbackUrl)?window.location.href:n,s=(0,v.apiBaseUrl)(O),e.t0={"Content-Type":"application/x-www-form-urlencoded"},e.t1=URLSearchParams,e.next=6,D();case 6:return e.t2=e.sent,e.t3=i,e.t4={csrfToken:e.t2,callbackUrl:e.t3,json:!0},e.t5=new e.t1(e.t4),o={method:"post",headers:e.t0,body:e.t5},e.next=13,fetch("".concat(s,"/signout"),o);case 13:return a=e.sent,e.next=16,a.json();case 16:if(l=e.sent,C.post({event:"session",data:{trigger:"signout"}}),!(null===(r=null==t?void 0:t.redirect)||void 0===r||r)){e.next=23;break}return c=null!==(u=l.url)&&void 0!==u?u:i,window.location.href=c,c.includes("#")&&window.location.reload(),e.abrupt("return");case 23:return e.next=25,O._getSession({event:"storage"});case 25:return e.abrupt("return",l);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){if(!A)throw Error("React Context is unavailable in Server Components");var t=e.children,r=e.basePath,n=e.refetchInterval,i=e.refetchWhenOffline;r&&(O.basePath=r);var s=void 0!==e.session;O._lastSync=s?(0,v.now)():0;var o=m.useState(function(){return s&&(O._session=e.session),e.session}),a=(0,p.default)(o,2),l=a[0],u=a[1],c=m.useState(!s),h=(0,p.default)(c,2),g=h[0],y=h[1];m.useEffect(function(){return O._getSession=(0,f.default)(d.default.mark(function e(){var t,r,n=arguments;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(n.length>0&&void 0!==n[0]?n[0]:{}).event,e.prev=1,!((r="storage"===t)||void 0===O._session)){e.next=10;break}return O._lastSync=(0,v.now)(),e.next=7,I({broadcast:!r});case 7:return O._session=e.sent,u(O._session),e.abrupt("return");case 10:if(!(!t||null===O._session||(0,v.now)()<O._lastSync)){e.next=12;break}return e.abrupt("return");case 12:return O._lastSync=(0,v.now)(),e.next=15,I();case 15:O._session=e.sent,u(O._session),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),k.error("CLIENT_SESSION_ERROR",e.t0);case 22:return e.prev=22,y(!1),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[1,19,22,25]])})),O._getSession(),function(){O._lastSync=0,O._session=void 0,O._getSession=function(){}}},[]),m.useEffect(function(){var e=C.receive(function(){return O._getSession({event:"storage"})});return function(){return e()}},[]),m.useEffect(function(){var t=e.refetchOnWindowFocus,r=void 0===t||t,n=function(){r&&"visible"===document.visibilityState&&O._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",n,!1),function(){return document.removeEventListener("visibilitychange",n,!1)}},[e.refetchOnWindowFocus]);var _=x(),w=!1!==i||_;m.useEffect(function(){if(n&&w){var e=setInterval(function(){O._session&&O._getSession({event:"poll"})},1e3*n);return function(){return clearInterval(e)}}},[n,w]);var S=m.useMemo(function(){return{data:l,status:g?"loading":l?"authenticated":"unauthenticated",update:function(e){return(0,f.default)(d.default.mark(function t(){var r;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(g||!l)){t.next=2;break}return t.abrupt("return");case 2:return y(!0),t.t0=v.fetchData,t.t1=O,t.t2=k,t.next=8,D();case 8:return t.t3=t.sent,t.t4=e,t.t5={csrfToken:t.t3,data:t.t4},t.t6={body:t.t5},t.t7={req:t.t6},t.next=15,(0,t.t0)("session",t.t1,t.t2,t.t7);case 15:return r=t.sent,y(!1),r&&(u(r),C.post({event:"session",data:{trigger:"getSession"}})),t.abrupt("return",r);case 19:case"end":return t.stop()}},t)}))()}}},[l,g]);return(0,b.jsx)(A.Provider,{value:S,children:t})}t.SessionContext=A},23539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51375:(e,t,r)=>{"use strict";var n=r(69286);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.proxyLogger=f,t.setLogger=d;var i=n(r(97307)),s=r(36829);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){if(e instanceof Error&&!(e instanceof s.UnknownError))return{message:e.message,stack:e.stack,name:e.name};if(u(e)){var t;e.error=l(e.error),e.message=null!==(t=e.message)&&void 0!==t?t:e.error.message}return e}function u(e){return!!(null!=e&&e.error)}var c={error:function(e,t){t=l(t),console.error("[next-auth][error][".concat(e,"]"),"\nhttps://next-auth.js.org/errors#".concat(e.toLowerCase()),t.message,t)},warn:function(e){console.warn("[next-auth][warn][".concat(e,"]"),"\nhttps://next-auth.js.org/warnings#".concat(e.toLowerCase()))},debug:function(e,t){console.log("[next-auth][debug][".concat(e,"]"),t)}};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t||(c.debug=function(){}),e.error&&(c.error=e.error),e.warn&&(c.warn=e.warn),e.debug&&(c.debug=e.debug)}var h=c;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return e;var r={},n=function(e){r[e]=function(r,n){c[e](r,n),"error"===e&&(n=l(n)),n.client=!0;var i="".concat(t,"/_log"),s=new URLSearchParams(a({level:e,code:r},n));return navigator.sendBeacon?navigator.sendBeacon(i,s):fetch(i,{method:"POST",body:s,keepalive:!0})}};for(var i in e)n(i);return r}catch(e){return c}}t.default=h},19468:(e,t)=>{"use strict";function r(e){var t;let r=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(null!==(t=e)&&void 0!==t?t:r),i=("/"===n.pathname?r.pathname:n.pathname).replace(/\/$/,""),s=`${n.origin}${i}`;return{origin:n.origin,host:n.host,path:i,base:s,toString:()=>s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},89410:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(37412),i=r.n(n)},56506:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var n=r(61476),i=r.n(n)},8428:(e,t,r)=>{"use strict";var n=r(14767);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},88928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addBasePath",{enumerable:!0,get:function(){return o}});let n=r(71870),i=r(19847),s="";function o(e,t){return(0,i.normalizePathTrailingSlash)((0,n.addPathPrefix)(e,s))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},41314:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return n}}),r(19847);let n=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},13664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"callServer",{enumerable:!0,get:function(){return i}});let n=r(2583);async function i(e,t){let r=(0,n.getServerActionDispatcher)();if(!r)throw Error("Invariant: missing action dispatcher.");return new Promise((n,i)=>{r({actionId:e,actionArgs:t,resolve:n,reject:i})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23371:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AppRouterAnnouncer",{enumerable:!0,get:function(){return l}});let n=r(3729),i=r(81202),s="next-route-announcer",o="__next-route-announcer__";function a(){var e;let t=document.getElementsByName(s)[0];if(null==t?void 0:null==(e=t.shadowRoot)?void 0:e.childNodes[0])return t.shadowRoot.childNodes[0];{let e=document.createElement(s);e.style.cssText="position:absolute";let t=document.createElement("div");return t.ariaLive="assertive",t.id=o,t.role="alert",t.style.cssText="position:absolute;border:0;height:1px;margin:-1px;padding:0;width:1px;clip:rect(0 0 0 0);overflow:hidden;white-space:nowrap;word-wrap:normal",e.attachShadow({mode:"open"}).appendChild(t),document.body.appendChild(e),t}}function l(e){let{tree:t}=e,[r,o]=(0,n.useState)(null);(0,n.useEffect)(()=>(o(a()),()=>{let e=document.getElementsByTagName(s)[0];(null==e?void 0:e.isConnected)&&document.body.removeChild(e)}),[]);let[l,u]=(0,n.useState)(""),c=(0,n.useRef)();return(0,n.useEffect)(()=>{let e="";if(document.title)e=document.title;else{let t=document.querySelector("h1");t&&(e=t.innerText||t.textContent||"")}void 0!==c.current&&c.current!==e&&u(e),c.current=e},[t]),r?(0,i.createPortal)(l,r):null}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},15048:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RSC_HEADER:function(){return r},ACTION:function(){return n},NEXT_ROUTER_STATE_TREE:function(){return i},NEXT_ROUTER_PREFETCH_HEADER:function(){return s},NEXT_URL:function(){return o},RSC_CONTENT_TYPE_HEADER:function(){return a},RSC_VARY_HEADER:function(){return l},FLIGHT_PARAMETERS:function(){return u},NEXT_RSC_UNION_QUERY:function(){return c},NEXT_DID_POSTPONE_HEADER:function(){return d}});let r="RSC",n="Next-Action",i="Next-Router-State-Tree",s="Next-Router-Prefetch",o="Next-Url",a="text/x-component",l=r+", "+i+", "+s+", "+o,u=[[r],[i],[s]],c="_rsc",d="x-nextjs-postponed";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getServerActionDispatcher:function(){return O},urlToUrlWithoutFlightMarker:function(){return k},createEmptyCacheNode:function(){return R},default:function(){return L}});let n=r(17824),i=r(95344),s=n._(r(3729)),o=r(46860),a=r(8085),l=r(47475),u=r(78486),c=r(14954),d=r(26840),h=r(87995),f=r(56338),p=r(88928),m=r(23371),g=r(87046),y=r(7550),v=r(63664),b=r(15048),_=r(22874),w=r(96411),S=!0,E=null,T=null;function O(){return T}let C={};function k(e){let t=new URL(e,location.origin);return t.searchParams.delete(b.NEXT_RSC_UNION_QUERY),t}function x(e){return e.origin!==window.location.origin}function A(e){let{appRouterState:t,sync:r}=e;return(0,s.useInsertionEffect)(()=>{let{tree:e,pushRef:n,canonicalUrl:i}=t,s={...n.preserveCustomHistoryState?window.history.state:{},__NA:!0,__PRIVATE_NEXTJS_INTERNALS_TREE:e};n.pendingPush&&(0,l.createHrefFromUrl)(new URL(window.location.href))!==i?(n.pendingPush=!1,window.history.pushState(s,"",i)):window.history.replaceState(s,"",i),r(t)},[t,r]),null}function R(){return{lazyData:null,rsc:null,prefetchRsc:null,parallelRoutes:new Map,lazyDataResolved:!1}}function I(e){T=(0,s.useCallback)(t=>{(0,s.startTransition)(()=>{e({...t,type:a.ACTION_SERVER_ACTION})})},[e])}function P(e){return(0,s.useCallback)((t,r,n)=>{(0,s.startTransition)(()=>{e({type:a.ACTION_SERVER_PATCH,flightData:r,previousTree:t,overrideCanonicalUrl:n})})},[e])}function D(e){return(0,s.useCallback)((t,r,n)=>{let i=new URL((0,p.addBasePath)(t),location.href);return e({type:a.ACTION_NAVIGATE,url:i,isExternalUrl:x(i),locationSearch:location.search,shouldScroll:null==n||n,navigateType:r})},[e])}function N(e){null==e&&(e={});let t=window.history.state,r=null==t?void 0:t.__NA;r&&(e.__NA=r);let n=null==t?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;return n&&(e.__PRIVATE_NEXTJS_INTERNALS_TREE=n),e}function M(e){let{headCacheNode:t}=e,r=null!==t?t.head:null,n=null!==t?t.prefetchHead:null,i=null!==n?n:r;return(0,s.useDeferredValue)(r,i)}function j(e){let t,{buildId:r,initialHead:n,initialTree:l,initialCanonicalUrl:d,initialSeedData:b,assetPrefix:T,missingSlots:O}=e,k=(0,s.useMemo)(()=>(0,h.createInitialRouterState)({buildId:r,initialSeedData:b,initialCanonicalUrl:d,initialTree:l,initialParallelRoutes:E,isServer:S,location:S?null:window.location,initialHead:n}),[r,b,d,l,n]),[R,j,L]=(0,c.useReducerWithReduxDevtools)(k);(0,s.useEffect)(()=>{E=null},[]);let{canonicalUrl:F}=(0,c.useUnwrapState)(R),{searchParams:U,pathname:B}=(0,s.useMemo)(()=>{let e=new URL(F,"http://n");return{searchParams:e.searchParams,pathname:(0,w.hasBasePath)(e.pathname)?(0,_.removeBasePath)(e.pathname):e.pathname}},[F]),V=P(j),H=D(j);I(j);let z=(0,s.useMemo)(()=>({back:()=>window.history.back(),forward:()=>window.history.forward(),prefetch:(e,t)=>{if((0,f.isBot)(window.navigator.userAgent))return;let r=new URL((0,p.addBasePath)(e),window.location.href);x(r)||(0,s.startTransition)(()=>{var e;j({type:a.ACTION_PREFETCH,url:r,kind:null!=(e=null==t?void 0:t.kind)?e:a.PrefetchKind.FULL})})},replace:(e,t)=>{void 0===t&&(t={}),(0,s.startTransition)(()=>{var r;H(e,"replace",null==(r=t.scroll)||r)})},push:(e,t)=>{void 0===t&&(t={}),(0,s.startTransition)(()=>{var r;H(e,"push",null==(r=t.scroll)||r)})},refresh:()=>{(0,s.startTransition)(()=>{j({type:a.ACTION_REFRESH,origin:window.location.origin})})},fastRefresh:()=>{throw Error("fastRefresh can only be used in development mode. Please use refresh instead.")}}),[j,H]);(0,s.useEffect)(()=>{window.next&&(window.next.router=z)},[z]),(0,s.useEffect)(()=>{function e(e){var t;e.persisted&&(null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE)&&j({type:a.ACTION_RESTORE,url:new URL(window.location.href),tree:window.history.state.__PRIVATE_NEXTJS_INTERNALS_TREE})}return window.addEventListener("pageshow",e),()=>{window.removeEventListener("pageshow",e)}},[j]);let{pushRef:W}=(0,c.useUnwrapState)(R);if(W.mpaNavigation){if(C.pendingMpaPath!==F){let e=window.location;W.pendingPush?e.assign(F):e.replace(F),C.pendingMpaPath=F}(0,s.use)((0,v.createInfinitePromise)())}(0,s.useEffect)(()=>{let e=window.history.pushState.bind(window.history),t=window.history.replaceState.bind(window.history),r=e=>{var t;let r=window.location.href,n=null==(t=window.history.state)?void 0:t.__PRIVATE_NEXTJS_INTERNALS_TREE;(0,s.startTransition)(()=>{j({type:a.ACTION_RESTORE,url:new URL(null!=e?e:r,r),tree:n})})};window.history.pushState=function(t,n,i){return(null==t?void 0:t.__NA)||(null==t?void 0:t._N)||(t=N(t),i&&r(i)),e(t,n,i)},window.history.replaceState=function(e,n,i){return(null==e?void 0:e.__NA)||(null==e?void 0:e._N)||(e=N(e),i&&r(i)),t(e,n,i)};let n=e=>{let{state:t}=e;if(t){if(!t.__NA){window.location.reload();return}(0,s.startTransition)(()=>{j({type:a.ACTION_RESTORE,url:new URL(window.location.href),tree:t.__PRIVATE_NEXTJS_INTERNALS_TREE})})}};return window.addEventListener("popstate",n),()=>{window.history.pushState=e,window.history.replaceState=t,window.removeEventListener("popstate",n)}},[j]);let{cache:q,tree:$,nextUrl:K,focusAndScrollRef:J}=(0,c.useUnwrapState)(R),G=(0,s.useMemo)(()=>(0,y.findHeadInCache)(q,$[1]),[q,$]);if(null!==G){let[e,r]=G;t=(0,i.jsx)(M,{headCacheNode:e},r)}else t=null;let Q=(0,i.jsxs)(g.RedirectBoundary,{children:[t,q.rsc,(0,i.jsx)(m.AppRouterAnnouncer,{tree:$})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(A,{appRouterState:(0,c.useUnwrapState)(R),sync:L}),(0,i.jsx)(u.PathnameContext.Provider,{value:B,children:(0,i.jsx)(u.SearchParamsContext.Provider,{value:U,children:(0,i.jsx)(o.GlobalLayoutRouterContext.Provider,{value:{buildId:r,changeByServerResponse:V,tree:$,focusAndScrollRef:J,nextUrl:K},children:(0,i.jsx)(o.AppRouterContext.Provider,{value:z,children:(0,i.jsx)(o.LayoutRouterContext.Provider,{value:{childNodes:q.parallelRoutes,tree:$,url:F},children:Q})})})})})]})}function L(e){let{globalErrorComponent:t,...r}=e;return(0,i.jsx)(d.ErrorBoundary,{errorComponent:t,children:(0,i.jsx)(j,{...r})})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},64586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bailoutToClientRendering",{enumerable:!0,get:function(){return s}});let n=r(63689),i=r(94749);function s(e){let t=i.staticGenerationAsyncStorage.getStore();if((null==t||!t.forceStatic)&&(null==t?void 0:t.isStaticGeneration))throw new n.BailoutToCSRError(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},18446:(e,t,r)=>{"use strict";function n(e){}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"clientHookInServerComponentError",{enumerable:!0,get:function(){return n}}),r(39694),r(3729),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ErrorBoundaryHandler:function(){return c},GlobalError:function(){return d},default:function(){return h},ErrorBoundary:function(){return f}});let n=r(39694),i=r(95344),s=n._(r(3729)),o=r(14767),a=r(47796),l={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"}};function u(e){let{error:t}=e;if("function"==typeof fetch.__nextGetStaticStore){var r;let e=null==(r=fetch.__nextGetStaticStore())?void 0:r.getStore();if((null==e?void 0:e.isRevalidate)||(null==e?void 0:e.isStaticGeneration))throw console.error(t),t}return null}class c extends s.default.Component{static getDerivedStateFromError(e){if((0,a.isNextRouterError)(e))throw e;return{error:e}}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.error?{error:null,previousPathname:e.pathname}:{error:t.error,previousPathname:e.pathname}}render(){return this.state.error?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u,{error:this.state.error}),this.props.errorStyles,this.props.errorScripts,(0,i.jsx)(this.props.errorComponent,{error:this.state.error,reset:this.reset})]}):this.props.children}constructor(e){super(e),this.reset=()=>{this.setState({error:null})},this.state={error:null,previousPathname:this.props.pathname}}}function d(e){let{error:t}=e,r=null==t?void 0:t.digest;return(0,i.jsxs)("html",{id:"__next_error__",children:[(0,i.jsx)("head",{}),(0,i.jsxs)("body",{children:[(0,i.jsx)(u,{error:t}),(0,i.jsx)("div",{style:l.error,children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:l.text,children:"Application error: a "+(r?"server":"client")+"-side exception has occurred (see the "+(r?"server logs":"browser console")+" for more information)."}),r?(0,i.jsx)("p",{style:l.text,children:"Digest: "+r}):null]})})]})]})}let h=d;function f(e){let{errorComponent:t,errorStyles:r,errorScripts:n,children:s}=e,a=(0,o.usePathname)();return t?(0,i.jsx)(c,{pathname:a,errorComponent:t,errorStyles:r,errorScripts:n,children:s}):(0,i.jsx)(i.Fragment,{children:s})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3082:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},63664:(e,t)=>{"use strict";let r;function n(){return r||(r=new Promise(()=>{})),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createInfinitePromise",{enumerable:!0,get:function(){return n}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47796:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return s}});let n=r(70226),i=r(72792);function s(e){return e&&e.digest&&((0,i.isRedirectError)(e)||(0,n.isNotFoundError)(e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38771:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return C}}),r(39694);let n=r(17824),i=r(95344),s=n._(r(3729));r(81202);let o=r(46860),a=r(47013),l=r(63664),u=r(26840),c=r(24287),d=r(51586),h=r(87046),f=r(13225),p=r(13717),m=r(75325);function g(e,t){if(e){let[r,n]=e,i=2===e.length;if((0,c.matchSegment)(t[0],r)&&t[1].hasOwnProperty(n)){if(i){let e=g(void 0,t[1][n]);return[t[0],{...t[1],[n]:[e[0],e[1],e[2],"refetch"]}]}return[t[0],{...t[1],[n]:g(e.slice(2),t[1][n])}]}}return t}function y(e){return null}let v=["bottom","height","left","right","top","width","x","y"];function b(e){if(["sticky","fixed"].includes(getComputedStyle(e).position))return!0;let t=e.getBoundingClientRect();return v.every(e=>0===t[e])}function _(e,t){let r=e.getBoundingClientRect();return r.top>=0&&r.top<=t}function w(e){var t;return"top"===e?document.body:null!=(t=document.getElementById(e))?t:document.getElementsByName(e)[0]}class S extends s.default.Component{componentDidMount(){this.handlePotentialScroll()}componentDidUpdate(){this.props.focusAndScrollRef.apply&&this.handlePotentialScroll()}render(){return this.props.children}constructor(...e){super(...e),this.handlePotentialScroll=()=>{let{focusAndScrollRef:e,segmentPath:t}=this.props;if(e.apply){if(0!==e.segmentPaths.length&&!e.segmentPaths.some(e=>t.every((t,r)=>(0,c.matchSegment)(t,e[r]))))return;let r=null,n=e.hashFragment;if(n&&(r=w(n)),r||(r=y(this)),!(r instanceof Element))return;for(;!(r instanceof HTMLElement)||b(r);){if(null===r.nextElementSibling)return;r=r.nextElementSibling}e.apply=!1,e.hashFragment=null,e.segmentPaths=[],(0,d.handleSmoothScroll)(()=>{if(n){r.scrollIntoView();return}let e=document.documentElement,t=e.clientHeight;!_(r,t)&&(e.scrollTop=0,_(r,t)||r.scrollIntoView())},{dontForceLayout:!0,onlyHashChange:e.onlyHashChange}),e.onlyHashChange=!1,r.focus()}}}}function E(e){let{segmentPath:t,children:r}=e,n=(0,s.useContext)(o.GlobalLayoutRouterContext);if(!n)throw Error("invariant global layout router not mounted");return(0,i.jsx)(S,{segmentPath:t,focusAndScrollRef:n.focusAndScrollRef,children:r})}function T(e){let{parallelRouterKey:t,url:r,childNodes:n,segmentPath:u,tree:c,cacheKey:d}=e,h=(0,s.useContext)(o.GlobalLayoutRouterContext);if(!h)throw Error("invariant global layout router not mounted");let{buildId:f,changeByServerResponse:p,tree:m}=h,y=n.get(d);if(void 0===y){let e={lazyData:null,rsc:null,prefetchRsc:null,head:null,parallelRoutes:new Map,lazyDataResolved:!1};y=e,n.set(d,e)}let v=null!==y.prefetchRsc?y.prefetchRsc:y.rsc,b=(0,s.useDeferredValue)(y.rsc,v),_="object"==typeof b&&null!==b&&"function"==typeof b.then?(0,s.use)(b):b;if(!_){let e=y.lazyData;if(null===e){let t=g(["",...u],m);y.lazyData=e=(0,a.fetchServerResponse)(new URL(r,location.origin),t,h.nextUrl,f),y.lazyDataResolved=!1}let[t,n]=(0,s.use)(e);y.lazyDataResolved||(setTimeout(()=>{(0,s.startTransition)(()=>{p(m,t,n)})}),y.lazyDataResolved=!0),(0,s.use)((0,l.createInfinitePromise)())}return(0,i.jsx)(o.LayoutRouterContext.Provider,{value:{tree:c[1][t],childNodes:y.parallelRoutes,url:r},children:_})}function O(e){let{children:t,loading:r,loadingStyles:n,loadingScripts:o,hasLoading:a}=e;return a?(0,i.jsx)(s.Suspense,{fallback:(0,i.jsxs)(i.Fragment,{children:[n,o,r]}),children:t}):(0,i.jsx)(i.Fragment,{children:t})}function C(e){let{parallelRouterKey:t,segmentPath:r,error:n,errorStyles:a,errorScripts:l,templateStyles:c,templateScripts:d,loading:g,loadingStyles:y,loadingScripts:v,hasLoading:b,template:_,notFound:w,notFoundStyles:S,styles:C}=e,k=(0,s.useContext)(o.LayoutRouterContext);if(!k)throw Error("invariant expected layout router to be mounted");let{childNodes:x,tree:A,url:R}=k,I=x.get(t);I||(I=new Map,x.set(t,I));let P=A[1][t][0],D=(0,p.getSegmentValue)(P),N=[P];return(0,i.jsxs)(i.Fragment,{children:[C,N.map(e=>{let s=(0,p.getSegmentValue)(e),C=(0,m.createRouterCacheKey)(e);return(0,i.jsxs)(o.TemplateContext.Provider,{value:(0,i.jsx)(E,{segmentPath:r,children:(0,i.jsx)(u.ErrorBoundary,{errorComponent:n,errorStyles:a,errorScripts:l,children:(0,i.jsx)(O,{hasLoading:b,loading:g,loadingStyles:y,loadingScripts:v,children:(0,i.jsx)(f.NotFoundBoundary,{notFound:w,notFoundStyles:S,children:(0,i.jsx)(h.RedirectBoundary,{children:(0,i.jsx)(T,{parallelRouterKey:t,url:R,tree:A,childNodes:I,segmentPath:r,cacheKey:C,isActive:D===s})})})})})}),children:[c,d,_]},(0,m.createRouterCacheKey)(e,!0))})]})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},24287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{matchSegment:function(){return i},canSegmentBeOverridden:function(){return s}});let n=r(54269),i=(e,t)=>"string"==typeof e?"string"==typeof t&&e===t:"string"!=typeof t&&e[0]===t[0]&&e[1]===t[1],s=(e,t)=>{var r;return!Array.isArray(e)&&!!Array.isArray(t)&&(null==(r=(0,n.getSegmentParam)(e))?void 0:r.param)===t[0]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return p},useSearchParams:function(){return m},usePathname:function(){return g},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return u.useServerInsertedHTML},useRouter:function(){return y},useParams:function(){return b},useSelectedLayoutSegments:function(){return w},useSelectedLayoutSegment:function(){return S},redirect:function(){return c.redirect},permanentRedirect:function(){return c.permanentRedirect},RedirectType:function(){return c.RedirectType},notFound:function(){return d.notFound}});let n=r(3729),i=r(46860),s=r(78486),o=r(18446),a=r(13717),l=r(19457),u=r(69505),c=r(72792),d=r(70226),h=Symbol("internal for urlsearchparams readonly");function f(){return Error("ReadonlyURLSearchParams cannot be modified")}class p{[Symbol.iterator](){return this[h][Symbol.iterator]()}append(){throw f()}delete(){throw f()}set(){throw f()}sort(){throw f()}constructor(e){this[h]=e,this.entries=e.entries.bind(e),this.forEach=e.forEach.bind(e),this.get=e.get.bind(e),this.getAll=e.getAll.bind(e),this.has=e.has.bind(e),this.keys=e.keys.bind(e),this.values=e.values.bind(e),this.toString=e.toString.bind(e),this.size=e.size}}function m(){(0,o.clientHookInServerComponentError)("useSearchParams");let e=(0,n.useContext)(s.SearchParamsContext),t=(0,n.useMemo)(()=>e?new p(e):null,[e]);{let{bailoutToClientRendering:e}=r(64586);e("useSearchParams()")}return t}function g(){return(0,o.clientHookInServerComponentError)("usePathname"),(0,n.useContext)(s.PathnameContext)}function y(){(0,o.clientHookInServerComponentError)("useRouter");let e=(0,n.useContext)(i.AppRouterContext);if(null===e)throw Error("invariant expected app router to be mounted");return e}function v(e,t){for(let r of(void 0===t&&(t={}),Object.values(e[1]))){let e=r[0],n=Array.isArray(e),i=n?e[1]:e;!i||i.startsWith(l.PAGE_SEGMENT_KEY)||(n&&("c"===e[2]||"oc"===e[2])?t[e[0]]=e[1].split("/"):n&&(t[e[0]]=e[1]),t=v(r,t))}return t}function b(){(0,o.clientHookInServerComponentError)("useParams");let e=(0,n.useContext)(i.GlobalLayoutRouterContext),t=(0,n.useContext)(s.PathParamsContext);return(0,n.useMemo)(()=>(null==e?void 0:e.tree)?v(e.tree):t,[null==e?void 0:e.tree,t])}function _(e,t,r,n){let i;if(void 0===r&&(r=!0),void 0===n&&(n=[]),r)i=e[1][t];else{var s;let t=e[1];i=null!=(s=t.children)?s:Object.values(t)[0]}if(!i)return n;let o=i[0],u=(0,a.getSegmentValue)(o);return!u||u.startsWith(l.PAGE_SEGMENT_KEY)?n:(n.push(u),_(i,t,!1,n))}function w(e){void 0===e&&(e="children"),(0,o.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:t}=(0,n.useContext)(i.LayoutRouterContext);return _(t,e)}function S(e){void 0===e&&(e="children"),(0,o.clientHookInServerComponentError)("useSelectedLayoutSegment");let t=w(e);return 0===t.length?null:t[0]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},13225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NotFoundBoundary",{enumerable:!0,get:function(){return c}});let n=r(17824),i=r(95344),s=n._(r(3729)),o=r(14767),a=r(70226);r(70837);let l=r(46860);class u extends s.default.Component{componentDidCatch(){}static getDerivedStateFromError(e){if((0,a.isNotFoundError)(e))return{notFoundTriggered:!0};throw e}static getDerivedStateFromProps(e,t){return e.pathname!==t.previousPathname&&t.notFoundTriggered?{notFoundTriggered:!1,previousPathname:e.pathname}:{notFoundTriggered:t.notFoundTriggered,previousPathname:e.pathname}}render(){return this.state.notFoundTriggered?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{name:"robots",content:"noindex"}),!1,this.props.notFoundStyles,this.props.notFound]}):this.props.children}constructor(e){super(e),this.state={notFoundTriggered:!!e.asNotFound,previousPathname:e.pathname}}}function c(e){let{notFound:t,notFoundStyles:r,asNotFound:n,children:a}=e,c=(0,o.usePathname)(),d=(0,s.useContext)(l.MissingSlotContext);return t?(0,i.jsx)(u,{pathname:c,notFound:t,notFoundStyles:r,asNotFound:n,missingSlots:d,children:a}):(0,i.jsx)(i.Fragment,{children:a})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70226:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{notFound:function(){return n},isNotFoundError:function(){return i}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},92051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PromiseQueue",{enumerable:!0,get:function(){return u}});let n=r(69996),i=r(67074);var s=i._("_maxConcurrency"),o=i._("_runningCount"),a=i._("_queue"),l=i._("_processNext");class u{enqueue(e){let t,r;let i=new Promise((e,n)=>{t=e,r=n}),s={promiseFn:i,task:async()=>{try{n._(this,o)[o]++;let r=await e();t(r)}catch(e){r(e)}finally{n._(this,o)[o]--,n._(this,l)[l]()}}};return n._(this,a)[a].push(s),n._(this,l)[l](),i}bump(e){let t=n._(this,a)[a].findIndex(t=>t.promiseFn===e);if(t>-1){let e=n._(this,a)[a].splice(t,1)[0];n._(this,a)[a].unshift(e),n._(this,l)[l](!0)}}constructor(e=5){Object.defineProperty(this,l,{value:c}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),n._(this,s)[s]=e,n._(this,o)[o]=0,n._(this,a)[a]=[]}}function c(e){if(void 0===e&&(e=!1),(n._(this,o)[o]<n._(this,s)[s]||e)&&n._(this,a)[a].length>0){var t;null==(t=n._(this,a)[a].shift())||t.task()}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},87046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectErrorBoundary:function(){return u},RedirectBoundary:function(){return c}});let n=r(17824),i=r(95344),s=n._(r(3729)),o=r(14767),a=r(72792);function l(e){let{redirect:t,reset:r,redirectType:n}=e,i=(0,o.useRouter)();return(0,s.useEffect)(()=>{s.default.startTransition(()=>{n===a.RedirectType.push?i.push(t,{}):i.replace(t,{}),r()})},[t,n,r,i]),null}class u extends s.default.Component{static getDerivedStateFromError(e){if((0,a.isRedirectError)(e))return{redirect:(0,a.getURLFromRedirectError)(e),redirectType:(0,a.getRedirectTypeFromError)(e)};throw e}render(){let{redirect:e,redirectType:t}=this.state;return null!==e&&null!==t?(0,i.jsx)(l,{redirect:e,redirectType:t,reset:()=>this.setState({redirect:null})}):this.props.children}constructor(e){super(e),this.state={redirect:null,redirectType:null}}}function c(e){let{children:t}=e,r=(0,o.useRouter)();return(0,i.jsx)(u,{router:r,children:t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17761:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72792:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return n},getRedirectError:function(){return l},redirect:function(){return u},permanentRedirect:function(){return c},isRedirectError:function(){return d},getURLFromRedirectError:function(){return h},getRedirectTypeFromError:function(){return f},getRedirectStatusCodeFromError:function(){return p}});let i=r(55403),s=r(47849),o=r(17761),a="NEXT_REDIRECT";function l(e,t,r){void 0===r&&(r=o.RedirectStatusCode.TemporaryRedirect);let n=Error(a);n.digest=a+";"+t+";"+e+";"+r+";";let s=i.requestAsyncStorage.getStore();return s&&(n.mutableCookies=s.mutableCookies),n}function u(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=s.actionAsyncStorage.getStore();throw l(e,t,(null==r?void 0:r.isAction)?o.RedirectStatusCode.SeeOther:o.RedirectStatusCode.PermanentRedirect)}function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,n,i]=e.digest.split(";",4),s=Number(i);return t===a&&("replace"===r||"push"===r)&&"string"==typeof n&&!isNaN(s)&&s in o.RedirectStatusCode}function h(e){return d(e)?e.digest.split(";",3)[2]:null}function f(e){if(!d(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!d(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(n||(n={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(17824),i=r(95344),s=n._(r(3729)),o=r(46860);function a(){let e=(0,s.useContext)(o.TemplateContext);return(0,i.jsx)(i.Fragment,{children:e})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},69543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"applyFlightData",{enumerable:!0,get:function(){return s}});let n=r(67234),i=r(56408);function s(e,t,r,s){void 0===s&&(s=!1);let[o,a,l]=r.slice(-3);if(null===a)return!1;if(3===r.length){let r=a[2];t.rsc=r,t.prefetchRsc=null,(0,n.fillLazyItemsTillLeafWithHead)(t,e,o,a,l,s)}else t.rsc=e.rsc,t.prefetchRsc=e.prefetchRsc,t.parallelRoutes=new Map(e.parallelRoutes),(0,i.fillCacheWithNewSubTreeData)(t,e,r,s);return!0}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{applyRouterStatePatchToFullTree:function(){return a},applyRouterStatePatchToTreeSkipDefault:function(){return l}});let n=r(19457),i=r(24287);function s(e,t,r){void 0===r&&(r=!1);let[o,a]=e,[l,u]=t;if(!r&&l===n.DEFAULT_SEGMENT_KEY&&o!==n.DEFAULT_SEGMENT_KEY)return e;if((0,i.matchSegment)(o,l)){let t={};for(let e in a)void 0!==u[e]?t[e]=s(a[e],u[e],r):t[e]=a[e];for(let e in u)t[e]||(t[e]=u[e]);let n=[o,t];return e[2]&&(n[2]=e[2]),e[3]&&(n[3]=e[3]),e[4]&&(n[4]=e[4]),n}return t}function o(e,t,r,n){let a;void 0===n&&(n=!1);let[l,u,,,c]=t;if(1===e.length)return s(t,r,n);let[d,h]=e;if(!(0,i.matchSegment)(d,l))return null;if(2===e.length)a=s(u[h],r,n);else if(null===(a=o(e.slice(2),u[h],r,n)))return null;let f=[e[0],{...u,[h]:a}];return c&&(f[4]=!0),f}function a(e,t,r){return o(e,t,r,!0)}function l(e,t,r){return o(e,t,r,!1)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},95684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{extractPathFromFlightRouterState:function(){return u},computeChangedPath:function(){return d}});let n=r(45767),i=r(19457),s=r(24287),o=e=>"/"===e[0]?e.slice(1):e,a=e=>"string"==typeof e?e:e[1];function l(e){return e.reduce((e,t)=>""===(t=o(t))||(0,i.isGroupSegment)(t)?e:e+"/"+t,"")||"/"}function u(e){var t;let r=Array.isArray(e[0])?e[0][1]:e[0];if(r===i.DEFAULT_SEGMENT_KEY||n.INTERCEPTION_ROUTE_MARKERS.some(e=>r.startsWith(e)))return;if(r.startsWith(i.PAGE_SEGMENT_KEY))return"";let s=[r],o=null!=(t=e[1])?t:{},a=o.children?u(o.children):void 0;if(void 0!==a)s.push(a);else for(let[e,t]of Object.entries(o)){if("children"===e)continue;let r=u(t);void 0!==r&&s.push(r)}return l(s)}function c(e,t){let[r,i]=e,[o,l]=t,d=a(r),h=a(o);if(n.INTERCEPTION_ROUTE_MARKERS.some(e=>d.startsWith(e)||h.startsWith(e)))return"";if(!(0,s.matchSegment)(r,o)){var f;return null!=(f=u(t))?f:""}for(let e in i)if(l[e]){let t=c(i[e],l[e]);if(null!==t)return a(o)+"/"+t}return null}function d(e,t){let r=c(e,t);return null==r||"/"===r?r:l(r.split("/"))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47475:(e,t)=>{"use strict";function r(e,t){return void 0===t&&(t=!0),e.pathname+e.search+(t?e.hash:"")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createHrefFromUrl",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},87995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createInitialRouterState",{enumerable:!0,get:function(){return o}});let n=r(47475),i=r(67234),s=r(95684);function o(e){var t;let{buildId:r,initialTree:o,initialSeedData:a,initialCanonicalUrl:l,initialParallelRoutes:u,isServer:c,location:d,initialHead:h}=e,f={lazyData:null,rsc:a[2],prefetchRsc:null,parallelRoutes:c?new Map:u};return(null===u||0===u.size)&&(0,i.fillLazyItemsTillLeafWithHead)(f,void 0,o,a,h),{buildId:r,tree:o,cache:f,prefetchCache:new Map,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:{apply:!1,onlyHashChange:!1,hashFragment:null,segmentPaths:[]},canonicalUrl:d?(0,n.createHrefFromUrl)(d):l,nextUrl:null!=(t=(0,s.extractPathFromFlightRouterState)(o)||(null==d?void 0:d.pathname))?t:null}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},75325:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createRouterCacheKey",{enumerable:!0,get:function(){return i}});let n=r(19457);function i(e,t){return(void 0===t&&(t=!1),Array.isArray(e))?(e[0]+"|"+e[1]+"|"+e[2]).toLowerCase():t&&e.startsWith(n.PAGE_SEGMENT_KEY)?n.PAGE_SEGMENT_KEY:e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},47013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fetchServerResponse",{enumerable:!0,get:function(){return c}});let n=r(15048),i=r(2583),s=r(13664),o=r(8085),a=r(65344),{createFromFetch:l}=r(82228);function u(e){return[(0,i.urlToUrlWithoutFlightMarker)(e).toString(),void 0]}async function c(e,t,r,c,d){let h={[n.RSC_HEADER]:"1",[n.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(t))};d===o.PrefetchKind.AUTO&&(h[n.NEXT_ROUTER_PREFETCH_HEADER]="1"),r&&(h[n.NEXT_URL]=r);let f=(0,a.hexHash)([h[n.NEXT_ROUTER_PREFETCH_HEADER]||"0",h[n.NEXT_ROUTER_STATE_TREE],h[n.NEXT_URL]].join(","));try{let t=new URL(e);t.searchParams.set(n.NEXT_RSC_UNION_QUERY,f);let r=await fetch(t,{credentials:"same-origin",headers:h}),o=(0,i.urlToUrlWithoutFlightMarker)(r.url),a=r.redirected?o:void 0,d=r.headers.get("content-type")||"",p=!!r.headers.get(n.NEXT_DID_POSTPONE_HEADER);if(d!==n.RSC_CONTENT_TYPE_HEADER||!r.ok)return e.hash&&(o.hash=e.hash),u(o.toString());let[m,g]=await l(Promise.resolve(r),{callServer:s.callServer});if(c!==m)return u(r.url);return[g,a,p]}catch(t){return console.error("Failed to fetch RSC payload for "+e+". Falling back to browser navigation.",t),[e.toString(),void 0]}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},77676:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillCacheWithDataProperty",{enumerable:!0,get:function(){return i}});let n=r(75325);function i(e,t,r,s){let o=r.length<=2,[a,l]=r,u=(0,n.createRouterCacheKey)(l),c=t.parallelRoutes.get(a),d=e.parallelRoutes.get(a);d&&d!==c||(d=new Map(c),e.parallelRoutes.set(a,d));let h=null==c?void 0:c.get(u),f=d.get(u);if(o){f&&f.lazyData&&f!==h||d.set(u,{lazyData:s(),rsc:null,prefetchRsc:null,parallelRoutes:new Map});return}if(!f||!h){f||d.set(u,{lazyData:s(),rsc:null,prefetchRsc:null,parallelRoutes:new Map});return}return f===h&&(f={lazyData:f.lazyData,rsc:f.rsc,prefetchRsc:f.prefetchRsc,parallelRoutes:new Map(f.parallelRoutes)},d.set(u,f)),i(f,h,r.slice(2),s)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},56408:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillCacheWithNewSubTreeData",{enumerable:!0,get:function(){return o}});let n=r(20250),i=r(67234),s=r(75325);function o(e,t,r,a){let l=r.length<=5,[u,c]=r,d=(0,s.createRouterCacheKey)(c),h=t.parallelRoutes.get(u);if(!h)return;let f=e.parallelRoutes.get(u);f&&f!==h||(f=new Map(h),e.parallelRoutes.set(u,f));let p=h.get(d),m=f.get(d);if(l){if(!m||!m.lazyData||m===p){let e=r[3];m={lazyData:null,rsc:e[2],prefetchRsc:null,parallelRoutes:p?new Map(p.parallelRoutes):new Map},p&&(0,n.invalidateCacheByRouterState)(m,p,r[2]),(0,i.fillLazyItemsTillLeafWithHead)(m,p,r[2],e,r[4],a),f.set(d,m)}return}m&&p&&(m===p&&(m={lazyData:m.lazyData,rsc:m.rsc,prefetchRsc:m.prefetchRsc,parallelRoutes:new Map(m.parallelRoutes)},f.set(d,m)),o(m,p,r.slice(2),a))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fillLazyItemsTillLeafWithHead",{enumerable:!0,get:function(){return i}});let n=r(75325);function i(e,t,r,s,o,a){if(0===Object.keys(r[1]).length){e.head=o;return}for(let l in r[1]){let u;let c=r[1][l],d=c[0],h=(0,n.createRouterCacheKey)(d),f=null!==s&&void 0!==s[1][l]?s[1][l]:null;if(t){let r=t.parallelRoutes.get(l);if(r){let t,n=new Map(r),s=n.get(h);t=null!==f?{lazyData:null,rsc:f[2],prefetchRsc:null,parallelRoutes:new Map(null==s?void 0:s.parallelRoutes)}:a&&s?{lazyData:s.lazyData,rsc:s.rsc,prefetchRsc:s.prefetchRsc,parallelRoutes:new Map(s.parallelRoutes)}:{lazyData:null,rsc:null,prefetchRsc:null,parallelRoutes:new Map(null==s?void 0:s.parallelRoutes)},n.set(h,t),i(t,s,c,f||null,o,a),e.parallelRoutes.set(l,n);continue}}u=null!==f?{lazyData:null,rsc:f[2],prefetchRsc:null,parallelRoutes:new Map}:{lazyData:null,rsc:null,prefetchRsc:null,parallelRoutes:new Map};let p=e.parallelRoutes.get(l);p?p.set(h,u):e.parallelRoutes.set(l,new Map([[h,u]])),i(u,void 0,c,f,o,a)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},80696:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PrefetchCacheEntryStatus:function(){return r},getPrefetchEntryCacheStatus:function(){return s}});let n=3e5,i=3e4;function s(e){let{kind:t,prefetchTime:r,lastUsedTime:s}=e;return Date.now()<(null!=s?s:r)+i?s?"reusable":"fresh":"auto"===t&&Date.now()<r+n?"stale":"full"===t&&Date.now()<r+n?"reusable":"expired"}(function(e){e.fresh="fresh",e.reusable="reusable",e.expired="expired",e.stale="stale"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},44080:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleMutable",{enumerable:!0,get:function(){return s}});let n=r(95684);function i(e){return void 0!==e}function s(e,t){var r,s,o;let a=null==(s=t.shouldScroll)||s,l=e.nextUrl;if(i(t.patchedTree)){let r=(0,n.computeChangedPath)(e.tree,t.patchedTree);r?l=r:l||(l=e.canonicalUrl)}return{buildId:e.buildId,canonicalUrl:i(t.canonicalUrl)?t.canonicalUrl===e.canonicalUrl?e.canonicalUrl:t.canonicalUrl:e.canonicalUrl,pushRef:{pendingPush:i(t.pendingPush)?t.pendingPush:e.pushRef.pendingPush,mpaNavigation:i(t.mpaNavigation)?t.mpaNavigation:e.pushRef.mpaNavigation,preserveCustomHistoryState:i(t.preserveCustomHistoryState)?t.preserveCustomHistoryState:e.pushRef.preserveCustomHistoryState},focusAndScrollRef:{apply:!!a&&(!!i(null==t?void 0:t.scrollableSegments)||e.focusAndScrollRef.apply),onlyHashChange:!!t.hashFragment&&e.canonicalUrl.split("#",1)[0]===(null==(r=t.canonicalUrl)?void 0:r.split("#",1)[0]),hashFragment:a?t.hashFragment&&""!==t.hashFragment?decodeURIComponent(t.hashFragment.slice(1)):e.focusAndScrollRef.hashFragment:null,segmentPaths:a?null!=(o=null==t?void 0:t.scrollableSegments)?o:e.focusAndScrollRef.segmentPaths:[]},cache:t.cache?t.cache:e.cache,prefetchCache:t.prefetchCache?t.prefetchCache:e.prefetchCache,tree:i(t.patchedTree)?t.patchedTree:e.tree,nextUrl:l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSegmentMismatch",{enumerable:!0,get:function(){return i}});let n=r(69643);function i(e,t,r){return(0,n.handleExternalUrl)(e,{},e.canonicalUrl,!0)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},32293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheBelowFlightSegmentPath",{enumerable:!0,get:function(){return i}});let n=r(75325);function i(e,t,r){let s=r.length<=2,[o,a]=r,l=(0,n.createRouterCacheKey)(a),u=t.parallelRoutes.get(o);if(!u)return;let c=e.parallelRoutes.get(o);if(c&&c!==u||(c=new Map(u),e.parallelRoutes.set(o,c)),s){c.delete(l);return}let d=u.get(l),h=c.get(l);h&&d&&(h===d&&(h={lazyData:h.lazyData,rsc:h.rsc,prefetchRsc:h.prefetchRsc,parallelRoutes:new Map(h.parallelRoutes)},c.set(l,h)),i(h,d,r.slice(2)))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},20250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"invalidateCacheByRouterState",{enumerable:!0,get:function(){return i}});let n=r(75325);function i(e,t,r){for(let i in r[1]){let s=r[1][i][0],o=(0,n.createRouterCacheKey)(s),a=t.parallelRoutes.get(i);if(a){let t=new Map(a);t.delete(o),e.parallelRoutes.set(i,t)}}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},53694:(e,t)=>{"use strict";function r(e,t){let n=e[0],i=t[0];if(Array.isArray(n)&&Array.isArray(i)){if(n[0]!==i[0]||n[2]!==i[2])return!0}else if(n!==i)return!0;if(e[4])return!t[4];if(t[4])return!0;let s=Object.values(e[1])[0],o=Object.values(t[1])[0];return!s||!o||r(s,o)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNavigatingToNewRootLayout",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},13026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{updateCacheNodeOnNavigation:function(){return o},listenForDynamicRequest:function(){return d},abortTask:function(){return g},updateCacheNodeOnPopstateRestoration:function(){return v}});let n=r(19457),i=r(24287),s=r(75325);function o(e,t,r,d,h,f){let p=t[1],m=r[1],g=d[1],y=e.parallelRoutes,v=new Map(y),b={},_=null;for(let e in m){let t;let r=m[e],a=p[e],d=y.get(e),w=g[e],S=r[0],E=(0,s.createRouterCacheKey)(S),T=void 0!==a?a[0]:void 0,O=void 0!==d?d.get(E):void 0;if(null!==(t=S===n.PAGE_SEGMENT_KEY?l(r,void 0!==w?w:null,h,f):S===n.DEFAULT_SEGMENT_KEY?void 0!==a?u(a):l(r,void 0!==w?w:null,h,f):void 0!==T&&(0,i.matchSegment)(S,T)&&void 0!==O&&void 0!==a?null!=w?o(O,a,r,w,h,f):c(r):l(r,void 0!==w?w:null,h,f))){null===_&&(_=new Map),_.set(e,t);let r=t.node;if(null!==r){let t=new Map(d);t.set(E,r),v.set(e,t)}b[e]=t.route}else b[e]=r}if(null===_)return null;let w={lazyData:null,rsc:e.rsc,prefetchRsc:e.prefetchRsc,head:e.head,prefetchHead:e.prefetchHead,parallelRoutes:v};return{route:a(r,b),node:w,children:_}}function a(e,t){let r=[e[0],t];return 2 in e&&(r[2]=e[2]),3 in e&&(r[3]=e[3]),4 in e&&(r[4]=e[4]),r}function l(e,t,r,n){let i=p(e,t,r,n);return{route:e,node:i,children:null}}function u(e){return{route:e,node:null,children:null}}function c(e){let t=p(e,null,null,!1);return{route:e,node:t,children:null}}function d(e,t){t.then(t=>{for(let r of t[0]){let t=r.slice(0,-3),n=r[r.length-3],i=r[r.length-2],s=r[r.length-1];"string"!=typeof t&&h(e,t,n,i,s)}g(e,null)},t=>{g(e,t)})}function h(e,t,r,n,s){let o=e;for(let e=0;e<t.length;e+=2){let r=t[e],n=t[e+1],s=o.children;if(null!==s){let e=s.get(r);if(void 0!==e){let t=e.route[0];if((0,i.matchSegment)(n,t)){o=e;continue}}}return}f(o,r,n,s)}function f(e,t,r,n){let s=e.children,o=e.node;if(null===s){null!==o&&(m(o,e.route,t,r,n),e.node=null);return}let a=t[1],l=r[1];for(let e in t){let t=a[e],r=l[e],o=s.get(e);if(void 0!==o){let e=o.route[0];if((0,i.matchSegment)(t[0],e)&&null!=r)return f(o,t,r,n)}}}function p(e,t,r,n){let i=e[1],o=null!==t?t[1]:null,a=new Map;for(let e in i){let t=i[e],l=null!==o?o[e]:null,u=t[0],c=(0,s.createRouterCacheKey)(u),d=p(t,void 0===l?null:l,r,n),h=new Map;h.set(c,d),a.set(e,h)}let l=0===a.size,u=null!==t?t[2]:null;return{lazyData:null,parallelRoutes:a,prefetchRsc:n||void 0===u?null:u,prefetchHead:!n&&l?r:null,rsc:w(),head:l?w():null}}function m(e,t,r,n,o){let a=t[1],l=r[1],u=n[1],c=e.parallelRoutes;for(let e in a){let t=a[e],r=l[e],n=u[e],d=c.get(e),h=t[0],f=(0,s.createRouterCacheKey)(h),p=void 0!==d?d.get(f):void 0;void 0!==p&&(void 0!==r&&(0,i.matchSegment)(h,r[0])&&null!=n?m(p,t,r,n,o):y(t,p,null))}let d=e.rsc,h=n[2];null===d?e.rsc=h:_(d)&&d.resolve(h);let f=e.head;_(f)&&f.resolve(o)}function g(e,t){let r=e.node;if(null===r)return;let n=e.children;if(null===n)y(e.route,r,t);else for(let e of n.values())g(e,t);e.node=null}function y(e,t,r){let n=e[1],i=t.parallelRoutes;for(let e in n){let t=n[e],o=i.get(e);if(void 0===o)continue;let a=t[0],l=(0,s.createRouterCacheKey)(a),u=o.get(l);void 0!==u&&y(t,u,r)}let o=t.rsc;_(o)&&(null===r?o.resolve(null):o.reject(r));let a=t.head;_(a)&&a.resolve(null)}function v(e,t){let r=t[1],n=e.parallelRoutes,i=new Map(n);for(let e in r){let t=r[e],o=t[0],a=(0,s.createRouterCacheKey)(o),l=n.get(e);if(void 0!==l){let r=l.get(a);if(void 0!==r){let n=v(r,t),s=new Map(l);s.set(a,n),i.set(e,s)}}}let o=e.rsc,a=_(o)&&"pending"===o.status;return{lazyData:null,rsc:o,head:e.head,prefetchHead:a?e.prefetchHead:null,prefetchRsc:a?e.prefetchRsc:null,parallelRoutes:i}}let b=Symbol();function _(e){return e&&e.tag===b}function w(){let e,t;let r=new Promise((r,n)=>{e=r,t=n});return r.status="pending",r.resolve=t=>{if("pending"===r.status){let n=r;n.status="fulfilled",n.value=t,e(t)}},r.reject=e=>{if("pending"===r.status){let n=r;n.status="rejected",n.reason=e,t(e)}},r.tag=b,r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},94813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createPrefetchCacheKey",{enumerable:!0,get:function(){return o}});let n=r(71870),i=r(86050),s=r(47475);function o(e,t){let r=(0,s.createHrefFromUrl)(e,!1),o=""+t+"%";return t&&!(0,i.pathHasPrefix)(r,t)?(0,n.addPathPrefix)(r,o):r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},52298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"fastRefreshReducer",{enumerable:!0,get:function(){return n}}),r(47013),r(47475),r(71697),r(53694),r(69643),r(44080),r(69543),r(2583),r(71418);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7550:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"findHeadInCache",{enumerable:!0,get:function(){return i}});let n=r(75325);function i(e,t){return s(e,t,"")}function s(e,t,r){if(0===Object.keys(t).length)return[e,r];for(let i in t){let[o,a]=t[i],l=e.parallelRoutes.get(i);if(!l)continue;let u=(0,n.createRouterCacheKey)(o),c=l.get(u);if(!c)continue;let d=s(c,a,r+"/"+u);if(d)return d}return null}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},13717:(e,t)=>{"use strict";function r(e){return Array.isArray(e)?e[1]:e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentValue",{enumerable:!0,get:function(){return r}}),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},69643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{handleExternalUrl:function(){return b},navigateReducer:function(){return S}});let n=r(47013),i=r(47475),s=r(32293),o=r(77676),a=r(71697),l=r(37528),u=r(53694),c=r(8085),d=r(44080),h=r(69543),f=r(80696),p=r(22574),m=r(7772),g=r(2583),y=r(19457),v=(r(13026),r(94813));function b(e,t,r,n){return t.mpaNavigation=!0,t.canonicalUrl=r,t.pendingPush=n,t.scrollableSegments=void 0,(0,d.handleMutable)(e,t)}function _(e){let t=[],[r,n]=e;if(0===Object.keys(n).length)return[[r]];for(let[e,i]of Object.entries(n))for(let n of _(i))""===r?t.push([e,...n]):t.push([r,e,...n]);return t}function w(e,t,r,n,i){let s=!1;for(let a of(e.rsc=t.rsc,e.prefetchRsc=t.prefetchRsc,e.parallelRoutes=new Map(t.parallelRoutes),_(n).map(e=>[...r,...e])))(0,o.fillCacheWithDataProperty)(e,t,a,i),s=!0;return s}let S=E;function E(e,t){let{url:r,isExternalUrl:o,navigateType:S,shouldScroll:E}=t,T={},{hash:O}=r,C=(0,i.createHrefFromUrl)(r),k="push"===S;if((0,p.prunePrefetchCache)(e.prefetchCache),T.preserveCustomHistoryState=!1,o)return b(e,T,r.toString(),k);let x=(0,v.createPrefetchCacheKey)(r,e.nextUrl),A=e.prefetchCache.get(x);if(!A){let t={data:(0,n.fetchServerResponse)(r,e.tree,e.nextUrl,e.buildId,void 0),kind:c.PrefetchKind.TEMPORARY,prefetchTime:Date.now(),treeAtTimeOfPrefetch:e.tree,lastUsedTime:null};e.prefetchCache.set(x,t),A=t}let R=(0,f.getPrefetchEntryCacheStatus)(A),{treeAtTimeOfPrefetch:I,data:P}=A;return m.prefetchQueue.bump(P),P.then(t=>{let[o,c,p]=t;if(A&&!A.lastUsedTime&&(A.lastUsedTime=Date.now()),"string"==typeof o)return b(e,T,o,k);let m=e.tree,v=e.cache,S=[];for(let t of o){let i=t.slice(0,-4),o=t.slice(-3)[0],c=["",...i],d=(0,a.applyRouterStatePatchToTreeSkipDefault)(c,m,o);if(null===d&&(d=(0,a.applyRouterStatePatchToTreeSkipDefault)(c,I,o)),null!==d){if((0,u.isNavigatingToNewRootLayout)(m,d))return b(e,T,C,k);let a=(0,g.createEmptyCacheNode)(),E=(0,h.applyFlightData)(v,a,t,(null==A?void 0:A.kind)==="auto"&&R===f.PrefetchCacheEntryStatus.reusable);for(let t of((!E&&R===f.PrefetchCacheEntryStatus.stale||p)&&(E=w(a,v,i,o,()=>(0,n.fetchServerResponse)(r,m,e.nextUrl,e.buildId))),(0,l.shouldHardNavigate)(c,m)?(a.rsc=v.rsc,a.prefetchRsc=v.prefetchRsc,(0,s.invalidateCacheBelowFlightSegmentPath)(a,v,i),T.cache=a):E&&(T.cache=a),v=a,m=d,_(o))){let e=[...i,...t];e[e.length-1]!==y.DEFAULT_SEGMENT_KEY&&S.push(e)}}}return T.patchedTree=m,T.canonicalUrl=c?(0,i.createHrefFromUrl)(c):C,T.pendingPush=k,T.scrollableSegments=S,T.hashFragment=O,T.shouldScroll=E,(0,d.handleMutable)(e,T)},()=>e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{prefetchQueue:function(){return u},prefetchReducer:function(){return c}});let n=r(47013),i=r(8085),s=r(22574),o=r(15048),a=r(92051),l=r(94813),u=new a.PromiseQueue(5);function c(e,t){(0,s.prunePrefetchCache)(e.prefetchCache);let{url:r}=t;r.searchParams.delete(o.NEXT_RSC_UNION_QUERY);let a=(0,l.createPrefetchCacheKey)(r,e.nextUrl),c=e.prefetchCache.get(a);if(c&&(c.kind===i.PrefetchKind.TEMPORARY&&e.prefetchCache.set(a,{...c,kind:t.kind}),!(c.kind===i.PrefetchKind.AUTO&&t.kind===i.PrefetchKind.FULL)))return e;let d=u.enqueue(()=>(0,n.fetchServerResponse)(r,e.tree,e.nextUrl,e.buildId,t.kind));return e.prefetchCache.set(a,{treeAtTimeOfPrefetch:e.tree,data:d,kind:t.kind,prefetchTime:Date.now(),lastUsedTime:null}),e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"prunePrefetchCache",{enumerable:!0,get:function(){return i}});let n=r(80696);function i(e){for(let[t,r]of e)(0,n.getPrefetchEntryCacheStatus)(r)===n.PrefetchCacheEntryStatus.expired&&e.delete(t)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"refreshReducer",{enumerable:!0,get:function(){return h}});let n=r(47013),i=r(47475),s=r(71697),o=r(53694),a=r(69643),l=r(44080),u=r(67234),c=r(2583),d=r(71418);function h(e,t){let{origin:r}=t,h={},f=e.canonicalUrl,p=e.tree;h.preserveCustomHistoryState=!1;let m=(0,c.createEmptyCacheNode)();return m.lazyData=(0,n.fetchServerResponse)(new URL(f,r),[p[0],p[1],p[2],"refetch"],e.nextUrl,e.buildId),m.lazyData.then(r=>{let[n,c]=r;if("string"==typeof n)return(0,a.handleExternalUrl)(e,h,n,e.pushRef.pendingPush);for(let r of(m.lazyData=null,n)){if(3!==r.length)return console.log("REFRESH FAILED"),e;let[n]=r,l=(0,s.applyRouterStatePatchToFullTree)([""],p,n);if(null===l)return(0,d.handleSegmentMismatch)(e,t,n);if((0,o.isNavigatingToNewRootLayout)(p,l))return(0,a.handleExternalUrl)(e,h,f,e.pushRef.pendingPush);let g=c?(0,i.createHrefFromUrl)(c):void 0;c&&(h.canonicalUrl=g);let[y,v]=r.slice(-2);if(null!==y){let e=y[2];m.rsc=e,m.prefetchRsc=null,(0,u.fillLazyItemsTillLeafWithHead)(m,void 0,n,y,v),h.cache=m,h.prefetchCache=new Map}h.patchedTree=l,h.canonicalUrl=f,p=l}return(0,l.handleMutable)(e,h)},()=>e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},25206:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"restoreReducer",{enumerable:!0,get:function(){return s}});let n=r(47475),i=r(95684);function s(e,t){var r;let{url:s,tree:o}=t,a=(0,n.createHrefFromUrl)(s),l=o||e.tree,u=e.cache;return{buildId:e.buildId,canonicalUrl:a,pushRef:{pendingPush:!1,mpaNavigation:!1,preserveCustomHistoryState:!0},focusAndScrollRef:e.focusAndScrollRef,cache:u,prefetchCache:e.prefetchCache,tree:l,nextUrl:null!=(r=(0,i.extractPathFromFlightRouterState)(l))?r:s.pathname}}r(13026),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverActionReducer",{enumerable:!0,get:function(){return v}});let n=r(13664),i=r(15048),s=r(88928),o=r(47475),a=r(69643),l=r(71697),u=r(53694),c=r(44080),d=r(67234),h=r(2583),f=r(95684),p=r(71418),{createFromFetch:m,encodeReply:g}=r(82228);async function y(e,t){let r,{actionId:o,actionArgs:a}=t,l=await g(a),u=(0,f.extractPathFromFlightRouterState)(e.tree),c=e.nextUrl&&e.nextUrl!==u,d=await fetch("",{method:"POST",headers:{Accept:i.RSC_CONTENT_TYPE_HEADER,[i.ACTION]:o,[i.NEXT_ROUTER_STATE_TREE]:encodeURIComponent(JSON.stringify(e.tree)),...c?{[i.NEXT_URL]:e.nextUrl}:{}},body:l}),h=d.headers.get("x-action-redirect");try{let e=JSON.parse(d.headers.get("x-action-revalidated")||"[[],0,0]");r={paths:e[0]||[],tag:!!e[1],cookie:e[2]}}catch(e){r={paths:[],tag:!1,cookie:!1}}let p=h?new URL((0,s.addBasePath)(h),new URL(e.canonicalUrl,window.location.href)):void 0;if(d.headers.get("content-type")===i.RSC_CONTENT_TYPE_HEADER){let e=await m(Promise.resolve(d),{callServer:n.callServer});if(h){let[,t]=null!=e?e:[];return{actionFlightData:t,redirectLocation:p,revalidatedParts:r}}let[t,[,i]]=null!=e?e:[];return{actionResult:t,actionFlightData:i,redirectLocation:p,revalidatedParts:r}}return{redirectLocation:p,revalidatedParts:r}}function v(e,t){let{resolve:r,reject:n}=t,i={},s=e.canonicalUrl,f=e.tree;return i.preserveCustomHistoryState=!1,i.inFlightServerAction=y(e,t),i.inFlightServerAction.then(n=>{let{actionResult:m,actionFlightData:g,redirectLocation:y}=n;if(y&&(e.pushRef.pendingPush=!0,i.pendingPush=!0),!g)return(r(m),y)?(0,a.handleExternalUrl)(e,i,y.href,e.pushRef.pendingPush):e;if("string"==typeof g)return(0,a.handleExternalUrl)(e,i,g,e.pushRef.pendingPush);for(let r of(i.inFlightServerAction=null,g)){if(3!==r.length)return console.log("SERVER ACTION APPLY FAILED"),e;let[n]=r,o=(0,l.applyRouterStatePatchToFullTree)([""],f,n);if(null===o)return(0,p.handleSegmentMismatch)(e,t,n);if((0,u.isNavigatingToNewRootLayout)(f,o))return(0,a.handleExternalUrl)(e,i,s,e.pushRef.pendingPush);let[c,m]=r.slice(-2),g=null!==c?c[2]:null;if(null!==g){let e=(0,h.createEmptyCacheNode)();e.rsc=g,e.prefetchRsc=null,(0,d.fillLazyItemsTillLeafWithHead)(e,void 0,n,c,m),i.cache=e,i.prefetchCache=new Map}i.patchedTree=o,i.canonicalUrl=s,f=o}if(y){let e=(0,o.createHrefFromUrl)(y,!1);i.canonicalUrl=e}return r(m),(0,c.handleMutable)(e,i)},t=>(n(t.reason),e))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},57910:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"serverPatchReducer",{enumerable:!0,get:function(){return d}});let n=r(47475),i=r(71697),s=r(53694),o=r(69643),a=r(69543),l=r(44080),u=r(2583),c=r(71418);function d(e,t){let{flightData:r,overrideCanonicalUrl:d}=t,h={};if(h.preserveCustomHistoryState=!1,"string"==typeof r)return(0,o.handleExternalUrl)(e,h,r,e.pushRef.pendingPush);let f=e.tree,p=e.cache;for(let l of r){let r=l.slice(0,-4),[m]=l.slice(-3,-2),g=(0,i.applyRouterStatePatchToTreeSkipDefault)(["",...r],f,m);if(null===g)return(0,c.handleSegmentMismatch)(e,t,m);if((0,s.isNavigatingToNewRootLayout)(f,g))return(0,o.handleExternalUrl)(e,h,e.canonicalUrl,e.pushRef.pendingPush);let y=d?(0,n.createHrefFromUrl)(d):void 0;y&&(h.canonicalUrl=y);let v=(0,u.createEmptyCacheNode)();(0,a.applyFlightData)(p,v,l),h.patchedTree=g,h.cache=v,p=v,f=g}return(0,l.handleMutable)(e,h)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8085:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PrefetchKind:function(){return r},ACTION_REFRESH:function(){return n},ACTION_NAVIGATE:function(){return i},ACTION_RESTORE:function(){return s},ACTION_SERVER_PATCH:function(){return o},ACTION_PREFETCH:function(){return a},ACTION_FAST_REFRESH:function(){return l},ACTION_SERVER_ACTION:function(){return u},isThenable:function(){return c}});let n="refresh",i="navigate",s="restore",o="server-patch",a="prefetch",l="fast-refresh",u="server-action";function c(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(function(e){e.AUTO="auto",e.FULL="full",e.TEMPORARY="temporary"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},73479:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"reducer",{enumerable:!0,get:function(){return n}}),r(8085),r(69643),r(57910),r(25206),r(17787),r(7772),r(52298),r(9501);let n=function(e,t){return e};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},37528:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"shouldHardNavigate",{enumerable:!0,get:function(){return i}});let n=r(24287);function i(e,t){let[r,s]=t,[o,a]=e;return(0,n.matchSegment)(o,r)?!(e.length<=2)&&i(e.slice(2),s[a]):!!Array.isArray(o)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},25517:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createSearchParamsBailoutProxy",{enumerable:!0,get:function(){return i}});let n=r(1396);function i(){return new Proxy({},{get(e,t){"string"==typeof t&&(0,n.staticGenerationBailout)("searchParams."+t)}})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isStaticGenBailoutError:function(){return a},staticGenerationBailout:function(){return u}});let n=r(3082),i=r(94749),s="NEXT_STATIC_GEN_BAILOUT";class o extends Error{constructor(...e){super(...e),this.code=s}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===s}function l(e,t){let{dynamic:r,link:n}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let u=(e,t)=>{let{dynamic:r,link:s}=void 0===t?{}:t,a=i.staticGenerationAsyncStorage.getStore();if(!a)return!1;if(a.forceStatic)return!0;if(a.dynamicShouldError)throw new o(l(e,{link:s,dynamic:null!=r?r:"error"}));let u=l(e,{dynamic:r,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==a.postpone||a.postpone.call(a,e),a.revalidate=0,a.isStaticGeneration){let t=new n.DynamicServerError(u);throw a.dynamicUsageDescription=e,a.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},43982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),r(39694);let n=r(95344);r(3729);let i=r(25517);function s(e){let{Component:t,propsForComponent:r,isStaticGeneration:s}=e;if(s){let e=(0,i.createSearchParamsBailoutProxy)();return(0,n.jsx)(t,{searchParams:e,...r})}return(0,n.jsx)(t,{...r})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{useUnwrapState:function(){return o},useReducerWithReduxDevtools:function(){return a}});let n=r(17824)._(r(3729)),i=r(8085);function s(e){if(e instanceof Map){let t={};for(let[r,n]of e.entries()){if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n._bundlerConfig){t[r]="FlightData";continue}}t[r]=s(n)}return t}if("object"==typeof e&&null!==e){let t={};for(let r in e){let n=e[r];if("function"==typeof n){t[r]="fn()";continue}if("object"==typeof n&&null!==n){if(n.$$typeof){t[r]=n.$$typeof.toString();continue}if(n.hasOwnProperty("_bundlerConfig")){t[r]="FlightData";continue}}t[r]=s(n)}return t}return Array.isArray(e)?e.map(s):e}function o(e){return(0,i.isThenable)(e)?(0,n.use)(e):e}r(34087);let a=function(e){return[e,()=>{},()=>{}]};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},73055:(e,t,r)=>{"use strict";function n(e,t,r,n){return!1}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return n}}),r(19847),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},96411:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"hasBasePath",{enumerable:!0,get:function(){return s}});let n=r(86050),i="";function s(e){return(0,n.pathHasPrefix)(e,i)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},31900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return b}});let n=r(39694),i=r(17824),s=r(95344),o=i._(r(3729)),a=n._(r(81202)),l=n._(r(1758)),u=r(83855),c=r(73053),d=r(74187);r(70837);let h=r(66150),f=n._(r(74931)),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function m(e,t,r,n,i,s){let o=null==e?void 0:e.src;e&&e["data-loaded-src"]!==o&&(e["data-loaded-src"]=o,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),null==r?void 0:r.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}(null==n?void 0:n.current)&&n.current(e)}}))}function g(e){let[t,r]=o.version.split(".",2),n=parseInt(t,10),i=parseInt(r,10);return n>18||18===n&&i>=3?{fetchPriority:e}:{fetchpriority:e}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let y=(0,o.forwardRef)((e,t)=>{let{src:r,srcSet:n,sizes:i,height:a,width:l,decoding:u,className:c,style:d,fetchPriority:h,placeholder:f,loading:p,unoptimized:y,fill:v,onLoadRef:b,onLoadingCompleteRef:_,setBlurComplete:w,setShowAltText:S,onLoad:E,onError:T,...O}=e;return(0,s.jsx)("img",{...O,...g(h),loading:p,width:l,height:a,decoding:u,"data-nimg":v?"fill":"1",className:c,style:d,sizes:i,srcSet:n,src:r,ref:(0,o.useCallback)(e=>{t&&("function"==typeof t?t(e):"object"==typeof t&&(t.current=e)),e&&(T&&(e.src=e.src),e.complete&&m(e,f,b,_,w,y))},[r,f,b,_,w,T,y,t]),onLoad:e=>{m(e.currentTarget,f,b,_,w,y)},onError:e=>{S(!0),"empty"!==f&&w(!0),T&&T(e)}})});function v(e){let{isAppRouter:t,imgAttributes:r}=e,n={as:"image",imageSrcSet:r.srcSet,imageSizes:r.sizes,crossOrigin:r.crossOrigin,referrerPolicy:r.referrerPolicy,...g(r.fetchPriority)};return t&&a.default.preload?(a.default.preload(r.src,n),null):(0,s.jsx)(l.default,{children:(0,s.jsx)("link",{rel:"preload",href:r.srcSet?void 0:r.src,...n},"__nimg-"+r.src+r.srcSet+r.sizes)})}let b=(0,o.forwardRef)((e,t)=>{let r=!(0,o.useContext)(h.RouterContext),n=(0,o.useContext)(d.ImageConfigContext),i=(0,o.useMemo)(()=>{let e=p||n||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r}},[n]),{onLoad:a,onLoadingComplete:l}=e,m=(0,o.useRef)(a);(0,o.useEffect)(()=>{m.current=a},[a]);let g=(0,o.useRef)(l);(0,o.useEffect)(()=>{g.current=l},[l]);let[b,_]=(0,o.useState)(!1),[w,S]=(0,o.useState)(!1),{props:E,meta:T}=(0,u.getImgProps)(e,{defaultLoader:f.default,imgConf:i,blurComplete:b,showAltText:w});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{...E,unoptimized:T.unoptimized,placeholder:T.placeholder,fill:T.fill,onLoadRef:m,onLoadingCompleteRef:g,setBlurComplete:_,setShowAltText:S,ref:t}),T.priority?(0,s.jsx)(v,{isAppRouter:r,imgAttributes:E}):null]})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},61476:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return _}});let n=r(39694),i=r(95344),s=n._(r(3729)),o=r(26656),a=r(76737),l=r(92421),u=r(10853),c=r(41314),d=r(66150),h=r(46860),f=r(3470),p=r(73055),m=r(88928),g=r(8085);function y(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}function v(e,t,r,n,i,o,l,u,c){let{nodeName:d}=e.currentTarget;if("A"===d.toUpperCase()&&(y(e)||!c&&!(0,a.isLocalURL)(r)))return;e.preventDefault();let h=()=>{let e=null==l||l;"beforePopState"in t?t[i?"replace":"push"](r,n,{shallow:o,locale:u,scroll:e}):t[i?"replace":"push"](n||r,{scroll:e})};c?s.default.startTransition(h):h()}function b(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}let _=s.default.forwardRef(function(e,t){let r,n;let{href:a,as:l,children:y,prefetch:_=null,passHref:w,replace:S,shallow:E,scroll:T,locale:O,onClick:C,onMouseEnter:k,onTouchStart:x,legacyBehavior:A=!1,...R}=e;r=y,A&&("string"==typeof r||"number"==typeof r)&&(r=(0,i.jsx)("a",{children:r}));let I=s.default.useContext(d.RouterContext),P=s.default.useContext(h.AppRouterContext),D=null!=I?I:P,N=!I,M=!1!==_,j=null===_?g.PrefetchKind.AUTO:g.PrefetchKind.FULL,{href:L,as:F}=s.default.useMemo(()=>{if(!I){let e=b(a);return{href:e,as:l?b(l):e}}let[e,t]=(0,o.resolveHref)(I,a,!0);return{href:e,as:l?(0,o.resolveHref)(I,l):t||e}},[I,a,l]),U=s.default.useRef(L),B=s.default.useRef(F);A&&(n=s.default.Children.only(r));let V=A?n&&"object"==typeof n&&n.ref:t,[H,z,W]=(0,f.useIntersection)({rootMargin:"200px"}),q=s.default.useCallback(e=>{(B.current!==F||U.current!==L)&&(W(),B.current=F,U.current=L),H(e),V&&("function"==typeof V?V(e):"object"==typeof V&&(V.current=e))},[F,V,L,W,H]);s.default.useEffect(()=>{},[F,L,z,O,M,null==I?void 0:I.locale,D,N,j]);let $={ref:q,onClick(e){A||"function"!=typeof C||C(e),A&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(e),D&&!e.defaultPrevented&&v(e,D,L,F,S,E,T,O,N)},onMouseEnter(e){A||"function"!=typeof k||k(e),A&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e)},onTouchStart(e){A||"function"!=typeof x||x(e),A&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e)}};if((0,u.isAbsoluteUrl)(F))$.href=F;else if(!A||w||"a"===n.type&&!("href"in n.props)){let e=void 0!==O?O:null==I?void 0:I.locale,t=(null==I?void 0:I.isLocaleDomain)&&(0,p.getDomainLocale)(F,e,null==I?void 0:I.locales,null==I?void 0:I.domainLocales);$.href=t||(0,m.addBasePath)((0,c.addLocale)(F,e,null==I?void 0:I.defaultLocale))}return A?s.default.cloneElement(n,$):(0,i.jsx)("a",{...R,...$,children:r})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19847:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathTrailingSlash",{enumerable:!0,get:function(){return s}});let n=r(74310),i=r(12244),s=e=>{if(!e.startsWith("/"))return e;let{pathname:t,query:r,hash:s}=(0,i.parsePath)(e);return""+(0,n.removeTrailingSlash)(t)+r+s};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22874:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeBasePath",{enumerable:!0,get:function(){return i}}),r(96411);let n="";function i(e){return 0===n.length||(e=e.slice(n.length)).startsWith("/")||(e="/"+e),e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},66252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{requestIdleCallback:function(){return r},cancelIdleCallback:function(){return n}});let r="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},n="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26656:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"resolveHref",{enumerable:!0,get:function(){return d}});let n=r(77043),i=r(92421),s=r(60663),o=r(10853),a=r(19847),l=r(76737),u=r(44831),c=r(78729);function d(e,t,r){let d;let h="string"==typeof t?t:(0,i.formatWithValidation)(t),f=h.match(/^[a-zA-Z]{1,}:\/\//),p=f?h.slice(f[0].length):h;if((p.split("?",1)[0]||"").match(/(\/\/|\\)/)){console.error("Invalid href '"+h+"' passed to next/router in page: '"+e.pathname+"'. Repeated forward-slashes (//) or backslashes \\ are not valid in the href.");let t=(0,o.normalizeRepeatedSlashes)(p);h=(f?f[0]:"")+t}if(!(0,l.isLocalURL)(h))return r?[h]:h;try{d=new URL(h.startsWith("#")?e.asPath:e.pathname,"http://n")}catch(e){d=new URL("/","http://n")}try{let e=new URL(h,d);e.pathname=(0,a.normalizePathTrailingSlash)(e.pathname);let t="";if((0,u.isDynamicRoute)(e.pathname)&&e.searchParams&&r){let r=(0,n.searchParamsToUrlQuery)(e.searchParams),{result:o,params:a}=(0,c.interpolateAs)(e.pathname,e.pathname,r);o&&(t=(0,i.formatWithValidation)({pathname:o,hash:e.hash,query:(0,s.omit)(r,a)}))}let o=e.origin===d.origin?e.href.slice(e.origin.length):e.href;return r?[o,t||o]:o}catch(e){return r?[h]:h}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return c}});let n=r(3729),i=r(66252),s="function"==typeof IntersectionObserver,o=new Map,a=[];function l(e){let t;let r={root:e.root||null,margin:e.rootMargin||""},n=a.find(e=>e.root===r.root&&e.margin===r.margin);if(n&&(t=o.get(n)))return t;let i=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:i},a.push(r),o.set(r,t),t}function u(e,t,r){let{id:n,observer:i,elements:s}=l(r);return s.set(e,t),i.observe(e),function(){if(s.delete(e),i.unobserve(e),0===s.size){i.disconnect(),o.delete(n);let e=a.findIndex(e=>e.root===n.root&&e.margin===n.margin);e>-1&&a.splice(e,1)}}}function c(e){let{rootRef:t,rootMargin:r,disabled:o}=e,a=o||!s,[l,c]=(0,n.useState)(!1),d=(0,n.useRef)(null),h=(0,n.useCallback)(e=>{d.current=e},[]);return(0,n.useEffect)(()=>{if(s){if(a||l)return;let e=d.current;if(e&&e.tagName)return u(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:r})}else if(!l){let e=(0,i.requestIdleCallback)(()=>c(!0));return()=>(0,i.cancelIdleCallback)(e)}},[a,r,t,l,d.current]),[h,l,(0,n.useCallback)(()=>{c(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54269:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSegmentParam",{enumerable:!0,get:function(){return i}});let n=r(45767);function i(e){let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t));return(t&&(e=e.slice(t.length)),e.startsWith("[[...")&&e.endsWith("]]"))?{type:"optional-catchall",param:e.slice(5,-2)}:e.startsWith("[...")&&e.endsWith("]")?{type:"catchall",param:e.slice(4,-1)}:e.startsWith("[")&&e.endsWith("]")?{type:"dynamic",param:e.slice(1,-1)}:null}},45767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},isInterceptionRouteAppPath:function(){return s},extractInterceptionRouteInformation:function(){return o}});let n=r(77655),i=["(..)(..)","(.)","(..)","(...)"];function s(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function o(e){let t,r,s;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,s]=e.split(r,2);break}if(!t||!r||!s)throw Error(`Invalid interception route: ${e}. Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>`);switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":s="/"===t?`/${s}`:t+"/"+s;break;case"(..)":if("/"===t)throw Error(`Invalid interception route: ${e}. Cannot use (..) marker at the root level, use (.) instead.`);s=t.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":let o=t.split("/");if(o.length<=2)throw Error(`Invalid interception route: ${e}. Cannot use (..)(..) marker at the root level or one level up.`);s=o.slice(0,-2).concat(s).join("/");break;default:throw Error("Invariant: unexpected marker")}return{interceptingRoute:t,interceptedRoute:s}}},16372:(e,t,r)=>{"use strict";e.exports=r(20399)},7637:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.AmpContext},46860:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.AppRouterContext},32158:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.HeadManagerContext},78486:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.HooksClientContext},74187:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.ImageConfigContext},66150:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.RouterContext},69505:(e,t,r)=>{"use strict";e.exports=r(16372).vendored.contexts.ServerInsertedHtml},81202:(e,t,r)=>{"use strict";e.exports=r(16372).vendored["react-ssr"].ReactDOM},95344:(e,t,r)=>{"use strict";e.exports=r(16372).vendored["react-ssr"].ReactJsxRuntime},82228:(e,t,r)=>{"use strict";e.exports=r(16372).vendored["react-ssr"].ReactServerDOMWebpackClientEdge},3729:(e,t,r)=>{"use strict";e.exports=r(16372).vendored["react-ssr"].React},13126:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:n=!1}=void 0===e?{}:e;return t||r&&n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},77866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},83855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImgProps",{enumerable:!0,get:function(){return d}}),r(70837);let n=r(86358),i=r(73053);function s(e){return void 0!==e.default}function o(e){return void 0!==e.src}function a(e){return"object"==typeof e&&(s(e)||o(e))}function l(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u(e,t,r){let{deviceSizes:n,allSizes:i}=e;if(r){let e=/(^|\s)(1?\d?\d)vw/g,t=[];for(let n;n=e.exec(r);n)t.push(parseInt(n[2]));if(t.length){let e=.01*Math.min(...t);return{widths:i.filter(t=>t>=n[0]*e),kind:"w"}}return{widths:i,kind:"w"}}return"number"!=typeof t?{widths:n,kind:"w"}:{widths:[...new Set([t,2*t].map(e=>i.find(t=>t>=e)||i[i.length-1]))],kind:"x"}}function c(e){let{config:t,src:r,unoptimized:n,width:i,quality:s,sizes:o,loader:a}=e;if(n)return{src:r,srcSet:void 0,sizes:void 0};let{widths:l,kind:c}=u(t,i,o),d=l.length-1;return{sizes:o||"w"!==c?o:"100vw",srcSet:l.map((e,n)=>a({config:t,src:r,quality:s,width:e})+" "+("w"===c?e:n+1)+c).join(", "),src:a({config:t,src:r,quality:s,width:l[d]})}}function d(e,t){let r,o,u,{src:d,sizes:h,unoptimized:f=!1,priority:p=!1,loading:m,className:g,quality:y,width:v,height:b,fill:_=!1,style:w,onLoad:S,onLoadingComplete:E,placeholder:T="empty",blurDataURL:O,fetchPriority:C,layout:k,objectFit:x,objectPosition:A,lazyBoundary:R,lazyRoot:I,...P}=e,{imgConf:D,showAltText:N,blurComplete:M,defaultLoader:j}=t,L=D||i.imageConfigDefault;if("allSizes"in L)r=L;else{let e=[...L.deviceSizes,...L.imageSizes].sort((e,t)=>e-t),t=L.deviceSizes.sort((e,t)=>e-t);r={...L,allSizes:e,deviceSizes:t}}let F=P.loader||j;delete P.loader,delete P.srcSet;let U="__next_img_default"in F;if(U){if("custom"===r.loader)throw Error('Image with src "'+d+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let e=F;F=t=>{let{config:r,...n}=t;return e(n)}}if(k){"fill"===k&&(_=!0);let e={responsive:"100vw",fill:"100vw"},t={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];t&&(w={...w,...t});let r=e[k];r&&!h&&(h=r)}let B="",V=l(v),H=l(b);if(a(d)){let e=s(d)?d.default:d;if(!e.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(e));if(!e.height||!e.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(e));if(o=e.blurWidth,u=e.blurHeight,O=O||e.blurDataURL,B=e.src,!_){if(V||H){if(V&&!H){let t=V/e.width;H=Math.round(e.height*t)}else if(!V&&H){let t=H/e.height;V=Math.round(e.width*t)}}else V=e.width,H=e.height}}let z=!p&&("lazy"===m||void 0===m);(!(d="string"==typeof d?d:B)||d.startsWith("data:")||d.startsWith("blob:"))&&(f=!0,z=!1),r.unoptimized&&(f=!0),U&&d.endsWith(".svg")&&!r.dangerouslyAllowSVG&&(f=!0),p&&(C="high");let W=l(y),q=Object.assign(_?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:x,objectPosition:A}:{},N?{}:{color:"transparent"},w),$=M||"empty"===T?null:"blur"===T?'url("data:image/svg+xml;charset=utf-8,'+(0,n.getImageBlurSvg)({widthInt:V,heightInt:H,blurWidth:o,blurHeight:u,blurDataURL:O||"",objectFit:q.objectFit})+'")':'url("'+T+'")',K=$?{backgroundSize:q.objectFit||"cover",backgroundPosition:q.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:$}:{},J=c({config:r,src:d,unoptimized:f,width:V,quality:W,sizes:h,loader:F});return{props:{...P,loading:z?"lazy":m,fetchPriority:C,width:V,height:H,decoding:"async",className:g,style:{...q,...K},sizes:J.sizes,srcSet:J.srcSet,src:J.src},meta:{unoptimized:f,priority:p,placeholder:T,fill:_}}}},65344:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)&4294967295;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},1758:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{defaultHead:function(){return d},default:function(){return g}});let n=r(39694),i=r(17824),s=r(95344),o=i._(r(3729)),a=n._(r(27984)),l=r(7637),u=r(32158),c=r(13126);function d(e){void 0===e&&(e=!1);let t=[(0,s.jsx)("meta",{charSet:"utf-8"})];return e||t.push((0,s.jsx)("meta",{name:"viewport",content:"width=device-width"})),t}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(70837);let f=["name","httpEquiv","charSet","itemProp"];function p(){let e=new Set,t=new Set,r=new Set,n={};return i=>{let s=!0,o=!1;if(i.key&&"number"!=typeof i.key&&i.key.indexOf("$")>0){o=!0;let t=i.key.slice(i.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(i.type){case"title":case"base":t.has(i.type)?s=!1:t.add(i.type);break;case"meta":for(let e=0,t=f.length;e<t;e++){let t=f[e];if(i.props.hasOwnProperty(t)){if("charSet"===t)r.has(t)?s=!1:r.add(t);else{let e=i.props[t],r=n[t]||new Set;("name"!==t||!o)&&r.has(e)?s=!1:(r.add(e),n[t]=r)}}}}return s}}function m(e,t){let{inAmpMode:r}=t;return e.reduce(h,[]).reverse().concat(d(r).reverse()).filter(p()).reverse().map((e,t)=>{let n=e.key||t;if(!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,o.default.cloneElement(e,t)}return o.default.cloneElement(e,{key:n})})}let g=function(e){let{children:t}=e,r=(0,o.useContext)(l.AmpStateContext),n=(0,o.useContext)(u.HeadManagerContext);return(0,s.jsx)(a.default,{reduceComponentsToState:m,headManager:n,inAmpMode:(0,c.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},86358:(e,t)=>{"use strict";function r(e){let{widthInt:t,heightInt:r,blurWidth:n,blurHeight:i,blurDataURL:s,objectFit:o}=e,a=n?40*n:t,l=i?40*i:r,u=a&&l?"viewBox='0 0 "+a+" "+l+"'":"",c=u?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+u+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+c+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},73053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{VALID_LOADERS:function(){return r},imageConfigDefault:function(){return n}});let r=["default","imgix","cloudinary","akamai","custom"],n={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:60,formats:["image/webp"],dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"inline",remotePatterns:[],unoptimized:!1}},37412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return a},default:function(){return l}});let n=r(39694),i=r(83855),s=r(31900),o=n._(r(74931)),a=e=>{let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},l=s.Image},74931:(e,t)=>{"use strict";function r(e){let{config:t,src:r,width:n,quality:i}=e;return t.path+"?url="+encodeURIComponent(r)+"&w="+n+"&q="+(i||75)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}}),r.__next_img_default=!0;let n=r},63689:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return n},isBailoutToCSRError:function(){return i}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class n extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},8092:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},34087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ActionQueueContext:function(){return a},createMutableActionQueue:function(){return d}});let n=r(17824),i=r(8085),s=r(73479),o=n._(r(3729)),a=o.default.createContext(null);function l(e,t){null!==e.pending&&(e.pending=e.pending.next,null!==e.pending&&u({actionQueue:e,action:e.pending,setState:t}))}async function u(e){let{actionQueue:t,action:r,setState:n}=e,s=t.state;if(!s)throw Error("Invariant: Router state not initialized");t.pending=r;let o=r.payload,a=t.action(s,o);function u(e){if(r.discarded){t.needsRefresh&&null===t.pending&&(t.needsRefresh=!1,t.dispatch({type:i.ACTION_REFRESH,origin:window.location.origin},n));return}t.state=e,t.devToolsInstance&&t.devToolsInstance.send(o,e),l(t,n),r.resolve(e)}(0,i.isThenable)(a)?a.then(u,e=>{l(t,n),r.reject(e)}):u(a)}function c(e,t,r){let n={resolve:r,reject:()=>{}};if(t.type!==i.ACTION_RESTORE){let e=new Promise((e,t)=>{n={resolve:e,reject:t}});(0,o.startTransition)(()=>{r(e)})}let s={payload:t,next:null,resolve:n.resolve,reject:n.reject};null===e.pending?(e.last=s,u({actionQueue:e,action:s,setState:r})):t.type===i.ACTION_NAVIGATE?(e.pending.discarded=!0,e.last=s,e.pending.payload.type===i.ACTION_SERVER_ACTION&&(e.needsRefresh=!0),u({actionQueue:e,action:s,setState:r})):(null!==e.last&&(e.last.next=s),e.last=s)}function d(){let e={state:null,dispatch:(t,r)=>c(e,t,r),action:async(e,t)=>{if(null===e)throw Error("Invariant: Router state not initialized");return(0,s.reducer)(e,t)},pending:null,last:null};return e}},71870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=r(12244);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return""+t+r+i+s}},77655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return o}});let n=r(8092),i=r(19457);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function o(e){return e.replace(/\.rsc($|\?)/,"$1")}},92421:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{formatUrl:function(){return s},urlObjectKeys:function(){return o},formatWithValidation:function(){return a}});let n=r(17824)._(r(77043)),i=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,s=e.protocol||"",o=e.pathname||"",a=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?"["+r+"]":r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(n.urlQueryToSearchParams(l)));let c=e.search||l&&"?"+l||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||i.test(s))&&!1!==u?(u="//"+(u||""),o&&"/"!==o[0]&&(o="/"+o)):u||(u=""),a&&"#"!==a[0]&&(a="#"+a),c&&"?"!==c[0]&&(c="?"+c),""+s+u+(o=o.replace(/[?#]/g,encodeURIComponent))+(c=c.replace("#","%23"))+a}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function a(e){return s(e)}},51586:(e,t)=>{"use strict";function r(e,t){if(void 0===t&&(t={}),t.onlyHashChange){e();return}let r=document.documentElement,n=r.style.scrollBehavior;r.style.scrollBehavior="auto",t.dontForceLayout||r.getClientRects(),e(),r.style.scrollBehavior=n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"handleSmoothScroll",{enumerable:!0,get:function(){return r}})},44831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRoutes:function(){return n.getSortedRoutes},isDynamicRoute:function(){return i.isDynamicRoute}});let n=r(46177),i=r(25508)},78729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"interpolateAs",{enumerable:!0,get:function(){return s}});let n=r(82694),i=r(76603);function s(e,t,r){let s="",o=(0,i.getRouteRegex)(e),a=o.groups,l=(t!==e?(0,n.getRouteMatcher)(o)(t):"")||r;s=e;let u=Object.keys(a);return u.every(e=>{let t=l[e]||"",{repeat:r,optional:n}=a[e],i="["+(r?"...":"")+e+"]";return n&&(i=(t?"":"/")+"["+i+"]"),r&&!Array.isArray(t)&&(t=[t]),(n||e in l)&&(s=s.replace(i,r?t.map(e=>encodeURIComponent(e)).join("/"):encodeURIComponent(t))||"/")})||(s=""),{params:u,result:s}}},56338:(e,t)=>{"use strict";function r(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isBot",{enumerable:!0,get:function(){return r}})},25508:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return s}});let n=r(45767),i=/\/\[[^/]+?\](?=\/|$)/;function s(e){return(0,n.isInterceptionRouteAppPath)(e)&&(e=(0,n.extractInterceptionRouteInformation)(e).interceptedRoute),i.test(e)}},76737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return s}});let n=r(10853),i=r(96411);function s(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,i.hasBasePath)(r.pathname)}catch(e){return!1}}},60663:(e,t)=>{"use strict";function r(e,t){let r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"omit",{enumerable:!0,get:function(){return r}})},12244:(e,t)=>{"use strict";function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},86050:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=r(12244);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},77043:(e,t)=>{"use strict";function r(e){let t={};return e.forEach((e,r)=>{void 0===t[r]?t[r]=e:Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]}),t}function n(e){return"string"!=typeof e&&("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[r,i]=e;Array.isArray(i)?i.forEach(e=>t.append(r,n(e))):t.set(r,n(i))}),t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(t=>{Array.from(t.keys()).forEach(t=>e.delete(t)),t.forEach((t,r)=>e.append(r,t))}),e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i},assign:function(){return s}})},74310:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},82694:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(10853);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new n.DecodeError("failed to decode param")}},o={};return Object.keys(r).forEach(e=>{let t=r[e],n=i[t.pos];void 0!==n&&(o[e]=~n.indexOf("/")?n.split("/").map(e=>s(e)):t.repeat?[s(n)]:s(n))}),o}}},76603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRouteRegex:function(){return c},getNamedRouteRegex:function(){return p},getNamedMiddlewareRegex:function(){return m}});let n=r(45767),i=r(77866),s=r(74310),o="nxtP",a="nxtI";function l(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function u(e){let t=(0,s.removeTrailingSlash)(e).slice(1).split("/"),r={},o=1;return{parameterizedRoute:t.map(e=>{let t=n.INTERCEPTION_ROUTE_MARKERS.find(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&s){let{key:e,optional:n,repeat:a}=l(s[1]);return r[e]={pos:o++,repeat:a,optional:n},"/"+(0,i.escapeStringRegexp)(t)+"([^/]+?)"}if(!s)return"/"+(0,i.escapeStringRegexp)(e);{let{key:e,repeat:t,optional:n}=l(s[1]);return r[e]={pos:o++,repeat:t,optional:n},t?n?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}function c(e){let{parameterizedRoute:t,groups:r}=u(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}function d(){let e=0;return()=>{let t="",r=++e;for(;r>0;)t+=String.fromCharCode(97+(r-1)%26),r=Math.floor((r-1)/26);return t}}function h(e){let{interceptionMarker:t,getSafeRouteKey:r,segment:n,routeKeys:s,keyPrefix:o}=e,{key:a,optional:u,repeat:c}=l(n),d=a.replace(/\W/g,"");o&&(d=""+o+d);let h=!1;(0===d.length||d.length>30)&&(h=!0),isNaN(parseInt(d.slice(0,1)))||(h=!0),h&&(d=r()),o?s[d]=""+o+a:s[d]=a;let f=t?(0,i.escapeStringRegexp)(t):"";return c?u?"(?:/"+f+"(?<"+d+">.+?))?":"/"+f+"(?<"+d+">.+?)":"/"+f+"(?<"+d+">[^/]+?)"}function f(e,t){let r=(0,s.removeTrailingSlash)(e).slice(1).split("/"),l=d(),u={};return{namedParameterizedRoute:r.map(e=>{let r=n.INTERCEPTION_ROUTE_MARKERS.some(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(r&&s){let[r]=e.split(s[0]);return h({getSafeRouteKey:l,interceptionMarker:r,segment:s[1],routeKeys:u,keyPrefix:t?a:void 0})}return s?h({getSafeRouteKey:l,segment:s[1],routeKeys:u,keyPrefix:t?o:void 0}):"/"+(0,i.escapeStringRegexp)(e)}).join(""),routeKeys:u}}function p(e,t){let r=f(e,t);return{...c(e),namedRegex:"^"+r.namedParameterizedRoute+"(?:/)?$",routeKeys:r.routeKeys}}function m(e,t){let{parameterizedRoute:r}=u(e),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=f(e,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},46177:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getSortedRoutes",{enumerable:!0,get:function(){return n}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").');r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,n){if(0===e.length){this.placeholder=!1;return}if(n)throw Error("Catch-all must be the last part of the URL.");let i=e[0];if(i.startsWith("[")&&i.endsWith("]")){let r=i.slice(1,-1),o=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),o=!0),r.startsWith("...")&&(r=r.substring(3),n=!0),r.startsWith("[")||r.endsWith("]"))throw Error("Segment names may not start or end with extra brackets ('"+r+"').");if(r.startsWith("."))throw Error("Segment names may not start with erroneous periods ('"+r+"').");function s(e,r){if(null!==e&&e!==r)throw Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"').");t.forEach(e=>{if(e===r)throw Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path');if(e.replace(/\W/g,"")===i.replace(/\W/g,""))throw Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path')}),t.push(r)}if(n){if(o){if(null!=this.restSlugName)throw Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).');s(this.optionalRestSlugName,r),this.optionalRestSlugName=r,i="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").');s(this.restSlugName,r),this.restSlugName=r,i="[...]"}}else{if(o)throw Error('Optional route parameters are not yet supported ("'+e[0]+'").');s(this.slugName,r),this.slugName=r,i="[]"}}this.children.has(i)||this.children.set(i,new r),this.children.get(i)._insert(e.slice(1),t,n)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function n(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}},19457:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isGroupSegment:function(){return r},PAGE_SEGMENT_KEY:function(){return n},DEFAULT_SEGMENT_KEY:function(){return i}});let n="__PAGE__",i="__DEFAULT__"},27984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let n=r(3729),i=!0,s=()=>{},o=()=>{};function a(e){let{headManager:t,reduceComponentsToState:r}=e;function a(){if(t&&t.mountedInstances){let i=n.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(i,e))}}if(i){var l;null==t||null==(l=t.mountedInstances)||l.add(e.children),a()}return s(()=>{var r;return null==t||null==(r=t.mountedInstances)||r.add(e.children),()=>{var r;null==t||null==(r=t.mountedInstances)||r.delete(e.children)}}),s(()=>(t&&(t._pendingUpdate=a),()=>{t&&(t._pendingUpdate=a)})),o(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},10853:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{WEB_VITALS:function(){return r},execOnce:function(){return n},isAbsoluteUrl:function(){return s},getLocationOrigin:function(){return o},getURL:function(){return a},getDisplayName:function(){return l},isResSent:function(){return u},normalizeRepeatedSlashes:function(){return c},loadGetInitialProps:function(){return d},SP:function(){return h},ST:function(){return f},DecodeError:function(){return p},NormalizeError:function(){return m},PageNotFoundError:function(){return g},MissingStaticPage:function(){return y},MiddlewareNotFoundError:function(){return v},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return r||(r=!0,t=e(...i)),t}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function o(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function a(){let{href:e}=window.location,t=o();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class m extends Error{}class g extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},70837:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},21725:(e,t,r)=>{"use strict";var n=r(25269);e.exports=t=n.descriptor=n.Root.fromJSON(r(89987)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,o=n.Enum,a=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,d=n.Service,h=n.Method;function f(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,h=0;h<e.nestedArray.length;++h)(c=e._nestedArray[h])instanceof a?u.messageType.push(c.toDescriptor(n)):c instanceof o?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof d?u.service.push(c.toDescriptor()):c instanceof i&&f(c,r,n);u.options=T(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(a.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(o.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var h=E(n.options,t.FileOptions);if(h){var f=Object.keys(h);for(u=0;u<f.length;++u)i.setOption(f[u],h[f[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return f(this,r.file,e),r};var p=0;a.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new a(e.name.length?e.name:"Type"+p++,E(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(a.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(o.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},a.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=S(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=S(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=11===c||14===c?this._fieldsArray[n].resolvedType&&O(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=T(this.options,t.MessageOptions),i};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:_(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var o=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(o.options=E(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:m.exec(a)&&(a=parseInt(a))}o.setOption("default",a)}return w(e.type)&&("proto3"===r?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=S(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?O(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=T(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;o.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new o(e.name&&e.name.length?e.name:"Enum"+g++,r,E(e.options,t.EnumOptions))},o.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:T(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,E(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:T(this.options,t.ServiceOptions)})};var b=0;function _(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function w(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function S(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof a)return t.group?10:11;throw Error("illegal type: "+e)}function E(e,t){if(e){for(var r,i,s,a=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof o&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),a.push(C(i),s));return a.length?n.util.toObject(a):void 0}}function T(e,t){if(e){for(var r,i,s=[],o=0,a=Object.keys(e);o<a.length;++o)if(i=e[r=a[o]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function O(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,a=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;o<r.length&&a<l&&r[o]===n[a];){var u=t.lookup(r[o++],!0);if(null!==u&&u!==t)break;++a}else for(;o<r.length&&a<l&&r[o]===n[a];++o,++a);return n.slice(a).join(".")}function C(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,E(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:T(this.options,t.MethodOptions)})}},25269:(e,t,r)=>{"use strict";e.exports=r(57954)},62516:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},5944:(e,t,r)=>{"use strict";var n=t,i=r(33982),s=r(18289);function o(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)t.repeated&&s[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var l=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),l=s.safeProp(a.name);a.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),o(r,a,n,l+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),o(r,a,n,l+"[i]")("}")("}")):(a.resolvedType instanceof i||r("if(d%s!=null){",l),o(r,a,n,l),a.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?o:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),u=0;u<o.length;++u)r("d%s={}",s.safeProp(o[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],d=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,c.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){var c=t[u],p=e._fieldsArray.indexOf(c),d=s.safeProp(c.name);c.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,c,p,d+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,c,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,c.name),a(r,c,p,d),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},98983:(e,t,r)=>{"use strict";e.exports=a;var n=r(33982),i=r(31627),s=r(18289);function o(e){return"missing required '"+e.name+"'"}function a(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),l=a.resolvedType instanceof n?"int32":a.type,u="m"+s.safeProp(a.name);t("case %i:",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[a.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",o(c))}return t("return m")}},67337:(e,t,r)=>{"use strict";e.exports=a;var n=r(33982),i=r(31627),s=r(18289);function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function a(e){for(var t,r,a=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];r="m"+s.safeProp(u.name),u.map?(a("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?a("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):a(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,r),a("}")("}")):u.repeated?(a("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[d]?a("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(a("for(var i=0;i<%s.length;++i)",r),void 0===h?o(a,u,c,r+"[i]"):a("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,r)),a("}")):(u.optional&&a("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===h?o(a,u,c,r):a("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,r))}return a("return w")}},33982:(e,t,r)=>{"use strict";e.exports=o;var n=r(58831);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var i=r(44622),s=r(18289);function o(e,t,r,i,s){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"==typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},92548:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(58831);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(33982),o=r(31627),a=r(18289),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(a.isObject(n)?(c=s,u=n,n=s=void 0):a.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==typeof t&&(t=a.decorateEnum(t).name),function(i,s){a.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},72822:(e,t,r)=>{"use strict";var n=e.exports=r(65748);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(67337),n.decoder=r(98983),n.verifier=r(31181),n.converter=r(5944),n.ReflectionObject=r(58831),n.Namespace=r(44622),n.Root=r(34955),n.Enum=r(33982),n.Type=r(69396),n.Field=r(92548),n.OneOf=r(85677),n.MapField=r(30372),n.Service=r(26962),n.Method=r(3055),n.Message=r(55326),n.wrappers=r(82969),n.types=r(31627),n.util=r(18289),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},65748:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(47474),n.BufferWriter=r(96985),n.Reader=r(8645),n.BufferReader=r(2126),n.util=r(86416),n.rpc=r(84415),n.roots=r(43675),n.configure=i,i()},57954:(e,t,r)=>{"use strict";var n=e.exports=r(72822);n.build="full",n.tokenize=r(89468),n.parse=r(60580),n.common=r(62516),n.Root._configure(n.Type,n.parse,n.common)},30372:(e,t,r)=>{"use strict";e.exports=o;var n=r(92548);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var i=r(31627),s=r(18289);function o(e,t,r,i,o,a){if(n.call(this,e,t,i,void 0,void 0,o,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new o(i,e,t,r))}}},55326:(e,t,r)=>{"use strict";e.exports=i;var n=r(86416);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},3055:(e,t,r)=>{"use strict";e.exports=s;var n=r(58831);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(18289);function s(e,t,r,s,o,a,l,u,c){if(i.isObject(o)?(l=o,o=a=void 0):i.isObject(a)&&(l=a,a=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},44622:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,o=r(58831);((d.prototype=Object.create(o.prototype)).constructor=d).className="Namespace";var a=r(92548),l=r(85677),u=r(18289);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){o.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=c,d.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},d.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),d.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},d.prototype.addJSON=function(e){var t=this;if(e)for(var r,o=Object.keys(e),l=0;l<o.length;++l)r=e[o[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?a.fromJSON:d.fromJSON)(o[l],r));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof n||e instanceof s||e instanceof i||e instanceof d||e instanceof l))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(t instanceof d&&e instanceof d&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,o=0;o<r.length;++o)e.add(r[o]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){n=e,i=t,s=r}},58831:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(18289);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var o=s[e];i.setProperty(o,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},85677:(e,t,r)=>{"use strict";e.exports=o;var n=r(58831);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var i=r(92548),s=r(18289);function o(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},60580:(e,t,r)=>{"use strict";e.exports=T,T.filename=null,T.defaults={keepCase:!1};var n=r(89468),i=r(34955),s=r(69396),o=r(92548),a=r(30372),l=r(85677),u=r(33982),c=r(26962),d=r(3055),h=r(31627),f=r(18289),p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,_=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,S=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function T(e,t,r){t instanceof i||(r=t,t=new i),r||(r=T.defaults);var O,C,k,x,A,R=r.preferTrailingComment||!1,I=n(e,r.alternateCommentMode||!1),P=I.next,D=I.push,N=I.peek,M=I.skip,j=I.cmnt,L=!0,F=!1,U=t,B=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=T.filename;return r||(T.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+I.line+")")}function H(){var e,t=[];do{if('"'!==(e=P())&&"'"!==e)throw V(e);t.push(P()),M(e),e=N()}while('"'===e||"'"===e);return t.join("")}function z(e){var t=P();switch(t){case"'":case'"':return D(t),H();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return q(t,!0)}catch(r){if(e&&S.test(t))return t;throw V(t,"value")}}function W(e,t){var r,n;do t&&('"'===(r=N())||"'"===r)?e.push(H()):e.push([n=$(P()),M("to",!0)?$(P()):n]);while(M(",",!0));M(";")}function q(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(_.test(e))return r*parseFloat(e);throw V(e,"number",t)}function $(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw V(e,"id")}function K(){if(void 0!==C)throw V("package");if(C=P(),!S.test(C))throw V(C,"name");U=U.define(C),M(";")}function J(){var e,t=N();switch(t){case"weak":e=x||(x=[]),P();break;case"public":P();default:e=k||(k=[])}t=H(),M(";"),e.push(t)}function G(){if(M("="),!(F="proto3"===(A=H()))&&"proto2"!==A)throw V(A,"syntax");M(";")}function Q(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return X(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return eh(e,t),!0}return!1}function Y(e,t,r){var n,i=I.line;if(e&&("string"!=typeof e.comment&&(e.comment=j()),e.filename=T.filename),M("{",!0)){for(;"}"!==(n=P());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||R)&&(e.comment=j(i)||e.comment)}function X(e,t){if(!w.test(t=P()))throw V(t,"type name");var r=new s(t);Y(r,function(e){if(!Q(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":F?Z(r,"proto3_optional"):Z(r,"optional");break;case"oneof":er(r,e);break;case"extensions":W(r.extensions||(r.extensions=[]));break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:if(!F||!S.test(e))throw V(e);D(e),Z(r,"optional")}}),e.add(r)}function Z(e,t,r){var n=P();if("group"===n){ee(e,t);return}if(!S.test(n))throw V(n,"type");var i=P();if(!w.test(i))throw V(i,"name");i=B(i),M("=");var s=new o(i,$(P()),n,t,r);if(Y(s,function(e){if("option"===e)es(s,e),M(";");else throw V(e)},function(){eu(s)}),"proto3_optional"===t){var a=new l("_"+i);s.setOption("proto3_optional",!0),a.add(s),e.add(a)}else e.add(s);!F&&s.repeated&&(void 0!==h.packed[n]||void 0===h.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=P();if(!w.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),M("=");var i=$(P()),a=new s(r);a.group=!0;var l=new o(n,i,r,t);l.filename=T.filename,Y(a,function(e){switch(e){case"option":es(a,e),M(";");break;case"required":case"repeated":Z(a,e);break;case"optional":F?Z(a,"proto3_optional"):Z(a,"optional");break;default:throw V(e)}}),e.add(a).add(l)}function et(e){M("<");var t=P();if(void 0===h.mapKey[t])throw V(t,"type");M(",");var r=P();if(!S.test(r))throw V(r,"type");M(">");var n=P();if(!w.test(n))throw V(n,"name");M("=");var i=new a(B(n),$(P()),t,r);Y(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!w.test(t=P()))throw V(t,"name");var r=new l(B(t));Y(r,function(e){"option"===e?(es(r,e),M(";")):(D(e),Z(r,"optional"))}),e.add(r)}function en(e,t){if(!w.test(t=P()))throw V(t,"name");var r=new u(t);Y(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!w.test(t))throw V(t,"name");M("=");var r=$(P(),!0),n={};Y(n,function(e){if("option"===e)es(n,e),M(";");else throw V(e)},function(){eu(n)}),e.add(t,r,n.comment)}function es(e,t){var r,n=M("(",!0);if(!S.test(t=P()))throw V(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=N(),E.test(t)&&(r=t.substr(1),i+=t,P())),M("=");var o=eo(e,i);el(e,s,o,r)}function eo(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!w.test(O=P()))throw V(O,"name");var n,i=O;"{"===N()?n=eo(e,t+"."+O):(M(":"),"{"===N()?n=eo(e,t+"."+O):(n=z(!0),ea(e,t+"."+O,n)));var s=r[i];s&&(n=[].concat(s).concat(n)),r[i]=n,M(",",!0)}return r}var o=z(!0);return ea(e,t,o),o}function ea(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!w.test(t=P()))throw V(t,"service name");var r=new c(t);Y(r,function(e){if(!Q(r,e)){if("rpc"===e)ed(r,e);else throw V(e)}}),e.add(r)}function ed(e,t){var r=j(),n=t;if(!w.test(t=P()))throw V(t,"name");var i,s,o,a,l=t;if(M("("),M("stream",!0)&&(s=!0),!S.test(t=P())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(a=!0),!S.test(t=P())))throw V(t);o=t,M(")");var u=new d(l,n,i,o,s,a);u.comment=r,Y(u,function(e){if("option"===e)es(u,e),M(";");else throw V(e)}),e.add(u)}function eh(e,t){if(!S.test(t=P()))throw V(t,"reference");var r=t;Y(null,function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":F?Z(e,"proto3_optional",r):Z(e,"optional",r);break;default:if(!F||!S.test(t))throw V(t);D(t),Z(e,"optional",r)}})}for(;null!==(O=P());)switch(O){case"package":if(!L)throw V(O);K();break;case"import":if(!L)throw V(O);J();break;case"syntax":if(!L)throw V(O);G();break;case"option":es(U,O),M(";");break;default:if(Q(U,O)){L=!1;continue}throw V(O)}return T.filename=null,{package:C,imports:k,weakImports:x,syntax:A,root:t}}},8645:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(86416),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return(this.pos+=e,Array.isArray(this.buf))?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},2126:(e,t,r)=>{"use strict";e.exports=s;var n=r(8645);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(86416);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},34955:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,o=r(44622);((d.prototype=Object.create(o.prototype)).constructor=d).className="Root";var a=r(92548),l=r(33982),u=r(85677),c=r(18289);function d(e){o.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=c.path.resolve,d.prototype.fetch=c.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var o=this;if(!n)return c.asPromise(e,o,t,r);var a=n===h;function l(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,o,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||o.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||o.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}a||p||l(null,o)}function f(e,t){if(!(o.files.indexOf(e)>-1)){if(o.files.push(e),e in s){a?d(e,s[e]):(++p,setTimeout(function(){--p,d(e,s[e])}));return}if(a){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}d(e,r)}else++p,o.fetch(e,function(r,i){if(--p,n){if(r){t?p||l(null,o):l(r);return}d(e,i)}})}}var p=0;c.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=o.resolvePath("",t[g]))&&f(m);if(a)return o;p||l(null,o)},d.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return o.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend){if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof o){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){n=e,i=t,s=r}},43675:e=>{"use strict";e.exports={}},84415:(e,t,r)=>{"use strict";t.Service=r(49861)},49861:(e,t,r)=>{"use strict";e.exports=i;var n=r(86416);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(!a.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return a.emit("error",e,t),o(e);if(null===r){a.end(!0);return}if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)})}catch(e){a.emit("error",e,t),setTimeout(function(){o(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},26962:(e,t,r)=>{"use strict";e.exports=a;var n=r(44622);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var i=r(3055),s=r(18289),o=r(84415);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,i=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var l=s.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},89468:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,l=/\\(.?)/g,u={0:"\x00",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function d(e,l){e=e.toString();var u=0,d=e.length,h=1,f=null,p=null,m=0,g=!1,y=!1,v=[],b=null;function _(e){return Error("illegal "+e+" (line "+h+")")}function w(){var t="'"===b?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw _("string");return u=t.lastIndex,k(b),b=null,c(i[1])}function S(t){return e.charAt(t)}function E(t,r,n){f=e.charAt(t++),m=h,g=!1,y=n;var a,u,c=t-(a=l?2:3);do if(--c<0||"\n"===(u=e.charAt(c))){g=!0;break}while(" "===u||"	"===u);for(var d=e.substring(t,r).split(o),v=0;v<d.length;++v)d[v]=d[v].replace(l?s:i,"").trim();p=d.join("\n").trim()}function T(t){var r=O(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function O(e){for(var t=e;t<d&&"\n"!==S(t);)t++;return t}function C(){if(v.length>0)return v.shift();if(b)return w();var r,n,i,s,o,c=0===u;do{if(u===d)return null;for(r=!1;a.test(i=S(u));)if("\n"===i&&(c=!0,++h),++u===d)return null;if("/"===S(u)){if(++u===d)throw _("comment");if("/"===S(u)){if(l){if(s=u,o=!1,T(u)){o=!0;do{if((u=O(u))===d)break;u++}while(T(u))}else u=Math.min(d,O(u)+1);o&&E(s,u,c),h++,r=!0}else{for(o="/"===S(s=u+1);"\n"!==S(++u);)if(u===d)return null;++u,o&&E(s,u-1,c),++h,r=!0}}else{if("*"!==(i=S(u)))return"/";s=u+1,o=l||"*"===S(s);do{if("\n"===i&&++h,++u===d)throw _("comment");n=i,i=S(u)}while("*"!==n||"/"!==i);++u,o&&E(s,u-2,c),r=!0}}}while(r);var f=u;if(t.lastIndex=0,!t.test(S(f++)))for(;f<d&&!t.test(S(f));)++f;var p=e.substring(u,u=f);return('"'===p||"'"===p)&&(b=p),p}function k(e){v.push(e)}function x(){if(!v.length){var e=C();if(null===e)return null;k(e)}return v[0]}function A(e,t){var r=x();if(r===e)return C(),!0;if(!t)throw _("token '"+r+"', '"+e+"' expected");return!1}function R(e){var t=null;return void 0===e?m===h-1&&(l||"*"===f||g)&&(t=y?p:null):(m<e&&x(),m===e&&!g&&(l||"/"===f)&&(t=y?null:p)),t}return Object.defineProperty({next:C,peek:x,push:k,skip:A,cmnt:R},"line",{get:function(){return h}})}d.unescape=c},69396:(e,t,r)=>{"use strict";e.exports=v;var n=r(44622);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(33982),s=r(85677),o=r(92548),a=r(30372),l=r(26962),u=r(55326),c=r(8645),d=r(47474),h=r(18289),f=r(67337),p=r(98983),m=r(31181),g=r(5944),y=r(82969);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?a.fromJSON:o.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var d=t.nested[u[c]];r.add((void 0!==d.id?o.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?l.fromJSON:n.fromJSON)(u[c],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:c,types:t,util:h}),this.verify=m(this)({types:t,util:h}),this.fromObject=g.fromObject(this)({types:t,util:h}),this.toObject=g.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},31627:(e,t,r)=>{"use strict";var n=t,i=r(18289),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},18289:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(86416),o=r(43675);s.codegen=r(52012),s.fetch=r(63035),s.path=r(29986),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var a=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(69396));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(33982));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(34955)))}})},59535:(e,t,r)=>{"use strict";e.exports=i;var n=r(86416);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\x00\x00\x00\x00\x00\x00\x00\x00";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},86416:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(70799),n.base64=r(92130),n.EventEmitter=r(80854),n.float=r(14324),n.inquire=r(20449),n.utf8=r(78131),n.pool=r(56035),n.LongBits=r(59535),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},31181:(e,t,r)=>{"use strict";e.exports=l;var n=r(33982),i=r(18289);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),o(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),o(t,u,l,c+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}o(t,u,l,c)}u.optional&&t("}")}return t("return null")}},82969:(e,t,r)=>{"use strict";var n=t,i=r(55326);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName;return""===n&&(n=r),s=n+l,a["@type"]=s,a}return this.toObject(e,t)}}},47474:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(86416),s=i.LongBits,o=i.base64,a=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},m.prototype=Object.create(l.prototype),m.prototype.fn=p,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},96985:(e,t,r)=>{"use strict";e.exports=s;var n=r(47474);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(86416);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},58360:(e,t,r)=>{"use strict";r.d(t,{Kx:()=>f});var n=r(61794),i=r(3729),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=function(e){return{loading:null==e,value:e}},a=function(){return function(e,t){switch(t.type){case"error":return s(s({},e),{error:t.error,loading:!1,value:void 0});case"reset":return o(t.defaultValue);case"value":return s(s({},e),{error:void 0,loading:!1,value:t.value});default:return e}}},l=function(e){var t=e?e():void 0,r=(0,i.useReducer)(a(),o(t)),n=r[0],s=r[1],l=(0,i.useCallback)(function(){s({type:"reset",defaultValue:e?e():void 0})},[e]),u=(0,i.useCallback)(function(e){s({type:"error",error:e})},[]),c=(0,i.useCallback)(function(e){s({type:"value",value:e})},[]);return(0,i.useMemo)(function(){return{error:n.error,loading:n.loading,reset:l,setError:u,setValue:c,value:n.value}},[n.error,n.loading,l,u,c,n.value])},u=function(e,t,r){var n=(0,i.useRef)(e);return(0,i.useEffect)(function(){!t(e,n.current)&&(n.current=e,r&&r())}),n},c=function(e,t){var r=!e&&!t,n=!!e&&!!t&&refEqual(e,t);return r||n},d=function(e,t){var r=!e&&!t,i=!!e&&!!t&&(0,n.iE)(e,t);return r||i},h=function(e,t){return u(e,d,t)},f=function(e,t){var r=l(),s=r.error,o=r.loading,a=r.reset,u=r.setError,c=r.setValue,d=r.value,f=h(e,a);return(0,i.useEffect)(function(){if(!f.current){c(void 0);return}var e=(null==t?void 0:t.snapshotListenOptions)?(0,n.cf)(f.current,t.snapshotListenOptions,c,u):(0,n.cf)(f.current,c,u);return function(){e()}},[f.current]),[d,o,s]}},41864:(e,t)=>{"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,c=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,v=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case d:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function S(e){return w(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||w(e)===c},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===u},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===o||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===h||e.$$typeof===v||e.$$typeof===b||e.$$typeof===_||e.$$typeof===y)},t.typeOf=w},99619:(e,t,r)=>{"use strict";e.exports=r(41864)},58210:(e,t,r)=>{"use strict";let n;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=s(e,"string");return"symbol"===i(t)?t:String(t)}function a(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){if(Array.isArray(e))return e}function d(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}}function p(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){return c(e)||d(e,t)||f(e,t)||p()}function g(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function y(e,t){if(null==e)return{};var r,n,i=g(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{ZP:()=>iu});var v,b,_=r(3729),w=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function S(e){var t=e.defaultInputValue,r=void 0===t?"":t,n=e.defaultMenuIsOpen,i=void 0!==n&&n,s=e.defaultValue,o=void 0===s?null:s,a=e.inputValue,l=e.menuIsOpen,c=e.onChange,d=e.onInputChange,h=e.onMenuClose,f=e.onMenuOpen,p=e.value,g=y(e,w),v=m((0,_.useState)(void 0!==a?a:r),2),b=v[0],S=v[1],E=m((0,_.useState)(void 0!==l?l:i),2),T=E[0],O=E[1],C=m((0,_.useState)(void 0!==p?p:o),2),k=C[0],x=C[1],A=(0,_.useCallback)(function(e,t){"function"==typeof c&&c(e,t),x(e)},[c]),R=(0,_.useCallback)(function(e,t){var r;"function"==typeof d&&(r=d(e,t)),S(void 0!==r?r:e)},[d]),I=(0,_.useCallback)(function(){"function"==typeof f&&f(),O(!0)},[f]),P=(0,_.useCallback)(function(){"function"==typeof h&&h(),O(!1)},[h]),D=void 0!==a?a:b,N=void 0!==l?l:T,M=void 0!==p?p:k;return u(u({},g),{},{inputValue:D,menuIsOpen:N,onChange:A,onInputChange:R,onMenuClose:P,onMenuOpen:I,value:M})}function E(){return(E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function C(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function I(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return I(e)}function D(e){var t=R();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P(this,r)}}function N(e){if(Array.isArray(e))return h(e)}function M(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function j(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e){return N(e)||M(e)||f(e)||j()}function F(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function U(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var B=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(U(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=F(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}(),V=Math.abs,H=String.fromCharCode,z=Object.assign;function W(e,t){return 45^G(e,0)?(((t<<2^G(e,0))<<2^G(e,1))<<2^G(e,2))<<2^G(e,3):0}function q(e){return e.trim()}function $(e,t){return(e=t.exec(e))?e[0]:e}function K(e,t,r){return e.replace(t,r)}function J(e,t){return e.indexOf(t)}function G(e,t){return 0|e.charCodeAt(t)}function Q(e,t,r){return e.slice(t,r)}function Y(e){return e.length}function X(e){return e.length}function Z(e,t){return t.push(e),e}function ee(e,t){return e.map(t).join("")}var et=1,er=1,en=0,ei=0,es=0,eo="";function ea(e,t,r,n,i,s,o){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:et,column:er,length:o,return:""}}function el(e,t){return z(ea("",null,null,"",null,null,0),e,{length:-e.length},t)}function eu(){return es}function ec(){return es=ei>0?G(eo,--ei):0,er--,10===es&&(er=1,et--),es}function ed(){return es=ei<en?G(eo,ei++):0,er++,10===es&&(er=1,et++),es}function eh(){return G(eo,ei)}function ef(){return ei}function ep(e,t){return Q(eo,e,t)}function em(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function eg(e){return et=er=1,en=Y(eo=e),ei=0,[]}function ey(e){return eo="",e}function ev(e){return q(ep(ei-1,ew(91===e?e+2:40===e?e+1:e)))}function eb(e){for(;es=eh();)if(es<33)ed();else break;return em(e)>2||em(es)>3?"":" "}function e_(e,t){for(;--t&&ed()&&!(es<48)&&!(es>102)&&(!(es>57)||!(es<65))&&(!(es>70)||!(es<97)););return ep(e,ef()+(t<6&&32==eh()&&32==ed()))}function ew(e){for(;ed();)switch(es){case e:return ei;case 34:case 39:34!==e&&39!==e&&ew(es);break;case 40:41===e&&ew(e);break;case 92:ed()}return ei}function eS(e,t){for(;ed();)if(e+es===57)break;else if(e+es===84&&47===eh())break;return"/*"+ep(t,ei-1)+"*"+H(47===e?e:ed())}function eE(e){for(;!em(eh());)ed();return ep(e,ei)}var eT="-ms-",eO="-moz-",eC="-webkit-",ek="comm",ex="rule",eA="decl",eR="@import",eI="@keyframes";function eP(e,t){for(var r="",n=X(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function eD(e,t,r,n){switch(e.type){case eR:case eA:return e.return=e.return||e.value;case ek:return"";case eI:return e.return=e.value+"{"+eP(e.children,n)+"}";case ex:e.value=e.props.join(",")}return Y(r=eP(e.children,n))?e.return=e.value+"{"+r+"}":""}function eN(e){var t=X(e);return function(r,n,i,s){for(var o="",a=0;a<t;a++)o+=e[a](r,n,i,s)||"";return o}}function eM(e){return function(t){!t.root&&(t=t.return)&&e(t)}}function ej(e){return ey(eL("",null,null,null,[""],e=eg(e),0,[0],e))}function eL(e,t,r,n,i,s,o,a,l){for(var u=0,c=0,d=o,h=0,f=0,p=0,m=1,g=1,y=1,v=0,b="",_=i,w=s,S=n,E=b;g;)switch(p=v,v=ed()){case 40:if(108!=p&&58==G(E,d-1)){-1!=J(E+=K(ev(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:E+=ev(v);break;case 9:case 10:case 13:case 32:E+=eb(p);break;case 92:E+=e_(ef()-1,7);continue;case 47:switch(eh()){case 42:case 47:Z(eU(eS(ed(),ef()),t,r),l);break;default:E+="/"}break;case 123*m:a[u++]=Y(E)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:f>0&&Y(E)-d&&Z(f>32?eB(E+";",n,r,d-1):eB(K(E," ","")+";",n,r,d-2),l);break;case 59:E+=";";default:if(Z(S=eF(E,t,r,u,c,i,a,b,_=[],w=[],d),s),123===v){if(0===c)eL(E,t,S,S,_,s,d,a,w);else switch(99===h&&110===G(E,3)?100:h){case 100:case 109:case 115:eL(e,S,S,n&&Z(eF(e,S,S,0,0,i,a,b,i,_=[],d),w),i,w,d,a,n?_:w);break;default:eL(E,S,S,S,[""],w,0,a,w)}}}u=c=f=0,m=y=1,b=E="",d=o;break;case 58:d=1+Y(E),f=p;default:if(m<1){if(123==v)--m;else if(125==v&&0==m++&&125==ec())continue}switch(E+=H(v),v*m){case 38:y=c>0?1:(E+="\f",-1);break;case 44:a[u++]=(Y(E)-1)*y,y=1;break;case 64:45===eh()&&(E+=ev(ed())),h=eh(),c=d=Y(b=E+=eE(ef())),v++;break;case 45:45===p&&2==Y(E)&&(m=0)}}return s}function eF(e,t,r,n,i,s,o,a,l,u,c){for(var d=i-1,h=0===i?s:[""],f=X(h),p=0,m=0,g=0;p<n;++p)for(var y=0,v=Q(e,d+1,d=V(m=o[p])),b=e;y<f;++y)(b=q(m>0?h[y]+" "+v:K(v,/&\f/g,h[y])))&&(l[g++]=b);return ea(e,t,r,0===i?ex:a,l,u,c)}function eU(e,t,r){return ea(e,t,r,ek,H(eu()),Q(e,2,-2),0)}function eB(e,t,r,n){return ea(e,t,r,eA,Q(e,0,n),Q(e,n+1,-1),n)}let eV=function(e){var t=new WeakMap;return function(r){if(t.has(r))return t.get(r);var n=e(r);return t.set(r,n),n}},eH=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}};var ez=function(e,t,r){for(var n=0,i=0;n=i,i=eh(),38===n&&12===i&&(t[r]=1),!em(i);)ed();return ep(e,ei)},eW=function(e,t){var r=-1,n=44;do switch(em(n)){case 0:38===n&&12===eh()&&(t[r]=1),e[r]+=ez(ei-1,t,r);break;case 2:e[r]+=ev(n);break;case 4:if(44===n){e[++r]=58===eh()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=H(n)}while(n=ed());return e},eq=function(e,t){return ey(eW(eg(e),t))},e$=new WeakMap,eK=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||e$.get(r))&&!n){e$.set(e,!0);for(var i=[],s=eq(t,i),o=r.props,a=0,l=0;a<s.length;a++)for(var u=0;u<o.length;u++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[u]):o[u]+" "+s[a]}}},eJ=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function eG(e,t){switch(W(e,t)){case 5103:return eC+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return eC+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return eC+e+eO+e+eT+e+e;case 6828:case 4268:return eC+e+eT+e+e;case 6165:return eC+e+eT+"flex-"+e+e;case 5187:return eC+e+K(e,/(\w+).+(:[^]+)/,eC+"box-$1$2"+eT+"flex-$1$2")+e;case 5443:return eC+e+eT+"flex-item-"+K(e,/flex-|-self/,"")+e;case 4675:return eC+e+eT+"flex-line-pack"+K(e,/align-content|flex-|-self/,"")+e;case 5548:return eC+e+eT+K(e,"shrink","negative")+e;case 5292:return eC+e+eT+K(e,"basis","preferred-size")+e;case 6060:return eC+"box-"+K(e,"-grow","")+eC+e+eT+K(e,"grow","positive")+e;case 4554:return eC+K(e,/([^-])(transform)/g,"$1"+eC+"$2")+e;case 6187:return K(K(K(e,/(zoom-|grab)/,eC+"$1"),/(image-set)/,eC+"$1"),e,"")+e;case 5495:case 3959:return K(e,/(image-set\([^]*)/,eC+"$1$`$1");case 4968:return K(K(e,/(.+:)(flex-)?(.*)/,eC+"box-pack:$3"+eT+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+eC+e+e;case 4095:case 3583:case 4068:case 2532:return K(e,/(.+)-inline(.+)/,eC+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Y(e)-1-t>6)switch(G(e,t+1)){case 109:if(45!==G(e,t+4))break;case 102:return K(e,/(.+:)(.+)-([^]+)/,"$1"+eC+"$2-$3$1"+eO+(108==G(e,t+3)?"$3":"$2-$3"))+e;case 115:return~J(e,"stretch")?eG(K(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==G(e,t+1))break;case 6444:switch(G(e,Y(e)-3-(~J(e,"!important")&&10))){case 107:return K(e,":",":"+eC)+e;case 101:return K(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+eC+(45===G(e,14)?"inline-":"")+"box$3$1"+eC+"$2$3$1"+eT+"$2box$3")+e}break;case 5936:switch(G(e,t+11)){case 114:return eC+e+eT+K(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return eC+e+eT+K(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return eC+e+eT+K(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return eC+e+eT+e+e}return e}var eQ=function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case eA:e.return=eG(e.value,e.length);break;case eI:return eP([el(e,{value:K(e.value,"@","@"+eC)})],n);case ex:if(e.length)return ee(e.props,function(t){switch($(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return eP([el(e,{props:[K(t,/:(read-\w+)/,":"+eO+"$1")]})],n);case"::placeholder":return eP([el(e,{props:[K(t,/:(plac\w+)/,":"+eC+"input-$1")]}),el(e,{props:[K(t,/:(plac\w+)/,":"+eO+"$1")]}),el(e,{props:[K(t,/:(plac\w+)/,eT+"input-$1")]})],n)}return""})}},eY="undefined"!=typeof document,eX=eY?void 0:eV(function(){return eH(function(){var e={};return function(t){return e[t]}})}),eZ=[eQ];let e0=function(e){var t=e.key;if(eY&&"css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var n=e.stylisPlugins||eZ,i={},s=[];eY&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)i[t[r]]=!0;s.push(e)}));var o=[eK,eJ];if(eY){var a,l,u,c=[eD,eM(function(e){u.insert(e)})],d=eN(o.concat(n,c)),h=function(e){return eP(ej(e),d)};l=function(e,t,r,n){u=r,h(e?e+"{"+t.styles+"}":t.styles),n&&(v.inserted[t.name]=!0)}}else{var f=[eD],p=eN(o.concat(n,f)),m=function(e){return eP(ej(e),p)},g=eX(n)(t),y=function(e,t){var r=t.name;return void 0===g[r]&&(g[r]=m(e?e+"{"+t.styles+"}":t.styles)),g[r]};l=function(e,t,r,n){var i=t.name,s=y(e,t);return void 0===v.compat?(n&&(v.inserted[i]=!0),s):n?void(v.inserted[i]=s):s}}var v={key:t,sheet:new B({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return v.sheet.hydrate(s),v};var e1="undefined"!=typeof document;function e2(e,t,r){var n="";return r.split(" ").forEach(function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "}),n}var e3=function(e,t,r){var n=e.key+"-"+t.name;(!1===r||!1===e1&&void 0!==e.compat)&&void 0===e.registered[n]&&(e.registered[n]=t.styles)},e6=function(e,t,r){e3(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i="",s=t;do{var o=e.insert(t===s?"."+n:"",s,e.sheet,!0);e1||void 0===o||(i+=o),s=s.next}while(void 0!==s);if(!e1&&0!==i.length)return i}};let e4=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))*1540483477+((t>>>16)*59797<<16),t^=t>>>24,r=(65535&t)*1540483477+((t>>>16)*59797<<16)^(65535&r)*1540483477+((r>>>16)*59797<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r^=255&e.charCodeAt(n),r=(65535&r)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,(((r=(65535&r)*1540483477+((r>>>16)*59797<<16))^r>>>15)>>>0).toString(36)},e5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var e8=/[A-Z]|^ms/g,e9=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e7=function(e){return 45===e.charCodeAt(1)},te=function(e){return null!=e&&"boolean"!=typeof e},tt=eH(function(e){return e7(e)?e:e.replace(e8,"-$&").toLowerCase()}),tr=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(e9,function(e,t,r){return v={name:t,styles:r,next:v},t})}return 1===e5[e]||e7(e)||"number"!=typeof t||0===t?t:t+"px"};function tn(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return v={name:r.name,styles:r.styles,next:v},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)v={name:n.name,styles:n.styles,next:v},n=n.next;return r.styles+";"}return ti(e,t,r);case"function":if(void 0!==e){var i=v,s=r(e);return v=i,tn(e,t,s)}}if(null==t)return r;var o=t[r];return void 0!==o?o:r}function ti(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=tn(e,t,r[i])+";";else for(var s in r){var o=r[s];if("object"!=typeof o)null!=t&&void 0!==t[o]?n+=s+"{"+t[o]+"}":te(o)&&(n+=tt(s)+":"+tr(s,o)+";");else if(Array.isArray(o)&&"string"==typeof o[0]&&(null==t||void 0===t[o[0]]))for(var a=0;a<o.length;a++)te(o[a])&&(n+=tt(s)+":"+tr(s,o[a])+";");else{var l=tn(e,t,o);switch(s){case"animation":case"animationName":n+=tt(s)+":"+l+";";break;default:n+=s+"{"+l+"}"}}}return n}var ts=/label:\s*([^\s;\n{]+)\s*(;|$)/g,to=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n,i=!0,s="";v=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,s+=tn(r,t,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=tn(r,t,e[a]),i&&(s+=o[a]);ts.lastIndex=0;for(var l="";null!==(n=ts.exec(s));)l+="-"+n[1];return{name:e4(s)+l,styles:s,next:v}},ta="undefined"!=typeof document,tl=function(e){return e()},tu=!!_.useInsertionEffect&&_.useInsertionEffect,tc=ta&&tu||tl,td="undefined"!=typeof document,th={}.hasOwnProperty,tf=(0,_.createContext)("undefined"!=typeof HTMLElement?e0({key:"css"}):null);tf.Provider;var tp=function(e){return(0,_.forwardRef)(function(t,r){return e(t,(0,_.useContext)(tf),r)})};td||(tp=function(e){return function(t){var r=(0,_.useContext)(tf);return null===r?(r=e0({key:"css"}),(0,_.createElement)(tf.Provider,{value:r},e(t,r))):e(t,r)}});var tm=(0,_.createContext)({}),tg="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ty=function(e,t){var r={};for(var n in t)th.call(t,n)&&(r[n]=t[n]);return r[tg]=e,r},tv=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;e3(t,r,n);var i=tc(function(){return e6(t,r,n)});if(!td&&void 0!==i){for(var s,o=r.name,a=r.next;void 0!==a;)o+=" "+a.name,a=a.next;return(0,_.createElement)("style",((s={})["data-emotion"]=t.key+" "+o,s.dangerouslySetInnerHTML={__html:i},s.nonce=t.sheet.nonce,s))}return null},tb=tp(function(e,t,r){var n=e.css;"string"==typeof n&&void 0!==t.registered[n]&&(n=t.registered[n]);var i=e[tg],s=[n],o="";"string"==typeof e.className?o=e2(t.registered,s,e.className):null!=e.className&&(o=e.className+" ");var a=to(s,void 0,(0,_.useContext)(tm));o+=t.key+"-"+a.name;var l={};for(var u in e)th.call(e,u)&&"css"!==u&&u!==tg&&(l[u]=e[u]);return l.ref=r,l.className=o,(0,_.createElement)(_.Fragment,null,(0,_.createElement)(tv,{cache:t,serialized:a,isStringTag:"string"==typeof i}),(0,_.createElement)(i,l))});r(47821),r(34998);var t_=function(e,t){var r=arguments;if(null==t||!th.call(t,"css"))return _.createElement.apply(void 0,r);var n=r.length,i=Array(n);i[0]=tb,i[1]=ty(e,t);for(var s=2;s<n;s++)i[s]=r[s];return _.createElement.apply(null,i)};function tw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return to(t)}var tS=function(){var e=tw.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function tE(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var tT=r(81202);function tO(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function tC(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function tk(e){return tC(e).getComputedStyle(e)}function tx(e){return e instanceof tC(e).Node}function tA(e){return tx(e)?(e.nodeName||"").toLowerCase():""}function tR(){if(n)return n;let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?n=e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function tI(e){return e instanceof tC(e).HTMLElement}function tP(e){return e instanceof tC(e).Element}function tD(e){if("undefined"==typeof ShadowRoot)return!1;let t=tC(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function tN(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=tk(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function tM(){return/^((?!chrome|android).)*safari/i.test(tR())}function tj(e){return["html","body","#document"].includes(tA(e))}let tL=Math.max,tF=Math.round;function tU(e){let t=tk(e),r=parseFloat(t.width),n=parseFloat(t.height),i=tI(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=tF(r)!==s||tF(n)!==o;return a&&(r=s,n=o),{width:r,height:n,fallback:a}}function tB(e){return tP(e)?e:e.contextElement}let tV={x:1,y:1};function tH(e){let t=tB(e);if(!tI(t))return tV;let r=t.getBoundingClientRect(),{width:n,height:i,fallback:s}=tU(t),o=(s?tF(r.width):r.width)/n,a=(s?tF(r.height):r.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function tz(e,t,r,n){var i,s;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),a=tB(e),l=tV;t&&(n?tP(n)&&(l=tH(n)):l=tH(e));let u=a?tC(a):window,c=tM()&&r,d=(o.left+(c&&(null==(i=u.visualViewport)?void 0:i.offsetLeft)||0))/l.x,h=(o.top+(c&&(null==(s=u.visualViewport)?void 0:s.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){let e=tC(a),t=n&&tP(n)?tC(n):n,r=e.frameElement;for(;r&&n&&t!==e;){let e=tH(r),t=r.getBoundingClientRect(),n=getComputedStyle(r);t.x+=(r.clientLeft+parseFloat(n.paddingLeft))*e.x,t.y+=(r.clientTop+parseFloat(n.paddingTop))*e.y,d*=e.x,h*=e.y,f*=e.x,p*=e.y,d+=t.x,h+=t.y,r=tC(r).frameElement}}return tO({width:f,height:p,x:d,y:h})}function tW(e){return((tx(e)?e.ownerDocument:e.document)||window.document).documentElement}function tq(e){return tP(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function t$(e){return tz(tW(e)).left+tq(e).scrollLeft}function tK(e){if("html"===tA(e))return e;let t=e.assignedSlot||e.parentNode||tD(e)&&e.host||tW(e);return tD(t)?t.host:t}function tJ(e){let t=tK(e);return tj(t)?t.ownerDocument.body:tI(t)&&tN(t)?t:tJ(t)}function tG(e,t){var r;void 0===t&&(t=[]);let n=tJ(e),i=n===(null==(r=e.ownerDocument)?void 0:r.body),s=tC(n);return i?t.concat(s,s.visualViewport||[],tN(n)?n:[]):t.concat(n,tG(n))}function tQ(e,t,r,n){let i;void 0===n&&(n={});let{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=!0,animationFrame:l=!1}=n,u=s&&!l,c=u||o?[...tP(e)?tG(e):e.contextElement?tG(e.contextElement):[],...tG(t)]:[];c.forEach(e=>{u&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)});let d=null;if(a){let n=!0;d=new ResizeObserver(()=>{n||r(),n=!1}),tP(e)&&!l&&d.observe(e),tP(e)||!e.contextElement||l||d.observe(e.contextElement),d.observe(t)}let h=l?tz(e):null;function f(){let t=tz(e);h&&(t.x!==h.x||t.y!==h.y||t.width!==h.width||t.height!==h.height)&&r(),h=t,i=requestAnimationFrame(f)}return l&&f(),r(),()=>{var e;c.forEach(e=>{u&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)}),null==(e=d)||e.disconnect(),d=null,l&&cancelAnimationFrame(i)}}let tY="undefined"!=typeof document?_.useLayoutEffect:_.useEffect;var tX=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],tZ=function(){};function t0(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function t1(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var s=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&s.push("".concat(t0(e,o)));return s.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}var t2=function(e){return rd(e)?e.filter(Boolean):"object"===i(e)&&null!==e?[e]:[]},t3=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,u({},y(e,tX))},t6=function(e,t,r){var n=e.cx,i=e.getStyles,s=e.getClassNames,o=e.className;return{css:i(t,e),className:n(null!=r?r:{},s(t,e),o)}};function t4(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function t5(e){return t4(e)?window.innerHeight:e.clientHeight}function t8(e){return t4(e)?window.pageYOffset:e.scrollTop}function t9(e,t){if(t4(e)){window.scrollTo(0,t);return}e.scrollTop=t}function t7(e){var t=getComputedStyle(e),r="absolute"===t.position,n=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!r||"static"!==t.position)&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function re(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function rt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:tZ,i=t8(e),s=t-i,o=10,a=0;function l(){t9(e,re(a+=o,i,s,r)),a<r?window.requestAnimationFrame(l):n(e)}l()}function rr(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?t9(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&t9(e,Math.max(t.offsetTop-i,0))}function rn(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function ri(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}function rs(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}var ro=!1,ra={get passive(){return ro=!0}},rl="undefined"!=typeof window?window:{};rl.addEventListener&&rl.removeEventListener&&(rl.addEventListener("p",tZ,ra),rl.removeEventListener("p",tZ,!1));var ru=ro;function rc(e){return null!=e}function rd(e){return Array.isArray(e)}function rh(e,t,r){return e?t:r}function rf(e){return e}function rp(e){return e}var rm=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.entries(e).filter(function(e){var t=m(e,1)[0];return!r.includes(t)}).reduce(function(e,t){var r=m(t,2),n=r[0],i=r[1];return e[n]=i,e},{})};function rg(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,s=e.shouldScroll,o=e.isFixedPosition,a=e.controlHeight,l=t7(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var c=l.getBoundingClientRect().height,d=r.getBoundingClientRect(),h=d.bottom,f=d.height,p=d.top,m=r.offsetParent.getBoundingClientRect().top,g=o?window.innerHeight:t5(l),y=t8(l),v=parseInt(getComputedStyle(r).marginBottom,10),b=parseInt(getComputedStyle(r).marginTop,10),_=m-b,w=g-p,S=_+y,E=c-y-p,T=h-g+y+v,O=y+p-b,C=160;switch(i){case"auto":case"bottom":if(w>=f)return{placement:"bottom",maxHeight:t};if(E>=f&&!o)return s&&rt(l,T,C),{placement:"bottom",maxHeight:t};if(!o&&E>=n||o&&w>=n)return s&&rt(l,T,C),{placement:"bottom",maxHeight:o?w-v:E-v};if("auto"===i||o){var k=t,x=o?_:S;return x>=n&&(k=Math.min(x-v-a,t)),{placement:"top",maxHeight:k}}if("bottom"===i)return s&&t9(l,T),{placement:"bottom",maxHeight:t};break;case"top":if(_>=f)return{placement:"top",maxHeight:t};if(S>=f&&!o)return s&&rt(l,O,C),{placement:"top",maxHeight:t};if(!o&&S>=n||o&&_>=n){var A=t;return(!o&&S>=n||o&&_>=n)&&(A=o?_-b:S-b),s&&rt(l,O,C),{placement:"top",maxHeight:A}}return{placement:"bottom",maxHeight:t};default:throw Error('Invalid placement provided "'.concat(i,'".'))}return u}function ry(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var rv=function(e){return"auto"===e?"bottom":e},rb=function(e,t){var r,n=e.placement,i=e.theme,s=i.borderRadius,o=i.spacing,l=i.colors;return u((a(r={label:"menu"},ry(n),"100%"),a(r,"position","absolute"),a(r,"width","100%"),a(r,"zIndex",1),r),t?{}:{backgroundColor:l.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:o.menuGutter,marginTop:o.menuGutter})},r_=(0,_.createContext)(null),rw=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,i=e.menuPlacement,s=e.menuPosition,o=e.menuShouldScrollIntoView,a=e.theme,l=((0,_.useContext)(r_)||{}).setPortalPlacement,c=(0,_.useRef)(null),d=m((0,_.useState)(n),2),h=d[0],f=d[1],p=m((0,_.useState)(null),2),g=p[0],y=p[1],v=a.spacing.controlHeight;return tY(function(){var e=c.current;if(e){var t="fixed"===s,a=o&&!t,u=rg({maxHeight:n,menuEl:e,minHeight:r,placement:i,shouldScroll:a,isFixedPosition:t,controlHeight:v});f(u.maxHeight),y(u.placement),null==l||l(u.placement)}},[n,i,s,o,r,l,v]),t({ref:c,placerProps:u(u({},e),{},{placement:g||rv(i),maxHeight:h})})},rS=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return t_("div",E({},t6(e,"menu",{menu:!0}),{ref:r},n),t)},rE=function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return u({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},rT=function(e){var t=e.children,r=e.innerProps,n=e.innerRef,i=e.isMulti;return t_("div",E({},t6(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:n},r),t)},rO=function(e,t){var r=e.theme,n=r.spacing.baseUnit,i=r.colors;return u({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},rC=rO,rk=rO,rx=function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),t)};rx.defaultProps={children:"No options"};var rA=function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),t)};rA.defaultProps={children:"Loading..."};var rR=function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},rI=function(e){var t=e.appendTo,r=e.children,n=e.controlElement,i=e.innerProps,s=e.menuPlacement,o=e.menuPosition,a=(0,_.useRef)(null),l=(0,_.useRef)(null),c=m((0,_.useState)(rv(s)),2),d=c[0],h=c[1],f=(0,_.useMemo)(function(){return{setPortalPlacement:h}},[]),p=m((0,_.useState)(null),2),g=p[0],y=p[1],v=(0,_.useCallback)(function(){if(n){var e=rn(n),t="fixed"===o?0:window.pageYOffset,r=e[d]+t;(r!==(null==g?void 0:g.offset)||e.left!==(null==g?void 0:g.rect.left)||e.width!==(null==g?void 0:g.rect.width))&&y({offset:r,rect:e})}},[n,o,d,null==g?void 0:g.offset,null==g?void 0:g.rect.left,null==g?void 0:g.rect.width]);tY(function(){v()},[v]);var b=(0,_.useCallback)(function(){"function"==typeof l.current&&(l.current(),l.current=null),n&&a.current&&(l.current=tQ(n,a.current,v,{elementResize:"ResizeObserver"in window}))},[n,v]);tY(function(){b()},[b]);var w=(0,_.useCallback)(function(e){a.current=e,b()},[b]);if(!t&&"fixed"!==o||!g)return null;var S=t_("div",E({ref:w},t6(u(u({},e),{},{offset:g.offset,position:o,rect:g.rect}),"menuPortal",{"menu-portal":!0}),i),r);return t_(r_.Provider,{value:f},t?(0,tT.createPortal)(S,t):S)},rP=function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},rD=function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,i=e.isRtl;return t_("div",E({},t6(e,"container",{"--is-disabled":n,"--is-rtl":i}),r),t)},rN=function(e,t){var r=e.theme.spacing,n=e.isMulti,i=e.hasValue,s=e.selectProps.controlShouldRenderValue;return u({alignItems:"center",display:n&&i&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})},rM=function(e){var t=e.children,r=e.innerProps,n=e.isMulti,i=e.hasValue;return t_("div",E({},t6(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":i}),r),t)},rj=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},rL=function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"indicatorsContainer",{indicators:!0}),r),t)},rF=["size"],rU={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},rB=function(e){var t=e.size,r=y(e,rF);return t_("svg",E({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:rU},r))},rV=function(e){return t_(rB,E({size:20},e),t_("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},rH=function(e){return t_(rB,E({size:20},e),t_("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},rz=function(e,t){var r=e.isFocused,n=e.theme,i=n.spacing.baseUnit,s=n.colors;return u({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i,":hover":{color:r?s.neutral80:s.neutral40}})},rW=rz,rq=function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||t_(rH,null))},r$=rz,rK=function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||t_(rV,null))},rJ=function(e,t){var r=e.isDisabled,n=e.theme,i=n.spacing.baseUnit,s=n.colors;return u({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*i,marginTop:2*i})},rG=function(e){var t=e.innerProps;return t_("span",E({},t,t6(e,"indicatorSeparator",{"indicator-separator":!0})))},rQ=tS(b||(b=tE(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),rY=function(e,t){var r=e.isFocused,n=e.size,i=e.theme,s=i.colors,o=i.spacing.baseUnit;return u({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*o})},rX=function(e){var t=e.delay,r=e.offset;return t_("span",{css:tw({animation:"".concat(rQ," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},rZ=function(e){var t=e.innerProps,r=e.isRtl;return t_("div",E({},t6(e,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),t_(rX,{delay:0,offset:r}),t_(rX,{delay:160,offset:!0}),t_(rX,{delay:320,offset:!r}))};rZ.defaultProps={size:4};var r0=function(e,t){var r=e.isDisabled,n=e.isFocused,i=e.theme,s=i.colors,o=i.borderRadius;return u({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},r1=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,i=e.innerRef,s=e.innerProps,o=e.menuIsOpen;return t_("div",E({ref:i},t6(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":o}),s),t)},r2=["data"],r3=function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},r6=function(e){var t=e.children,r=e.cx,n=e.getStyles,i=e.getClassNames,s=e.Heading,o=e.headingProps,a=e.innerProps,l=e.label,u=e.theme,c=e.selectProps;return t_("div",E({},t6(e,"group",{group:!0}),a),t_(s,E({},o,{selectProps:c,theme:u,getStyles:n,getClassNames:i,cx:r}),l),t_("div",null,t))},r4=function(e,t){var r=e.theme,n=r.colors,i=r.spacing;return u({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},r5=function(e){var t=t3(e);t.data;var r=y(t,r2);return t_("div",E({},t6(e,"groupHeading",{"group-heading":!0}),r))},r8=["innerRef","isDisabled","isHidden","inputClassName"],r9=function(e,t){var r=e.isDisabled,n=e.value,i=e.theme,s=i.spacing,o=i.colors;return u(u({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},ne),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:o.neutral80})},r7={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},ne={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":u({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},r7)},nt=function(e){return u({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},r7)},nr=function(e,t){var r=e.theme,n=r.spacing,i=r.borderRadius,s=r.colors;return u({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:i/2,margin:n.baseUnit/2})},nn=function(e,t){var r=e.theme,n=r.borderRadius,i=r.colors,s=e.cropWithEllipsis;return u({overflow:"hidden",textOverflow:s||void 0===s?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},ni=function(e,t){var r=e.theme,n=r.spacing,i=r.borderRadius,s=r.colors,o=e.isFocused;return u({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:o?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},ns=function(e){var t=e.children;return t_("div",e.innerProps,t)};function no(e){var t=e.children,r=e.innerProps;return t_("div",E({role:"button"},r),t||t_(rV,{size:14}))}var na=function(e,t){var r=e.isDisabled,n=e.isFocused,i=e.isSelected,s=e.theme,o=s.spacing,a=s.colors;return u({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?a.primary:n?a.primary25:"transparent",color:r?a.neutral20:i?a.neutral0:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),":active":{backgroundColor:r?void 0:i?a.primary:a.primary50}})},nl=function(e,t){var r=e.theme,n=r.spacing,i=r.colors;return u({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},nu=function(e,t){var r=e.isDisabled,n=e.theme,i=n.spacing,s=n.colors;return u({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},nc={ClearIndicator:rK,Control:r1,DropdownIndicator:rq,DownChevron:rH,CrossIcon:rV,Group:r6,GroupHeading:r5,IndicatorsContainer:rL,IndicatorSeparator:rG,Input:function(e){var t=e.cx,r=e.value,n=t3(e),i=n.innerRef,s=n.isDisabled,o=n.isHidden,a=n.inputClassName,l=y(n,r8);return t_("div",E({},t6(e,"input",{"input-container":!0}),{"data-value":r||""}),t_("input",E({className:t({input:!0},a),ref:i,style:nt(o),disabled:s},l)))},LoadingIndicator:rZ,Menu:rS,MenuList:rT,MenuPortal:rI,LoadingMessage:rA,NoOptionsMessage:rx,MultiValue:function(e){var t=e.children,r=e.components,n=e.data,i=e.innerProps,s=e.isDisabled,o=e.removeProps,a=e.selectProps,l=r.Container,c=r.Label,d=r.Remove;return t_(l,{data:n,innerProps:u(u({},t6(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),i),selectProps:a},t_(c,{data:n,innerProps:u({},t6(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),t_(d,{data:n,innerProps:u(u({},t6(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},o),selectProps:a}))},MultiValueContainer:ns,MultiValueLabel:ns,MultiValueRemove:no,Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,i=e.isSelected,s=e.innerRef,o=e.innerProps;return t_("div",E({},t6(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":i}),{ref:s,"aria-disabled":r},o),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return t_("div",E({},t6(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:rD,SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return t_("div",E({},t6(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:rM},nd=function(e){return u(u({},nc),e.components)},nh=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function nf(e,t){return!!(e===t||nh(e)&&nh(t))}function np(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!nf(e[r],t[r]))return!1;return!0}function nm(e,t){void 0===t&&(t=np);var r=null;function n(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var s=e.apply(this,n);return r={lastResult:s,lastArgs:n,lastThis:this},s}return n.clear=function(){r=null},n}for(var ng={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ny=function(e){return t_("span",E({css:ng},e))},nv={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.isDisabled,i=e.tabSelectsValue;switch(e.context){case"menu":return"Use Up and Down to choose options".concat(n?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=void 0===r?"":r,i=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return s?"option ".concat(n," is disabled. Select another option."):"option ".concat(n,", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,i=e.label,s=void 0===i?"":i,o=e.selectValue,a=e.isDisabled,l=e.isSelected,u=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&o)return"value ".concat(s," focused, ").concat(u(o,r),".");if("menu"===t){var c=a?" disabled":"",d="".concat(l?"selected":"focused").concat(c);return"option ".concat(s," ").concat(d,", ").concat(u(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},nb=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,i=e.focusableOptions,s=e.isFocused,o=e.selectValue,a=e.selectProps,l=e.id,c=a.ariaLiveMessages,d=a.getOptionLabel,h=a.inputValue,f=a.isMulti,p=a.isOptionDisabled,m=a.isSearchable,g=a.menuIsOpen,y=a.options,v=a.screenReaderStatus,b=a.tabSelectsValue,w=a["aria-label"],S=a["aria-live"],E=(0,_.useMemo)(function(){return u(u({},nv),c||{})},[c]),T=(0,_.useMemo)(function(){var e="";if(t&&E.onChange){var r=t.option,n=t.options,i=t.removedValue,s=t.removedValues,a=t.value,l=function(e){return Array.isArray(e)?null:e},c=i||r||l(a),h=c?d(c):"",f=n||s||void 0,m=f?f.map(d):[],g=u({isDisabled:c&&p(c,o),label:h,labels:m},t);e=E.onChange(g)}return e},[t,E,p,o,d]),O=(0,_.useMemo)(function(){var e="",t=r||n,s=!!(r&&o&&o.includes(r));if(t&&E.onFocus){var a={focused:t,label:d(t),isDisabled:p(t,o),isSelected:s,options:i,context:t===r?"menu":"value",selectValue:o};e=E.onFocus(a)}return e},[r,n,d,p,E,i,o]),C=(0,_.useMemo)(function(){var e="";if(g&&y.length&&E.onFilter){var t=v({count:i.length});e=E.onFilter({inputValue:h,resultsMessage:t})}return e},[i,h,g,E,y,v]),k=(0,_.useMemo)(function(){var e="";if(E.guidance){var t=n?"value":g?"menu":"input";e=E.guidance({"aria-label":w,context:t,isDisabled:r&&p(r,o),isMulti:f,isSearchable:m,tabSelectsValue:b})}return e},[w,r,n,f,p,m,g,E,o,b]),x="".concat(O," ").concat(C," ").concat(k),A=t_(_.Fragment,null,t_("span",{id:"aria-selection"},T),t_("span",{id:"aria-context"},x)),R=(null==t?void 0:t.action)==="initial-input-focus";return t_(_.Fragment,null,t_(ny,{id:l},R&&A),t_(ny,{"aria-live":S,"aria-atomic":"false","aria-relevant":"additions text"},s&&!R&&A))},n_=[{base:"A",letters:"AⒶＡ\xc0\xc1\xc2ẦẤẪẨ\xc3ĀĂẰẮẴẲȦǠ\xc4ǞẢ\xc5ǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"\xc6ǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČ\xc7ḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥ\xc8\xc9\xcaỀẾỄỂẼĒḔḖĔĖ\xcbẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩ\xcc\xcd\xceĨĪĬİ\xcfḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃ\xd1ṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯ\xd2\xd3\xd4ỒỐỖỔ\xd5ṌȬṎŌṐṒŎȮȰ\xd6ȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬ\xd8ǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵ\xd9\xda\xdbŨṸŪṺŬ\xdcǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲ\xddŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚ\xe0\xe1\xe2ầấẫẩ\xe3āăằắẵẳȧǡ\xe4ǟả\xe5ǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"\xe6ǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċč\xe7ḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅ\xe8\xe9\xeaềếễểẽēḕḗĕė\xebẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉ\xec\xed\xeeĩīĭ\xefḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹń\xf1ṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏ\xf2\xf3\xf4ồốỗổ\xf5ṍȭṏōṑṓŏȯȱ\xf6ȫỏőǒȍȏơờớỡởợọộǫǭ\xf8ǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓ\xdfśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕ\xf9\xfa\xfbũṹūṻŭ\xfcǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳ\xfdŷỹȳẏ\xffỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],nw=RegExp("["+n_.map(function(e){return e.letters}).join("")+"]","g"),nS={},nE=0;nE<n_.length;nE++)for(var nT=n_[nE],nO=0;nO<nT.letters.length;nO++)nS[nT.letters[nO]]=nT.base;var nC=function(e){return e.replace(nw,function(e){return nS[e]})},nk=nm(nC),nx=function(e){return e.replace(/^\s+|\s+$/g,"")},nA=function(e){return"".concat(e.label," ").concat(e.value)},nR=function(e){return function(t,r){if(t.data.__isNew__)return!0;var n=u({ignoreCase:!0,ignoreAccents:!0,stringify:nA,trim:!0,matchFrom:"any"},e),i=n.ignoreCase,s=n.ignoreAccents,o=n.stringify,a=n.trim,l=n.matchFrom,c=a?nx(r):r,d=a?nx(o(t)):o(t);return i&&(c=c.toLowerCase(),d=d.toLowerCase()),s&&(c=nk(c),d=nC(d)),"start"===l?d.substr(0,c.length)===c:d.indexOf(c)>-1}},nI=["innerRef"];function nP(e){var t=e.innerRef,r=rm(y(e,nI),"onExited","in","enter","exit","appear");return t_("input",E({ref:t},r,{css:tw({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var nD=function(e){e.preventDefault(),e.stopPropagation()};function nN(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,s=e.onTopLeave,o=(0,_.useRef)(!1),a=(0,_.useRef)(!1),l=(0,_.useRef)(0),u=(0,_.useRef)(null),c=(0,_.useCallback)(function(e,t){if(null!==u.current){var l=u.current,c=l.scrollTop,d=l.scrollHeight,h=l.clientHeight,f=u.current,p=t>0,m=d-h-c,g=!1;m>t&&o.current&&(n&&n(e),o.current=!1),p&&a.current&&(s&&s(e),a.current=!1),p&&t>m?(r&&!o.current&&r(e),f.scrollTop=d,g=!0,o.current=!0):!p&&-t>c&&(i&&!a.current&&i(e),f.scrollTop=0,g=!0,a.current=!0),g&&nD(e)}},[r,n,i,s]),d=(0,_.useCallback)(function(e){c(e,e.deltaY)},[c]),h=(0,_.useCallback)(function(e){l.current=e.changedTouches[0].clientY},[]),f=(0,_.useCallback)(function(e){var t=l.current-e.changedTouches[0].clientY;c(e,t)},[c]),p=(0,_.useCallback)(function(e){if(e){var t=!!ru&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",h,t),e.addEventListener("touchmove",f,t)}},[f,h,d]),m=(0,_.useCallback)(function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",h,!1),e.removeEventListener("touchmove",f,!1))},[f,h,d]);return(0,_.useEffect)(function(){if(t){var e=u.current;return p(e),function(){m(e)}}},[t,p,m]),function(e){u.current=e}}var nM=["boxSizing","height","overflow","paddingRight","position"],nj={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function nL(e){e.preventDefault()}function nF(e){e.stopPropagation()}function nU(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;0===e?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function nB(){return"ontouchstart"in window||navigator.maxTouchPoints}var nV=!!("undefined"!=typeof window&&window.document&&window.document.createElement),nH=0,nz={capture:!1,passive:!1};function nW(e){var t=e.isEnabled,r=e.accountForScrollbars,n=void 0===r||r,i=(0,_.useRef)({}),s=(0,_.useRef)(null),o=(0,_.useCallback)(function(e){if(nV){var t=document.body,r=t&&t.style;if(n&&nM.forEach(function(e){var t=r&&r[e];i.current[e]=t}),n&&nH<1){var s=parseInt(i.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,a=window.innerWidth-o+s||0;Object.keys(nj).forEach(function(e){var t=nj[e];r&&(r[e]=t)}),r&&(r.paddingRight="".concat(a,"px"))}t&&nB()&&(t.addEventListener("touchmove",nL,nz),e&&(e.addEventListener("touchstart",nU,nz),e.addEventListener("touchmove",nF,nz))),nH+=1}},[n]),a=(0,_.useCallback)(function(e){if(nV){var t=document.body,r=t&&t.style;nH=Math.max(nH-1,0),n&&nH<1&&nM.forEach(function(e){var t=i.current[e];r&&(r[e]=t)}),t&&nB()&&(t.removeEventListener("touchmove",nL,nz),e&&(e.removeEventListener("touchstart",nU,nz),e.removeEventListener("touchmove",nF,nz)))}},[n]);return(0,_.useEffect)(function(){if(t){var e=s.current;return o(e),function(){a(e)}}},[t,o,a]),function(e){s.current=e}}var nq=function(){return document.activeElement&&document.activeElement.blur()},n$={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function nK(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=nN({isEnabled:void 0===n||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=nW({isEnabled:r}),o=function(e){i(e),s(e)};return t_(_.Fragment,null,r&&t_("div",{onClick:nq,css:n$}),t(o))}var nJ={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},nG=function(e){return t_("input",{required:!0,name:e.name,tabIndex:-1,onFocus:e.onFocus,css:nJ,value:"",onChange:function(){}})},nQ=function(e){return e.label},nY=function(e){return e.label},nX=function(e){return e.value},nZ=function(e){return!!e.isDisabled},n0={clearIndicator:r$,container:rP,control:r0,dropdownIndicator:rW,group:r3,groupHeading:r4,indicatorsContainer:rj,indicatorSeparator:rJ,input:r9,loadingIndicator:rY,loadingMessage:rk,menu:rb,menuList:rE,menuPortal:rR,multiValue:nr,multiValueLabel:nn,multiValueRemove:ni,noOptionsMessage:rC,option:na,placeholder:nl,singleValue:nu,valueContainer:rN},n1={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},n2={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:ri(),captureMenuScroll:!ri(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:nR(),formatGroupLabel:nQ,getOptionLabel:nY,getOptionValue:nX,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:nZ,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!rs(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function n3(e,t,r,n){var i=ir(e,t,r),s=ii(e,t,r),o=ie(e,t),a=it(e,t);return{type:"option",data:t,isDisabled:i,isSelected:s,label:o,value:a,index:n}}function n6(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(r,n){return n3(e,r,t,n)}).filter(function(t){return n8(e,t)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var s=n3(e,r,t,n);return n8(e,s)?s:void 0}).filter(rc)}function n4(e){return e.reduce(function(e,t){return"group"===t.type?e.push.apply(e,L(t.options.map(function(e){return e.data}))):e.push(t.data),e},[])}function n5(e,t){return n4(n6(e,t))}function n8(e,t){var r=e.inputValue,n=void 0===r?"":r,i=t.data,s=t.isSelected,o=t.label,a=t.value;return(!io(e)||!s)&&is(e,{label:o,value:a,data:i},n)}function n9(e,t){var r=e.focusedValue,n=e.selectValue.indexOf(r);if(n>-1){if(t.indexOf(r)>-1)return r;if(n<t.length)return t[n]}return null}function n7(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var ie=function(e,t){return e.getOptionLabel(t)},it=function(e,t){return e.getOptionValue(t)};function ir(e,t,r){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,r)}function ii(e,t,r){if(r.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,r);var n=it(e,t);return r.some(function(t){return it(e,t)===n})}function is(e,t,r){return!e.filterOption||e.filterOption(t,r)}var io=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return void 0===t?r:t},ia=1,il=function(e){x(r,e);var t=D(r);function r(e){var n;if(T(this,r),(n=t.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},n.blockOptionHover=!1,n.isComposing=!1,n.commonProps=void 0,n.initialTouchX=0,n.initialTouchY=0,n.instancePrefix="",n.openAfterFocus=!1,n.scrollToFocusedOptionOnUpdate=!1,n.userIsDragging=void 0,n.controlRef=null,n.getControlRef=function(e){n.controlRef=e},n.focusedOptionRef=null,n.getFocusedOptionRef=function(e){n.focusedOptionRef=e},n.menuListRef=null,n.getMenuListRef=function(e){n.menuListRef=e},n.inputRef=null,n.getInputRef=function(e){n.inputRef=e},n.focus=n.focusInput,n.blur=n.blurInput,n.onChange=function(e,t){var r=n.props,i=r.onChange,s=r.name;t.name=s,n.ariaOnChange(e,t),i(e,t)},n.setValue=function(e,t,r){var i=n.props,s=i.closeMenuOnSelect,o=i.isMulti,a=i.inputValue;n.onInputChange("",{action:"set-value",prevInputValue:a}),s&&(n.setState({inputIsHiddenAfterUpdate:!o}),n.onMenuClose()),n.setState({clearFocusValueOnUpdate:!0}),n.onChange(e,{action:t,option:r})},n.selectOption=function(e){var t=n.props,r=t.blurInputOnSelect,i=t.isMulti,s=t.name,o=n.state.selectValue,a=i&&n.isOptionSelected(e,o),l=n.isOptionDisabled(e,o);if(a){var u=n.getOptionValue(e);n.setValue(rp(o.filter(function(e){return n.getOptionValue(e)!==u})),"deselect-option",e)}else if(l){n.ariaOnChange(rf(e),{action:"select-option",option:e,name:s});return}else i?n.setValue(rp([].concat(L(o),[e])),"select-option",e):n.setValue(rf(e),"select-option");r&&n.blurInput()},n.removeValue=function(e){var t=n.props.isMulti,r=n.state.selectValue,i=n.getOptionValue(e),s=r.filter(function(e){return n.getOptionValue(e)!==i}),o=rh(t,s,s[0]||null);n.onChange(o,{action:"remove-value",removedValue:e}),n.focusInput()},n.clearValue=function(){var e=n.state.selectValue;n.onChange(rh(n.props.isMulti,[],null),{action:"clear",removedValues:e})},n.popValue=function(){var e=n.props.isMulti,t=n.state.selectValue,r=t[t.length-1],i=t.slice(0,t.length-1),s=rh(e,i,i[0]||null);n.onChange(s,{action:"pop-value",removedValue:r})},n.getValue=function(){return n.state.selectValue},n.cx=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t1.apply(void 0,[n.props.classNamePrefix].concat(t))},n.getOptionLabel=function(e){return ie(n.props,e)},n.getOptionValue=function(e){return it(n.props,e)},n.getStyles=function(e,t){var r=n.props.unstyled,i=n0[e](t,r);i.boxSizing="border-box";var s=n.props.styles[e];return s?s(i,t):i},n.getClassNames=function(e,t){var r,i;return null===(r=(i=n.props.classNames)[e])||void 0===r?void 0:r.call(i,t)},n.getElementId=function(e){return"".concat(n.instancePrefix,"-").concat(e)},n.getComponents=function(){return nd(n.props)},n.buildCategorizedOptions=function(){return n6(n.props,n.state.selectValue)},n.getCategorizedOptions=function(){return n.props.menuIsOpen?n.buildCategorizedOptions():[]},n.buildFocusableOptions=function(){return n4(n.buildCategorizedOptions())},n.getFocusableOptions=function(){return n.props.menuIsOpen?n.buildFocusableOptions():[]},n.ariaOnChange=function(e,t){n.setState({ariaSelection:u({value:e},t)})},n.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),n.focusInput())},n.onMenuMouseMove=function(e){n.blockOptionHover=!1},n.onControlMouseDown=function(e){if(!e.defaultPrevented){var t=n.props.openMenuOnClick;n.state.isFocused?n.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&n.onMenuClose():t&&n.openMenu("first"):(t&&(n.openAfterFocus=!0),n.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},n.onDropdownIndicatorMouseDown=function(e){if((!e||"mousedown"!==e.type||0===e.button)&&!n.props.isDisabled){var t=n.props,r=t.isMulti,i=t.menuIsOpen;n.focusInput(),i?(n.setState({inputIsHiddenAfterUpdate:!r}),n.onMenuClose()):n.openMenu("first"),e.preventDefault()}},n.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(n.clearValue(),e.preventDefault(),n.openAfterFocus=!1,"touchend"===e.type?n.focusInput():setTimeout(function(){return n.focusInput()}))},n.onScroll=function(e){"boolean"==typeof n.props.closeMenuOnScroll?e.target instanceof HTMLElement&&t4(e.target)&&n.props.onMenuClose():"function"==typeof n.props.closeMenuOnScroll&&n.props.closeMenuOnScroll(e)&&n.props.onMenuClose()},n.onCompositionStart=function(){n.isComposing=!0},n.onCompositionEnd=function(){n.isComposing=!1},n.onTouchStart=function(e){var t=e.touches,r=t&&t.item(0);r&&(n.initialTouchX=r.clientX,n.initialTouchY=r.clientY,n.userIsDragging=!1)},n.onTouchMove=function(e){var t=e.touches,r=t&&t.item(0);if(r){var i=Math.abs(r.clientX-n.initialTouchX),s=Math.abs(r.clientY-n.initialTouchY),o=5;n.userIsDragging=i>o||s>o}},n.onTouchEnd=function(e){n.userIsDragging||(n.controlRef&&!n.controlRef.contains(e.target)&&n.menuListRef&&!n.menuListRef.contains(e.target)&&n.blurInput(),n.initialTouchX=0,n.initialTouchY=0)},n.onControlTouchEnd=function(e){n.userIsDragging||n.onControlMouseDown(e)},n.onClearIndicatorTouchEnd=function(e){n.userIsDragging||n.onClearIndicatorMouseDown(e)},n.onDropdownIndicatorTouchEnd=function(e){n.userIsDragging||n.onDropdownIndicatorMouseDown(e)},n.handleInputChange=function(e){var t=n.props.inputValue,r=e.currentTarget.value;n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange(r,{action:"input-change",prevInputValue:t}),n.props.menuIsOpen||n.onMenuOpen()},n.onInputFocus=function(e){n.props.onFocus&&n.props.onFocus(e),n.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(n.openAfterFocus||n.props.openMenuOnFocus)&&n.openMenu("first"),n.openAfterFocus=!1},n.onInputBlur=function(e){var t=n.props.inputValue;if(n.menuListRef&&n.menuListRef.contains(document.activeElement)){n.inputRef.focus();return}n.props.onBlur&&n.props.onBlur(e),n.onInputChange("",{action:"input-blur",prevInputValue:t}),n.onMenuClose(),n.setState({focusedValue:null,isFocused:!1})},n.onOptionHover=function(e){n.blockOptionHover||n.state.focusedOption===e||n.setState({focusedOption:e})},n.shouldHideSelectedOptions=function(){return io(n.props)},n.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),n.focus()},n.onKeyDown=function(e){var t=n.props,r=t.isMulti,i=t.backspaceRemovesValue,s=t.escapeClearsValue,o=t.inputValue,a=t.isClearable,l=t.isDisabled,u=t.menuIsOpen,c=t.onKeyDown,d=t.tabSelectsValue,h=t.openMenuOnFocus,f=n.state,p=f.focusedOption,m=f.focusedValue,g=f.selectValue;if(!l){if("function"==typeof c&&(c(e),e.defaultPrevented))return;switch(n.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||o)return;n.focusValue("previous");break;case"ArrowRight":if(!r||o)return;n.focusValue("next");break;case"Delete":case"Backspace":if(o)return;if(m)n.removeValue(m);else{if(!i)return;r?n.popValue():a&&n.clearValue()}break;case"Tab":if(n.isComposing||e.shiftKey||!u||!d||!p||h&&n.isOptionSelected(p,g))return;n.selectOption(p);break;case"Enter":if(229===e.keyCode)break;if(u){if(!p||n.isComposing)return;n.selectOption(p);break}return;case"Escape":u?(n.setState({inputIsHiddenAfterUpdate:!1}),n.onInputChange("",{action:"menu-close",prevInputValue:o}),n.onMenuClose()):a&&s&&n.clearValue();break;case" ":if(o)return;if(!u){n.openMenu("first");break}if(!p)return;n.selectOption(p);break;case"ArrowUp":u?n.focusOption("up"):n.openMenu("last");break;case"ArrowDown":u?n.focusOption("down"):n.openMenu("first");break;case"PageUp":if(!u)return;n.focusOption("pageup");break;case"PageDown":if(!u)return;n.focusOption("pagedown");break;case"Home":if(!u)return;n.focusOption("first");break;case"End":if(!u)return;n.focusOption("last");break;default:return}e.preventDefault()}},n.instancePrefix="react-select-"+(n.props.instanceId||++ia),n.state.selectValue=t2(e.value),e.menuIsOpen&&n.state.selectValue.length){var i=n.buildFocusableOptions(),s=i.indexOf(n.state.selectValue[0]);n.state.focusedOption=i[s]}return n}return C(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&rr(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isDisabled,n=t.menuIsOpen,i=this.state.isFocused;(i&&!r&&e.isDisabled||i&&n&&!e.menuIsOpen)&&this.focusInput(),i&&r&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||r||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(rr(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,r=this.state,n=r.selectValue,i=r.isFocused,s=this.buildFocusableOptions(),o="first"===e?0:s.length-1;if(!this.props.isMulti){var a=s.indexOf(n[0]);a>-1&&(o=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:s[o]},function(){return t.onMenuOpen()})}},{key:"focusValue",value:function(e){var t=this.state,r=t.selectValue,n=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=r.indexOf(n);n||(i=-1);var s=r.length-1,o=-1;if(r.length){switch(e){case"previous":o=0===i?0:-1===i?s:i-1;break;case"next":i>-1&&i<s&&(o=i+1)}this.setState({inputIsHidden:-1!==o,focusedValue:r[o]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,r=this.state.focusedOption,n=this.getFocusableOptions();if(n.length){var i=0,s=n.indexOf(r);r||(s=-1),"up"===e?i=s>0?s-1:n.length-1:"down"===e?i=(s+1)%n.length:"pageup"===e?(i=s-t)<0&&(i=0):"pagedown"===e?(i=s+t)>n.length-1&&(i=n.length-1):"last"===e&&(i=n.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:n[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(n1):u(u({},n1),this.props.theme):n1}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,r=this.getStyles,n=this.getClassNames,i=this.getValue,s=this.selectOption,o=this.setValue,a=this.props,l=a.isMulti,u=a.isRtl,c=a.options;return{clearValue:e,cx:t,getStyles:r,getClassNames:n,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:u,options:c,selectOption:s,selectProps:a,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,r=e.isMulti;return void 0===t?r:t}},{key:"isOptionDisabled",value:function(e,t){return ir(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return ii(this.props,e,t)}},{key:"filterOption",value:function(e,t){return is(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(e);var r=this.props.inputValue,n=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:r,selectValue:n})}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,r=e.isSearchable,n=e.inputId,i=e.inputValue,s=e.tabIndex,o=e.form,a=e.menuIsOpen,l=e.required,c=this.getComponents().Input,d=this.state,h=d.inputIsHidden,f=d.ariaSelection,p=this.commonProps,m=n||this.getElementId("input"),g=u(u(u({"aria-autocomplete":"list","aria-expanded":a,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":l,role:"combobox"},a&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?(null==f?void 0:f.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?_.createElement(c,E({},p,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:t,isHidden:h,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:o,type:"text",value:i},g)):_.createElement(nP,E({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:tZ,onFocus:this.onInputFocus,disabled:t,tabIndex:s,inputMode:"none",form:o,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),r=t.MultiValue,n=t.MultiValueContainer,i=t.MultiValueLabel,s=t.MultiValueRemove,o=t.SingleValue,a=t.Placeholder,l=this.commonProps,u=this.props,c=u.controlShouldRenderValue,d=u.isDisabled,h=u.isMulti,f=u.inputValue,p=u.placeholder,m=this.state,g=m.selectValue,y=m.focusedValue,v=m.isFocused;if(!this.hasValue()||!c)return f?null:_.createElement(a,E({},l,{key:"placeholder",isDisabled:d,isFocused:v,innerProps:{id:this.getElementId("placeholder")}}),p);if(h)return g.map(function(t,o){var a=t===y,u="".concat(e.getOptionLabel(t),"-").concat(e.getOptionValue(t));return _.createElement(r,E({},l,{components:{Container:n,Label:i,Remove:s},isFocused:a,isDisabled:d,key:u,index:o,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault()}},data:t}),e.formatOptionLabel(t,"value"))});if(f)return null;var b=g[0];return _.createElement(o,E({},l,{data:b,isDisabled:d}),this.formatOptionLabel(b,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,r=this.props,n=r.isDisabled,i=r.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||n||!this.hasValue()||i)return null;var o={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(e,E({},t,{innerProps:o,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,r=this.props,n=r.isDisabled,i=r.isLoading,s=this.state.isFocused;if(!e||!i)return null;var o={"aria-hidden":"true"};return _.createElement(e,E({},t,{innerProps:o,isDisabled:n,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,r=e.IndicatorSeparator;if(!t||!r)return null;var n=this.commonProps,i=this.props.isDisabled,s=this.state.isFocused;return _.createElement(r,E({},n,{isDisabled:i,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,r=this.props.isDisabled,n=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return _.createElement(e,E({},t,{innerProps:i,isDisabled:r,isFocused:n}))}},{key:"renderMenu",value:function(){var e,t=this,r=this.getComponents(),n=r.Group,i=r.GroupHeading,s=r.Menu,o=r.MenuList,a=r.MenuPortal,l=r.LoadingMessage,u=r.NoOptionsMessage,c=r.Option,d=this.commonProps,h=this.state.focusedOption,f=this.props,p=f.captureMenuScroll,m=f.inputValue,g=f.isLoading,y=f.loadingMessage,v=f.minMenuHeight,b=f.maxMenuHeight,w=f.menuIsOpen,S=f.menuPlacement,T=f.menuPosition,O=f.menuPortalTarget,C=f.menuShouldBlockScroll,k=f.menuShouldScrollIntoView,x=f.noOptionsMessage,A=f.onMenuScrollToTop,R=f.onMenuScrollToBottom;if(!w)return null;var I=function(e,r){var n=e.type,i=e.data,s=e.isDisabled,o=e.isSelected,a=e.label,l=e.value,u=h===i,f=s?void 0:function(){return t.onOptionHover(i)},p=s?void 0:function(){return t.selectOption(i)},m="".concat(t.getElementId("option"),"-").concat(r),g={id:m,onClick:p,onMouseMove:f,onMouseOver:f,tabIndex:-1};return _.createElement(c,E({},d,{innerProps:g,data:i,isDisabled:s,isSelected:o,key:m,label:a,type:n,value:l,isFocused:u,innerRef:u?t.getFocusedOptionRef:void 0}),t.formatOptionLabel(e.data,"menu"))};if(this.hasOptions())e=this.getCategorizedOptions().map(function(e){if("group"===e.type){var r=e.data,s=e.options,o=e.index,a="".concat(t.getElementId("group"),"-").concat(o),l="".concat(a,"-heading");return _.createElement(n,E({},d,{key:a,data:r,options:s,Heading:i,headingProps:{id:l,data:e.data},label:t.formatGroupLabel(e.data)}),e.options.map(function(e){return I(e,"".concat(o,"-").concat(e.index))}))}if("option"===e.type)return I(e,"".concat(e.index))});else if(g){var P=y({inputValue:m});if(null===P)return null;e=_.createElement(l,d,P)}else{var D=x({inputValue:m});if(null===D)return null;e=_.createElement(u,d,D)}var N={minMenuHeight:v,maxMenuHeight:b,menuPlacement:S,menuPosition:T,menuShouldScrollIntoView:k},M=_.createElement(rw,E({},d,N),function(r){var n=r.ref,i=r.placerProps,a=i.placement,l=i.maxHeight;return _.createElement(s,E({},d,N,{innerRef:n,innerProps:{onMouseDown:t.onMenuMouseDown,onMouseMove:t.onMenuMouseMove,id:t.getElementId("listbox")},isLoading:g,placement:a}),_.createElement(nK,{captureEnabled:p,onTopArrive:A,onBottomArrive:R,lockEnabled:C},function(r){return _.createElement(o,E({},d,{innerRef:function(e){t.getMenuListRef(e),r(e)},isLoading:g,maxHeight:l,focusedOption:h}),e)}))});return O||"fixed"===T?_.createElement(a,E({},d,{appendTo:O,controlElement:this.controlRef,menuPlacement:S,menuPosition:T}),M):M}},{key:"renderFormField",value:function(){var e=this,t=this.props,r=t.delimiter,n=t.isDisabled,i=t.isMulti,s=t.name,o=t.required,a=this.state.selectValue;if(s&&!n){if(o&&!this.hasValue())return _.createElement(nG,{name:s,onFocus:this.onValueInputFocus});if(i){if(r){var l=a.map(function(t){return e.getOptionValue(t)}).join(r);return _.createElement("input",{name:s,type:"hidden",value:l})}var u=a.length>0?a.map(function(t,r){return _.createElement("input",{key:"i-".concat(r),name:s,type:"hidden",value:e.getOptionValue(t)})}):_.createElement("input",{name:s,type:"hidden",value:""});return _.createElement("div",null,u)}var c=a[0]?this.getOptionValue(a[0]):"";return _.createElement("input",{name:s,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,s=t.isFocused,o=t.selectValue,a=this.getFocusableOptions();return _.createElement(nb,E({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:n,focusedValue:i,isFocused:s,selectValue:o,focusableOptions:a}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,r=e.IndicatorsContainer,n=e.SelectContainer,i=e.ValueContainer,s=this.props,o=s.className,a=s.id,l=s.isDisabled,u=s.menuIsOpen,c=this.state.isFocused,d=this.commonProps=this.getCommonProps();return _.createElement(n,E({},d,{className:o,innerProps:{id:a,onKeyDown:this.onKeyDown},isDisabled:l,isFocused:c}),this.renderLiveRegion(),_.createElement(t,E({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:l,isFocused:c,menuIsOpen:u}),_.createElement(i,E({},d,{isDisabled:l}),this.renderPlaceholderOrValue(),this.renderInput()),_.createElement(r,E({},d,{isDisabled:l}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevProps,n=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,s=t.ariaSelection,o=t.isFocused,a=t.prevWasFocused,l=e.options,c=e.value,d=e.menuIsOpen,h=e.inputValue,f=e.isMulti,p=t2(c),m={};if(r&&(c!==r.value||l!==r.options||d!==r.menuIsOpen||h!==r.inputValue)){var g=d?n5(e,p):[],y=n?n9(t,p):null;m={selectValue:p,focusedOption:n7(t,g),focusedValue:y,clearFocusValueOnUpdate:!1}}var v=null!=i&&e!==r?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},b=s,_=o&&a;return o&&!_&&(b={value:rh(f,p,p[0]||null),options:p,action:"initial-input-focus"},_=!a),(null==s?void 0:s.action)==="initial-input-focus"&&(b=null),u(u(u({},m),v),{},{prevProps:e,ariaSelection:b,prevWasFocused:_})}}]),r}(_.Component);il.defaultProps=n2,r(45455),r(13279),r(67738),r(78513),r(53388),r(82522),r(59335),r(81586),r(16347),r(8238),r(97307);let iu=(0,_.forwardRef)(function(e,t){var r=S(e);return _.createElement(il,E({ref:t},r))})},33620:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(3729);function i(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var s="function"==typeof Object.is?Object.is:i,o=n.useState,a=n.useEffect,l=n.useLayoutEffect,u=n.useDebugValue;function c(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return l(function(){i.value=r,i.getSnapshot=t,d(i)&&s({inst:i})},[e,r,t]),a(function(){return d(i)&&s({inst:i}),e(function(){d(i)&&s({inst:i})})},[e]),u(r),r}function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}function h(e,t){return t()}var f="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?h:c;t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:f},8145:(e,t,r)=>{"use strict";e.exports=r(33620)},23603:e=>{let t=new Proxy({},{get:(e,t)=>{if("__esModule"===t)return{};throw Error(`You're trying to import \`@heroicons/react/solid/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}});e.exports=t},81128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hkdf=void 0;let n=r(91276);function i(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}function s(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}function o(e){let t=s(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}function a(e){let t=s(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}function l(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}async function u(e,t,r,u,c){return(0,n.default)(i(e),o(t),s(r,"salt"),a(u),l(c,e))}t.hkdf=u,t.default=u},49339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113);t.default=(e,t,r,i,s)=>{let o=parseInt(e.substr(3),10)>>3||20,a=(0,n.createHmac)(e,r.byteLength?r:new Uint8Array(o)).update(t).digest(),l=Math.ceil(s/o),u=new Uint8Array(o*l+i.byteLength+1),c=0,d=0;for(let t=1;t<=l;t++)u.set(i,d),u[d+i.byteLength]=t,u.set((0,n.createHmac)(e,a).update(u.subarray(c,d+i.byteLength+1)).digest(),d),c=d,d+=o;return u.slice(0,s)}},91276:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),s=r(49339);"function"!=typeof i.hkdf||process.versions.electron||(n=async(...e)=>new Promise((t,r)=>{i.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})})),t.default=async(e,t,r,i,o)=>(n||s.default)(e,t,r,i,o)},83191:(e,t)=>{"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=i,t.serialize=s;var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||o,i=0;i<e.length;){var s=e.indexOf("=",i);if(-1===s)break;var a=e.indexOf(";",i);if(-1===a)a=e.length;else if(a<s){i=e.lastIndexOf(";",s-1)+1;continue}var l=e.slice(i,s).trim();if(void 0===r[l]){var c=e.slice(s+1,a).trim();34===c.charCodeAt(0)&&(c=c.slice(1,-1)),r[l]=u(c,n)}i=a+1}return r}function s(e,t,r){var i=r||{},s=i.encode||a;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var o=s(t);if(o&&!n.test(o))throw TypeError("argument val is invalid");var u=e+"="+o;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!n.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!n.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){var d=i.expires;if(!l(d)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+d.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():i.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u}function o(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function a(e){return encodeURIComponent(e)}function l(e){return"[object Date]"===r.call(e)||e instanceof Date}function u(e,t){try{return t(e)}catch(t){return e}}},80816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cryptoRuntime=t.base64url=t.generateSecret=t.generateKeyPair=t.errors=t.decodeJwt=t.decodeProtectedHeader=t.importJWK=t.importX509=t.importPKCS8=t.importSPKI=t.exportJWK=t.exportSPKI=t.exportPKCS8=t.UnsecuredJWT=t.createRemoteJWKSet=t.createLocalJWKSet=t.EmbeddedJWK=t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=t.EncryptJWT=t.SignJWT=t.GeneralSign=t.FlattenedSign=t.CompactSign=t.FlattenedEncrypt=t.CompactEncrypt=t.jwtDecrypt=t.jwtVerify=t.generalVerify=t.flattenedVerify=t.compactVerify=t.GeneralEncrypt=t.generalDecrypt=t.flattenedDecrypt=t.compactDecrypt=void 0;var n=r(84393);Object.defineProperty(t,"compactDecrypt",{enumerable:!0,get:function(){return n.compactDecrypt}});var i=r(15483);Object.defineProperty(t,"flattenedDecrypt",{enumerable:!0,get:function(){return i.flattenedDecrypt}});var s=r(97327);Object.defineProperty(t,"generalDecrypt",{enumerable:!0,get:function(){return s.generalDecrypt}});var o=r(79884);Object.defineProperty(t,"GeneralEncrypt",{enumerable:!0,get:function(){return o.GeneralEncrypt}});var a=r(53619);Object.defineProperty(t,"compactVerify",{enumerable:!0,get:function(){return a.compactVerify}});var l=r(97764);Object.defineProperty(t,"flattenedVerify",{enumerable:!0,get:function(){return l.flattenedVerify}});var u=r(81270);Object.defineProperty(t,"generalVerify",{enumerable:!0,get:function(){return u.generalVerify}});var c=r(87664);Object.defineProperty(t,"jwtVerify",{enumerable:!0,get:function(){return c.jwtVerify}});var d=r(30192);Object.defineProperty(t,"jwtDecrypt",{enumerable:!0,get:function(){return d.jwtDecrypt}});var h=r(17376);Object.defineProperty(t,"CompactEncrypt",{enumerable:!0,get:function(){return h.CompactEncrypt}});var f=r(84587);Object.defineProperty(t,"FlattenedEncrypt",{enumerable:!0,get:function(){return f.FlattenedEncrypt}});var p=r(13354);Object.defineProperty(t,"CompactSign",{enumerable:!0,get:function(){return p.CompactSign}});var m=r(88151);Object.defineProperty(t,"FlattenedSign",{enumerable:!0,get:function(){return m.FlattenedSign}});var g=r(29102);Object.defineProperty(t,"GeneralSign",{enumerable:!0,get:function(){return g.GeneralSign}});var y=r(60011);Object.defineProperty(t,"SignJWT",{enumerable:!0,get:function(){return y.SignJWT}});var v=r(98481);Object.defineProperty(t,"EncryptJWT",{enumerable:!0,get:function(){return v.EncryptJWT}});var b=r(75547);Object.defineProperty(t,"calculateJwkThumbprint",{enumerable:!0,get:function(){return b.calculateJwkThumbprint}}),Object.defineProperty(t,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return b.calculateJwkThumbprintUri}});var _=r(89207);Object.defineProperty(t,"EmbeddedJWK",{enumerable:!0,get:function(){return _.EmbeddedJWK}});var w=r(7398);Object.defineProperty(t,"createLocalJWKSet",{enumerable:!0,get:function(){return w.createLocalJWKSet}});var S=r(90877);Object.defineProperty(t,"createRemoteJWKSet",{enumerable:!0,get:function(){return S.createRemoteJWKSet}});var E=r(86113);Object.defineProperty(t,"UnsecuredJWT",{enumerable:!0,get:function(){return E.UnsecuredJWT}});var T=r(7308);Object.defineProperty(t,"exportPKCS8",{enumerable:!0,get:function(){return T.exportPKCS8}}),Object.defineProperty(t,"exportSPKI",{enumerable:!0,get:function(){return T.exportSPKI}}),Object.defineProperty(t,"exportJWK",{enumerable:!0,get:function(){return T.exportJWK}});var O=r(51309);Object.defineProperty(t,"importSPKI",{enumerable:!0,get:function(){return O.importSPKI}}),Object.defineProperty(t,"importPKCS8",{enumerable:!0,get:function(){return O.importPKCS8}}),Object.defineProperty(t,"importX509",{enumerable:!0,get:function(){return O.importX509}}),Object.defineProperty(t,"importJWK",{enumerable:!0,get:function(){return O.importJWK}});var C=r(52673);Object.defineProperty(t,"decodeProtectedHeader",{enumerable:!0,get:function(){return C.decodeProtectedHeader}});var k=r(10133);Object.defineProperty(t,"decodeJwt",{enumerable:!0,get:function(){return k.decodeJwt}}),t.errors=r(39627);var x=r(28700);Object.defineProperty(t,"generateKeyPair",{enumerable:!0,get:function(){return x.generateKeyPair}});var A=r(52377);Object.defineProperty(t,"generateSecret",{enumerable:!0,get:function(){return A.generateSecret}}),t.base64url=r(71680);var R=r(5810);Object.defineProperty(t,"cryptoRuntime",{enumerable:!0,get:function(){return R.default}})},84393:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactDecrypt=void 0;let n=r(15483),i=r(39627),s=r(23334);async function o(e,t,r){if(e instanceof Uint8Array&&(e=s.decoder.decode(e)),"string"!=typeof e)throw new i.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:o,1:a,2:l,3:u,4:c,length:d}=e.split(".");if(5!==d)throw new i.JWEInvalid("Invalid Compact JWE");let h=await (0,n.flattenedDecrypt)({ciphertext:u,iv:l||void 0,protected:o||void 0,tag:c||void 0,encrypted_key:a||void 0},t,r),f={plaintext:h.plaintext,protectedHeader:h.protectedHeader};return"function"==typeof t?{...f,key:h.key}:f}t.compactDecrypt=o},17376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactEncrypt=void 0;let n=r(84587);class i{constructor(e){this._flattened=new n.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}t.CompactEncrypt=i},15483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedDecrypt=void 0;let n=r(7864),i=r(17208),s=r(85042),o=r(39627),a=r(48581),l=r(4145),u=r(12865),c=r(23334),d=r(94481),h=r(96001),f=r(64540);async function p(e,t,r){var p;let m,g,y,v,b,_,w;if(!(0,l.default)(e))throw new o.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new o.JWEInvalid("JOSE Header missing");if("string"!=typeof e.iv)throw new o.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof e.ciphertext)throw new o.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof e.tag)throw new o.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new o.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new o.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new o.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,l.default)(e.unprotected))throw new o.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,n.decode)(e.protected);m=JSON.parse(c.decoder.decode(t))}catch{throw new o.JWEInvalid("JWE Protected Header is invalid")}if(!(0,a.default)(m,e.header,e.unprotected))throw new o.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let S={...m,...e.header,...e.unprotected};if((0,h.default)(o.JWEInvalid,new Map,null==r?void 0:r.crit,m,S),void 0!==S.zip){if(!m||!m.zip)throw new o.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==S.zip)throw new o.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:E,enc:T}=S;if("string"!=typeof E||!E)throw new o.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof T||!T)throw new o.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let O=r&&(0,f.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),C=r&&(0,f.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(O&&!O.has(E))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(C&&!C.has(T))throw new o.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==e.encrypted_key)try{g=(0,n.decode)(e.encrypted_key)}catch{throw new o.JWEInvalid("Failed to base64url decode the encrypted_key")}let k=!1;"function"==typeof t&&(t=await t(m,e),k=!0);try{y=await (0,u.default)(E,t,g,S,r)}catch(e){if(e instanceof TypeError||e instanceof o.JWEInvalid||e instanceof o.JOSENotSupported)throw e;y=(0,d.default)(T)}try{v=(0,n.decode)(e.iv)}catch{throw new o.JWEInvalid("Failed to base64url decode the iv")}try{b=(0,n.decode)(e.tag)}catch{throw new o.JWEInvalid("Failed to base64url decode the tag")}let x=c.encoder.encode(null!==(p=e.protected)&&void 0!==p?p:"");_=void 0!==e.aad?(0,c.concat)(x,c.encoder.encode("."),c.encoder.encode(e.aad)):x;try{w=(0,n.decode)(e.ciphertext)}catch{throw new o.JWEInvalid("Failed to base64url decode the ciphertext")}let A=await (0,i.default)(T,y,w,v,b,_);"DEF"===S.zip&&(A=await ((null==r?void 0:r.inflateRaw)||s.inflate)(A));let R={plaintext:A};if(void 0!==e.protected&&(R.protectedHeader=m),void 0!==e.aad)try{R.additionalAuthenticatedData=(0,n.decode)(e.aad)}catch{throw new o.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(R.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(R.unprotectedHeader=e.header),k)?{...R,key:t}:R}t.flattenedDecrypt=p},84587:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedEncrypt=t.unprotected=void 0;let n=r(7864),i=r(50315),s=r(85042),o=r(87742),a=r(22090),l=r(39627),u=r(48581),c=r(23334),d=r(96001);t.unprotected=Symbol();class h{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){let h,f,p,m,g,y,v;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new l.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,u.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new l.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let b={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,d.default)(l.JWEInvalid,new Map,null==r?void 0:r.crit,this._protectedHeader,b),void 0!==b.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new l.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==b.zip)throw new l.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:_,enc:w}=b;if("string"!=typeof _||!_)throw new l.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof w||!w)throw new l.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===_){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===_&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let n;({cek:f,encryptedKey:h,parameters:n}=await (0,a.default)(_,w,e,this._cek,this._keyManagementParameters)),n&&(r&&t.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}if(this._iv||(this._iv=(0,o.default)(w)),m=this._protectedHeader?c.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):c.encoder.encode(""),this._aad?(g=(0,n.encode)(this._aad),p=(0,c.concat)(m,c.encoder.encode("."),c.encoder.encode(g))):p=m,"DEF"===b.zip){let e=await ((null==r?void 0:r.deflateRaw)||s.deflate)(this._plaintext);({ciphertext:y,tag:v}=await (0,i.default)(w,e,f,this._iv,p))}else({ciphertext:y,tag:v}=await (0,i.default)(w,this._plaintext,f,this._iv,p));let S={ciphertext:(0,n.encode)(y),iv:(0,n.encode)(this._iv),tag:(0,n.encode)(v)};return h&&(S.encrypted_key=(0,n.encode)(h)),g&&(S.aad=g),this._protectedHeader&&(S.protected=c.decoder.decode(m)),this._sharedUnprotectedHeader&&(S.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(S.header=this._unprotectedHeader),S}}t.FlattenedEncrypt=h},97327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalDecrypt=void 0;let n=r(15483),i=r(39627),s=r(4145);async function o(e,t,r){if(!(0,s.default)(e))throw new i.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(s.default))throw new i.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new i.JWEInvalid("JWE Recipients has no members");for(let i of e.recipients)try{return await (0,n.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new i.JWEDecryptionFailed}t.generalDecrypt=o},79884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralEncrypt=void 0;let n=r(84587),i=r(39627),s=r(94481),o=r(48581),a=r(22090),l=r(7864),u=r(96001);class c{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}class d{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,t){let r=new c(this,e,{crit:null==t?void 0:t.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var t,r,c;let d;if(!this._recipients.length)throw new i.JWEInvalid("at least one recipient must be added");if(e={deflateRaw:null==e?void 0:e.deflateRaw},1===this._recipients.length){let[t]=this._recipients,r=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options,...e}),i={ciphertext:r.ciphertext,iv:r.iv,recipients:[{}],tag:r.tag};return r.aad&&(i.aad=r.aad),r.protected&&(i.protected=r.protected),r.unprotected&&(i.unprotected=r.unprotected),r.encrypted_key&&(i.recipients[0].encrypted_key=r.encrypted_key),r.header&&(i.recipients[0].header=r.header),i}for(let e=0;e<this._recipients.length;e++){let t=this._recipients[e];if(!(0,o.default)(this._protectedHeader,this._unprotectedHeader,t.unprotectedHeader))throw new i.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let r={...this._protectedHeader,...this._unprotectedHeader,...t.unprotectedHeader},{alg:n}=r;if("string"!=typeof n||!n)throw new i.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===n||"ECDH-ES"===n)throw new i.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof r.enc||!r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(d){if(d!==r.enc)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else d=r.enc;if((0,u.default)(i.JWEInvalid,new Map,t.options.crit,this._protectedHeader,r),void 0!==r.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new i.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let h=(0,s.default)(d),f={ciphertext:"",iv:"",recipients:[],tag:""};for(let i=0;i<this._recipients.length;i++){let s=this._recipients[i],o={};f.recipients.push(o);let u=({...this._protectedHeader,...this._unprotectedHeader,...s.unprotectedHeader}).alg.startsWith("PBES2")?2048+i:void 0;if(0===i){let t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(h).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(s.unprotectedHeader).setKeyManagementParameters({p2c:u}).encrypt(s.key,{...s.options,...e,[n.unprotected]:!0});f.ciphertext=t.ciphertext,f.iv=t.iv,f.tag=t.tag,t.aad&&(f.aad=t.aad),t.protected&&(f.protected=t.protected),t.unprotected&&(f.unprotected=t.unprotected),o.encrypted_key=t.encrypted_key,t.header&&(o.header=t.header);continue}let{encryptedKey:p,parameters:m}=await (0,a.default)((null===(t=s.unprotectedHeader)||void 0===t?void 0:t.alg)||(null===(r=this._protectedHeader)||void 0===r?void 0:r.alg)||(null===(c=this._unprotectedHeader)||void 0===c?void 0:c.alg),d,s.key,h,{p2c:u});o.encrypted_key=(0,l.encode)(p),(s.unprotectedHeader||m)&&(o.header={...s.unprotectedHeader,...m})}return f}}t.GeneralEncrypt=d},89207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedJWK=void 0;let n=r(51309),i=r(4145),s=r(39627);async function o(e,t){let r={...e,...null==t?void 0:t.header};if(!(0,i.default)(r.jwk))throw new s.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let o=await (0,n.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(o instanceof Uint8Array||"public"!==o.type)throw new s.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return o}t.EmbeddedJWK=o},75547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateJwkThumbprintUri=t.calculateJwkThumbprint=void 0;let n=r(91757),i=r(7864),s=r(39627),o=r(23334),a=r(4145),l=(e,t)=>{if("string"!=typeof e||!e)throw new s.JWKInvalid(`${t} missing or invalid`)};async function u(e,t){let r;if(!(0,a.default)(e))throw TypeError("JWK must be an object");if(null!=t||(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":l(e.crv,'"crv" (Curve) Parameter'),l(e.x,'"x" (X Coordinate) Parameter'),l(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":l(e.crv,'"crv" (Subtype of Key Pair) Parameter'),l(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":l(e.e,'"e" (Exponent) Parameter'),l(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":l(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new s.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let u=o.encoder.encode(JSON.stringify(r));return(0,i.encode)(await (0,n.default)(t,u))}async function c(e,t){null!=t||(t="sha256");let r=await u(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}t.calculateJwkThumbprint=u,t.calculateJwkThumbprintUri=c},7398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLocalJWKSet=t.LocalJWKSet=t.isJWKSLike=void 0;let n=r(51309),i=r(39627),s=r(4145);function o(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new i.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function a(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(l)}function l(e){return(0,s.default)(e)}function u(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}t.isJWKSLike=a;class c{constructor(e){if(this._cached=new WeakMap,!a(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks=u(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...null==t?void 0:t.header},s=o(r),a=this._jwks.keys.filter(e=>{let t=s===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:l,length:u}=a;if(0===u)throw new i.JWKSNoMatchingKey;if(1!==u){let e=new i.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await d(t,e,r)}catch{continue}},e}return d(this._cached,l,r)}}async function d(e,t,r){let s=e.get(t)||e.set(t,{}).get(t);if(void 0===s[r]){let e=await (0,n.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new i.JWKSInvalid("JSON Web Key Set members must be public keys");s[r]=e}return s[r]}function h(e){let t=new c(e);return async function(e,r){return t.getKey(e,r)}}t.LocalJWKSet=c,t.createLocalJWKSet=h},90877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoteJWKSet=void 0;let n=r(25978),i=r(39627),s=r(7398);function o(){return"undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime}class a extends s.LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration="number"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(r){if(r instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw r}}async reload(){this._pendingFetch&&o()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,n.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,s.isJWKSLike)(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function l(e,t){let r=new a(e,t);return async function(e,t){return r.getKey(e,t)}}t.createRemoteJWKSet=l},13354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactSign=void 0;let n=r(88151);class i{constructor(e){this._flattened=new n.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}t.CompactSign=i},53619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactVerify=void 0;let n=r(97764),i=r(39627),s=r(23334);async function o(e,t,r){if(e instanceof Uint8Array&&(e=s.decoder.decode(e)),"string"!=typeof e)throw new i.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:o,1:a,2:l,length:u}=e.split(".");if(3!==u)throw new i.JWSInvalid("Invalid Compact JWS");let c=await (0,n.flattenedVerify)({payload:a,protected:o,signature:l},t,r),d={payload:c.payload,protectedHeader:c.protectedHeader};return"function"==typeof t?{...d,key:c.key}:d}t.compactVerify=o},88151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlattenedSign=void 0;let n=r(7864),i=r(28406),s=r(48581),o=r(39627),a=r(23334),l=r(61287),u=r(96001);class c{constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new o.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,s.default)(this._protectedHeader,this._unprotectedHeader))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let c={...this._protectedHeader,...this._unprotectedHeader},d=(0,u.default)(o.JWSInvalid,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,c),h=!0;if(d.has("b64")&&"boolean"!=typeof(h=this._protectedHeader.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=c;if("string"!=typeof f||!f)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,l.default)(f,e,"sign");let p=this._payload;h&&(p=a.encoder.encode((0,n.encode)(p))),r=this._protectedHeader?a.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):a.encoder.encode("");let m=(0,a.concat)(r,a.encoder.encode("."),p),g=await (0,i.default)(f,e,m),y={signature:(0,n.encode)(g),payload:""};return h&&(y.payload=a.decoder.decode(p)),this._unprotectedHeader&&(y.header=this._unprotectedHeader),this._protectedHeader&&(y.protected=a.decoder.decode(r)),y}}t.FlattenedSign=c},97764:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenedVerify=void 0;let n=r(7864),i=r(99820),s=r(39627),o=r(23334),a=r(48581),l=r(4145),u=r(61287),c=r(96001),d=r(64540);async function h(e,t,r){var h;let f,p;if(!(0,l.default)(e))throw new s.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new s.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new s.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new s.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new s.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,l.default)(e.header))throw new s.JWSInvalid("JWS Unprotected Header incorrect type");let m={};if(e.protected)try{let t=(0,n.decode)(e.protected);m=JSON.parse(o.decoder.decode(t))}catch{throw new s.JWSInvalid("JWS Protected Header is invalid")}if(!(0,a.default)(m,e.header))throw new s.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...m,...e.header},y=(0,c.default)(s.JWSInvalid,new Map([["b64",!0]]),null==r?void 0:r.crit,m,g),v=!0;if(y.has("b64")&&"boolean"!=typeof(v=m.b64))throw new s.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:b}=g;if("string"!=typeof b||!b)throw new s.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let _=r&&(0,d.default)("algorithms",r.algorithms);if(_&&!_.has(b))throw new s.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(v){if("string"!=typeof e.payload)throw new s.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new s.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let w=!1;"function"==typeof t&&(t=await t(m,e),w=!0),(0,u.default)(b,t,"verify");let S=(0,o.concat)(o.encoder.encode(null!==(h=e.protected)&&void 0!==h?h:""),o.encoder.encode("."),"string"==typeof e.payload?o.encoder.encode(e.payload):e.payload);try{f=(0,n.decode)(e.signature)}catch{throw new s.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,i.default)(b,t,f,S))throw new s.JWSSignatureVerificationFailed;if(v)try{p=(0,n.decode)(e.payload)}catch{throw new s.JWSInvalid("Failed to base64url decode the payload")}else p="string"==typeof e.payload?o.encoder.encode(e.payload):e.payload;let E={payload:p};return(void 0!==e.protected&&(E.protectedHeader=m),void 0!==e.header&&(E.unprotectedHeader=e.header),w)?{...E,key:t}:E}t.flattenedVerify=h},29102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeneralSign=void 0;let n=r(88151),i=r(39627);class s{constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}class o{constructor(e){this._signatures=[],this._payload=e}addSignature(e,t){let r=new s(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new i.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],s=new n.FlattenedSign(this._payload);s.setProtectedHeader(r.protectedHeader),s.setUnprotectedHeader(r.unprotectedHeader);let{payload:o,...a}=await s.sign(r.key,r.options);if(0===t)e.payload=o;else if(e.payload!==o)throw new i.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(a)}return e}}t.GeneralSign=o},81270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generalVerify=void 0;let n=r(97764),i=r(39627),s=r(4145);async function o(e,t,r){if(!(0,s.default)(e))throw new i.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(s.default))throw new i.JWSInvalid("JWS Signatures missing or incorrect type");for(let i of e.signatures)try{return await (0,n.flattenedVerify)({header:i.header,payload:e.payload,protected:i.protected,signature:i.signature},t,r)}catch{}throw new i.JWSSignatureVerificationFailed}t.generalVerify=o},30192:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtDecrypt=void 0;let n=r(84393),i=r(64490),s=r(39627);async function o(e,t,r){let o=await (0,n.compactDecrypt)(e,t,r),a=(0,i.default)(o.protectedHeader,o.plaintext,r),{protectedHeader:l}=o;if(void 0!==l.iss&&l.iss!==a.iss)throw new s.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==l.sub&&l.sub!==a.sub)throw new s.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==l.aud&&JSON.stringify(l.aud)!==JSON.stringify(a.aud))throw new s.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let u={payload:a,protectedHeader:l};return"function"==typeof t?{...u,key:o.key}:u}t.jwtDecrypt=o},98481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptJWT=void 0;let n=r(17376),i=r(23334),s=r(93753);class o extends s.ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new n.CompactEncrypt(i.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}t.EncryptJWT=o},93753:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProduceJWT=void 0;let n=r(58183),i=r(4145),s=r(42809);class o{constructor(e){if(!(0,i.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:(0,n.default)(new Date)+(0,s.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:(0,n.default)(new Date)+(0,s.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,n.default)(new Date)}:this._payload={...this._payload,iat:e},this}}t.ProduceJWT=o},60011:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignJWT=void 0;let n=r(13354),i=r(39627),s=r(23334),o=r(93753);class a extends o.ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;let o=new n.CompactSign(s.encoder.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new i.JWTInvalid("JWTs MUST NOT use unencoded payload");return o.sign(e,t)}}t.SignJWT=a},86113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsecuredJWT=void 0;let n=r(7864),i=r(23334),s=r(39627),o=r(64490),a=r(93753);class l extends a.ProduceJWT{encode(){let e=n.encode(JSON.stringify({alg:"none"})),t=n.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new s.JWTInvalid("Unsecured JWT must be a string");let{0:a,1:l,2:u,length:c}=e.split(".");if(3!==c||""!==u)throw new s.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(i.decoder.decode(n.decode(a))),"none"!==r.alg)throw Error()}catch{throw new s.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,o.default)(r,n.decode(l),t),header:r}}}t.UnsecuredJWT=l},87664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwtVerify=void 0;let n=r(53619),i=r(64490),s=r(39627);async function o(e,t,r){var o;let a=await (0,n.compactVerify)(e,t,r);if((null===(o=a.protectedHeader.crit)||void 0===o?void 0:o.includes("b64"))&&!1===a.protectedHeader.b64)throw new s.JWTInvalid("JWTs MUST NOT use unencoded payload");let l={payload:(0,i.default)(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...l,key:a.key}:l}t.jwtVerify=o},7308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exportJWK=t.exportPKCS8=t.exportSPKI=void 0;let n=r(1704),i=r(1704),s=r(37384);async function o(e){return(0,n.toSPKI)(e)}async function a(e){return(0,i.toPKCS8)(e)}async function l(e){return(0,s.default)(e)}t.exportSPKI=o,t.exportPKCS8=a,t.exportJWK=l},28700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=void 0;let n=r(16468);async function i(e,t){return(0,n.generateKeyPair)(e,t)}t.generateKeyPair=i},52377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSecret=void 0;let n=r(16468);async function i(e,t){return(0,n.generateSecret)(e,t)}t.generateSecret=i},51309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importJWK=t.importPKCS8=t.importX509=t.importSPKI=void 0;let n=r(7864),i=r(1704),s=r(41012),o=r(39627),a=r(4145);async function l(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,i.fromSPKI)(e,t,r)}async function u(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,i.fromX509)(e,t,r)}async function c(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,i.fromPKCS8)(e,t,r)}async function d(e,t,r){var i;if(!(0,a.default)(e))throw TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=r||(r=!0!==e.ext),r)return(0,s.default)({...e,alg:t,ext:null!==(i=e.ext)&&void 0!==i&&i});return(0,n.decode)(e.k);case"RSA":if(void 0!==e.oth)throw new o.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,s.default)({...e,alg:t});default:throw new o.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}t.importSPKI=l,t.importX509=u,t.importPKCS8=c,t.importJWK=d},10822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(50315),i=r(17208),s=r(87742),o=r(7864);async function a(e,t,r,i){let a=e.slice(0,7);i||(i=(0,s.default)(a));let{ciphertext:l,tag:u}=await (0,n.default)(a,r,t,i,new Uint8Array(0));return{encryptedKey:l,iv:(0,o.encode)(i),tag:(0,o.encode)(u)}}async function l(e,t,r,n,s){let o=e.slice(0,7);return(0,i.default)(o,t,r,n,s,new Uint8Array(0))}t.wrap=a,t.unwrap=l},23334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.concatKdf=t.lengthAndInput=t.uint32be=t.uint64be=t.p2s=t.concat=t.decoder=t.encoder=void 0;let n=r(91757);t.encoder=new TextEncoder,t.decoder=new TextDecoder;let i=4294967296;function s(...e){let t=e.reduce((e,{length:t})=>e+t,0),r=new Uint8Array(t),n=0;return e.forEach(e=>{r.set(e,n),n+=e.length}),r}function o(e,r){return s(t.encoder.encode(e),new Uint8Array([0]),r)}function a(e,t,r){if(t<0||t>=i)throw RangeError(`value must be >= 0 and <= ${i-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function l(e){let t=Math.floor(e/i),r=e%i,n=new Uint8Array(8);return a(n,t,0),a(n,r,4),n}function u(e){let t=new Uint8Array(4);return a(t,e),t}function c(e){return s(u(e.length),e)}async function d(e,t,r){let i=Math.ceil((t>>3)/32),s=new Uint8Array(32*i);for(let t=0;t<i;t++){let i=new Uint8Array(4+e.length+r.length);i.set(u(t+1)),i.set(e,4),i.set(r,4+e.length),s.set(await (0,n.default)("sha256",i),32*t)}return s.slice(0,t>>3)}t.concat=s,t.p2s=o,t.uint64be=l,t.uint32be=u,t.lengthAndInput=c,t.concatKdf=d},94481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(39627),i=r(67917);function s(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=s,t.default=e=>(0,i.default)(new Uint8Array(s(e)>>3))},89775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627),i=r(87742),s=(e,t)=>{if(t.length<<3!==(0,i.bitLength)(e))throw new n.JWEInvalid("Invalid Initialization Vector length")};t.default=s},61287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(20858),i=r(87565),s=(e,t)=>{if(!(t instanceof Uint8Array)){if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${i.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},o=(e,t,r)=>{if(!(0,i.default)(t))throw TypeError((0,n.withAlg)(e,t,...i.types));if("secret"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${i.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},a=(e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?s(e,t):o(e,t,r)};t.default=a},68797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627);function i(e){if(!(e instanceof Uint8Array)||e.length<8)throw new n.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}t.default=i},53700:(e,t)=>{"use strict";function r(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function i(e){return parseInt(e.name.slice(4),10)}function s(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function o(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}function a(e,t,...l){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw r("HMAC");let s=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==s)throw r(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw r("RSASSA-PKCS1-v1_5");let s=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==s)throw r(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw r("RSA-PSS");let s=parseInt(t.slice(2),10);if(i(e.algorithm.hash)!==s)throw r(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw r("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw r("ECDSA");let i=s(t);if(e.algorithm.namedCurve!==i)throw r(i,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,l)}function l(e,t,...s){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw r("AES-GCM");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw r("AES-KW");let i=parseInt(t.slice(1,4),10);if(e.algorithm.length!==i)throw r(i,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw r("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw r("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw r("RSA-OAEP");let s=parseInt(t.slice(9),10)||1;if(i(e.algorithm.hash)!==s)throw r(`SHA-${s}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}o(e,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.checkEncCryptoKey=t.checkSigCryptoKey=void 0,t.checkSigCryptoKey=a,t.checkEncCryptoKey=l},12865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(34942),i=r(19109),s=r(93735),o=r(84921),a=r(7864),l=r(39627),u=r(94481),c=r(51309),d=r(61287),h=r(4145),f=r(10822);async function p(e,t,r,p,m){switch((0,d.default)(e,t,"decrypt"),e){case"dir":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let s,o;if(!(0,h.default)(p.epk))throw new l.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!i.ecdhAllowed(t))throw new l.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let d=await (0,c.importJWK)(p.epk,e);if(void 0!==p.apu){if("string"!=typeof p.apu)throw new l.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{s=(0,a.decode)(p.apu)}catch{throw new l.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==p.apv){if("string"!=typeof p.apv)throw new l.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=(0,a.decode)(p.apv)}catch{throw new l.JWEInvalid("Failed to base64url decode the apv")}}let f=await i.deriveKey(d,t,"ECDH-ES"===e?p.enc:e,"ECDH-ES"===e?(0,u.bitLength)(p.enc):parseInt(e.slice(-5,-2),10),s,o);if("ECDH-ES"===e)return f;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e.slice(-6),f,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,o.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let n;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof p.p2c)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=(null==m?void 0:m.maxPBES2Count)||1e4;if(p.p2c>i)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof p.p2s)throw new l.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{n=(0,a.decode)(p.p2s)}catch{throw new l.JWEInvalid("Failed to base64url decode the p2s")}return(0,s.decrypt)(e,t,r,p.p2c,n)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,n.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let n,i;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof p.iv)throw new l.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof p.tag)throw new l.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{n=(0,a.decode)(p.iv)}catch{throw new l.JWEInvalid("Failed to base64url decode the iv")}try{i=(0,a.decode)(p.tag)}catch{throw new l.JWEInvalid("Failed to base64url decode the tag")}return(0,f.unwrap)(e,t,r,n,i)}default:throw new l.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}t.default=p},22090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(34942),i=r(19109),s=r(93735),o=r(84921),a=r(7864),l=r(94481),u=r(39627),c=r(7308),d=r(61287),h=r(10822);async function f(e,t,r,f,p={}){let m,g,y;switch((0,d.default)(e,r,"encrypt"),e){case"dir":y=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!i.ecdhAllowed(r))throw new u.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:s,apv:o}=p,{epk:d}=p;d||(d=(await i.generateEpk(r)).privateKey);let{x:h,y:v,crv:b,kty:_}=await (0,c.exportJWK)(d),w=await i.deriveKey(r,d,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,l.bitLength)(t):parseInt(e.slice(-5,-2),10),s,o);if(g={epk:{x:h,crv:b,kty:_}},"EC"===_&&(g.epk.y=v),s&&(g.apu=(0,a.encode)(s)),o&&(g.apv=(0,a.encode)(o)),"ECDH-ES"===e){y=w;break}y=f||(0,l.default)(t);let S=e.slice(-6);m=await (0,n.wrap)(S,w,y);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":y=f||(0,l.default)(t),m=await (0,o.encrypt)(e,r,y);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{y=f||(0,l.default)(t);let{p2c:n,p2s:i}=p;({encryptedKey:m,...g}=await (0,s.encrypt)(e,r,y,n,i));break}case"A128KW":case"A192KW":case"A256KW":y=f||(0,l.default)(t),m=await (0,n.wrap)(e,r,y);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{y=f||(0,l.default)(t);let{iv:n}=p;({encryptedKey:m,...g}=await (0,h.wrap)(e,r,y,n));break}default:throw new u.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:y,encryptedKey:m,parameters:g}}t.default=f},58183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>Math.floor(e.getTime()/1e3)},20858:(e,t)=>{"use strict";function r(e,t,...n){if(n.length>2){let t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}function n(e,t,...i){return r(`Key for the ${e} algorithm must be `,t,...i)}Object.defineProperty(t,"__esModule",{value:!0}),t.withAlg=void 0,t.default=(e,...t)=>r("Key must be ",e,...t),t.withAlg=n},48581:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0};t.default=r},4145:(e,t)=>{"use strict";function r(e){return"object"==typeof e&&null!==e}function n(e){if(!r(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},87742:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bitLength=void 0;let n=r(39627),i=r(67917);function s(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}t.bitLength=s,t.default=e=>(0,i.default)(new Uint8Array(s(e)>>3))},64490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627),i=r(23334),s=r(58183),o=r(42809),a=r(4145),l=e=>e.toLowerCase().replace(/^application\//,""),u=(e,t)=>"string"==typeof e?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));t.default=(e,t,r={})=>{let c,d;let{typ:h}=r;if(h&&("string"!=typeof e.typ||l(e.typ)!==l(h)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{c=JSON.parse(i.decoder.decode(t))}catch{}if(!(0,a.default)(c))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:f=[],issuer:p,subject:m,audience:g,maxTokenAge:y}=r;for(let e of(void 0!==y&&f.push("iat"),void 0!==g&&f.push("aud"),void 0!==m&&f.push("sub"),void 0!==p&&f.push("iss"),new Set(f.reverse())))if(!(e in c))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,e,"missing");if(p&&!(Array.isArray(p)?p:[p]).includes(c.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(m&&c.sub!==m)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(g&&!u(c.aud,"string"==typeof g?[g]:g))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof r.clockTolerance){case"string":d=(0,o.default)(r.clockTolerance);break;case"number":d=r.clockTolerance;break;case"undefined":d=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:v}=r,b=(0,s.default)(v||new Date);if((void 0!==c.iat||y)&&"number"!=typeof c.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==c.nbf){if("number"!=typeof c.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(c.nbf>b+d)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==c.exp){if("number"!=typeof c.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(c.exp<=b-d)throw new n.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(y){let e=b-c.iat;if(e-d>("number"==typeof y?y:(0,o.default)(y)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(e<0-d)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return c}},42809:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=60,n=3600,i=86400,s=604800,o=31557600,a=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;t.default=e=>{let t=a.exec(e);if(!t)throw TypeError("Invalid time period format");let l=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(l);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(l*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(l*n);case"day":case"days":case"d":return Math.round(l*i);case"week":case"weeks":case"w":return Math.round(l*s);default:return Math.round(l*o)}}},64540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};t.default=r},96001:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627);function i(e,t,r,i,s){let o;if(void 0!==s.crit&&void 0===i.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(o=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!o.has(a))throw new n.JOSENotSupported(`Extension Header Parameter "${a}" is not recognized`);if(void 0===s[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(o.get(a)&&void 0===i[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(i.crit)}t.default=i},34942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwrap=t.wrap=void 0;let n=r(14300),i=r(6113),s=r(39627),o=r(23334),a=r(13497),l=r(53700),u=r(24892),c=r(20858),d=r(43189),h=r(87565);function f(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function p(e,t,r){if((0,u.default)(e))return e;if(e instanceof Uint8Array)return(0,i.createSecretKey)(e);if((0,a.isCryptoKey)(e))return(0,l.checkEncCryptoKey)(e,t,r),i.KeyObject.from(e);throw TypeError((0,c.default)(e,...h.types,"Uint8Array"))}let m=(e,t,r)=>{let a=parseInt(e.slice(1,4),10),l=`aes${a}-wrap`;if(!(0,d.default)(l))throw new s.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let u=p(t,e,"wrapKey");f(u,e);let c=(0,i.createCipheriv)(l,u,n.Buffer.alloc(8,166));return(0,o.concat)(c.update(r),c.final())};t.wrap=m;let g=(e,t,r)=>{let a=parseInt(e.slice(1,4),10),l=`aes${a}-wrap`;if(!(0,d.default)(l))throw new s.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let u=p(t,e,"unwrapKey");f(u,e);let c=(0,i.createDecipheriv)(l,u,n.Buffer.alloc(8,166));return(0,o.concat)(c.update(r),c.final())};t.unwrap=g},1704:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromX509=t.fromSPKI=t.fromPKCS8=t.toPKCS8=t.toSPKI=void 0;let n=r(6113),i=r(14300),s=r(13497),o=r(24892),a=r(20858),l=r(87565),u=(e,t,r)=>{let i;if((0,s.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");i=n.KeyObject.from(r)}else if((0,o.default)(r))i=r;else throw TypeError((0,a.default)(r,...l.types));if(i.type!==e)throw TypeError(`key is not a ${e} key`);return i.export({format:"pem",type:t})},c=e=>u("public","spki",e);t.toSPKI=c;let d=e=>u("private","pkcs8",e);t.toPKCS8=d;let h=e=>(0,n.createPrivateKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"});t.fromPKCS8=h;let f=e=>(0,n.createPublicKey)({key:i.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"});t.fromSPKI=f;let p=e=>(0,n.createPublicKey)({key:e,type:"spki",format:"pem"});t.fromX509=p},96945:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=2,n=48;class i{constructor(e){if(e[0]!==n||(this.buffer=e,this.offset=1,this.decodeLength()!==e.length-this.offset))throw TypeError()}decodeLength(){let e=this.buffer[this.offset++];if(128&e){let t=-129&e;e=0;for(let r=0;r<t;r++)e=e<<8|this.buffer[this.offset+r];this.offset+=t}return e}unsignedInteger(){if(this.buffer[this.offset++]!==r)throw TypeError();let e=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,e--);let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}end(){if(this.offset!==this.buffer.length)throw TypeError()}}t.default=i},28654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(14300),i=r(39627),s=2,o=3,a=4,l=48,u=n.Buffer.from([0]),c=n.Buffer.from([s]),d=n.Buffer.from([o]),h=n.Buffer.from([l]),f=n.Buffer.from([a]),p=e=>{if(e<128)return n.Buffer.from([e]);let t=n.Buffer.alloc(5);t.writeUInt32BE(e,1);let r=1;for(;0===t[r];)r++;return t[r-1]=128|5-r,t.slice(r-1)},m=new Map([["P-256",n.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",n.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",n.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",n.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",n.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",n.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",n.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",n.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",n.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);class g{constructor(){this.length=0,this.elements=[]}oidFor(e){let t=m.get(e);if(!t)throw new i.JOSENotSupported("Invalid or unsupported OID");this.elements.push(t),this.length+=t.length}zero(){this.elements.push(c,n.Buffer.from([1]),u),this.length+=3}one(){this.elements.push(c,n.Buffer.from([1]),n.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(128&e[0]){let t=p(e.length+1);this.elements.push(c,t,u,e),this.length+=2+t.length+e.length}else{let t=0;for(;0===e[t]&&(128&e[t+1])==0;)t++;let r=p(e.length-t);this.elements.push(c,p(e.length-t),e.slice(t)),this.length+=1+r.length+e.length-t}}octStr(e){let t=p(e.length);this.elements.push(f,p(e.length),e),this.length+=1+t.length+e.length}bitStr(e){let t=p(e.length+1);this.elements.push(d,p(e.length+1),u,e),this.length+=1+t.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=h){let t=p(this.length);return n.Buffer.concat([e,t,...this.elements],1+t.length+this.length)}}t.default=g},7864:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.encodeBase64=t.decodeBase64=void 0;let i=r(14300),s=r(23334);function o(e){let t=e;return t instanceof Uint8Array&&(t=s.decoder.decode(t)),t}i.Buffer.isEncoding("base64url")?t.encode=n=e=>i.Buffer.from(e).toString("base64url"):t.encode=n=e=>i.Buffer.from(e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");let a=e=>i.Buffer.from(e,"base64");t.decodeBase64=a;let l=e=>i.Buffer.from(e).toString("base64");t.encodeBase64=l;let u=e=>i.Buffer.from(o(e),"base64");t.decode=u},6601:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(23334);function s(e,t,r,s,o,a){let l=(0,i.concat)(e,t,r,(0,i.uint64be)(e.length<<3)),u=(0,n.createHmac)(`sha${s}`,o);return u.update(l),u.digest().slice(0,a>>3)}t.default=s},9544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627),i=r(24892),s=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,i.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")};t.default=s},69412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setModulusLength=t.weakMap=void 0,t.weakMap=new WeakMap;let r=(e,t)=>{let n=e.readUInt8(1);if((128&n)==0)return 0===t?n:r(e.subarray(2+n),t-1);let i=127&n;n=0;for(let t=0;t<i;t++)n<<=8,n|=e.readUInt8(2+t);return 0===t?n:r(e.subarray(2+n),t-1)},n=(e,t)=>{let n=e.readUInt8(1);if((128&n)==0)return r(e.subarray(2),t);let i=127&n;return r(e.subarray(2+i),t)},i=e=>{var r,i;if(t.weakMap.has(e))return t.weakMap.get(e);let s=null!==(i=null===(r=e.asymmetricKeyDetails)||void 0===r?void 0:r.modulusLength)&&void 0!==i?i:n(e.export({format:"der",type:"pkcs1"}),"private"===e.type?1:0)-1<<3;return t.weakMap.set(e,s),s},s=(e,r)=>{t.weakMap.set(e,r)};t.setModulusLength=s,t.default=(e,t)=>{if(2048>i(e))throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},43189:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113);t.default=e=>(n||(n=new Set((0,i.getCiphers)())),n.has(e))},17208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(89775),s=r(9544),o=r(23334),a=r(39627),l=r(4638),u=r(6601),c=r(13497),d=r(53700),h=r(24892),f=r(20858),p=r(43189),m=r(87565);function g(e,t,r,i,s,c){let d,f;let m=parseInt(e.slice(1,4),10);(0,h.default)(t)&&(t=t.export());let g=t.subarray(m>>3),y=t.subarray(0,m>>3),v=parseInt(e.slice(-3),10),b=`aes-${m}-cbc`;if(!(0,p.default)(b))throw new a.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let _=(0,u.default)(c,i,r,v,y,m);try{d=(0,l.default)(s,_)}catch{}if(!d)throw new a.JWEDecryptionFailed;try{let e=(0,n.createDecipheriv)(b,g,i);f=(0,o.concat)(e.update(r),e.final())}catch{}if(!f)throw new a.JWEDecryptionFailed;return f}function y(e,t,r,i,s,o){let l=parseInt(e.slice(1,4),10),u=`aes-${l}-gcm`;if(!(0,p.default)(u))throw new a.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,n.createDecipheriv)(u,t,i,{authTagLength:16});e.setAuthTag(s),o.byteLength&&e.setAAD(o,{plaintextLength:r.length});let a=e.update(r);return e.final(),a}catch{throw new a.JWEDecryptionFailed}}let v=(e,t,r,o,l,u)=>{let p;if((0,c.isCryptoKey)(t))(0,d.checkEncCryptoKey)(t,e,"decrypt"),p=n.KeyObject.from(t);else if(t instanceof Uint8Array||(0,h.default)(t))p=t;else throw TypeError((0,f.default)(t,...m.types,"Uint8Array"));switch((0,s.default)(e,p),(0,i.default)(e,o),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return g(e,p,r,o,l,u);case"A128GCM":case"A192GCM":case"A256GCM":return y(e,p,r,o,l,u);default:throw new a.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};t.default=v},91757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=(e,t)=>(0,n.createHash)(e).update(t).digest();t.default=i},99988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627);function i(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}t.default=i},19109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhAllowed=t.generateEpk=t.deriveKey=void 0;let n=r(6113),i=r(73837),s=r(36841),o=r(23334),a=r(39627),l=r(13497),u=r(53700),c=r(24892),d=r(20858),h=r(87565),f=(0,i.promisify)(n.generateKeyPair);async function p(e,t,r,i,s=new Uint8Array(0),a=new Uint8Array(0)){let f,p;if((0,l.isCryptoKey)(e))(0,u.checkEncCryptoKey)(e,"ECDH"),f=n.KeyObject.from(e);else if((0,c.default)(e))f=e;else throw TypeError((0,d.default)(e,...h.types));if((0,l.isCryptoKey)(t))(0,u.checkEncCryptoKey)(t,"ECDH","deriveBits"),p=n.KeyObject.from(t);else if((0,c.default)(t))p=t;else throw TypeError((0,d.default)(t,...h.types));let m=(0,o.concat)((0,o.lengthAndInput)(o.encoder.encode(r)),(0,o.lengthAndInput)(s),(0,o.lengthAndInput)(a),(0,o.uint32be)(i)),g=(0,n.diffieHellman)({privateKey:p,publicKey:f});return(0,o.concatKdf)(g,i,m)}async function m(e){let t;if((0,l.isCryptoKey)(e))t=n.KeyObject.from(e);else if((0,c.default)(e))t=e;else throw TypeError((0,d.default)(e,...h.types));switch(t.asymmetricKeyType){case"x25519":return f("x25519");case"x448":return f("x448");case"ec":return f("ec",{namedCurve:(0,s.default)(t)});default:throw new a.JOSENotSupported("Invalid or unsupported EPK")}}t.deriveKey=p,t.generateEpk=m;let g=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,s.default)(e));t.ecdhAllowed=g},50315:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(89775),s=r(9544),o=r(23334),a=r(6601),l=r(13497),u=r(53700),c=r(24892),d=r(20858),h=r(39627),f=r(43189),p=r(87565);function m(e,t,r,i,s){let l=parseInt(e.slice(1,4),10);(0,c.default)(r)&&(r=r.export());let u=r.subarray(l>>3),d=r.subarray(0,l>>3),p=`aes-${l}-cbc`;if(!(0,f.default)(p))throw new h.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let m=(0,n.createCipheriv)(p,u,i),g=(0,o.concat)(m.update(t),m.final()),y=parseInt(e.slice(-3),10),v=(0,a.default)(s,i,g,y,d,l);return{ciphertext:g,tag:v}}function g(e,t,r,i,s){let o=parseInt(e.slice(1,4),10),a=`aes-${o}-gcm`;if(!(0,f.default)(a))throw new h.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let l=(0,n.createCipheriv)(a,r,i,{authTagLength:16});s.byteLength&&l.setAAD(s,{plaintextLength:t.length});let u=l.update(t);return l.final(),{ciphertext:u,tag:l.getAuthTag()}}let y=(e,t,r,o,a)=>{let f;if((0,l.isCryptoKey)(r))(0,u.checkEncCryptoKey)(r,e,"encrypt"),f=n.KeyObject.from(r);else if(r instanceof Uint8Array||(0,c.default)(r))f=r;else throw TypeError((0,d.default)(r,...p.types,"Uint8Array"));switch((0,s.default)(e,f),(0,i.default)(e,o),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return m(e,t,f,o,a);case"A128GCM":case"A192GCM":case"A256GCM":return g(e,t,f,o,a);default:throw new h.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};t.default=y},25978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(13685),i=r(95687),s=r(82361),o=r(39627),a=r(23334),l=async(e,t,r)=>{let l;switch(e.protocol){case"https:":l=i.get;break;case"http:":l=n.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:u,headers:c}=r,d=l(e.href,{agent:u,timeout:t,headers:c}),[h]=await Promise.race([(0,s.once)(d,"response"),(0,s.once)(d,"timeout")]);if(!h)throw d.destroy(),new o.JWKSTimeout;if(200!==h.statusCode)throw new o.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of h)f.push(e);try{return JSON.parse(a.decoder.decode((0,a.concat)(...f)))}catch{throw new o.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};t.default=l},27691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jwkImport=t.jwkExport=t.rsaPssParams=t.oneShotCallback=void 0;let[r,n]=process.versions.node.split(".").map(e=>parseInt(e,10));t.oneShotCallback=r>=16||15===r&&n>=13,t.rsaPssParams=!("electron"in process.versions)&&(r>=17||16===r&&n>=9),t.jwkExport=r>=16||15===r&&n>=9,t.jwkImport=r>=16||15===r&&n>=12},16468:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateKeyPair=t.generateSecret=void 0;let n=r(6113),i=r(73837),s=r(67917),o=r(69412),a=r(39627),l=(0,i.promisify)(n.generateKeyPair);async function u(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,n.createSecretKey)((0,s.default)(new Uint8Array(r>>3)))}async function c(e,t){var r,n;switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=null!==(r=null==t?void 0:t.modulusLength)&&void 0!==r?r:2048;if("number"!=typeof e||e<2048)throw new a.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let n=await l("rsa",{modulusLength:e,publicExponent:65537});return(0,o.setModulusLength)(n.privateKey,e),(0,o.setModulusLength)(n.publicKey,e),n}case"ES256":return l("ec",{namedCurve:"P-256"});case"ES256K":return l("ec",{namedCurve:"secp256k1"});case"ES384":return l("ec",{namedCurve:"P-384"});case"ES512":return l("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==t?void 0:t.crv){case void 0:case"Ed25519":return l("ed25519");case"Ed448":return l("ed448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let i=null!==(n=null==t?void 0:t.crv)&&void 0!==n?n:"P-256";switch(i){case void 0:case"P-256":case"P-384":case"P-521":return l("ec",{namedCurve:i});case"X25519":return l("x25519");case"X448":return l("x448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}t.generateSecret=u,t.generateKeyPair=c},36841:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCurve=t.weakMap=void 0;let n=r(14300),i=r(6113),s=r(39627),o=r(13497),a=r(24892),l=r(20858),u=r(87565),c=n.Buffer.from([42,134,72,206,61,3,1,7]),d=n.Buffer.from([43,129,4,0,34]),h=n.Buffer.from([43,129,4,0,35]),f=n.Buffer.from([43,129,4,0,10]);t.weakMap=new WeakMap;let p=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new s.JOSENotSupported("Unsupported key curve for this operation")}},m=(e,r)=>{var n;let g;if((0,o.isCryptoKey)(e))g=i.KeyObject.from(e);else if((0,a.default)(e))g=e;else throw TypeError((0,l.default)(e,...u.types));if("secret"===g.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(g.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${g.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${g.asymmetricKeyType.slice(1)}`;case"ec":{if(t.weakMap.has(g))return t.weakMap.get(g);let e=null===(n=g.asymmetricKeyDetails)||void 0===n?void 0:n.namedCurve;if(e||"private"!==g.type){if(!e){let t=g.export({format:"der",type:"spki"}),r=t[1]<128?14:15,n=t[r],i=t.slice(r+1,r+1+n);if(i.equals(c))e="prime256v1";else if(i.equals(d))e="secp384r1";else if(i.equals(h))e="secp521r1";else if(i.equals(f))e="secp256k1";else throw new s.JOSENotSupported("Unsupported key curve for this operation")}}else e=m((0,i.createPublicKey)(g),!0);if(r)return e;let o=p(e);return t.weakMap.set(g,o),o}default:throw TypeError("Invalid asymmetric key type for this operation")}};function g(e,r){t.weakMap.set(e,r)}t.setCurve=g,t.default=m},60569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(13497),s=r(53700),o=r(20858),a=r(87565);function l(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,o.default)(t,...a.types));return(0,n.createSecretKey)(t)}if(t instanceof n.KeyObject)return t;if((0,i.isCryptoKey)(t))return(0,s.checkSigCryptoKey)(t,e,r),n.KeyObject.from(t);throw TypeError((0,o.default)(t,...a.types,"Uint8Array"))}t.default=l},47971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39627);function i(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}t.default=i},87565:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;let n=r(13497),i=r(24892);t.default=e=>(0,i.default)(e)||(0,n.isCryptoKey)(e);let s=["KeyObject"];t.types=s,(globalThis.CryptoKey||(null===n.default||void 0===n.default?void 0:n.default.CryptoKey))&&s.push("CryptoKey")},24892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(73837);t.default=i.types.isKeyObject?e=>i.types.isKeyObject(e):e=>null!=e&&e instanceof n.KeyObject},41012:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(14300),i=r(6113),s=r(7864),o=r(39627),a=r(36841),l=r(69412),u=r(28654),c=r(27691),d=e=>{if(c.jwkImport&&"oct"!==e.kty)return e.d?(0,i.createPrivateKey)({format:"jwk",key:e}):(0,i.createPublicKey)({format:"jwk",key:e});switch(e.kty){case"oct":return(0,i.createSecretKey)((0,s.decode)(e.k));case"RSA":{let t=new u.default,r=void 0!==e.d,s=n.Buffer.from(e.n,"base64"),o=n.Buffer.from(e.e,"base64");r?(t.zero(),t.unsignedInteger(s),t.unsignedInteger(o),t.unsignedInteger(n.Buffer.from(e.d,"base64")),t.unsignedInteger(n.Buffer.from(e.p,"base64")),t.unsignedInteger(n.Buffer.from(e.q,"base64")),t.unsignedInteger(n.Buffer.from(e.dp,"base64")),t.unsignedInteger(n.Buffer.from(e.dq,"base64")),t.unsignedInteger(n.Buffer.from(e.qi,"base64"))):(t.unsignedInteger(s),t.unsignedInteger(o));let a={key:t.end(),format:"der",type:"pkcs1"},c=r?(0,i.createPrivateKey)(a):(0,i.createPublicKey)(a);return(0,l.setModulusLength)(c,s.length<<3),c}case"EC":{let t=new u.default,r=void 0!==e.d,s=n.Buffer.concat([n.Buffer.alloc(1,4),n.Buffer.from(e.x,"base64"),n.Buffer.from(e.y,"base64")]);if(r){t.zero();let r=new u.default;r.oidFor("ecPublicKey"),r.oidFor(e.crv),t.add(r.end());let o=new u.default;o.one(),o.octStr(n.Buffer.from(e.d,"base64"));let l=new u.default;l.bitStr(s);let c=l.end(n.Buffer.from([161]));o.add(c);let d=o.end(),h=new u.default;h.add(d);let f=h.end(n.Buffer.from([4]));t.add(f);let p=t.end(),m=(0,i.createPrivateKey)({key:p,format:"der",type:"pkcs8"});return(0,a.setCurve)(m,e.crv),m}let o=new u.default;o.oidFor("ecPublicKey"),o.oidFor(e.crv),t.add(o.end()),t.bitStr(s);let l=t.end(),c=(0,i.createPublicKey)({key:l,format:"der",type:"spki"});return(0,a.setCurve)(c,e.crv),c}case"OKP":{let t=new u.default;if(void 0!==e.d){t.zero();let r=new u.default;r.oidFor(e.crv),t.add(r.end());let s=new u.default;s.octStr(n.Buffer.from(e.d,"base64"));let o=s.end(n.Buffer.from([4]));t.add(o);let a=t.end();return(0,i.createPrivateKey)({key:a,format:"der",type:"pkcs8"})}let r=new u.default;r.oidFor(e.crv),t.add(r.end()),t.bitStr(n.Buffer.from(e.x,"base64"));let s=t.end();return(0,i.createPublicKey)({key:s,format:"der",type:"spki"})}default:throw new o.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}};t.default=d},37384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(7864),s=r(96945),o=r(39627),a=r(36841),l=r(13497),u=r(24892),c=r(20858),d=r(87565),h=r(27691),f=e=>{let t;if((0,l.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=n.KeyObject.from(e)}else if((0,u.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,i.encode)(e)};else throw TypeError((0,c.default)(e,...d.types,"Uint8Array"));if(h.jwkExport){if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new o.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}switch(t.type){case"secret":return{kty:"oct",k:(0,i.encode)(t.export())};case"private":case"public":switch(t.asymmetricKeyType){case"rsa":{let e;let r=t.export({format:"der",type:"pkcs1"}),n=new s.default(r);"private"===t.type&&n.unsignedInteger();let o=(0,i.encode)(n.unsignedInteger()),a=(0,i.encode)(n.unsignedInteger());return"private"===t.type&&(e={d:(0,i.encode)(n.unsignedInteger()),p:(0,i.encode)(n.unsignedInteger()),q:(0,i.encode)(n.unsignedInteger()),dp:(0,i.encode)(n.unsignedInteger()),dq:(0,i.encode)(n.unsignedInteger()),qi:(0,i.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:o,e:a,...e}}case"ec":{let e,r,s;let l=(0,a.default)(t);switch(l){case"secp256k1":e=64,r=33,s=-1;break;case"P-256":e=64,r=36,s=-1;break;case"P-384":e=96,r=35,s=-3;break;case"P-521":e=132,r=35,s=-3;break;default:throw new o.JOSENotSupported("Unsupported curve")}if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"EC",crv:l,x:(0,i.encode)(r.subarray(-e,-e/2)),y:(0,i.encode)(r.subarray(-e/2))}}let u=t.export({type:"pkcs8",format:"der"});return u.length<100&&(r+=s),{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(u.subarray(r,r+e/2))}}case"ed25519":case"x25519":{let e=(0,a.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray(-32))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray(-32))}}case"ed448":case"x448":{let e=(0,a.default)(t);if("public"===t.type){let r=t.export({type:"spki",format:"der"});return{kty:"OKP",crv:e,x:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}let r=t.export({type:"pkcs8",format:"der"});return{...f((0,n.createPublicKey)(t)),d:(0,i.encode)(r.subarray("Ed448"===e?-57:-56))}}default:throw new o.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new o.JOSENotSupported("Unsupported key type")}};t.default=f},32410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113),i=r(36841),s=r(39627),o=r(69412),a=r(27691),l={padding:n.constants.RSA_PKCS1_PSS_PADDING,saltLength:n.constants.RSA_PSS_SALTLEN_DIGEST},u=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function c(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,o.default)(t,e),t;case a.rsaPssParams&&"PS256":case a.rsaPssParams&&"PS384":case a.rsaPssParams&&"PS512":if("rsa-pss"===t.asymmetricKeyType){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:i}=t.asymmetricKeyDetails,s=parseInt(e.slice(-3),10);if(void 0!==r&&(r!==`sha${s}`||n!==r))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>s>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,o.default)(t,e),{key:t,...l};case!a.rsaPssParams&&"PS256":case!a.rsaPssParams&&"PS384":case!a.rsaPssParams&&"PS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,o.default)(t,e),{key:t,...l};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,i.default)(t),n=u.get(e);if(r!==n)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new s.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}t.default=c},93735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(73837),i=r(6113),s=r(67917),o=r(23334),a=r(7864),l=r(34942),u=r(68797),c=r(13497),d=r(53700),h=r(24892),f=r(20858),p=r(87565),m=(0,n.promisify)(i.pbkdf2);function g(e,t){if((0,h.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,c.isCryptoKey)(e))return(0,d.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),i.KeyObject.from(e).export();throw TypeError((0,f.default)(e,...p.types,"Uint8Array"))}let y=async(e,t,r,n=2048,i=(0,s.default)(new Uint8Array(16)))=>{(0,u.default)(i);let c=(0,o.p2s)(e,i),d=parseInt(e.slice(13,16),10)>>3,h=g(t,e),f=await m(h,c,n,d,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,l.wrap)(e.slice(-6),f,r),p2c:n,p2s:(0,a.encode)(i)}};t.encrypt=y;let v=async(e,t,r,n,i)=>{(0,u.default)(i);let s=(0,o.p2s)(e,i),a=parseInt(e.slice(13,16),10)>>3,c=g(t,e),d=await m(c,s,n,a,`sha${e.slice(8,11)}`);return(0,l.unwrap)(e.slice(-6),d,r)};t.decrypt=v},67917:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(6113);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.randomFillSync}})},84921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;let n=r(6113),i=r(69412),s=r(13497),o=r(53700),a=r(24892),l=r(20858),u=r(87565),c=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,i.default)(e,t)},d=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return n.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return n.constants.RSA_PKCS1_PADDING;default:return}},h=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function f(e,t,...r){if((0,a.default)(e))return e;if((0,s.isCryptoKey)(e))return(0,o.checkEncCryptoKey)(e,t,...r),n.KeyObject.from(e);throw TypeError((0,l.default)(e,...u.types))}let p=(e,t,r)=>{let i=d(e),s=h(e),o=f(t,e,"wrapKey","encrypt");return c(o,e),(0,n.publicEncrypt)({key:o,oaepHash:s,padding:i},r)};t.encrypt=p;let m=(e,t,r)=>{let i=d(e),s=h(e),o=f(t,e,"unwrapKey","decrypt");return c(o,e),(0,n.privateDecrypt)({key:o,oaepHash:s,padding:i},r)};t.decrypt=m},72341:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="node:crypto"},28406:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),s=r(73837),o=r(99988),a=r(47971),l=r(32410),u=r(60569);n=i.sign.length>3?(0,s.promisify)(i.sign):i.sign;let c=async(e,t,r)=>{let s=(0,u.default)(e,t,"sign");if(e.startsWith("HS")){let t=i.createHmac((0,a.default)(e),s);return t.update(r),t.digest()}return n((0,o.default)(e),r,(0,l.default)(e,s))};t.default=c},4638:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(6113).timingSafeEqual;t.default=n},99820:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0});let i=r(6113),s=r(73837),o=r(99988),a=r(32410),l=r(28406),u=r(60569),c=r(27691);n=i.verify.length>4&&c.oneShotCallback?(0,s.promisify)(i.verify):i.verify;let d=async(e,t,r,s)=>{let c=(0,u.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,l.default)(e,c,s),n=r;try{return i.timingSafeEqual(n,t)}catch{return!1}}let d=(0,o.default)(e),h=(0,a.default)(e,c);try{return await n(d,s,h,r)}catch{return!1}};t.default=d},13497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCryptoKey=void 0;let n=r(6113),i=r(73837),s=n.webcrypto;t.default=s,t.isCryptoKey=i.types.isCryptoKey?e=>i.types.isCryptoKey(e):e=>!1},85042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deflate=t.inflate=void 0;let n=r(73837),i=r(59796),s=r(39627),o=(0,n.promisify)(i.inflateRaw),a=(0,n.promisify)(i.deflateRaw),l=e=>o(e,{maxOutputLength:25e4}).catch(()=>{throw new s.JWEDecompressionFailed});t.inflate=l;let u=e=>a(e);t.deflate=u},71680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=void 0;let n=r(7864);t.encode=n.encode,t.decode=n.decode},10133:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJwt=void 0;let n=r(71680),i=r(23334),s=r(4145),o=r(39627);function a(e){let t,r;if("string"!=typeof e)throw new o.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:a,length:l}=e.split(".");if(5===l)throw new o.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==l)throw new o.JWTInvalid("Invalid JWT");if(!a)throw new o.JWTInvalid("JWTs must contain a payload");try{t=(0,n.decode)(a)}catch{throw new o.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(i.decoder.decode(t))}catch{throw new o.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,s.default)(r))throw new o.JWTInvalid("Invalid JWT Claims Set");return r}t.decodeJwt=a},52673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeProtectedHeader=void 0;let n=r(71680),i=r(23334),s=r(4145);function o(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e){if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header")}try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(i.decoder.decode((0,n.decode)(t)));if(!(0,s.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}t.decodeProtectedHeader=o},39627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWSSignatureVerificationFailed=t.JWKSTimeout=t.JWKSMultipleMatchingKeys=t.JWKSNoMatchingKey=t.JWKSInvalid=t.JWKInvalid=t.JWTInvalid=t.JWSInvalid=t.JWEInvalid=t.JWEDecompressionFailed=t.JWEDecryptionFailed=t.JOSENotSupported=t.JOSEAlgNotAllowed=t.JWTExpired=t.JWTClaimValidationFailed=t.JOSEError=void 0;class r extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}t.JOSEError=r;class n extends r{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=t,this.reason=r}}t.JWTClaimValidationFailed=n;class i extends r{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,t="unspecified",r="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=t,this.reason=r}}t.JWTExpired=i;class s extends r{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}t.JOSEAlgNotAllowed=s;class o extends r{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}t.JOSENotSupported=o;class a extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}t.JWEDecryptionFailed=a;class l extends r{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}t.JWEDecompressionFailed=l;class u extends r{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}t.JWEInvalid=u;class c extends r{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}t.JWSInvalid=c;class d extends r{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}t.JWTInvalid=d;class h extends r{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}t.JWKInvalid=h;class f extends r{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}t.JWKSInvalid=f;class p extends r{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}t.JWKSNoMatchingKey=p;class m extends r{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}t.JWKSMultipleMatchingKeys=m,Symbol.asyncIterator;class g extends r{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}t.JWKSTimeout=g;class y extends r{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}t.JWSSignatureVerificationFailed=y},5810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(72341);t.default=n.default},22680:(e,t,r)=>{"use strict";let n=r(50826),i=Symbol("max"),s=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1;class m{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[i]=e.max||1/0;let t=e.length||p;if(this[o]="function"!=typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[u]=e.dispose,this[c]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[i]=e||1/0,v(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[o]&&(this[o]=e,this[s]=0,this[d].forEach(e=>{e.length=this[o](e.value,e.key),this[s]+=e.length})),v(this)}get lengthCalculator(){return this[o]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){let n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){let n=r.next;w(this,e,r,t),r=n}}keys(){return this[d].toArray().map(e=>e.key)}values(){return this[d].toArray().map(e=>e.value)}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach(e=>this[u](e.key,e.value)),this[h]=new Map,this[d]=new n,this[s]=0}dump(){return this[d].map(e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,a=this[o](t,e);if(this[h].has(e)){if(a>this[i])return b(this,this[h].get(e)),!1;let o=this[h].get(e).value;return this[u]&&!this[c]&&this[u](e,o.value),o.now=n,o.maxAge=r,o.value=t,this[s]+=a-o.length,o.length=a,this.get(e),v(this),!0}let f=new _(e,t,a,n,r);return f.length>this[i]?(this[u]&&this[u](e,t),!1):(this[s]+=f.length,this[d].unshift(f),this[h].set(e,this[d].head),v(this),!0)}has(e){return!!this[h].has(e)&&!y(this,this[h].get(e).value)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){let e=this[d].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[h].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{let e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[h].forEach((e,t)=>g(this,t,!1))}}let g=(e,t,r)=>{let n=e[h].get(t);if(n){let t=n.value;if(y(e,t)){if(b(e,n),!e[a])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[s]>e[i])for(let t=e[d].tail;e[s]>e[i]&&null!==t;){let r=t.prev;b(e,t),t=r}},b=(e,t)=>{if(t){let r=t.value;e[u]&&e[u](r.key,r.value),e[s]-=r.length,e[h].delete(r.key),e[d].removeNode(t)}};class _{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}let w=(e,t,r,n)=>{let i=r.value;y(e,i)&&(b(e,r),e[a]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=m},26100:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedStrategy=t.UnknownError=t.OAuthCallbackError=t.MissingSecret=t.MissingAuthorize=t.MissingAdapterMethods=t.MissingAdapter=t.MissingAPIRoute=t.InvalidCallbackUrl=t.AccountNotLinkedError=void 0,t.adapterErrorHandler=x,t.capitalize=C,t.eventsErrorHandler=k,t.upperSnake=O;var i=n(r(50075)),s=n(r(2756)),o=n(r(97967)),a=n(r(74300)),l=n(r(30984)),u=n(r(43490)),c=n(r(76847)),d=n(r(7079)),h=n(r(16829));function f(e){var t=p();return function(){var r,n=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}function p(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var m=function(e){(0,c.default)(r,e);var t=f(r);function r(e){var n,i;return(0,l.default)(this,r),(i=t.call(this,null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e)).name="UnknownError",i.code=e.code,e instanceof Error&&(i.stack=e.stack),i}return(0,u.default)(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}]),r}((0,n(r(81044)).default)(Error));t.UnknownError=m;var g=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","OAuthCallbackError"),e}return(0,u.default)(r)}(m);t.OAuthCallbackError=g;var y=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","AccountNotLinkedError"),e}return(0,u.default)(r)}(m);t.AccountNotLinkedError=y;var v=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAPIRouteError"),(0,a.default)((0,o.default)(e),"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAPIRoute=v;var b=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingSecretError"),(0,a.default)((0,o.default)(e),"code","NO_SECRET"),e}return(0,u.default)(r)}(m);t.MissingSecret=b;var _=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAuthorizeError"),(0,a.default)((0,o.default)(e),"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAuthorize=_;var w=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAdapterError"),(0,a.default)((0,o.default)(e),"code","EMAIL_REQUIRES_ADAPTER_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAdapter=w;var S=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","MissingAdapterMethodsError"),(0,a.default)((0,o.default)(e),"code","MISSING_ADAPTER_METHODS_ERROR"),e}return(0,u.default)(r)}(m);t.MissingAdapterMethods=S;var E=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","UnsupportedStrategyError"),(0,a.default)((0,o.default)(e),"code","CALLBACK_CREDENTIALS_JWT_ERROR"),e}return(0,u.default)(r)}(m);t.UnsupportedStrategy=E;var T=function(e){(0,c.default)(r,e);var t=f(r);function r(){var e;(0,l.default)(this,r);for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i)),(0,a.default)((0,o.default)(e),"name","InvalidCallbackUrl"),(0,a.default)((0,o.default)(e),"code","INVALID_CALLBACK_URL_ERROR"),e}return(0,u.default)(r)}(m);function O(e){return e.replace(/([A-Z])/g,"_$1").toUpperCase()}function C(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}function k(e,t){return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(i.default.mark(function r(){var s,o=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=e[n],r.next=4,s.apply(void 0,o);case 4:return r.abrupt("return",r.sent);case 7:r.prev=7,r.t0=r.catch(0),t.error("".concat(O(n),"_EVENT_ERROR"),r.t0);case 10:case"end":return r.stop()}},r,null,[[0,7]])})),r},{})}function x(e,t){if(e)return Object.keys(e).reduce(function(r,n){return r[n]=(0,s.default)(i.default.mark(function r(){var s,o,a,l,u,c=arguments;return i.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(r.prev=0,o=Array(s=c.length),a=0;a<s;a++)o[a]=c[a];return t.debug("adapter_".concat(n),{args:o}),l=e[n],r.next=6,l.apply(void 0,o);case 6:return r.abrupt("return",r.sent);case 9:throw r.prev=9,r.t0=r.catch(0),t.error("adapter_error_".concat(n),r.t0),(u=new m(r.t0)).name="".concat(C(n),"Error"),u;case 15:case"end":return r.stop()}},r,null,[[0,9]])})),r},{})}t.InvalidCallbackUrl=T},68638:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.AuthHandler=g;var i=f(r(52370)),s=r(61530),o=f(r(19254)),a=n(r(48296)),l=r(33274),u=r(15486),c=r(44939),d=r(83191);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}async function p(e){try{return await e.json()}catch(e){}}async function m(e){var t,r,n,i;if(e instanceof Request){let t=new URL(e.url),o=t.pathname.split("/").slice(3),a=Object.fromEntries(e.headers),l=Object.fromEntries(t.searchParams);return l.nextauth=o,{action:o[0],method:e.method,headers:a,body:await p(e),cookies:(0,d.parse)(null!==(r=e.headers.get("cookie"))&&void 0!==r?r:""),providerId:o[1],error:null!==(n=t.searchParams.get("error"))&&void 0!==n?n:o[1],origin:(0,s.detectOrigin)(null!==(i=a["x-forwarded-host"])&&void 0!==i?i:a.host,a["x-forwarded-proto"]),query:l}}let{headers:o}=e,a=null!==(t=null==o?void 0:o["x-forwarded-host"])&&void 0!==t?t:null==o?void 0:o.host;return e.origin=(0,s.detectOrigin)(a,null==o?void 0:o["x-forwarded-proto"]),e}async function g(e){var t,r,n,s,d,h,f,p;let{options:g,req:y}=e,v=await m(y);(0,i.setLogger)(g.logger,g.debug);let b=(0,u.assertConfig)({options:g,req:v});if(Array.isArray(b))b.forEach(i.default.warn);else if(b instanceof Error){if(i.default.error(b.code,b),!["signin","signout","error","verify-request"].includes(v.action)||"GET"!==v.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:e,theme:t}=g,r=(null==e?void 0:e.error)&&(null===(d=v.query)||void 0===d?void 0:null===(h=d.callbackUrl)||void 0===h?void 0:h.startsWith(e.error));return!(null!=e&&e.error)||r?(r&&i.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==e?void 0:e.error} should not require authentication`)),(0,a.default)({theme:t}).error({error:"configuration"})):{redirect:`${e.error}?error=Configuration`}}let{action:_,providerId:w,error:S,method:E="GET"}=v,{options:T,cookies:O}=await (0,l.init)({authOptions:g,action:_,providerId:w,origin:v.origin,callbackUrl:null!==(t=null===(r=v.body)||void 0===r?void 0:r.callbackUrl)&&void 0!==t?t:null===(n=v.query)||void 0===n?void 0:n.callbackUrl,csrfToken:null===(s=v.body)||void 0===s?void 0:s.csrfToken,cookies:v.cookies,isPost:"POST"===E}),C=new c.SessionStore(T.cookies.sessionToken,v,T.logger);if("GET"===E){let e=(0,a.default)({...T,query:v.query,cookies:O}),{pages:t}=T;switch(_){case"providers":return await o.providers(T.providers);case"session":{let e=await o.session({options:T,sessionStore:C});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"}],body:{csrfToken:T.csrfToken},cookies:O};case"signin":if(t.signIn){let e=`${t.signIn}${t.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(T.callbackUrl)}`;return S&&(e=`${e}&error=${encodeURIComponent(S)}`),{redirect:e,cookies:O}}return e.signin();case"signout":if(t.signOut)return{redirect:t.signOut,cookies:O};return e.signout();case"callback":if(T.provider){let e=await o.callback({body:v.body,query:v.query,headers:v.headers,cookies:v.cookies,method:E,options:T,sessionStore:C});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}break;case"verify-request":if(t.verifyRequest)return{redirect:t.verifyRequest,cookies:O};return e.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(S))return{redirect:`${T.url}/signin?error=${S}`,cookies:O};if(t.error)return{redirect:`${t.error}${t.error.includes("?")?"&":"?"}error=${S}`,cookies:O};return e.error({error:S})}}else if("POST"===E)switch(_){case"signin":if(T.csrfTokenVerified&&T.provider){let e=await o.signin({query:v.query,body:v.body,options:T});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}return{redirect:`${T.url}/signin?csrf=true`,cookies:O};case"signout":if(T.csrfTokenVerified){let e=await o.signout({options:T,sessionStore:C});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}return{redirect:`${T.url}/signout?csrf=true`,cookies:O};case"callback":if(T.provider){if("credentials"===T.provider.type&&!T.csrfTokenVerified)return{redirect:`${T.url}/signin?csrf=true`,cookies:O};let e=await o.callback({body:v.body,query:v.query,headers:v.headers,cookies:v.cookies,method:E,options:T,sessionStore:C});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}break;case"_log":if(g.logger)try{let{code:e,level:t,...r}=null!==(f=v.body)&&void 0!==f?f:{};i.default[t](e,r)}catch(e){i.default.error("LOGGER_ERROR",e)}return{};case"session":if(T.csrfTokenVerified){let e=await o.session({options:T,sessionStore:C,newSession:null===(p=v.body)||void 0===p?void 0:p.data,isUpdate:!0});return e.cookies&&O.push(...e.cookies),{...e,cookies:O}}return{status:400,body:{},cookies:O}}return{status:400,body:`Error: This action with HTTP ${E} is not supported by NextAuth.js`}}},33274:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.init=y;var i=r(6113),s=n(r(52370)),o=r(26100),a=n(r(1200)),l=r(135),u=g(r(44939)),c=g(r(36929)),d=r(29090),h=r(63811),f=r(61958),p=n(r(37027));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}async function y({authOptions:e,providerId:t,action:r,origin:n,cookies:m,callbackUrl:g,csrfToken:y,isPost:v}){var b,_;let w=(0,p.default)(n),S=(0,l.createSecret)({authOptions:e,url:w}),{providers:E,provider:T}=(0,a.default)({providers:e.providers,url:w,providerId:t}),O=2592e3,C={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:w,action:r,provider:T,cookies:{...u.defaultCookies(null!==(b=e.useSecureCookies)&&void 0!==b?b:w.base.startsWith("https://")),...e.cookies},secret:S,providers:E,session:{strategy:e.adapter?"database":"jwt",maxAge:O,updateAge:86400,generateSessionToken:()=>{var e;return null!==(e=null===i.randomUUID||void 0===i.randomUUID?void 0:(0,i.randomUUID)())&&void 0!==e?e:(0,i.randomBytes)(32).toString("hex")},...e.session},jwt:{secret:S,maxAge:O,encode:c.encode,decode:c.decode,...e.jwt},events:(0,o.eventsErrorHandler)(null!==(_=e.events)&&void 0!==_?_:{},s.default),adapter:(0,o.adapterErrorHandler)(e.adapter,s.default),callbacks:{...d.defaultCallbacks,...e.callbacks},logger:s.default,callbackUrl:w.origin},k=[],{csrfToken:x,cookie:A,csrfTokenVerified:R}=(0,h.createCSRFToken)({options:C,cookieValue:null==m?void 0:m[C.cookies.csrfToken.name],isPost:v,bodyValue:y});C.csrfToken=x,C.csrfTokenVerified=R,A&&k.push({name:C.cookies.csrfToken.name,value:A,options:C.cookies.csrfToken.options});let{callbackUrl:I,callbackUrlCookie:P}=await (0,f.createCallbackUrl)({options:C,cookieValue:null==m?void 0:m[C.cookies.callbackUrl.name],paramValue:g});return C.callbackUrl=I,P&&k.push({name:C.cookies.callbackUrl.name,value:P,options:C.cookies.callbackUrl.options}),{options:C,cookies:k}}},15486:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.assertConfig=u;var i=r(26100),s=n(r(37027)),o=r(44939);let a=!1;function l(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch(e){return!1}}function u(e){var t,r,n,u,c,d,h,f;let p,m,g;let{options:y,req:v}=e,b=[];if(!a&&(v.origin||b.push("NEXTAUTH_URL"),y.secret,y.debug&&b.push("DEBUG_ENABLED")),!y.secret)return new i.MissingSecret("Please define a `secret` in production.");if(!(null!==(t=v.query)&&void 0!==t&&t.nextauth)&&!v.action)return new i.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let _=null===(r=v.query)||void 0===r?void 0:r.callbackUrl,w=(0,s.default)(v.origin);if(_&&!l(_,w.base))return new i.InvalidCallbackUrl(`Invalid callback URL. Received: ${_}`);let{callbackUrl:S}=(0,o.defaultCookies)(null!==(n=y.useSecureCookies)&&void 0!==n?n:w.base.startsWith("https://")),E=null===(u=v.cookies)||void 0===u?void 0:u[null!==(c=null===(d=y.cookies)||void 0===d?void 0:null===(h=d.callbackUrl)||void 0===h?void 0:h.name)&&void 0!==c?c:S.name];if(E&&!l(E,w.base))return new i.InvalidCallbackUrl(`Invalid callback URL. Received: ${E}`);for(let e of y.providers)"credentials"===e.type?p=!0:"email"===e.type?m=!0:"twitter"===e.id&&"2.0"===e.version&&(g=!0);if(p){let e=(null===(f=y.session)||void 0===f?void 0:f.strategy)==="database",t=!y.providers.some(e=>"credentials"!==e.type);if(e&&t)return new i.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");if(y.providers.some(e=>"credentials"===e.type&&!e.authorize))return new i.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(m){let{adapter:e}=y;if(!e)return new i.MissingAdapter("E-mail login requires an adapter.");let t=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(t=>!e[t]);if(t.length)return new i.MissingAdapterMethods(`Required adapter methods were missing: ${t.join(", ")}`)}return a||(g&&b.push("TWITTER_OAUTH_2_BETA"),a=!0),b}},23244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=r(26100),i=r(135);async function s(e){var t,r,s,o,a,l;let{sessionToken:u,profile:c,account:d,options:h}=e;if(!(null!=d&&d.providerAccountId)||!d.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(d.type))throw Error("Provider not supported");let{adapter:f,jwt:p,events:m,session:{strategy:g,generateSessionToken:y}}=h;if(!f)return{user:c,account:d};let v=c,{createUser:b,updateUser:_,getUser:w,getUserByAccount:S,getUserByEmail:E,linkAccount:T,createSession:O,getSessionAndUser:C,deleteSession:k}=f,x=null,A=null,R=!1,I="jwt"===g;if(u){if(I)try{(x=await p.decode({...p,token:u}))&&"sub"in x&&x.sub&&(A=await w(x.sub))}catch(e){}else{let e=await C(u);e&&(x=e.session,A=e.user)}}if("email"===d.type){let e=await E(v.email);if(e)(null===(t=A)||void 0===t?void 0:t.id)!==e.id&&!I&&u&&await k(u),A=await _({id:e.id,emailVerified:new Date}),await (null===(r=m.updateUser)||void 0===r?void 0:r.call(m,{user:A}));else{let{id:e,...t}={...v,emailVerified:new Date};A=await b(t),await (null===(s=m.createUser)||void 0===s?void 0:s.call(m,{user:A})),R=!0}return{session:x=I?{}:await O({sessionToken:await y(),userId:A.id,expires:(0,i.fromDate)(h.session.maxAge)}),user:A,isNewUser:R}}if("oauth"===d.type){let e=await S({providerAccountId:d.providerAccountId,provider:d.provider});if(e){if(A){if(e.id===A.id)return{session:x,user:A,isNewUser:R};throw new n.AccountNotLinkedError("The account is already associated with another user")}return{session:x=I?{}:await O({sessionToken:await y(),userId:e.id,expires:(0,i.fromDate)(h.session.maxAge)}),user:e,isNewUser:R}}{if(A)return await T({...d,userId:A.id}),await (null===(l=m.linkAccount)||void 0===l?void 0:l.call(m,{user:A,account:d,profile:v})),{session:x,user:A,isNewUser:R};let e=v.email?await E(v.email):null;if(e){let t=h.provider;if(null!=t&&t.allowDangerousEmailAccountLinking)A=e;else throw new n.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:e,...t}={...v,emailVerified:null};A=await b(t)}return await (null===(o=m.createUser)||void 0===o?void 0:o.call(m,{user:A})),await T({...d,userId:A.id}),await (null===(a=m.linkAccount)||void 0===a?void 0:a.call(m,{user:A,account:d,profile:v})),{session:x=I?{}:await O({sessionToken:await y(),userId:A.id,expires:(0,i.fromDate)(h.session.maxAge)}),user:A,isNewUser:!0}}}throw Error("Unsupported account type")}},61958:(e,t)=>{"use strict";async function r({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,s=n.origin;return t?s=await i.redirect({url:t,baseUrl:n.origin}):r&&(s=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:s,callbackUrlCookie:s!==r?s:void 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCallbackUrl=r},44939:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStore=void 0,t.defaultCookies=f;var i=n(r(28117)),s=n(r(59706));function o(e,t){l(e,t),t.add(e)}function a(e,t,r){l(e,t),t.set(e,r)}function l(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function u(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r}let c=4096,d=163,h=3933;function f(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}}}}var p=new WeakMap,m=new WeakMap,g=new WeakMap,y=new WeakSet,v=new WeakSet;class b{constructor(e,t,r){o(this,v),o(this,y),a(this,p,{writable:!0,value:{}}),a(this,m,{writable:!0,value:void 0}),a(this,g,{writable:!0,value:void 0}),(0,s.default)(this,g,r),(0,s.default)(this,m,e);let{cookies:n}=t,{name:l}=e;if("function"==typeof(null==n?void 0:n.getAll))for(let{name:e,value:t}of n.getAll())e.startsWith(l)&&((0,i.default)(this,p)[e]=t);else if(n instanceof Map)for(let e of n.keys())e.startsWith(l)&&((0,i.default)(this,p)[e]=n.get(e));else for(let e in n)e.startsWith(l)&&((0,i.default)(this,p)[e]=n[e])}get value(){return Object.keys((0,i.default)(this,p)).sort((e,t)=>{var r,n;return parseInt(null!==(r=e.split(".").pop())&&void 0!==r?r:"0")-parseInt(null!==(n=t.split(".").pop())&&void 0!==n?n:"0")}).map(e=>(0,i.default)(this,p)[e]).join("")}chunk(e,t){let r=u(this,v,w).call(this);for(let n of u(this,y,_).call(this,{name:(0,i.default)(this,m).name,value:e,options:{...(0,i.default)(this,m).options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(u(this,v,w).call(this))}}function _(e){let t=Math.ceil(e.value.length/h);if(1===t)return(0,i.default)(this,p)[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,s=e.value.substr(n*h,h);r.push({...e,name:t,value:s}),(0,i.default)(this,p)[t]=s}return(0,i.default)(this,g).debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${c} bytes.`,emptyCookieSize:d,valueSize:e.value.length,chunks:r.map(e=>e.value.length+d)}),r}function w(){let e={};for(let r in(0,i.default)(this,p)){var t;null===(t=(0,i.default)(this,p))||void 0===t||delete t[r],e[r]={name:r,value:"",options:{...(0,i.default)(this,m).options,maxAge:0}}}return e}t.SessionStore=b},63811:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCSRFToken=i;var n=r(6113);function i({options:e,cookieValue:t,isPost:r,bodyValue:i}){if(t){let[s,o]=t.split("|");if(o===(0,n.createHash)("sha256").update(`${s}${e.secret}`).digest("hex"))return{csrfTokenVerified:r&&s===i,csrfToken:s}}let s=(0,n.randomBytes)(32).toString("hex"),o=(0,n.createHash)("sha256").update(`${s}${e.secret}`).digest("hex");return{cookie:`${s}|${o}`,csrfToken:s}}},29090:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCallbacks=void 0;let r={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>e,jwt:({token:e})=>e};t.defaultCallbacks=r},4552:(e,t)=>{"use strict";async function r({email:e,adapter:t}){let{getUserByEmail:r}=t;return(e?await r(e):null)||{id:e,email:e,emailVerified:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},90065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var n=r(6113),i=r(135);async function s(e,t){var r,s,o,a;let{url:l,adapter:u,provider:c,callbackUrl:d,theme:h}=t,f=null!==(r=await (null===(s=c.generateVerificationToken)||void 0===s?void 0:s.call(c)))&&void 0!==r?r:(0,n.randomBytes)(32).toString("hex"),p=86400,m=new Date(Date.now()+(null!==(o=c.maxAge)&&void 0!==o?o:p)*1e3),g=new URLSearchParams({callbackUrl:d,token:f,email:e}),y=`${l}/callback/${c.id}?${g}`;return await Promise.all([c.sendVerificationRequest({identifier:e,token:f,expires:m,url:y,provider:c,theme:h}),null===(a=u.createVerificationToken)||void 0===a?void 0:a.call(u,{identifier:e,token:(0,i.hashToken)(f,t),expires:m})]),`${l}/verify-request?${new URLSearchParams({provider:c.id,type:c.type})}`}},45657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=r(30499),i=r(16808),s=a(r(99693));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}async function l({options:e,query:t}){var r,o,a;let{logger:l,provider:u}=e,c={};if("string"==typeof u.authorization){let e=Object.fromEntries(new URL(u.authorization).searchParams);c={...c,...e}}else c={...c,...null===(o=u.authorization)||void 0===o?void 0:o.params};if(c={...c,...t},null!==(r=u.version)&&void 0!==r&&r.startsWith("1.")){let t=(0,i.oAuth1Client)(e),r=await t.getOAuthRequestToken(c),n=`${null===(a=u.authorization)||void 0===a?void 0:a.url}?${new URLSearchParams({oauth_token:r.oauth_token,oauth_token_secret:r.oauth_token_secret,...r.params})}`;return i.oAuth1TokenStore.set(r.oauth_token,r.oauth_token_secret),l.debug("GET_AUTHORIZATION_URL",{url:n,provider:u}),{redirect:n}}let d=await (0,n.openidClient)(e),h=c,f=[];await s.state.create(e,f,h),await s.pkce.create(e,f,h),await s.nonce.create(e,f,h);let p=d.authorizationUrl(h);return l.debug("GET_AUTHORIZATION_URL",{url:p,cookies:f,provider:u}),{redirect:p,cookies:f}}},59082:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var n=r(44741),i=r(30499),s=r(16808),o=u(r(99693)),a=r(26100);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}async function c(e){var t,r,l,u,c,h;let{options:f,query:p,body:m,method:g,cookies:y}=e,{logger:v,provider:b}=f,_=null!==(t=null==m?void 0:m.error)&&void 0!==t?t:null==p?void 0:p.error;if(_){let e=Error(_);throw v.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:e,error_description:null==p?void 0:p.error_description,providerId:b.id}),v.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:m}),e}if(null!==(r=b.version)&&void 0!==r&&r.startsWith("1."))try{let e=await (0,s.oAuth1Client)(f),{oauth_token:t,oauth_verifier:r}=null!=p?p:{},n=await e.getOAuthAccessToken(t,s.oAuth1TokenStore.get(t),r),i=await e.get(b.profileUrl,n.oauth_token,n.oauth_token_secret);return"string"==typeof i&&(i=JSON.parse(i)),{...await d({profile:i,tokens:n,provider:b,logger:v}),cookies:[]}}catch(e){throw v.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",e),e}null!=p&&p.oauth_token&&s.oAuth1TokenStore.delete(p.oauth_token);try{let e,t;let r=await (0,i.openidClient)(f),s={},a=[];await o.state.use(y,a,f,s),await o.pkce.use(y,a,f,s),await o.nonce.use(y,a,f,s);let _={...r.callbackParams({url:`http://n?${new URLSearchParams(p)}`,body:m,method:g}),...null===(l=b.token)||void 0===l?void 0:l.params};if(null!==(u=b.token)&&void 0!==u&&u.request){let t=await b.token.request({provider:b,params:_,checks:s,client:r});e=new n.TokenSet(t.tokens)}else e=b.idToken?await r.callback(b.callbackUrl,_,s):await r.oauthCallback(b.callbackUrl,_,s);return Array.isArray(e.scope)&&(e.scope=e.scope.join(" ")),t=null!==(c=b.userinfo)&&void 0!==c&&c.request?await b.userinfo.request({provider:b,tokens:e,client:r}):b.idToken?e.claims():await r.userinfo(e,{params:null===(h=b.userinfo)||void 0===h?void 0:h.params}),{...await d({profile:t,provider:b,tokens:e,logger:v}),cookies:a}}catch(e){throw new a.OAuthCallbackError(e)}}async function d({profile:e,tokens:t,provider:r,logger:n}){try{var i;n.debug("PROFILE_DATA",{OAuthProfile:e});let s=await r.profile(e,t);if(s.email=null===(i=s.email)||void 0===i?void 0:i.toLowerCase(),!s.id)throw TypeError(`Profile id is missing in ${r.name} OAuth profile response`);return{profile:s,account:{provider:r.id,type:r.type,providerAccountId:s.id.toString(),...t},OAuthProfile:e}}catch(t){n.error("OAUTH_PARSE_PROFILE_ERROR",{error:t,OAuthProfile:e})}}},99693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pkce=t.nonce=t.PKCE_CODE_CHALLENGE_METHOD=void 0,t.signCookie=a,t.state=void 0;var n=r(44741),i=o(r(36929));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}async function a(e,t,r,n){let{cookies:s,logger:o}=n;o.debug(`CREATE_${e.toUpperCase()}`,{value:t,maxAge:r});let{name:a}=s[e],l=new Date;return l.setTime(l.getTime()+1e3*r),{name:a,value:await i.encode({...n.jwt,maxAge:r,token:{value:t},salt:a}),options:{...s[e].options,expires:l}}}let l=900,u="S256";t.PKCE_CODE_CHALLENGE_METHOD=u;let c={async create(e,t,r){var i,s,o;if(!(null!==(i=e.provider)&&void 0!==i&&null!==(s=i.checks)&&void 0!==s&&s.includes("pkce")))return;let c=n.generators.codeVerifier(),d=n.generators.codeChallenge(c);r.code_challenge=d,r.code_challenge_method=u;let h=null!==(o=e.cookies.pkceCodeVerifier.options.maxAge)&&void 0!==o?o:l;t.push(await a("pkceCodeVerifier",c,h,e))},async use(e,t,r,n){var s,o;if(!(null!==(s=r.provider)&&void 0!==s&&null!==(o=s.checks)&&void 0!==o&&o.includes("pkce")))return;let a=null==e?void 0:e[r.cookies.pkceCodeVerifier.name];if(!a)throw TypeError("PKCE code_verifier cookie was missing.");let{name:l}=r.cookies.pkceCodeVerifier,u=await i.decode({...r.jwt,token:a,salt:l});if(!(null!=u&&u.value))throw TypeError("PKCE code_verifier value could not be parsed.");t.push({name:l,value:"",options:{...r.cookies.pkceCodeVerifier.options,maxAge:0}}),n.code_verifier=u.value}};t.pkce=c;let d=900,h={async create(e,t,r){var i,s;if(!(null!==(i=e.provider.checks)&&void 0!==i&&i.includes("state")))return;let o=n.generators.state();r.state=o;let l=null!==(s=e.cookies.state.options.maxAge)&&void 0!==s?s:d;t.push(await a("state",o,l,e))},async use(e,t,r,n){var s;if(!(null!==(s=r.provider.checks)&&void 0!==s&&s.includes("state")))return;let o=null==e?void 0:e[r.cookies.state.name];if(!o)throw TypeError("State cookie was missing.");let{name:a}=r.cookies.state,l=await i.decode({...r.jwt,token:o,salt:a});if(!(null!=l&&l.value))throw TypeError("State value could not be parsed.");t.push({name:a,value:"",options:{...r.cookies.state.options,maxAge:0}}),n.state=l.value}};t.state=h;let f=900,p={async create(e,t,r){var i,s;if(!(null!==(i=e.provider.checks)&&void 0!==i&&i.includes("nonce")))return;let o=n.generators.nonce();r.nonce=o;let l=null!==(s=e.cookies.nonce.options.maxAge)&&void 0!==s?s:f;t.push(await a("nonce",o,l,e))},async use(e,t,r,n){var s,o;if(!(null!==(s=r.provider)&&void 0!==s&&null!==(o=s.checks)&&void 0!==o&&o.includes("nonce")))return;let a=null==e?void 0:e[r.cookies.nonce.name];if(!a)throw TypeError("Nonce cookie was missing.");let{name:l}=r.cookies.nonce,u=await i.decode({...r.jwt,token:a,salt:l});if(!(null!=u&&u.value))throw TypeError("Nonce value could not be parsed.");t.push({name:l,value:"",options:{...r.cookies.nonce.options,maxAge:0}}),n.nonce=u.value}};t.nonce=p},16808:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.oAuth1Client=i,t.oAuth1TokenStore=void 0;var n=r(49086);function i(e){var t,r;let i=e.provider,s=new n.OAuth(i.requestTokenUrl,i.accessTokenUrl,i.clientId,i.clientSecret,null!==(t=i.version)&&void 0!==t?t:"1.0",i.callbackUrl,null!==(r=i.encoding)&&void 0!==r?r:"HMAC-SHA1"),o=s.get.bind(s);s.get=async(...e)=>await new Promise((t,r)=>{o(...e,(e,n)=>{if(e)return r(e);t(n)})});let a=s.getOAuthAccessToken.bind(s);s.getOAuthAccessToken=async(...e)=>await new Promise((t,r)=>{a(...e,(e,n,i)=>{if(e)return r(e);t({oauth_token:n,oauth_token_secret:i})})});let l=s.getOAuthRequestToken.bind(s);return s.getOAuthRequestToken=async(e={})=>await new Promise((t,r)=>{l(e,(e,n,i,s)=>{if(e)return r(e);t({oauth_token:n,oauth_token_secret:i,params:s})})}),s}let s=new Map;t.oAuth1TokenStore=s},30499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openidClient=i;var n=r(44741);async function i(e){let t;let r=e.provider;if(r.httpOptions&&n.custom.setHttpOptionsDefaults(r.httpOptions),r.wellKnown)t=await n.Issuer.discover(r.wellKnown);else{var i,s,o;t=new n.Issuer({issuer:r.issuer,authorization_endpoint:null===(i=r.authorization)||void 0===i?void 0:i.url,token_endpoint:null===(s=r.token)||void 0===s?void 0:s.url,userinfo_endpoint:null===(o=r.userinfo)||void 0===o?void 0:o.url,jwks_uri:r.jwks_endpoint})}let a=new t.Client({client_id:r.clientId,client_secret:r.clientSecret,redirect_uris:[r.callbackUrl],...r.client},r.jwks);return a[n.custom.clock_tolerance]=10,a}},1200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(53747);function i(e){let{url:t,providerId:r}=e,i=e.providers.map(({options:e,...r})=>{var i,o;if("oauth"===r.type){let i=s(r),a=s(e,!0),l=null!==(o=null==a?void 0:a.id)&&void 0!==o?o:r.id;return(0,n.merge)(i,{...a,signinUrl:`${t}/signin/${l}`,callbackUrl:`${t}/callback/${l}`})}let a=null!==(i=null==e?void 0:e.id)&&void 0!==i?i:r.id;return(0,n.merge)(r,{...e,signinUrl:`${t}/signin/${a}`,callbackUrl:`${t}/callback/${a}`})});return{providers:i,provider:i.find(({id:e})=>e===r)}}function s(e,t=!1){var r,n,i,s,o,a,l;if(!e)return;let u=Object.entries(e).reduce((e,[t,r])=>{if(["authorization","token","userinfo"].includes(t)&&"string"==typeof r){var n;let i=new URL(r);e[t]={url:`${i.origin}${i.pathname}`,params:Object.fromEntries(null!==(n=i.searchParams)&&void 0!==n?n:[])}}else e[t]=r;return e},{});return t||null!==(r=u.version)&&void 0!==r&&r.startsWith("1.")||(u.idToken=!!(null!==(n=null!==(i=u.idToken)&&void 0!==i?i:null===(s=u.wellKnown)||void 0===s?void 0:s.includes("openid-configuration"))&&void 0!==n?n:null===(o=u.authorization)||void 0===o?void 0:null===(a=o.params)||void 0===a?void 0:null===(l=a.scope)||void 0===l?void 0:l.includes("openid")),u.checks||(u.checks=["state"])),u}},135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSecret=o,t.fromDate=i,t.hashToken=s;var n=r(6113);function i(e,t=Date.now()){return new Date(t+1e3*e)}function s(e,t){var r;let{provider:i,secret:s}=t;return(0,n.createHash)("sha256").update(`${e}${null!==(r=i.secret)&&void 0!==r?r:s}`).digest("hex")}function o(e){var t;let{authOptions:r,url:i}=e;return null!==(t=r.secret)&&void 0!==t?t:(0,n.createHash)("sha256").update(JSON.stringify({...i,...r})).digest("hex")}},88425:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(81706);function i(e){var t;let{url:r,error:i="default",theme:s}=e,o=`${r}/signin`,a={default:{status:200,heading:"Error",message:(0,n.h)("p",null,(0,n.h)("a",{className:"site",href:null==r?void 0:r.origin},null==r?void 0:r.host))},configuration:{status:500,heading:"Server error",message:(0,n.h)("div",null,(0,n.h)("p",null,"There is a problem with the server configuration."),(0,n.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,n.h)("div",null,(0,n.h)("p",null,"You do not have permission to sign in."),(0,n.h)("p",null,(0,n.h)("a",{className:"button",href:o},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,n.h)("div",null,(0,n.h)("p",null,"The sign in link is no longer valid."),(0,n.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,n.h)("a",{className:"button",href:o},"Sign in")}},{status:l,heading:u,message:c,signin:d}=null!==(t=a[i.toLowerCase()])&&void 0!==t?t:a.default;return{status:l,html:(0,n.h)("div",{className:"error"},(null==s?void 0:s.brandColor)&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==s?void 0:s.brandColor}
        }
      `}}),(0,n.h)("div",{className:"card"},(null==s?void 0:s.logo)&&(0,n.h)("img",{src:s.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,u),(0,n.h)("div",{className:"message"},c),d))}}},48296:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=n(r(17956)),s=n(r(3374)),o=n(r(80029)),a=n(r(31361)),l=n(r(88425)),u=n(r(22581));function c(e){let{url:t,theme:r,query:n,cookies:c}=e;function d({html:e,title:t,status:n}){var s;return{cookies:c,status:n,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,u.default)()}</style><title>${t}</title></head><body class="__next-auth-theme-${null!==(s=null==r?void 0:r.colorScheme)&&void 0!==s?s:"auto"}"><div class="page">${(0,i.default)(e)}</div></body></html>`}}return{signin:t=>d({html:(0,s.default)({csrfToken:e.csrfToken,providers:e.providers,callbackUrl:e.callbackUrl,theme:r,...n,...t}),title:"Sign In"}),signout:n=>d({html:(0,o.default)({csrfToken:e.csrfToken,url:t,theme:r,...n}),title:"Sign Out"}),verifyRequest:e=>d({html:(0,a.default)({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>d({...(0,l.default)({url:t,theme:r,...e}),title:"Error"})}}},3374:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(81706),s=n(r(40066));function o(e,t=1){if(!e)return;3===(e=e.replace(/^#/,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let r=parseInt(e,16),n=r>>16&255,i=r>>8&255,s=255&r;return t=Math.min(Math.max(t,0),1),`rgba(${n}, ${i}, ${s}, ${t})`}function a(e){var t;let{csrfToken:r,providers:n,callbackUrl:a,theme:l,email:u,error:c}=e,d=n.filter(e=>"oauth"===e.type||"email"===e.type||"credentials"===e.type&&!!e.credentials);"undefined"!=typeof document&&l.buttonText&&document.documentElement.style.setProperty("--button-text-color",l.buttonText),"undefined"!=typeof document&&l.brandColor&&document.documentElement.style.setProperty("--brand-color",l.brandColor);let h={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},f=c&&(null!==(t=h[c])&&void 0!==t?t:h.default),p="https://authjs.dev/img/providers";return(0,i.h)("div",{className:"signin"},l.brandColor&&(0,i.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${l.brandColor}
        }
      `}}),l.buttonText&&(0,i.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${l.buttonText}
        }
      `}}),(0,i.h)("div",{className:"card"},l.logo&&(0,i.h)("img",{src:l.logo,alt:"Logo",className:"logo"}),f&&(0,i.h)("div",{className:"error"},(0,i.h)("p",null,f)),d.map((e,t)=>{let n,l,c,h,f,m;if("oauth"===e.type){var g;({bg:n="",text:l="",logo:c="",bgDark:f=n,textDark:m=l,logoDark:h=""}=null!==(g=e.style)&&void 0!==g?g:{}),c=c.startsWith("/")?`${p}${c}`:c,(h=h.startsWith("/")?`${p}${h}`:h||c)||(h=c)}return(0,i.h)("div",{key:e.id,className:"provider"},"oauth"===e.type&&(0,i.h)("form",{action:e.signinUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),a&&(0,i.h)("input",{type:"hidden",name:"callbackUrl",value:a}),(0,i.h)("button",{type:"submit",className:"button",style:{"--provider-bg":n,"--provider-dark-bg":f,"--provider-color":l,"--provider-dark-color":m,"--provider-bg-hover":o(n,.8),"--provider-dark-bg-hover":o(f,.8)}},c&&(0,i.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${c.startsWith("/")?p:""}${c}`}),h&&(0,i.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${c.startsWith("/")?p:""}${h}`}),(0,i.h)("span",null,"Sign in with ",e.name))),("email"===e.type||"credentials"===e.type)&&t>0&&"email"!==d[t-1].type&&"credentials"!==d[t-1].type&&(0,i.h)("hr",null),"email"===e.type&&(0,i.h)("form",{action:e.signinUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),(0,i.h)("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`},"Email"),(0,i.h)("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:u,placeholder:"email@example.com",required:!0}),(0,i.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",e.name)),"credentials"===e.type&&(0,i.h)("form",{action:e.callbackUrl,method:"POST"},(0,i.h)("input",{type:"hidden",name:"csrfToken",value:r}),Object.keys(e.credentials).map(t=>{var r,n,o;return(0,i.h)("div",{key:`input-group-${e.id}`},(0,i.h)("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`},null!==(r=e.credentials[t].label)&&void 0!==r?r:t),(0,i.h)("input",(0,s.default)({name:t,id:`input-${t}-for-${e.id}-provider`,type:null!==(n=e.credentials[t].type)&&void 0!==n?n:"text",placeholder:null!==(o=e.credentials[t].placeholder)&&void 0!==o?o:""},e.credentials[t])))}),(0,i.h)("button",{type:"submit"},"Sign in with ",e.name)),("email"===e.type||"credentials"===e.type)&&t+1<d.length&&(0,i.h)("hr",null))})))}},80029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(81706);function i(e){let{url:t,csrfToken:r,theme:i}=e;return(0,n.h)("div",{className:"signout"},i.brandColor&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${i.brandColor}
        }
      `}}),i.buttonText&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),(0,n.h)("div",{className:"card"},i.logo&&(0,n.h)("img",{src:i.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,"Signout"),(0,n.h)("p",null,"Are you sure you want to sign out?"),(0,n.h)("form",{action:`${t}/signout`,method:"POST"},(0,n.h)("input",{type:"hidden",name:"csrfToken",value:r}),(0,n.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))}},31361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(81706);function i(e){let{url:t,theme:r}=e;return(0,n.h)("div",{className:"verify-request"},r.brandColor&&(0,n.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),(0,n.h)("div",{className:"card"},r.logo&&(0,n.h)("img",{src:r.logo,alt:"Logo",className:"logo"}),(0,n.h)("h1",null,"Check your email"),(0,n.h)("p",null,"A sign in link has been sent to your email address."),(0,n.h)("p",null,(0,n.h)("a",{className:"site",href:t.origin},t.host))))}},16515:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var i=n(r(59082)),s=n(r(23244)),o=r(135),a=n(r(4552));async function l(e){var t,r,n,l,u,c;let{options:d,query:h,body:f,method:p,headers:m,sessionStore:g}=e,{provider:y,adapter:v,url:b,callbackUrl:_,pages:w,jwt:S,events:E,callbacks:T,session:{strategy:O,maxAge:C},logger:k}=d,x=[],A="jwt"===O;if("oauth"===y.type)try{let{profile:n,account:o,OAuthProfile:a,cookies:l}=await (0,i.default)({query:h,body:f,method:p,options:d,cookies:e.cookies});l.length&&x.push(...l);try{if(k.debug("OAUTH_CALLBACK_RESPONSE",{profile:n,account:o,OAuthProfile:a}),!n||!o||!a)return{redirect:`${b}/signin`,cookies:x};let e=n;if(v){let{getUserByAccount:t}=v,r=await t({providerAccountId:o.providerAccountId,provider:y.id});r&&(e=r)}try{let t=await T.signIn({user:e,account:o,profile:a});if(!t)return{redirect:`${b}/error?error=AccessDenied`,cookies:x};if("string"==typeof t)return{redirect:t,cookies:x}}catch(e){return{redirect:`${b}/error?error=${encodeURIComponent(e.message)}`,cookies:x}}let{user:i,session:l,isNewUser:u}=await (0,s.default)({sessionToken:g.value,profile:n,account:o,options:d});if(A){let e={name:i.name,email:i.email,picture:i.image,sub:null===(r=i.id)||void 0===r?void 0:r.toString()},t=await T.jwt({token:e,user:i,account:o,profile:a,isNewUser:u,trigger:u?"signUp":"signIn"}),n=await S.encode({...S,token:t}),s=new Date;s.setTime(s.getTime()+1e3*C);let l=g.chunk(n,{expires:s});x.push(...l)}else x.push({name:d.cookies.sessionToken.name,value:l.sessionToken,options:{...d.cookies.sessionToken.options,expires:l.expires}});if(await (null===(t=E.signIn)||void 0===t?void 0:t.call(E,{user:i,account:o,profile:n,isNewUser:u})),u&&w.newUser)return{redirect:`${w.newUser}${w.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(_)}`,cookies:x};return{redirect:_,cookies:x}}catch(e){if("AccountNotLinkedError"===e.name)return{redirect:`${b}/error?error=OAuthAccountNotLinked`,cookies:x};if("CreateUserError"===e.name)return{redirect:`${b}/error?error=OAuthCreateAccount`,cookies:x};return k.error("OAUTH_CALLBACK_HANDLER_ERROR",e),{redirect:`${b}/error?error=Callback`,cookies:x}}}catch(e){if("OAuthCallbackError"===e.name)return k.error("OAUTH_CALLBACK_ERROR",{error:e,providerId:y.id}),{redirect:`${b}/error?error=OAuthCallback`,cookies:x};return k.error("OAUTH_CALLBACK_ERROR",e),{redirect:`${b}/error?error=Callback`,cookies:x}}else if("email"===y.type)try{let e=null==h?void 0:h.token,t=null==h?void 0:h.email;if(!e||!t)return{redirect:`${b}/error?error=configuration`,cookies:x};let r=await v.useVerificationToken({identifier:t,token:(0,o.hashToken)(e,d)});if(!r||r.expires.valueOf()<Date.now())return{redirect:`${b}/error?error=Verification`,cookies:x};let i=await (0,a.default)({email:t,adapter:v}),u={providerAccountId:i.email,type:"email",provider:y.id};try{let e=await T.signIn({user:i,account:u});if(!e)return{redirect:`${b}/error?error=AccessDenied`,cookies:x};if("string"==typeof e)return{redirect:e,cookies:x}}catch(e){return{redirect:`${b}/error?error=${encodeURIComponent(e.message)}`,cookies:x}}let{user:c,session:f,isNewUser:p}=await (0,s.default)({sessionToken:g.value,profile:i,account:u,options:d});if(A){let e={name:c.name,email:c.email,picture:c.image,sub:null===(l=c.id)||void 0===l?void 0:l.toString()},t=await T.jwt({token:e,user:c,account:u,isNewUser:p,trigger:p?"signUp":"signIn"}),r=await S.encode({...S,token:t}),n=new Date;n.setTime(n.getTime()+1e3*C);let i=g.chunk(r,{expires:n});x.push(...i)}else x.push({name:d.cookies.sessionToken.name,value:f.sessionToken,options:{...d.cookies.sessionToken.options,expires:f.expires}});if(await (null===(n=E.signIn)||void 0===n?void 0:n.call(E,{user:c,account:u,isNewUser:p})),p&&w.newUser)return{redirect:`${w.newUser}${w.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(_)}`,cookies:x};return{redirect:_,cookies:x}}catch(e){if("CreateUserError"===e.name)return{redirect:`${b}/error?error=EmailCreateAccount`,cookies:x};return k.error("CALLBACK_EMAIL_ERROR",e),{redirect:`${b}/error?error=Callback`,cookies:x}}else if("credentials"===y.type&&"POST"===p){let e;let t=f;try{if(!(e=await y.authorize(t,{query:h,body:f,headers:m,method:p})))return{status:401,redirect:`${b}/error?${new URLSearchParams({error:"CredentialsSignin",provider:y.id})}`,cookies:x}}catch(e){return{status:401,redirect:`${b}/error?error=${encodeURIComponent(e.message)}`,cookies:x}}let r={providerAccountId:e.id,type:"credentials",provider:y.id};try{let n=await T.signIn({user:e,account:r,credentials:t});if(!n)return{status:403,redirect:`${b}/error?error=AccessDenied`,cookies:x};if("string"==typeof n)return{redirect:n,cookies:x}}catch(e){return{redirect:`${b}/error?error=${encodeURIComponent(e.message)}`,cookies:x}}let n={name:e.name,email:e.email,picture:e.image,sub:null===(u=e.id)||void 0===u?void 0:u.toString()},i=await T.jwt({token:n,user:e,account:r,isNewUser:!1,trigger:"signIn"}),s=await S.encode({...S,token:i}),o=new Date;o.setTime(o.getTime()+1e3*C);let a=g.chunk(s,{expires:o});return x.push(...a),await (null===(c=E.signIn)||void 0===c?void 0:c.call(E,{user:e,account:r})),{redirect:_,cookies:x}}return{status:500,body:`Error: Callback for provider type ${y.type} not supported`,cookies:x}}},19254:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"callback",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"providers",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"session",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"signin",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"signout",{enumerable:!0,get:function(){return o.default}});var i=n(r(16515)),s=n(r(26411)),o=n(r(64025)),a=n(r(90042)),l=n(r(82769))},82769:(e,t)=>{"use strict";function r(e){return{headers:[{key:"Content-Type",value:"application/json"}],body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:s})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:s},e),{})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},90042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=r(135);async function i(e){var t,r,i,s,o,a;let{options:l,sessionStore:u,newSession:c,isUpdate:d}=e,{adapter:h,jwt:f,events:p,callbacks:m,logger:g,session:{strategy:y,maxAge:v}}=l,b={body:{},headers:[{key:"Content-Type",value:"application/json"}],cookies:[]},_=u.value;if(!_)return b;if("jwt"===y)try{let e=await f.decode({...f,token:_});if(!e)throw Error("JWT invalid");let i=await m.jwt({token:e,...d&&{trigger:"update"},session:c}),s=(0,n.fromDate)(v),o=await m.session({session:{user:{name:null==e?void 0:e.name,email:null==e?void 0:e.email,image:null==e?void 0:e.picture},expires:s.toISOString()},token:i});b.body=o;let a=await f.encode({...f,token:i,maxAge:l.session.maxAge}),h=u.chunk(a,{expires:s});null===(t=b.cookies)||void 0===t||t.push(...h),await (null===(r=p.session)||void 0===r?void 0:r.call(p,{session:o,token:i}))}catch(e){g.error("JWT_SESSION_ERROR",e),null===(i=b.cookies)||void 0===i||i.push(...u.clean())}else try{let{getSessionAndUser:e,deleteSession:t,updateSession:r}=h,i=await e(_);if(i&&i.session.expires.valueOf()<Date.now()&&(await t(_),i=null),i){let{user:e,session:t}=i,a=l.session.updateAge,u=t.expires.valueOf()-1e3*v+1e3*a,h=(0,n.fromDate)(v);u<=Date.now()&&await r({sessionToken:_,expires:h});let f=await m.session({session:{user:{name:e.name,email:e.email,image:e.image},expires:t.expires.toISOString()},user:e,newSession:c,...d?{trigger:"update"}:{}});b.body=f,null===(s=b.cookies)||void 0===s||s.push({name:l.cookies.sessionToken.name,value:_,options:{...l.cookies.sessionToken.options,expires:h}}),await (null===(o=p.session)||void 0===o?void 0:o.call(p,{session:f}))}else _&&(null===(a=b.cookies)||void 0===a||a.push(...u.clean()))}catch(e){g.error("SESSION_ERROR",e)}return b}},26411:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(r(45657)),s=n(r(90065)),o=n(r(4552));async function a(e){let{options:t,query:r,body:n}=e,{url:a,callbacks:l,logger:u,provider:c}=t;if(!c.type)return{status:500,text:`Error: Type not specified for ${c.name}`};if("oauth"===c.type)try{return await (0,i.default)({options:t,query:r})}catch(e){return u.error("SIGNIN_OAUTH_ERROR",{error:e,providerId:c.id}),{redirect:`${a}/error?error=OAuthSignin`}}else if("email"===c.type){var d;let e=null==n?void 0:n.email;if(!e)return{redirect:`${a}/error?error=EmailSignin`};let r=null!==(d=c.normalizeIdentifier)&&void 0!==d?d:e=>{let[t,r]=e.toLowerCase().trim().split("@");return r=r.split(",")[0],`${t}@${r}`};try{e=r(null==n?void 0:n.email)}catch(e){return u.error("SIGNIN_EMAIL_ERROR",{error:e,providerId:c.id}),{redirect:`${a}/error?error=EmailSignin`}}let i=await (0,o.default)({email:e,adapter:t.adapter}),h={providerAccountId:e,userId:e,type:"email",provider:c.id};try{let e=await l.signIn({user:i,account:h,email:{verificationRequest:!0}});if(!e)return{redirect:`${a}/error?error=AccessDenied`};if("string"==typeof e)return{redirect:e}}catch(e){return{redirect:`${a}/error?${new URLSearchParams({error:e})}`}}try{return{redirect:await (0,s.default)(e,t)}}catch(e){return u.error("SIGNIN_EMAIL_ERROR",{error:e,providerId:c.id}),{redirect:`${a}/error?error=EmailSignin`}}}return{redirect:`${a}/signin`}}},64025:(e,t)=>{"use strict";async function r(e){var t,r;let{options:n,sessionStore:i}=e,{adapter:s,events:o,jwt:a,callbackUrl:l,logger:u,session:c}=n,d=null==i?void 0:i.value;if(!d)return{redirect:l};if("jwt"===c.strategy)try{let e=await a.decode({...a,token:d});await (null===(t=o.signOut)||void 0===t?void 0:t.call(o,{token:e}))}catch(e){u.error("SIGNOUT_ERROR",e)}else try{let e=await s.deleteSession(d);await (null===(r=o.signOut)||void 0===r?void 0:r.call(o,{session:e}))}catch(e){u.error("SIGNOUT_ERROR",e)}return{redirect:l,cookies:i.clean()}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},77381:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},22581:e=>{e.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},81355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}});var i=r(77381);Object.keys(i).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var s=a(r(49605));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e))&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))})},36929:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0});var i={encode:!0,decode:!0,getToken:!0};t.decode=f,t.encode=h,t.getToken=p;var s=r(80816),o=n(r(81128)),a=r(31593),l=r(44939),u=r(80619);Object.keys(u).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))});let c=2592e3,d=()=>Date.now()/1e3|0;async function h(e){let{token:t={},secret:r,maxAge:n=c,salt:i=""}=e,o=await m(r,i);return await new s.EncryptJWT(t).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(d()+n).setJti((0,a.v4)()).encrypt(o)}async function f(e){let{token:t,secret:r,salt:n=""}=e;if(!t)return null;let i=await m(r,n),{payload:o}=await (0,s.jwtDecrypt)(t,i,{clockTolerance:15});return o}async function p(e){var t,r,n;let{req:i,secureCookie:s=null!==(t=null===(r=process.env.NEXTAUTH_URL)||void 0===r?void 0:r.startsWith("https://"))&&void 0!==t?t:!!process.env.VERCEL,cookieName:o=s?"__Secure-next-auth.session-token":"next-auth.session-token",raw:a,decode:u=f,logger:c=console,secret:d=process.env.NEXTAUTH_SECRET}=e;if(!i)throw Error("Must pass `req` to JWT getToken()");let h=new l.SessionStore({name:o,options:{secure:s}},{cookies:i.cookies,headers:i.headers},c).value,p=i.headers instanceof Headers?i.headers.get("authorization"):null===(n=i.headers)||void 0===n?void 0:n.authorization;if(h||(null==p?void 0:p.split(" ")[0])!=="Bearer"||(h=decodeURIComponent(p.split(" ")[1])),!h)return null;if(a)return h;try{return await u({token:h,secret:d})}catch(e){return null}}async function m(e,t){return await (0,o.default)("sha256",e,t,`NextAuth.js Generated Encryption Key${t?` (${t})`:""}`,32)}},80619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},49605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getServerSession=l,t.unstable_getServerSession=u;var n=r(68638),i=r(36231);async function s(e,t,r){var s,o,a,l,u,c,d,h;let{nextauth:f,...p}=e.query;null!==(s=r.secret)&&void 0!==s||(r.secret=null!==(o=null===(a=r.jwt)||void 0===a?void 0:a.secret)&&void 0!==o?o:process.env.NEXTAUTH_SECRET);let m=await (0,n.AuthHandler)({req:{body:e.body,query:p,cookies:e.cookies,headers:e.headers,method:e.method,action:null==f?void 0:f[0],providerId:null==f?void 0:f[1],error:null!==(l=e.query.error)&&void 0!==l?l:null==f?void 0:f[1]},options:r});if(t.status(null!==(u=m.status)&&void 0!==u?u:200),null===(c=m.cookies)||void 0===c||c.forEach(e=>(0,i.setCookie)(t,e)),null===(d=m.headers)||void 0===d||d.forEach(e=>t.setHeader(e.key,e.value)),m.redirect){if((null===(h=e.body)||void 0===h?void 0:h.json)!=="true"){t.status(302).setHeader("Location",m.redirect),t.end();return}return t.json({url:m.redirect})}return t.send(m.body)}async function o(e,t,s){var o,a,l;null!==(o=s.secret)&&void 0!==o||(s.secret=process.env.NEXTAUTH_SECRET);let{headers:u,cookies:c}=r(7439),d=null===(a=t.params)||void 0===a?void 0:a.nextauth,h=Object.fromEntries(e.nextUrl.searchParams),f=await (0,i.getBody)(e),p=await (0,n.AuthHandler)({req:{body:f,query:h,cookies:Object.fromEntries(c().getAll().map(e=>[e.name,e.value])),headers:Object.fromEntries(u()),method:e.method,action:null==d?void 0:d[0],providerId:null==d?void 0:d[1],error:null!==(l=h.error)&&void 0!==l?l:null==d?void 0:d[1]},options:s}),m=(0,i.toResponse)(p),g=m.headers.get("Location");return(null==f?void 0:f.json)==="true"&&g?(m.headers.delete("Location"),m.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:g}),{status:p.status,headers:m.headers})):m}var a=function(...e){var t;return 1===e.length?async(t,r)=>null!=r&&r.params?await o(t,r,e[0]):await s(t,r,e[0]):null!==(t=e[1])&&void 0!==t&&t.params?o(...e):s(...e)};async function l(...e){var t,s;let o,a,u;let c=0===e.length||1===e.length;if(c){u=Object.assign({},e[0],{providers:[]});let{headers:t,cookies:n}=r(7439);o={headers:Object.fromEntries(t()),cookies:Object.fromEntries(n().getAll().map(e=>[e.name,e.value]))},a={getHeader(){},setCookie(){},setHeader(){}}}else o=e[0],a=e[1],u=Object.assign({},e[2],{providers:[]});null!==(s=(t=u).secret)&&void 0!==s||(t.secret=process.env.NEXTAUTH_SECRET);let{body:d,cookies:h,status:f=200}=await (0,n.AuthHandler)({options:u,req:{action:"session",method:"GET",cookies:o.cookies,headers:o.headers}});if(null==h||h.forEach(e=>(0,i.setCookie)(a,e)),d&&"string"!=typeof d&&Object.keys(d).length){if(200===f)return c&&delete d.expires,d;throw Error(d.message)}return null}async function u(...e){return await l(...e)}t.default=a},36231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBody=s,t.setCookie=i,t.toResponse=o;var n=r(83191);function i(e,t){var r;let i=null!==(r=e.getHeader("Set-Cookie"))&&void 0!==r?r:[];Array.isArray(i)||(i=[i]);let{name:s,value:o,options:a}=t,l=(0,n.serialize)(s,o,a);i.push(l),e.setHeader("Set-Cookie",i)}async function s(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?await e.json():null!=t&&t.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}function o(e){var t,r,i;let s=new Headers(null===(t=e.headers)||void 0===t?void 0:t.reduce((e,{key:t,value:r})=>(e[t]=r,e),{}));null===(r=e.cookies)||void 0===r||r.forEach(e=>{let{name:t,value:r,options:i}=e,o=(0,n.serialize)(t,r,i);s.has("Set-Cookie")?s.append("Set-Cookie",o):s.set("Set-Cookie",o)});let o=e.body;"application/json"===s.get("content-type")?o=JSON.stringify(e.body):"application/x-www-form-urlencoded"===s.get("content-type")&&(o=new URLSearchParams(e.body).toString());let a=e.redirect?302:null!==(i=e.status)&&void 0!==i?i:200,l=new Response(o,{headers:s,status:a});return e.redirect&&l.headers.set("Location",e.redirect),l}},31593:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{NIL:()=>O,parse:()=>y,stringify:()=>f,v1:()=>g,v3:()=>S,v4:()=>E,v5:()=>T,validate:()=>d,version:()=>C});var s=r(6113),o=r.n(s);let a=new Uint8Array(256),l=a.length;function u(){return l>a.length-16&&(o().randomFillSync(a),l=0),a.slice(l,l+=16)}let c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(e){return"string"==typeof e&&c.test(e)},h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).substr(1));let f=function(e,t=0){let r=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!d(r))throw TypeError("Stringified UUID is invalid");return r},p=0,m=0,g=function(e,t,r){let s=t&&r||0,o=t||Array(16),a=(e=e||{}).node||n,l=void 0!==e.clockseq?e.clockseq:i;if(null==a||null==l){let t=e.random||(e.rng||u)();null==a&&(a=n=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==l&&(l=i=(t[6]<<8|t[7])&16383)}let c=void 0!==e.msecs?e.msecs:Date.now(),d=void 0!==e.nsecs?e.nsecs:m+1,h=c-p+(d-m)/1e4;if(h<0&&void 0===e.clockseq&&(l=l+1&16383),(h<0||c>p)&&void 0===e.nsecs&&(d=0),d>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,m=d,i=l;let g=((268435455&(c+=122192928e5))*1e4+d)%4294967296;o[s++]=g>>>24&255,o[s++]=g>>>16&255,o[s++]=g>>>8&255,o[s++]=255&g;let y=c/4294967296*1e4&268435455;o[s++]=y>>>8&255,o[s++]=255&y,o[s++]=y>>>24&15|16,o[s++]=y>>>16&255,o[s++]=l>>>8|128,o[s++]=255&l;for(let e=0;e<6;++e)o[s+e]=a[e];return t||f(o)},y=function(e){let t;if(!d(e))throw TypeError("Invalid UUID");let r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function v(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}let b="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function w(e,t,r){function n(e,n,i,s){if("string"==typeof e&&(e=v(e)),"string"==typeof n&&(n=y(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),(o=r(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,i){s=s||0;for(let e=0;e<16;++e)i[s+e]=o[e];return i}return f(o)}try{n.name=e}catch(e){}return n.DNS=b,n.URL=_,n}let S=w("v3",48,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("md5").update(e).digest()}),E=function(e,t,r){let n=(e=e||{}).random||(e.rng||u)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return f(n)},T=w("v5",80,function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),o().createHash("sha1").update(e).digest()}),O="00000000-0000-0000-0000-000000000000",C=function(e){if(!d(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},10375:(e,t)=>{"use strict";var r;function n(e){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:e=>({id:e.sub,name:e.name,email:e.email,image:e.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:e}}r={value:!0},t.Z=n},61530:(e,t)=>{"use strict";function r(e,t){var r;return(null!==(r=process.env.VERCEL)&&void 0!==r?r:process.env.AUTH_TRUST_HOST)?`${"http"===t?"http":"https"}://${e}`:process.env.NEXTAUTH_URL}Object.defineProperty(t,"__esModule",{value:!0}),t.detectOrigin=r},52370:(e,t,r)=>{"use strict";var n=r(12272);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.proxyLogger=f,t.setLogger=d;var i=n(r(74300)),s=r(26100);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){if(e instanceof Error&&!(e instanceof s.UnknownError))return{message:e.message,stack:e.stack,name:e.name};if(u(e)){var t;e.error=l(e.error),e.message=null!==(t=e.message)&&void 0!==t?t:e.error.message}return e}function u(e){return!!(null!=e&&e.error)}var c={error:function(e,t){t=l(t),console.error("[next-auth][error][".concat(e,"]"),"\nhttps://next-auth.js.org/errors#".concat(e.toLowerCase()),t.message,t)},warn:function(e){console.warn("[next-auth][warn][".concat(e,"]"),"\nhttps://next-auth.js.org/warnings#".concat(e.toLowerCase()))},debug:function(e,t){console.log("[next-auth][debug][".concat(e,"]"),t)}};function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t||(c.debug=function(){}),e.error&&(c.error=e.error),e.warn&&(c.warn=e.warn),e.debug&&(c.debug=e.debug)}var h=c;function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return e;var r={},n=function(e){r[e]=function(r,n){c[e](r,n),"error"===e&&(n=l(n)),n.client=!0;var i="".concat(t,"/_log"),s=new URLSearchParams(a({level:e,code:r},n));return navigator.sendBeacon?navigator.sendBeacon(i,s):fetch(i,{method:"POST",body:s,keepalive:!0})}};for(var i in e)n(i);return r}catch(e){return c}}t.default=h},53747:(e,t)=>{"use strict";function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function n(e,...t){if(!t.length)return e;let i=t.shift();if(r(e)&&r(i))for(let t in i)r(i[t])?(e[t]||Object.assign(e,{[t]:{}}),n(e[t],i[t])):Object.assign(e,{[t]:i[t]});return n(e,...t)}Object.defineProperty(t,"__esModule",{value:!0}),t.merge=n},37027:(e,t)=>{"use strict";function r(e){var t;let r=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let n=new URL(null!==(t=e)&&void 0!==t?t:r),i=("/"===n.pathname?r.pathname:n.pathname).replace(/\/$/,""),s=`${n.origin}${i}`;return{origin:n.origin,host:n.host,path:i,base:s,toString:()=>s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},7439:(e,t,r)=>{"use strict";r.r(t);var n=r(28290),i={};for(let e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},86843:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createProxy",{enumerable:!0,get:function(){return n}});let n=r(18195).createClientModuleProxy},77519:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/app-router.js")},58284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraftMode",{enumerable:!0,get:function(){return i}});let n=r(72973);class i{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,n.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,n.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62563:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/error-boundary.js")},28290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{headers:function(){return c},cookies:function(){return d},draftMode:function(){return h}});let n=r(97366),i=r(3022),s=r(63608),o=r(54580),a=r(72934),l=r(72973),u=r(58284);function c(){if((0,l.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return i.HeadersAdapter.seal(new Headers({}));let e=o.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function d(){if((0,l.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.RequestCookiesAdapter.seal(new s.RequestCookies(new Headers({})));let e=o.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=a.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function h(){let e=o.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new u.DraftMode(e.draftMode)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},48096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72517:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/layout-router.js")},31150:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/not-found-boundary.js")},69361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}}),r(46783);let n=r(25036);r(40002);let i={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block"},h1:{display:"inline-block",margin:"0 20px 0 0",padding:"0 23px 0 0",fontSize:24,fontWeight:500,verticalAlign:"top",lineHeight:"49px"},h2:{fontSize:14,fontWeight:400,lineHeight:"49px",margin:0}};function s(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("title",{children:"404: This page could not be found."}),(0,n.jsx)("div",{style:i.error,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}),(0,n.jsx)("h1",{className:"next-error-h1",style:i.h1,children:"404"}),(0,n.jsx)("div",{style:i.desc,children:(0,n.jsx)("h2",{style:i.h2,children:"This page could not be found."})})]})})]})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},80571:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/render-from-template-context.js")},88650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createSearchParamsBailoutProxy",{enumerable:!0,get:function(){return i}});let n=r(72973);function i(){return new Proxy({},{get(e,t){"string"==typeof t&&(0,n.staticGenerationBailout)("searchParams."+t)}})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},72973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isStaticGenBailoutError:function(){return a},staticGenerationBailout:function(){return u}});let n=r(48096),i=r(45869),s="NEXT_STATIC_GEN_BAILOUT";class o extends Error{constructor(...e){super(...e),this.code=s}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===s}function l(e,t){let{dynamic:r,link:n}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let u=(e,t)=>{let{dynamic:r,link:s}=void 0===t?{}:t,a=i.staticGenerationAsyncStorage.getStore();if(!a)return!1;if(a.forceStatic)return!0;if(a.dynamicShouldError)throw new o(l(e,{link:s,dynamic:null!=r?r:"error"}));let u=l(e,{dynamic:r,link:"https://nextjs.org/docs/messages/dynamic-server-error"});if(null==a.postpone||a.postpone.call(a,e),a.revalidate=0,a.isStaticGeneration){let t=new n.DynamicServerError(u);throw a.dynamicUsageDescription=e,a.dynamicUsageStack=t.stack,t}return!1};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2336:(e,t,r)=>{"use strict";let{createProxy:n}=r(86843);e.exports=n("/workspaces/gtp-messengeradd/node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js")},97347:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(e,s,o,a)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let l of n(s))i.call(e,l)||l===o||t(e,l,{get:()=>s[l],enumerable:!(a=r(s,l))||a.enumerable});return e},o=e=>s(t({},"__esModule",{value:!0}),e),a={};function l(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function u(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function c(e){if(!e)return;let[[t,r],...n]=u(e),{domain:i,expires:s,httponly:o,maxage:a,path:l,samesite:c,secure:h,partitioned:p,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase(),t]));return d({name:t,value:decodeURIComponent(r),domain:i,...s&&{expires:new Date(s)},...o&&{httpOnly:!0},..."string"==typeof a&&{maxAge:Number(a)},path:l,...c&&{sameSite:f(c)},...h&&{secure:!0},...g&&{priority:m(g)},...p&&{partitioned:!0}})}function d(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(a,{RequestCookies:()=>y,ResponseCookies:()=>v,parseCookie:()=>u,parseSetCookie:()=>c,stringifyCookie:()=>l}),e.exports=o(a);var h=["strict","lax","none"];function f(e){return e=e.toLowerCase(),h.includes(e)?e:void 0}var p=["low","medium","high"];function m(e){return e=e.toLowerCase(),p.includes(e)?e:void 0}function g(e){if(!e)return[];var t,r,n,i,s,o=[],a=0;function l(){for(;a<e.length&&/\s/.test(e.charAt(a));)a+=1;return a<e.length}function u(){return"="!==(r=e.charAt(a))&&";"!==r&&","!==r}for(;a<e.length;){for(t=a,s=!1;l();)if(","===(r=e.charAt(a))){for(n=a,a+=1,l(),i=a;a<e.length&&u();)a+=1;a<e.length&&"="===e.charAt(a)?(s=!0,a=i,o.push(e.substring(t,n)),t=a):a=n+1}else a+=1;(!s||a>=e.length)&&o.push(e.substring(t,e.length))}return o}var y=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of u(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>l(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>l(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},v=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(let e of Array.isArray(i)?i:g(i)){let t=c(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,_({name:t,value:r,...n})),b(i,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(l).join("; ")}};function b(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=l(r);t.append("set-cookie",e)}}function _(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}},68300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{renderToReadableStream:function(){return n.renderToReadableStream},decodeReply:function(){return n.decodeReply},decodeAction:function(){return n.decodeAction},decodeFormState:function(){return n.decodeFormState},AppRouter:function(){return i.default},LayoutRouter:function(){return s.default},RenderFromTemplateContext:function(){return o.default},staticGenerationAsyncStorage:function(){return a.staticGenerationAsyncStorage},requestAsyncStorage:function(){return l.requestAsyncStorage},actionAsyncStorage:function(){return u.actionAsyncStorage},staticGenerationBailout:function(){return c.staticGenerationBailout},createSearchParamsBailoutProxy:function(){return h.createSearchParamsBailoutProxy},serverHooks:function(){return f},preloadStyle:function(){return g.preloadStyle},preloadFont:function(){return g.preloadFont},preconnect:function(){return g.preconnect},taintObjectReference:function(){return y.taintObjectReference},StaticGenerationSearchParamsBailoutProvider:function(){return d.default},NotFoundBoundary:function(){return p.NotFoundBoundary},patchFetch:function(){return w}});let n=r(18195),i=v(r(77519)),s=v(r(72517)),o=v(r(80571)),a=r(45869),l=r(54580),u=r(72934),c=r(72973),d=v(r(2336)),h=r(88650),f=_(r(48096)),p=r(31150),m=r(99678);r(62563);let g=r(31806),y=r(22730);function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function w(){return(0,m.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:a.staticGenerationAsyncStorage})}},31806:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{preloadStyle:function(){return s},preloadFont:function(){return o},preconnect:function(){return a}});let n=i(r(25091));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){let r={as:"style"};"string"==typeof t&&(r.crossOrigin=t),n.default.preload(e,r)}function o(e,t,r){let i={as:"font",type:t};"string"==typeof r&&(i.crossOrigin=r),n.default.preload(e,i)}function a(e,t){n.default.preconnect(e,"string"==typeof t?{crossOrigin:t}:void 0)}},22730:(e,t,r)=>{"use strict";function n(){throw Error("Taint can only be used with the taint flag.")}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{taintObjectReference:function(){return i},taintUniqueValue:function(){return s}}),r(40002);let i=n,s=n},50482:(e,t,r)=>{"use strict";e.exports=r(20399)},25091:(e,t,r)=>{"use strict";e.exports=r(50482).vendored["react-rsc"].ReactDOM},25036:(e,t,r)=>{"use strict";e.exports=r(50482).vendored["react-rsc"].ReactJsxRuntime},18195:(e,t,r)=>{"use strict";e.exports=r(50482).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},40002:(e,t,r)=>{"use strict";e.exports=r(50482).vendored["react-rsc"].React},3022:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyHeadersError:function(){return i},HeadersAdapter:function(){return s}});let n=r(6250);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let s=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==o)return n.ReflectAdapter.get(t,o,i)},set(t,r,i,s){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,s);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return n.ReflectAdapter.set(t,a??r,i,s)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==s&&n.ReflectAdapter.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===s||n.ReflectAdapter.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},6250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},97366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyRequestCookiesError:function(){return s},RequestCookiesAdapter:function(){return o},getModifiedCookieValues:function(){return l},appendMutableCookies:function(){return u},MutableRequestCookiesAdapter:function(){return c}});let n=r(63608),i=r(6250);class s extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new s}}class o{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return s.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let a=Symbol.for("next.mutated.cookies");function l(e){let t=e[a];return t&&Array.isArray(t)&&0!==t.length?t:[]}function u(e,t){let r=l(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),s=i.getAll();for(let e of r)i.set(e);for(let e of s)i.set(e);return!0}class c{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let s=[],o=new Set,l=()=>{var e;let i=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore.call(fetch))?void 0:e.getStore();if(i&&(i.pathWasRevalidated=!0),s=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of s){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case a:return s;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return i.ReflectAdapter.get(e,t,r)}}})}}},63608:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return n.RequestCookies},ResponseCookies:function(){return n.ResponseCookies}});let n=r(97347)},49086:(e,t,r)=>{t.OAuth=r(19927).OAuth,t.OAuthEcho=r(19927).OAuthEcho,t.OAuth2=r(68299).OAuth2},85485:e=>{e.exports.isAnEarlyCloseHost=function(e){return e&&e.match(".*google(apis)?.com$")}},19927:(e,t,r)=>{var n=r(6113),i=r(24299),s=r(13685),o=r(95687),a=r(57310),l=r(63477),u=r(85485);t.OAuth=function(e,t,r,n,i,s,o,a,l){if(this._isEcho=!1,this._requestUrl=e,this._accessUrl=t,this._consumerKey=r,this._consumerSecret=this._encodeData(n),"RSA-SHA1"==o&&(this._privateKey=n),this._version=i,void 0===s?this._authorize_callback="oob":this._authorize_callback=s,"PLAINTEXT"!=o&&"HMAC-SHA1"!=o&&"RSA-SHA1"!=o)throw Error("Un-supported signature method: "+o);this._signatureMethod=o,this._nonceSize=a||32,this._headers=l||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},t.OAuthEcho=function(e,t,r,n,i,s,o,a){if(this._isEcho=!0,this._realm=e,this._verifyCredentials=t,this._consumerKey=r,this._consumerSecret=this._encodeData(n),"RSA-SHA1"==s&&(this._privateKey=n),this._version=i,"PLAINTEXT"!=s&&"HMAC-SHA1"!=s&&"RSA-SHA1"!=s)throw Error("Un-supported signature method: "+s);this._signatureMethod=s,this._nonceSize=o||32,this._headers=a||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},t.OAuthEcho.prototype=t.OAuth.prototype,t.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},t.OAuth.prototype._encodeData=function(e){return null==e||""==e?"":encodeURIComponent(e).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},t.OAuth.prototype._decodeData=function(e){return null!=e&&(e=e.replace(/\+/g," ")),decodeURIComponent(e)},t.OAuth.prototype._getSignature=function(e,t,r,n){var i=this._createSignatureBase(e,t,r);return this._createSignature(i,n)},t.OAuth.prototype._normalizeUrl=function(e){var t=a.parse(e,!0),r="";return t.port&&("http:"==t.protocol&&"80"!=t.port||"https:"==t.protocol&&"443"!=t.port)&&(r=":"+t.port),t.pathname&&""!=t.pathname||(t.pathname="/"),t.protocol+"//"+t.hostname+r+t.pathname},t.OAuth.prototype._isParameterNameAnOAuthParameter=function(e){var t=e.match("^oauth_");return!!t&&"oauth_"===t[0]},t.OAuth.prototype._buildAuthorizationHeaders=function(e){var t="OAuth ";this._isEcho&&(t+='realm="'+this._realm+'",');for(var r=0;r<e.length;r++)this._isParameterNameAnOAuthParameter(e[r][0])&&(t+=""+this._encodeData(e[r][0])+'="'+this._encodeData(e[r][1])+'"'+this._oauthParameterSeperator);return t.substring(0,t.length-this._oauthParameterSeperator.length)},t.OAuth.prototype._makeArrayOfArgumentsHash=function(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(Array.isArray(n))for(var i=0;i<n.length;i++)t[t.length]=[r,n[i]];else t[t.length]=[r,n]}return t},t.OAuth.prototype._sortRequestParams=function(e){return e.sort(function(e,t){return e[0]==t[0]?e[1]<t[1]?-1:1:e[0]<t[0]?-1:1}),e},t.OAuth.prototype._normaliseRequestParams=function(e){for(var t=this._makeArrayOfArgumentsHash(e),r=0;r<t.length;r++)t[r][0]=this._encodeData(t[r][0]),t[r][1]=this._encodeData(t[r][1]);t=this._sortRequestParams(t);for(var e="",r=0;r<t.length;r++)e+=t[r][0]+"="+t[r][1],r<t.length-1&&(e+="&");return e},t.OAuth.prototype._createSignatureBase=function(e,t,r){return t=this._encodeData(this._normalizeUrl(t)),r=this._encodeData(r),e.toUpperCase()+"&"+t+"&"+r},t.OAuth.prototype._createSignature=function(e,t){if(void 0===t)var t="";else t=this._encodeData(t);var r=this._consumerSecret+"&"+t,s="";return"PLAINTEXT"==this._signatureMethod?s=r:"RSA-SHA1"==this._signatureMethod?(r=this._privateKey||"",s=n.createSign("RSA-SHA1").update(e).sign(r,"base64")):s=n.Hmac?n.createHmac("sha1",r).update(e).digest("base64"):i.HMACSHA1(r,e),s},t.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],t.OAuth.prototype._getNonce=function(e){for(var t,r=[],n=this.NONCE_CHARS,i=n.length,s=0;s<e;s++)t=Math.floor(Math.random()*i),r[s]=n[t];return r.join("")},t.OAuth.prototype._createClient=function(e,t,r,n,i,a){var l,u={host:t,port:e,path:n,method:r,headers:i};return(l=a?o:s).request(u)},t.OAuth.prototype._prepareParameters=function(e,t,r,n,i){var s={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(e&&(s.oauth_token=e),this._isEcho)c=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(s),t);else{if(i)for(var o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);var u=a.parse(n,!1);if(u.query){var c,d,h=l.parse(u.query);for(var o in h){var f=h[o];if("object"==typeof f)for(d in f)s[o+"["+d+"]"]=f[d];else s[o]=f}}c=this._getSignature(r,n,this._normaliseRequestParams(s),t)}var p=this._sortRequestParams(this._makeArrayOfArgumentsHash(s));return p[p.length]=["oauth_signature",c],p},t.OAuth.prototype._performSecureRequest=function(e,t,r,n,i,s,o,c){var d,h,f=this._prepareParameters(e,t,r,n,i);o||(o="application/x-www-form-urlencoded");var p=a.parse(n,!1);"http:"!=p.protocol||p.port||(p.port=80),"https:"!=p.protocol||p.port||(p.port=443);var m={},g=this._buildAuthorizationHeaders(f);for(var y in this._isEcho?m["X-Verify-Credentials-Authorization"]=g:m.Authorization=g,m.Host=p.host,this._headers)this._headers.hasOwnProperty(y)&&(m[y]=this._headers[y]);for(var y in i)this._isParameterNameAnOAuthParameter(y)&&delete i[y];("POST"==r||"PUT"==r)&&null==s&&null!=i&&(s=l.stringify(i).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),s?Buffer.isBuffer(s)?m["Content-length"]=s.length:m["Content-length"]=Buffer.byteLength(s):m["Content-length"]=0,m["Content-Type"]=o,p.pathname&&""!=p.pathname||(p.pathname="/"),d=p.query?p.pathname+"?"+p.query:p.pathname,h="https:"==p.protocol?this._createClient(p.port,p.hostname,r,d,m,!0):this._createClient(p.port,p.hostname,r,d,m);var v=this._clientOptions;if(!c)return("POST"==r||"PUT"==r)&&null!=s&&""!=s&&h.write(s),h;var b="",_=this,w=u.isAnEarlyCloseHost(p.hostname),S=!1,E=function(n){S||(S=!0,n.statusCode>=200&&n.statusCode<=299?c(null,b,n):(301==n.statusCode||302==n.statusCode)&&v.followRedirects&&n.headers&&n.headers.location?_._performSecureRequest(e,t,r,n.headers.location,i,s,o,c):c({statusCode:n.statusCode,data:b},b,n))};h.on("response",function(e){e.setEncoding("utf8"),e.on("data",function(e){b+=e}),e.on("end",function(){E(e)}),e.on("close",function(){w&&E(e)})}),h.on("error",function(e){S||(S=!0,c(e))}),("POST"==r||"PUT"==r)&&null!=s&&""!=s&&h.write(s),h.end()},t.OAuth.prototype.setClientOptions=function(e){var t,r={},n=Object.prototype.hasOwnProperty;for(t in this._defaultClientOptions)n.call(e,t)?r[t]=e[t]:r[t]=this._defaultClientOptions[t];this._clientOptions=r},t.OAuth.prototype.getOAuthAccessToken=function(e,t,r,n){var i={};"function"==typeof r?n=r:i.oauth_verifier=r,this._performSecureRequest(e,t,this._clientOptions.accessTokenHttpMethod,this._accessUrl,i,null,null,function(e,t,r){if(e)n(e);else{var i=l.parse(t),s=i.oauth_token;delete i.oauth_token;var o=i.oauth_token_secret;delete i.oauth_token_secret,n(null,s,o,i)}})},t.OAuth.prototype.getProtectedResource=function(e,t,r,n,i){this._performSecureRequest(r,n,t,e,null,"",null,i)},t.OAuth.prototype.delete=function(e,t,r,n){return this._performSecureRequest(t,r,"DELETE",e,null,"",null,n)},t.OAuth.prototype.get=function(e,t,r,n){return this._performSecureRequest(t,r,"GET",e,null,"",null,n)},t.OAuth.prototype._putOrPost=function(e,t,r,n,i,s,o){var a=null;return"function"==typeof s&&(o=s,s=null),"string"==typeof i||Buffer.isBuffer(i)||(s="application/x-www-form-urlencoded",a=i,i=null),this._performSecureRequest(r,n,e,t,a,i,s,o)},t.OAuth.prototype.put=function(e,t,r,n,i,s){return this._putOrPost("PUT",e,t,r,n,i,s)},t.OAuth.prototype.post=function(e,t,r,n,i,s){return this._putOrPost("POST",e,t,r,n,i,s)},t.OAuth.prototype.getOAuthRequestToken=function(e,t){"function"==typeof e&&(t=e,e={}),this._authorize_callback&&(e.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,e,null,null,function(e,r,n){if(e)t(e);else{var i=l.parse(r),s=i.oauth_token,o=i.oauth_token_secret;delete i.oauth_token,delete i.oauth_token_secret,t(null,s,o,i)}})},t.OAuth.prototype.signUrl=function(e,t,r,n){if(void 0===n)var n="GET";for(var i=this._prepareParameters(t,r,n,e,{}),s=a.parse(e,!1),o="",l=0;l<i.length;l++)o+=i[l][0]+"="+this._encodeData(i[l][1])+"&";return o=o.substring(0,o.length-1),s.protocol+"//"+s.host+s.pathname+"?"+o},t.OAuth.prototype.authHeader=function(e,t,r,n){if(void 0===n)var n="GET";var i=this._prepareParameters(t,r,n,e,{});return this._buildAuthorizationHeaders(i)}},68299:(e,t,r)=>{var n=r(63477),i=(r(6113),r(95687)),s=r(13685),o=r(57310),a=r(85485);t.OAuth2=function(e,t,r,n,i,s){this._clientId=e,this._clientSecret=t,this._baseSite=r,this._authorizeUrl=n||"/oauth/authorize",this._accessTokenUrl=i||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=s||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},t.OAuth2.prototype.setAgent=function(e){this._agent=e},t.OAuth2.prototype.setAccessTokenName=function(e){this._accessTokenName=e},t.OAuth2.prototype.setAuthMethod=function(e){this._authMethod=e},t.OAuth2.prototype.useAuthorizationHeaderforGET=function(e){this._useAuthorizationHeaderForGET=e},t.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},t.OAuth2.prototype.buildAuthHeader=function(e){return this._authMethod+" "+e},t.OAuth2.prototype._chooseHttpLibrary=function(e){var t=i;return"https:"!=e.protocol&&(t=s),t},t.OAuth2.prototype._request=function(e,t,r,i,s,a){var l=o.parse(t,!0);"https:"!=l.protocol||l.port||(l.port=443);var u=this._chooseHttpLibrary(l),c={};for(var d in this._customHeaders)c[d]=this._customHeaders[d];if(r)for(var d in r)c[d]=r[d];c.Host=l.host,c["User-Agent"]||(c["User-Agent"]="Node-oauth"),i?Buffer.isBuffer(i)?c["Content-Length"]=i.length:c["Content-Length"]=Buffer.byteLength(i):c["Content-length"]=0,!s||"Authorization"in c||(l.query||(l.query={}),l.query[this._accessTokenName]=s);var h=n.stringify(l.query);h&&(h="?"+h);var f={host:l.hostname,port:l.port,path:l.pathname+h,method:e,headers:c};this._executeRequest(u,f,i,a)},t.OAuth2.prototype._executeRequest=function(e,t,r,n){var i=a.isAnEarlyCloseHost(t.host),s=!1;function o(e,t){s||(s=!0,e.statusCode>=200&&e.statusCode<=299||301==e.statusCode||302==e.statusCode?n(null,t,e):n({statusCode:e.statusCode,data:t}))}var l="";this._agent&&(t.agent=this._agent);var u=e.request(t);u.on("response",function(e){e.on("data",function(e){l+=e}),e.on("close",function(t){i&&o(e,l)}),e.addListener("end",function(){o(e,l)})}),u.on("error",function(e){s=!0,n(e)}),("POST"==t.method||"PUT"==t.method)&&r&&u.write(r),u.end()},t.OAuth2.prototype.getAuthorizeUrl=function(e){var e=e||{};return e.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+n.stringify(e)},t.OAuth2.prototype.getOAuthAccessToken=function(e,t,r){var t=t||{};t.client_id=this._clientId,t.client_secret=this._clientSecret;var i="refresh_token"===t.grant_type?"refresh_token":"code";t[i]=e;var s=n.stringify(t),o={"Content-Type":"application/x-www-form-urlencoded"};this._request("POST",this._getAccessTokenUrl(),o,s,null,function(e,t,i){if(e)r(e);else{try{s=JSON.parse(t)}catch(e){s=n.parse(t)}var s,o=s.access_token,a=s.refresh_token;delete s.refresh_token,r(null,o,a,s)}})},t.OAuth2.prototype.getProtectedResource=function(e,t,r){this._request("GET",e,{},"",t,r)},t.OAuth2.prototype.get=function(e,t,r){if(this._useAuthorizationHeaderForGET){var n={Authorization:this.buildAuthHeader(t)};t=null}else n={};this._request("GET",e,n,"",t,r)}},24299:(e,t)=>{var r=1,n="=";function i(e,t){return o(s(a(e),a(t)))}function s(e,t){var r=l(e);r.length>16&&(r=c(r,8*e.length));for(var n=Array(16),i=Array(16),s=0;s<16;s++)n[s]=909522486^r[s],i[s]=1549556828^r[s];var o=c(n.concat(l(t)),512+8*t.length);return u(c(i.concat(o),672))}function o(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=e.length,s=0;s<i;s+=3)for(var o=e.charCodeAt(s)<<16|(s+1<i?e.charCodeAt(s+1)<<8:0)|(s+2<i?e.charCodeAt(s+2):0),a=0;a<4;a++)8*s+6*a>8*e.length?r+=n:r+=t.charAt(o>>>6*(3-a)&63);return r}function a(e){for(var t,r,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),r=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function l(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}function u(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>24-r%32&255);return t}function c(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var r=Array(80),n=1732584193,i=-271733879,s=-1732584194,o=271733878,a=-1009589776,l=0;l<e.length;l+=16){for(var u=n,c=i,m=s,g=o,y=a,v=0;v<80;v++){v<16?r[v]=e[l+v]:r[v]=p(r[v-3]^r[v-8]^r[v-14]^r[v-16],1);var b=f(f(p(n,5),d(v,i,s,o)),f(f(a,r[v]),h(v)));a=o,o=s,s=p(i,30),i=n,n=b}n=f(n,u),i=f(i,c),s=f(s,m),o=f(o,g),a=f(a,y)}return[n,i,s,o,a]}function d(e,t,r,n){return e<20?t&r|~t&n:e<40?t^r^n:e<60?t&r|t&n|r&n:t^r^n}function h(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function f(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function p(e,t){return e<<t|e>>>32-t}t.HMACSHA1=function(e,t){return i(e,t)}},46953:(e,t,r)=>{let n;let{strict:i}=r(39491),{createHash:s}=r(6113),{format:o}=r(73837),a=r(88341);if(Buffer.isEncoding("base64url"))n=e=>e.toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");n=t=>e(t.toString("base64"))}function l(e,t){switch(e){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return s("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return s("sha384");case"HS512":case"RS512":case"PS512":case"ES512":return s("sha512");case"EdDSA":switch(t){case"Ed25519":return s("sha512");case"Ed448":if(!a)throw TypeError("Ed448 *_hash calculation is not supported in your Node.js runtime version");return s("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}}function u(e,t,r){let i=l(t,r).update(e).digest();return n(i.slice(0,i.length/2))}function c(e,t,r,n,s){let a,l;if("string"!=typeof e.claim||!e.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof e.source||!e.source)throw TypeError("names.source must be a non-empty string");i("string"==typeof t&&t,`${e.claim} must be a non-empty string`),i("string"==typeof r&&r,`${e.source} must be a non-empty string`);try{a=u(r,n,s)}catch(t){l=o("%s could not be validated (%s)",e.claim,t.message)}l=l||o("%s mismatch, expected %s, got: %s",e.claim,a,t),i.equal(a,t,l)}e.exports={validate:c,generate:u}},88341:(e,t,r)=>{let n=r(6113),[i,s]=process.version.substr(1).split(".").map(e=>parseInt(e,10)),o=(i>12||12===i&&s>=8)&&n.getHashes().includes("shake256");e.exports=o},28347:(e,t,r)=>{"use strict";let{inspect:n}=r(73837),i=r(13685),s=r(6113),{strict:o}=r(39491),a=r(63477),l=r(57310),u=r(80816),c=r(46953),d=r(56622),h=r(83764),f=r(7785),p=r(35716),m=r(61741),{assertSigningAlgValuesSupport:g,assertIssuerConfiguration:y}=r(40121),v=r(23009),b=r(2889),_=r(56261),w=r(11911),{OPError:S,RPError:E}=r(65180),T=r(18162),{random:O}=r(96638),C=r(87975),{CLOCK_TOLERANCE:k}=r(3339),{keystores:x}=r(6344),A=r(79266),R=r(72693),{authenticatedPost:I,resolveResponseType:P,resolveRedirectUri:D}=r(83709),{queryKeyStore:N}=r(86651),M=r(4269),[j,L]=process.version.slice(1).split(".").map(e=>parseInt(e,10)),F=j>=17||16===j&&L>=9,U=Symbol(),B=Symbol(),V=Symbol();function H(e){return v(e,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function z(e,t="Bearer"){return`${t} ${e}`}function W(e,t,r){if(void 0===e[r])throw new E({message:`missing required JWT property ${r}`,jwt:t})}function q(e){let t={client_id:this.client_id,scope:"openid",response_type:P.call(this),redirect_uri:D.call(this),...e};return Object.entries(t).forEach(([e,r])=>{null==r?delete t[e]:"claims"===e&&"object"==typeof r?t[e]=JSON.stringify(r):"resource"===e&&Array.isArray(r)?t[e]=r:"string"!=typeof r&&(t[e]=String(r))}),t}function $(e){if(!b(e)||!Array.isArray(e.keys)||e.keys.some(e=>!b(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return A.fromJWKS(e,{onlyPrivate:!0})}function K(e,t){try{let r=e.issuer.token_endpoint_auth_methods_supported;!r.includes(t.token_endpoint_auth_method)&&r.includes("client_secret_post")&&(t.token_endpoint_auth_method="client_secret_post")}catch(e){}}function J(e,t,r){if(t.token_endpoint_auth_method||K(e,r),t.redirect_uri){if(t.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");r.redirect_uris=[t.redirect_uri],delete r.redirect_uri}if(t.response_type){if(t.response_types)throw TypeError("provide a response_type or response_types, not both");r.response_types=[t.response_type],delete r.response_type}}function G(e,t,r){if(!t[`${e}_endpoint`])return;let n=r.token_endpoint_auth_method,i=r.token_endpoint_auth_signing_alg,s=`${e}_endpoint_auth_method`,o=`${e}_endpoint_auth_signing_alg`;void 0===r[s]&&void 0===r[o]&&(void 0!==n&&(r[s]=n),void 0!==i&&(r[o]=i))}class Q{#e;#t;#r;#n;constructor(e,t,r={},n,i){if(this.#e=new Map,this.#t=e,this.#r=t,"string"!=typeof r.client_id||!r.client_id)throw TypeError("client_id is required");let s={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...r};if(this.fapi())switch(s.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!n)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(J(this,r,s),g("token",this.issuer,s),["introspection","revocation"].forEach(e=>{G(e,this.issuer,s),g(e,this.issuer,s)}),Object.entries(s).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),void 0!==n){let e=$.call(this,n);x.set(this,e)}null!=i&&i.additionalAuthorizedParties&&(this.#n=R(i.additionalAuthorizedParties)),this[k]=0}authorizationUrl(e={}){if(!b(e))throw TypeError("params must be a plain object");y(this.issuer,"authorization_endpoint");let t=l.parse(this.issuer.authorization_endpoint,!0);return t.search=null,t.query={...t.query,...q.call(this,e)},l.format(t)}authorizationPost(e={}){if(!b(e))throw TypeError("params must be a plain object");let t=q.call(this,e),r=Object.keys(t).map(e=>`<input type="hidden" name="${e}" value="${t[e]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${r}
</form>
</body>
</html>`}endSessionUrl(e={}){let t;y(this.issuer,"end_session_endpoint");let{0:r,length:n}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:i=1===n?r:void 0}=e;if({id_token_hint:t,...e}=e,t instanceof w){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let s=l.parse(this.issuer.end_session_endpoint,!0);return s.search=null,p(s.query,e,{post_logout_redirect_uri:i,client_id:this.client_id},{id_token_hint:t}),Object.entries(s.query).forEach(([e,t])=>{null==t&&delete s.query[e]}),l.format(s)}callbackParams(e){let t=e instanceof i.IncomingMessage||e&&e.method&&e.url;if("string"!=typeof e&&!t)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!t)return H(l.parse(e,!0).query);switch(e.method){case"GET":return H(l.parse(e.url,!0).query);case"POST":if(void 0===e.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof e.body){case"object":case"string":if(Buffer.isBuffer(e.body))return H(a.parse(e.body.toString("utf-8")));if("string"==typeof e.body)return H(a.parse(e.body));return H(e.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(e,t,r={},{exchangeBody:n,clientAssertionPayload:i,DPoP:s}={}){let o=H(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(o.response);o=await this.validateJARM(e)}}else throw new E({message:"expected a JARM response",checks:r,params:o});if(this.default_max_age&&!r.max_age&&(r.max_age=this.default_max_age),o.state&&!r.state)throw TypeError("checks.state argument is missing");if(!o.state&&r.state)throw new E({message:"state missing from the response",checks:r,params:o});if(r.state!==o.state)throw new E({printf:["state mismatch, expected %s, got: %s",r.state,o.state],checks:r,params:o});if("iss"in o){if(y(this.issuer,"issuer"),o.iss!==this.issuer.issuer)throw new E({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,o.iss],params:o})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in o)&&!("response"in t))throw new E({message:"iss missing from the response",params:o});if(o.error)throw new S(o);let a={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(r.response_type){for(let e of r.response_type.split(" "))if("none"===e){if(o.code||o.id_token||o.access_token)throw new E({message:'unexpected params encountered for "none" response',checks:r,params:o})}else for(let t of a[e])if(!o[t])throw new E({message:`${t} missing from response`,checks:r,params:o})}if(o.id_token){let e=new w(o);if(await this.decryptIdToken(e),await this.validateIdToken(e,r.nonce,"authorization",r.max_age,r.state),!o.code)return e}if(o.code){let t=await this.grant({...n,grant_type:"authorization_code",code:o.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:i,DPoP:s});return await this.decryptIdToken(t),await this.validateIdToken(t,r.nonce,"token",r.max_age),o.session_state&&(t.session_state=o.session_state),t}return new w(o)}async oauthCallback(e,t,r={},{exchangeBody:n,clientAssertionPayload:i,DPoP:s}={}){let o=H(t);if(!r.jarm||"response"in t){if("response"in t){let e=await this.decryptJARM(o.response);o=await this.validateJARM(e)}}else throw new E({message:"expected a JARM response",checks:r,params:o});if(o.state&&!r.state)throw TypeError("checks.state argument is missing");if(!o.state&&r.state)throw new E({message:"state missing from the response",checks:r,params:o});if(r.state!==o.state)throw new E({printf:["state mismatch, expected %s, got: %s",r.state,o.state],checks:r,params:o});if("iss"in o){if(y(this.issuer,"issuer"),o.iss!==this.issuer.issuer)throw new E({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,o.iss],params:o})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in o)&&!("response"in t))throw new E({message:"iss missing from the response",params:o});if(o.error)throw new S(o);if("string"==typeof o.id_token&&o.id_token.length)throw new E({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:o});delete o.id_token;let a={code:["code"],token:["access_token","token_type"]};if(r.response_type)for(let e of r.response_type.split(" ")){if("none"===e&&(o.code||o.id_token||o.access_token))throw new E({message:'unexpected params encountered for "none" response',checks:r,params:o});if(a[e]){for(let t of a[e])if(!o[t])throw new E({message:`${t} missing from response`,checks:r,params:o})}}if(o.code){let t=await this.grant({...n,grant_type:"authorization_code",code:o.code,redirect_uri:e,code_verifier:r.code_verifier},{clientAssertionPayload:i,DPoP:s});if("string"==typeof t.id_token&&t.id_token.length)throw new E({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:o});return delete t.id_token,t}return new w(o)}async decryptIdToken(e){if(!this.id_token_encrypted_response_alg)return e;let t=e;if(t instanceof w){if(!t.id_token)throw TypeError("id_token not present in TokenSet");t=t.id_token}let r=this.id_token_encrypted_response_alg,n=this.id_token_encrypted_response_enc,i=await this.decryptJWE(t,r,n);return e instanceof w?(e.id_token=i,e):i}async validateJWTUserinfo(e){let t=this.userinfo_signed_response_alg;return this.validateJWT(e,t,[])}async decryptJARM(e){if(!this.authorization_encrypted_response_alg)return e;let t=this.authorization_encrypted_response_alg,r=this.authorization_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWTUserinfo(e){if(!this.userinfo_encrypted_response_alg)return e;let t=this.userinfo_encrypted_response_alg,r=this.userinfo_encrypted_response_enc;return this.decryptJWE(e,t,r)}async decryptJWE(e,t,r="A128CBC-HS256"){let n;let i=JSON.parse(f.decode(e.split(".")[0]));if(i.alg!==t)throw new E({printf:["unexpected JWE alg received, expected %s, got: %s",t,i.alg],jwt:e});if(i.enc!==r)throw new E({printf:["unexpected JWE enc received, expected %s, got: %s",r,i.enc],jwt:e});let s=e=>new TextDecoder().decode(e.plaintext);if(t.match(/^(?:RSA|ECDH)/)){for(let{keyObject:t}of(await x.get(this)).all({...u.decodeProtectedHeader(e),use:"enc"}))if(n=await u.compactDecrypt(e,t).then(s,()=>{}))break}else n=await u.compactDecrypt(e,this.secretForAlg("dir"===t?r:t)).then(s,()=>{});if(!n)throw new E({message:"failed to decrypt JWE",jwt:e});return n}async validateIdToken(e,t,r,n,i){let s=e,o=this.id_token_signed_response_alg;if(s instanceof w){if(!s.id_token)throw TypeError("id_token not present in TokenSet");s=s.id_token}s=String(s);let a=T(),{protected:l,payload:u,key:d}=await this.validateJWT(s,o);if("number"==typeof n||n!==V&&this.require_auth_time){if(!u.auth_time)throw new E({message:"missing required JWT property auth_time",jwt:s});if("number"!=typeof u.auth_time)throw new E({message:"JWT auth_time claim must be a JSON numeric value",jwt:s})}if("number"==typeof n&&u.auth_time+n<a-this[k])throw new E({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",n,u.auth_time,a-this[k]],now:a,tolerance:this[k],auth_time:u.auth_time,jwt:s});if(t!==B&&(u.nonce||void 0!==t)&&u.nonce!==t)throw new E({printf:["nonce mismatch, expected %s, got: %s",t,u.nonce],jwt:s});if("authorization"===r){if(!u.at_hash&&e.access_token)throw new E({message:"missing required property at_hash",jwt:s});if(!u.c_hash&&e.code)throw new E({message:"missing required property c_hash",jwt:s});if(this.fapi()&&!u.s_hash&&(e.state||i))throw new E({message:"missing required property s_hash",jwt:s});if(u.s_hash){if(!i)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{c.validate({claim:"s_hash",source:"state"},u.s_hash,i,l.alg,d.jwk&&d.jwk.crv)}catch(e){throw new E({message:e.message,jwt:s})}}}if(this.fapi()&&u.iat<a-3600)throw new E({printf:["JWT issued too far in the past, now %i, iat %i",a,u.iat],now:a,tolerance:this[k],iat:u.iat,jwt:s});if(e.access_token&&void 0!==u.at_hash)try{c.validate({claim:"at_hash",source:"access_token"},u.at_hash,e.access_token,l.alg,d.jwk&&d.jwk.crv)}catch(e){throw new E({message:e.message,jwt:s})}if(e.code&&void 0!==u.c_hash)try{c.validate({claim:"c_hash",source:"code"},u.c_hash,e.code,l.alg,d.jwk&&d.jwk.crv)}catch(e){throw new E({message:e.message,jwt:s})}return e}async validateJWT(e,t,r=["iss","sub","aud","exp","iat"]){let n,i,s;let a="https://self-issued.me"===this.issuer.issuer,l=T();try{({header:n,payload:i}=h(e,{complete:!0}))}catch(t){throw new E({printf:["failed to decode JWT (%s: %s)",t.name,t.message],jwt:e})}if(n.alg!==t)throw new E({printf:["unexpected JWT alg received, expected %s, got: %s",t,n.alg],jwt:e});if(a&&(r=[...r,"sub_jwk"]),r.forEach(W.bind(void 0,i,e)),void 0!==i.iss){let t=this.issuer.issuer;if(this.#r&&(t=this.issuer.issuer.replace("{tenantid}",i.tid)),i.iss!==t)throw new E({printf:["unexpected iss value, expected %s, got: %s",t,i.iss],jwt:e})}if(void 0!==i.iat&&"number"!=typeof i.iat)throw new E({message:"JWT iat claim must be a JSON numeric value",jwt:e});if(void 0!==i.nbf){if("number"!=typeof i.nbf)throw new E({message:"JWT nbf claim must be a JSON numeric value",jwt:e});if(i.nbf>l+this[k])throw new E({printf:["JWT not active yet, now %i, nbf %i",l+this[k],i.nbf],now:l,tolerance:this[k],nbf:i.nbf,jwt:e})}if(void 0!==i.exp){if("number"!=typeof i.exp)throw new E({message:"JWT exp claim must be a JSON numeric value",jwt:e});if(l-this[k]>=i.exp)throw new E({printf:["JWT expired, now %i, exp %i",l-this[k],i.exp],now:l,tolerance:this[k],exp:i.exp,jwt:e})}if(void 0!==i.aud){if(Array.isArray(i.aud)){if(i.aud.length>1&&!i.azp)throw new E({message:"missing required JWT property azp",jwt:e});if(!i.aud.includes(this.client_id))throw new E({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,i.aud],jwt:e})}else if(i.aud!==this.client_id)throw new E({printf:["aud mismatch, expected %s, got: %s",this.client_id,i.aud],jwt:e})}if(void 0!==i.azp){let t=this.#n;if(!(t="string"==typeof t?[this.client_id,t]:Array.isArray(t)?[this.client_id,...t]:[this.client_id]).includes(i.azp))throw new E({printf:["azp mismatch, got: %s",i.azp],jwt:e})}if(a){try{o(b(i.sub_jwk));let e=await u.importJWK(i.sub_jwk,n.alg);o.equal(e.type,"public"),s=[{keyObject:e}]}catch(t){throw new E({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:e})}if(await u.calculateJwkThumbprint(i.sub_jwk)!==i.sub)throw new E({message:"failed to match the subject with sub_jwk",jwt:e})}else n.alg.startsWith("HS")?s=[this.secretForAlg(n.alg)]:"none"!==n.alg&&(s=await N.call(this.issuer,{...n,use:"sig"}));if(!s&&"none"===n.alg)return{protected:n,payload:i};for(let t of s){let r=await u.compactVerify(e,t instanceof Uint8Array?t:t.keyObject).catch(()=>{});if(r)return{payload:i,protected:r.protectedHeader,key:t}}throw new E({message:"failed to validate JWT signature",jwt:e})}async refresh(e,{exchangeBody:t,clientAssertionPayload:r,DPoP:n}={}){let i=e;if(i instanceof w){if(!i.refresh_token)throw TypeError("refresh_token not present in TokenSet");i=i.refresh_token}let s=await this.grant({...t,grant_type:"refresh_token",refresh_token:String(i)},{clientAssertionPayload:r,DPoP:n});if(s.id_token&&(await this.decryptIdToken(s),await this.validateIdToken(s,B,"token",V),e instanceof w&&e.id_token)){let t=e.claims().sub,r=s.claims().sub;if(r!==t)throw new E({printf:["sub mismatch, expected %s, got: %s",t,r],jwt:s.id_token})}return s}async requestResource(e,t,{method:r,headers:n,body:i,DPoP:s,tokenType:o=s?"DPoP":t instanceof w?t.token_type:"Bearer"}={},a){if(t instanceof w){if(!t.access_token)throw TypeError("access_token not present in TokenSet");t=t.access_token}if(t){if("string"!=typeof t)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let l={headers:{Authorization:z(t,o),...n},body:i},u=!!this.tls_client_certificate_bound_access_tokens,c=await C.call(this,{...l,responseType:"buffer",method:r,url:e},{accessToken:t,mTLS:u,DPoP:s}),d=c.headers["www-authenticate"];return a!==U&&d&&d.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===m(d).error?this.requestResource(e,t,{method:r,headers:n,body:i,DPoP:s,tokenType:o}):c}async userinfo(e,{method:t="GET",via:r="header",tokenType:n,params:i,DPoP:s}={}){let a;y(this.issuer,"userinfo_endpoint");let u={tokenType:n,method:String(t).toUpperCase(),DPoP:s};if("GET"!==u.method&&"POST"!==u.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===r&&"POST"!==u.method)throw TypeError("can only send body on POST");let c=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);c?u.headers={Accept:"application/jwt"}:u.headers={Accept:"application/json"},this.tls_client_certificate_bound_access_tokens&&this.issuer.mtls_endpoint_aliases&&(a=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),a=new l.URL(a||this.issuer.userinfo_endpoint),"body"===r&&(u.headers.Authorization=void 0,u.headers["Content-Type"]="application/x-www-form-urlencoded",u.body=new l.URLSearchParams,u.body.append("access_token",e instanceof w?e.access_token:e)),i&&("GET"===u.method?Object.entries(i).forEach(([e,t])=>{a.searchParams.append(e,t)}):u.body?Object.entries(i).forEach(([e,t])=>{u.body.append(e,t)}):(u.body=new l.URLSearchParams,u.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(i).forEach(([e,t])=>{u.body.append(e,t)}))),u.body&&(u.body=u.body.toString());let d=await this.requestResource(a,e,u),h=_(d,{bearer:!0});if(c){if(!/^application\/jwt/.test(d.headers["content-type"]))throw new E({message:"expected application/jwt response from the userinfo_endpoint",response:d});let e=d.body.toString(),t=await this.decryptJWTUserinfo(e);if(this.userinfo_signed_response_alg)({payload:h}=await this.validateJWTUserinfo(t));else try{h=JSON.parse(t),o(b(h))}catch(e){throw new E({message:"failed to parse userinfo JWE payload as JSON",jwt:t})}}else try{h=JSON.parse(d.body)}catch(e){throw Object.defineProperty(e,"response",{value:d}),e}if(e instanceof w&&e.id_token){let t=e.claims().sub;if(h.sub!==t)throw new E({printf:["userinfo sub mismatch, expected %s, got: %s",t,h.sub],body:h,jwt:e.id_token})}return h}encryptionSecret(e){let t=e<=256?"sha256":e<=384?"sha384":e<=512&&"sha512";if(!t)throw Error("unsupported symmetric encryption key derivation");return s.createHash(t).update(this.client_secret).digest().slice(0,e/8)}secretForAlg(e){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(e)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(e)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(e,{clientAssertionPayload:t,DPoP:r}={},n){let i;y(this.issuer,"token_endpoint");let s=await I.call(this,"token",{form:e,responseType:"json"},{clientAssertionPayload:t,DPoP:r});try{i=_(s)}catch(i){if(n!==U&&i instanceof S&&"use_dpop_nonce"===i.error)return this.grant(e,{clientAssertionPayload:t,DPoP:r},U);throw i}return new w(i)}async deviceAuthorization(e={},{exchangeBody:t,clientAssertionPayload:r,DPoP:n}={}){y(this.issuer,"device_authorization_endpoint"),y(this.issuer,"token_endpoint");let i=q.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...e}),s=_(await I.call(this,"device_authorization",{responseType:"json",form:i},{clientAssertionPayload:r,endpointAuthMethod:"token"}));return new M({client:this,exchangeBody:t,clientAssertionPayload:r,response:s,maxAge:e.max_age,DPoP:n})}async revoke(e,t,{revokeBody:r,clientAssertionPayload:n}={}){if(y(this.issuer,"revocation_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let i={...r,token:e};t&&(i.token_type_hint=t),_(await I.call(this,"revocation",{form:i},{clientAssertionPayload:n}),{body:!1})}async introspect(e,t,{introspectBody:r,clientAssertionPayload:n}={}){if(y(this.issuer,"introspection_endpoint"),void 0!==t&&"string"!=typeof t)throw TypeError("hint must be a string");let i={...r,token:e};return t&&(i.token_type_hint=t),_(await I.call(this,"introspection",{form:i,responseType:"json"},{clientAssertionPayload:n}))}static async register(e,t={}){let{initialAccessToken:r,jwks:n,...i}=t;if(y(this.issuer,"registration_endpoint"),void 0!==n&&!(e.jwks||e.jwks_uri)){let t=await $.call(this,n);e.jwks=t.toJWKS()}return new this(_(await C.call(this,{headers:{Accept:"application/json",...r?{Authorization:z(r)}:void 0},responseType:"json",json:e,url:this.issuer.registration_endpoint,method:"POST"}),{statusCode:201,bearer:!0}),n,i)}get metadata(){return R(Object.fromEntries(this.#e.entries()))}static async fromUri(e,t,r,n){return new this(_(await C.call(this,{method:"GET",url:e,responseType:"json",headers:{Authorization:z(t),Accept:"application/json"}}),{bearer:!0}),r,n)}async requestObject(e={},{sign:t=this.request_object_signing_alg||"none",encrypt:{alg:r=this.request_object_encryption_alg,enc:n=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let i,s;if(!b(e))throw TypeError("requestObject must be a plain object");let o=T(),a={alg:t,typ:"oauth-authz-req+jwt"},l=JSON.stringify(p({},e,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:O(),iat:o,exp:o+300,...this.fapi()?{nbf:o}:void 0}));if("none"===t)i=[f.encode(JSON.stringify(a)),f.encode(l),""].join(".");else{let e=t.startsWith("HS");if(e)s=this.secretForAlg(t);else{let e=await x.get(this);if(!e)throw TypeError(`no keystore present for client, cannot sign using alg ${t}`);if(!(s=e.get({alg:t,use:"sig"})))throw TypeError(`no key to sign with found for alg ${t}`)}i=await new u.CompactSign(new TextEncoder().encode(l)).setProtectedHeader({...a,kid:e?void 0:s.jwk.kid}).sign(e?s:s.keyObject)}if(!r)return i;let c={alg:r,enc:n,cty:"oauth-authz-req+jwt"};return c.alg.match(/^(RSA|ECDH)/)?[s]=await N.call(this.issuer,{alg:c.alg,use:"enc"},{allowMulti:!0}):s=this.secretForAlg("dir"===c.alg?c.enc:c.alg),new u.CompactEncrypt(new TextEncoder().encode(i)).setProtectedHeader({...c,kid:s instanceof Uint8Array?void 0:s.jwk.kid}).encrypt(s instanceof Uint8Array?s:s.keyObject)}async pushedAuthorizationRequest(e={},{clientAssertionPayload:t}={}){y(this.issuer,"pushed_authorization_request_endpoint");let r={..."request"in e?e:q.call(this,e),client_id:this.client_id},n=await I.call(this,"pushed_authorization_request",{responseType:"json",form:r},{clientAssertionPayload:t,endpointAuthMethod:"token"}),i=_(n,{statusCode:201});if(!("expires_in"in i))throw new E({message:"expected expires_in in Pushed Authorization Successful Response",response:n});if("number"!=typeof i.expires_in)throw new E({message:"invalid expires_in value in Pushed Authorization Successful Response",response:n});if(!("request_uri"in i))throw new E({message:"expected request_uri in Pushed Authorization Successful Response",response:n});if("string"!=typeof i.request_uri)throw new E({message:"invalid request_uri value in Pushed Authorization Successful Response",response:n});return i}get issuer(){return this.#t}[n.custom](){return`${this.constructor.name} ${n(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return"FAPI1Client"===this.constructor.name}async validateJARM(e){let t=this.authorization_signed_response_alg,{payload:r}=await this.validateJWT(e,t,["iss","exp","aud"]);return H(r)}}let Y=/^(?:RS|PS)(?:256|384|512)$/;function X(e,t,r){if("object"==typeof t&&"object"==typeof t.key&&t.key.alg)return t.key.alg;if(Array.isArray(r)){let t=r.filter(RegExp.prototype.test.bind(Y));return"rsa-pss"===e.asymmetricKeyType&&(t=t.filter(e=>e.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(e=>t.includes(e))}return"PS256"}let Z=Buffer.from([42,134,72,206,61,3,1,7]),ee=Buffer.from([43,129,4,0,34]),et=Buffer.from([43,129,4,0,35]),er=Buffer.from([43,129,4,0,10]);function en(e,t){switch("object"==typeof t&&"object"==typeof t.key&&t.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let r=e.export({format:"der",type:"pkcs8"}),n=r[1]<128?17:18,i=r[n],s=r.slice(n+1,n+1+i);if(s.equals(Z))return"ES256";if(s.equals(ee))return"ES384";if(s.equals(et))return"ES512";if(s.equals(er))return"ES256K";throw TypeError("unsupported DPoP private key curve")}let ei=new WeakMap;async function es(e,t){if("object"==typeof t&&"object"==typeof t.key&&t.key.crv)return v(t.key,"kty","crv","x","y","e","n");if(ei.has(t))return ei.get(t);let r=v(await u.exportJWK(e),"kty","crv","x","y","e","n");return d(t)&&ei.set(t,r),r}async function eo(e,t,r){let n,i;if(!b(e))throw TypeError("payload must be a plain object");if("private"!==(n=d(t)?t:s.createPrivateKey(t)).type)throw TypeError('"DPoP" option must be a private key');switch(n.asymmetricKeyType){case"ed25519":case"ed448":i="EdDSA";break;case"ec":i=en(n,t);break;case"rsa":case F&&"rsa-pss":i=X(n,t,this.issuer.dpop_signing_alg_values_supported);break;default:throw TypeError("unsupported DPoP private key asymmetric key type")}if(!i)throw TypeError("could not determine DPoP JWS Algorithm");return new u.SignJWT({ath:r?f.encode(s.createHash("sha256").update(r).digest()):void 0,...e}).setProtectedHeader({alg:i,typ:"dpop+jwt",jwk:await es(n,t)}).setIssuedAt().setJti(O()).sign(n)}Object.defineProperty(Q.prototype,"dpopProof",{enumerable:!0,configurable:!0,value(...e){return process.emitWarning("The DPoP APIs implements an IETF draft (https://www.ietf.org/archive/id/draft-ietf-oauth-dpop-04.html). Breaking draft implementations are included as minor versions of the openid-client library, therefore, the ~ semver operator should be used and close attention be payed to library changelog as well as the drafts themselves.","DraftWarning"),Object.defineProperty(Q.prototype,"dpopProof",{enumerable:!0,configurable:!0,value:eo}),this.dpopProof(...e)}}),e.exports=(e,t=!1)=>class extends Q{constructor(...r){super(e,t,...r)}static get issuer(){return e}},e.exports.BaseClient=Q},4269:(e,t,r)=>{let{inspect:n}=r(73837),{RPError:i,OPError:s}=r(65180),o=r(18162);class a{#i;#s;#o;#a;#l;#u;#c;#d;#h;constructor({client:e,exchangeBody:t,clientAssertionPayload:r,response:n,maxAge:s,DPoP:a}){if(["verification_uri","user_code","device_code"].forEach(e=>{if("string"!=typeof n[e]||!n[e])throw new i(`expected ${e} string to be returned by Device Authorization Response, got %j`,n[e])}),!Number.isSafeInteger(n.expires_in))throw new i("expected expires_in number to be returned by Device Authorization Response, got %j",n.expires_in);this.#u=o()+n.expires_in,this.#s=e,this.#a=a,this.#d=s,this.#l=t,this.#o=r,this.#h=n,this.#c=1e3*n.interval||5e3}abort(){this.#i=!0}async poll({signal:e}={}){let t;if(e&&e.aborted||this.#i)throw new i("polling aborted");if(this.expired())throw new i("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(e=>setTimeout(e,this.#c));try{t=await this.#s.grant({...this.#l,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#o,DPoP:this.#a})}catch(t){switch(t instanceof s&&t.error){case"slow_down":this.#c+=5e3;case"authorization_pending":return this.poll({signal:e});default:throw t}}return"id_token"in t&&(await this.#s.decryptIdToken(t),await this.#s.validateIdToken(t,void 0,"token",this.#d)),t}get device_code(){return this.#h.device_code}get user_code(){return this.#h.user_code}get verification_uri(){return this.#h.verification_uri}get verification_uri_complete(){return this.#h.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#u-o(),0])}expired(){return 0===this.expires_in}[n.custom](){return`${this.constructor.name} ${n(this.#h,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=a},65180:(e,t,r)=>{let{format:n}=r(73837);class i extends Error{constructor({error_description:e,error:t,error_uri:r,session_state:n,state:i,scope:s},o){super(e?`${t} (${e})`:t),Object.assign(this,{error:t},e&&{error_description:e},r&&{error_uri:r},i&&{state:i},s&&{scope:s},n&&{session_state:n}),o&&Object.defineProperty(this,"response",{value:o}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class s extends Error{constructor(...e){if("string"==typeof e[0])super(n(...e));else{let{message:t,printf:r,response:i,...s}=e[0];r?super(n(...r)):super(t),Object.assign(this,s),i&&Object.defineProperty(this,"response",{value:i})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}e.exports={OPError:i,RPError:s}},40121:e=>{function t(e,t,r){if(!t[`${e}_endpoint`])return;let n=`${e}_endpoint_auth_method`,i=`${e}_endpoint_auth_signing_alg`,s=`${e}_endpoint_auth_signing_alg_values_supported`;if(r[n]&&r[n].endsWith("_jwt")&&!r[i]&&!t[s])throw TypeError(`${s} must be configured on the issuer if ${i} is not defined on a client`)}function r(e,t){if(!e[t])throw TypeError(`${t} must be configured on the issuer`)}e.exports={assertSigningAlgValuesSupport:t,assertIssuerConfiguration:r}},7785:e=>{let t;if(Buffer.isEncoding("base64url"))t=(e,t="utf8")=>Buffer.from(e,t).toString("base64url");else{let e=e=>e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");t=(t,r="utf8")=>e(Buffer.from(t,r).toString("base64"))}let r=e=>Buffer.from(e,"base64");e.exports.decode=r,e.exports.encode=t},83709:(e,t,r)=>{let n=r(80816),{RPError:i}=r(65180),{assertIssuerConfiguration:s}=r(40121),{random:o}=r(96638),a=r(18162),l=r(87975),{keystores:u}=r(6344),c=r(24743),d=e=>encodeURIComponent(e).replace(/%20/g,"+");async function h(e,t){let r=this[`${e}_endpoint_auth_signing_alg`];if(r||s(this.issuer,`${e}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${e}_endpoint_auth_method`]){if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>/^HS(?:256|384|512)/.test(e))}if(!r)throw new i(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);return new n.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r}).sign(this.secretForAlg(r))}let o=await u.get(this);if(!o)throw TypeError("no client jwks provided for signing a client assertion with");if(!r){let t=this.issuer[`${e}_endpoint_auth_signing_alg_values_supported`];r=Array.isArray(t)&&t.find(e=>o.get({alg:e,use:"sig"}))}if(!r)throw new i(`failed to determine a JWS Algorithm to use for ${this[`${e}_endpoint_auth_method`]} Client Assertion`);let a=o.get({alg:r,use:"sig"});if(!a)throw new i(`no key found in client jwks to sign a client assertion with using alg ${r}`);return new n.CompactSign(Buffer.from(JSON.stringify(t))).setProtectedHeader({alg:r,kid:a.jwk&&a.jwk.kid}).sign(a.keyObject)}async function f(e,{clientAssertionPayload:t}={}){switch(this[`${e}_endpoint_auth_method`]){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if(!this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let r=a(),n=[...new Set([this.issuer.issuer,this.issuer.token_endpoint].filter(Boolean))],i=await h.call(this,e,{iat:r,exp:r+60,jti:o(),iss:this.client_id,sub:this.client_id,aud:n,...t});return{form:{client_id:this.client_id,client_assertion:i,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if(!this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let e=`${d(this.client_id)}:${d(this.client_secret)}`,t=Buffer.from(e).toString("base64");return{headers:{Authorization:`Basic ${t}`}}}default:throw TypeError(`missing, or unsupported, ${e}_endpoint_auth_method`)}}function p(){let{length:e,0:t}=this.response_types;if(1===e)return t}function m(){let{length:e,0:t}=this.redirect_uris||[];if(1===e)return t}async function g(e,t,{clientAssertionPayload:r,endpointAuthMethod:n=e,DPoP:i}={}){let s;let o=c(t,await f.call(this,n,{clientAssertionPayload:r})),a=this[`${n}_endpoint_auth_method`].includes("tls_client_auth")||"token"===e&&this.tls_client_certificate_bound_access_tokens;if(a&&this.issuer.mtls_endpoint_aliases&&(s=this.issuer.mtls_endpoint_aliases[`${e}_endpoint`]),s=s||this.issuer[`${e}_endpoint`],"form"in o)for(let[e,t]of Object.entries(o.form))void 0===t&&delete o.form[e];return l.call(this,{...o,method:"POST",url:s,headers:{..."revocation"!==e?{Accept:"application/json"}:void 0,...o.headers}},{mTLS:a,DPoP:i})}e.exports={resolveResponseType:p,resolveRedirectUri:m,authFor:f,authenticatedPost:g}},3339:e=>{let t=Symbol(),r=Symbol();e.exports={CLOCK_TOLERANCE:r,HTTP_OPTIONS:t}},83764:(e,t,r)=>{let n=r(7785);e.exports=e=>{if("string"!=typeof e||!e)throw TypeError("JWT must be a string");let{0:t,1:r,2:i,length:s}=e.split(".");if(5===s)throw TypeError("encrypted JWTs cannot be decoded");if(3!==s)throw Error("JWTs must have three components");try{return{header:JSON.parse(n.decode(t)),payload:JSON.parse(n.decode(r)),signature:i}}catch(e){throw Error("JWT is malformed")}}},72693:e=>{e.exports=globalThis.structuredClone||(e=>JSON.parse(JSON.stringify(e)))},35716:(e,t,r)=>{let n=r(2889);function i(e,t,...r){for(let s of r)if(n(s))for(let[r,o]of Object.entries(s))"__proto__"!==r&&"constructor"!==r&&(void 0===t[r]&&void 0!==o&&(t[r]=o),e&&n(t[r])&&n(o)&&i(!0,t[r],o));return t}e.exports=i.bind(void 0,!1),e.exports.deep=i.bind(void 0,!0)},96638:(e,t,r)=>{let{createHash:n,randomBytes:i}=r(6113),s=r(7785),o=(e=32)=>s.encode(i(e));e.exports={random:o,state:o,nonce:o,codeVerifier:o,codeChallenge:e=>s.encode(n("sha256").update(e).digest())}},56622:(e,t,r)=>{let n=r(73837),i=r(6113);e.exports=n.types.isKeyObject||(e=>e&&e instanceof i.KeyObject)},2889:e=>{e.exports=e=>!!e&&e.constructor===Object},86651:(e,t,r)=>{let n=r(87),i=r(22680),{RPError:s}=r(65180),{assertIssuerConfiguration:o}=r(40121),a=r(79266),{keystores:l}=r(6344),u=r(56261),c=r(87975),d=new WeakMap,h=new WeakMap,f=e=>(h.has(e)||h.set(e,new i({max:100})),h.get(e));async function p(e=!1){o(this,"jwks_uri");let t=l.get(this),r=f(this);return e||!t?(d.has(this)||(r.reset(),d.set(this,(async()=>{let e=u(await c.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{d.delete(this)})),t=a.fromJWKS(e,{onlyPublic:!0});return r.set("throttle",!0,6e4),l.set(this,t),t})())),d.get(this)):t}async function m({kid:e,kty:t,alg:r,use:i},{allowMulti:o=!1}={}){let a=f(this),l={kid:e,kty:t,alg:r,use:i},u=n(l,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0}),c=a.get(u)||a.get("throttle"),d=await p.call(this,!c),h=d.all(l);if(delete l.use,0===h.length)throw new s({printf:["no valid key found in issuer's jwks_uri for key parameters %j",l],jwks:d});if(!o&&h.length>1&&!e)throw new s({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",l],jwks:d});return a.set(u,!0),h}e.exports.queryKeyStore=m,e.exports.keystore=p},79266:(e,t,r)=>{let n=r(80816),i=r(72693),s=r(2889),o=r(56622),a=Symbol();function l(e){switch(e){case"RSA":return"RSA-OAEP";case"EC":case"OKP":return"ECDH-ES";case"oct":return"HS256";default:return}}let u=(e,{alg:t,use:r})=>{let n=0;return t&&e.alg&&n++,r&&e.use&&n++,n};function c(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}function d(e,t,r,n){if(t)return new Set([t]);switch(r){case"EC":{let t=[];return("enc"===e||void 0===e)&&(t=t.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),("sig"===e||void 0===e)&&(t=t.concat([`ES${n.slice(-3)}`.replace("21","12")])),new Set(t)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let t=[];return("enc"===e||void 0===e)&&(t=t.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512","RSA1_5"])),("sig"===e||void 0===e)&&(t=t.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(t)}default:throw Error("unreachable")}}e.exports=class{#f;constructor(e,t){if(e!==a)throw Error("invalid constructor call");this.#f=t}toJWKS(){return{keys:this.map(({jwk:{d:e,p:t,q:r,dp:n,dq:i,qi:s,...o}})=>o)}}all({alg:e,kid:t,use:r}={}){if(!r||!e)throw Error();let n=c(e),i={alg:e,use:r};return this.filter(i=>{let s=!0;return void 0!==n&&i.jwk.kty!==n&&(s=!1),s&&void 0!==t&&i.jwk.kid!==t&&(s=!1),s&&void 0!==r&&void 0!==i.jwk.use&&i.jwk.use!==r&&(s=!1),s&&i.jwk.alg&&i.jwk.alg!==e?s=!1:i.algorithms.has(e)||(s=!1),s}).sort((e,t)=>u(t,i)-u(e,i))}get(...e){return this.all(...e)[0]}static async fromJWKS(e,{onlyPublic:t=!1,onlyPrivate:r=!1}={}){if(!s(e)||!Array.isArray(e.keys)||e.keys.some(e=>!s(e)||!("kty"in e)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let u=[];for(let s of e.keys){let{kty:e,kid:a,crv:c}=s=i(s),{alg:h,use:f}=s;if("string"!=typeof e||!e||void 0!==f&&"sig"!==f&&"enc"!==f||"string"!=typeof h&&void 0!==h||"string"!=typeof a&&void 0!==a)continue;if("EC"===e&&"sig"===f)switch(c){case"P-256":h="ES256";break;case"P-384":h="ES384";break;case"P-521":h="ES512"}if("secp256k1"===c&&(f="sig",h="ES256K"),"OKP"===e)switch(c){case"Ed25519":case"Ed448":f="sig",h="EdDSA";break;case"X25519":case"X448":f="enc"}if(h&&!f)switch(!0){case h.startsWith("ECDH"):case h.startsWith("RSA"):f="enc"}let p=await n.importJWK(s,h||l(s.kty)).catch(()=>{});if(p){if(p instanceof Uint8Array||"secret"===p.type){if(r)throw Error("jwks must only contain private keys");continue}if(!o(p))throw Error("what?!");if(r&&"private"!==p.type)throw Error("jwks must only contain private keys");if(t&&"public"!==p.type||"RSA"===e&&p.asymmetricKeySize<2048)continue;u.push({jwk:{...s,alg:h,use:f},keyObject:p,get algorithms(){return Object.defineProperty(this,"algorithms",{value:d(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(a,u)}filter(...e){return this.#f.filter(...e)}find(...e){return this.#f.find(...e)}every(...e){return this.#f.every(...e)}some(...e){return this.#f.some(...e)}map(...e){return this.#f.map(...e)}forEach(...e){return this.#f.forEach(...e)}reduce(...e){return this.#f.reduce(...e)}sort(...e){return this.#f.sort(...e)}*[Symbol.iterator](){for(let e of this.#f)yield e}}},24743:(e,t,r)=>{let n=r(2889);function i(e,...t){for(let r of t)if(n(r))for(let[t,s]of Object.entries(r))"__proto__"!==t&&"constructor"!==t&&(n(e[t])&&n(s)?e[t]=i(e[t],s):void 0!==s&&(e[t]=s));return e}e.exports=i},23009:e=>{e.exports=function(e,...t){let r={};for(let n of t)void 0!==e[n]&&(r[n]=e[n]);return r}},56261:(e,t,r)=>{let{STATUS_CODES:n}=r(13685),{format:i}=r(73837),{OPError:s}=r(65180),o=r(61741),a=e=>{let t=o(e.headers["www-authenticate"]);if(t.error)throw new s(t,e)},l=e=>{let t=!1;try{let r;r="object"!=typeof e.body||Buffer.isBuffer(e.body)?JSON.parse(e.body):e.body,(t="string"==typeof r.error&&r.error.length)&&Object.defineProperty(e,"body",{value:r,configurable:!0})}catch(e){}return t};function u(e,{statusCode:t=200,body:r=!0,bearer:o=!1}={}){if(e.statusCode!==t){if(o&&a(e),l(e))throw new s(e.body,e);throw new s({error:i("expected %i %s, got: %i %s",t,n[t],e.statusCode,n[e.statusCode])},e)}if(r&&!e.body)throw new s({error:i("expected %i %s with body but no body was returned",t,n[t])},e);return e.body}e.exports=u},87975:(e,t,r)=>{let n;let i=r(39491),s=r(63477),o=r(13685),a=r(95687),{once:l}=r(82361),{URL:u}=r(57310),c=r(22680),d=r(87658),{RPError:h}=r(65180),f=r(23009),{deep:p}=r(35716),{HTTP_OPTIONS:m}=r(3339),g=/^[\x21\x23-\x5B\x5D-\x7E]+$/,y=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],v=(e,t)=>{n=p({},e.length?f(t,...e):t,n)};function b(e,t,r){r&&(e.removeHeader("content-type"),e.setHeader("content-type",r)),t&&(e.removeHeader("content-length"),e.setHeader("content-length",Buffer.byteLength(t)),e.write(t)),e.end()}v([],{headers:{"User-Agent":`${d.name}/${d.version} (${d.homepage})`},timeout:3500});let _=new c({max:100});e.exports=async function(e,{accessToken:t,mTLS:r=!1,DPoP:c}={}){let d,v,w,S,E,T,O;try{d=new u(e.url),delete e.url,i(/^(https?:)$/.test(d.protocol))}catch(e){throw TypeError("only valid absolute URLs can be requested")}let C=this[m],k=e,x=`${d.origin}${d.pathname}`;if(c&&"dpopProof"in this&&(k.headers=k.headers||{},k.headers.DPoP=await this.dpopProof({htu:`${d.origin}${d.pathname}`,htm:e.method,nonce:_.get(x)},c,t)),C&&(v=f(C.call(this,d,p({},k,n)),...y)),k=p({},v,k,n),r&&!k.pfx&&!(k.key&&k.cert))throw TypeError("mutual-TLS certificate and key not set");if(k.searchParams)for(let[e,t]of Object.entries(k.searchParams))d.searchParams.delete(e),d.searchParams.set(e,t);for(let[e,t]of({form:S,responseType:w,json:E,body:T,...k}=k,Object.entries(k.headers||{})))void 0===t&&delete k.headers[e];let A=("https:"===d.protocol?a.request:o.request)(d.href,k);return(async()=>{if(E?b(A,JSON.stringify(E),"application/json"):S?b(A,s.stringify(S),"application/x-www-form-urlencoded"):T?b(A,T):b(A),[O]=await Promise.race([l(A,"response"),l(A,"timeout")]),!O)throw A.destroy(),new h(`outgoing request timed out after ${k.timeout}ms`);let e=[];for await(let t of O)e.push(t);if(e.length)switch(w){case"json":Object.defineProperty(O,"body",{get(){let t=Buffer.concat(e);try{t=JSON.parse(t)}catch(e){throw Object.defineProperty(e,"response",{value:O}),e}finally{Object.defineProperty(O,"body",{value:t,configurable:!0})}return t},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(O,"body",{get(){let t=Buffer.concat(e);return Object.defineProperty(O,"body",{value:t,configurable:!0}),t},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return O})().catch(e=>{throw O&&Object.defineProperty(e,"response",{value:O}),e}).finally(()=>{let e=O&&O.headers["dpop-nonce"];e&&g.test(e)&&_.set(x,e)})},e.exports.setDefaults=v.bind(void 0,y)},18162:e=>{e.exports=()=>Math.floor(Date.now()/1e3)},6344:e=>{e.exports.keystores=new WeakMap},38285:e=>{let t=/^\d+$/;function r(e){if(e.includes("://"))return!0;let r=e.replace(/(\/|\?)/g,"#").split("#")[0];if(r.includes(":")){let e=r.indexOf(":"),n=r.slice(e+1);if(!t.test(n))return!0}return!1}function n(e){if(!e.includes("@"))return!1;let t=e.split("@"),r=t[t.length-1];return!(r.includes(":")||r.includes("/")||r.includes("?"))}function i(e){let t;if("string"!=typeof e)throw TypeError("input must be a string");return(t=r(e)?e:n(e)?`acct:${e}`:`https://${e}`).split("#")[0]}e.exports=i},61741:e=>{let t=/(\w+)=("[^"]*")/g;e.exports=e=>{let r={};try{for(;null!==t.exec(e);)RegExp.$1&&RegExp.$2&&(r[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(e){}return r}},44741:(e,t,r)=>{let n=r(61363),{OPError:i,RPError:s}=r(65180),o=r(49631),a=r(11911),{CLOCK_TOLERANCE:l,HTTP_OPTIONS:u}=r(3339),c=r(96638),{setDefaults:d}=r(87975);e.exports={Issuer:n,Strategy:o,TokenSet:a,errors:{OPError:i,RPError:s},custom:{setHttpOptionsDefaults:d,http_options:u,clock_tolerance:l},generators:c}},61363:(e,t,r)=>{let{inspect:n}=r(73837),i=r(57310),{RPError:s}=r(65180),o=r(28347),a=r(87883),l=r(56261),u=r(38285),c=r(87975),d=r(72693),{keystore:h}=r(86651),f=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],p=Symbol(),m={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};class g{#e;constructor(e={}){let t=e[p];delete e[p],["introspection","revocation"].forEach(t=>{e[`${t}_endpoint`]&&void 0===e[`${t}_endpoint_auth_methods_supported`]&&void 0===e[`${t}_endpoint_auth_signing_alg_values_supported`]&&(e.token_endpoint_auth_methods_supported&&(e[`${t}_endpoint_auth_methods_supported`]=e.token_endpoint_auth_methods_supported),e.token_endpoint_auth_signing_alg_values_supported&&(e[`${t}_endpoint_auth_signing_alg_values_supported`]=e.token_endpoint_auth_signing_alg_values_supported))}),this.#e=new Map,Object.entries(e).forEach(([e,t])=>{this.#e.set(e,t),this[e]||Object.defineProperty(this,e,{get(){return this.#e.get(e)},enumerable:!0})}),a.set(this.issuer,this);let r=o(this,t);Object.defineProperties(this,{Client:{value:r,enumerable:!0},FAPI1Client:{value:class extends r{},enumerable:!0}})}get metadata(){return d(Object.fromEntries(this.#e.entries()))}static async webfinger(e){let t=u(e),{host:r}=i.parse(t),n=`https://${r}/.well-known/webfinger`,o=l(await c.call(this,{method:"GET",url:n,responseType:"json",searchParams:{resource:t,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}})),d=Array.isArray(o.links)&&o.links.find(e=>"object"==typeof e&&"http://openid.net/specs/connect/1.0/issuer"===e.rel&&e.href);if(!d)throw new s({message:"no issuer found in webfinger response",body:o});if("string"!=typeof d.href||!d.href.startsWith("https://"))throw new s({printf:["invalid issuer location %s",d.href],body:o});let h=d.href;if(a.has(h))return a.get(h);let f=await this.discover(h);if(f.issuer!==h)throw a.del(f.issuer),new s("discovered issuer mismatch, expected %s, got: %s",h,f.issuer);return f}static async discover(e){let t;let r=i.parse(e);if(r.pathname.includes("/.well-known/")){let t=l(await c.call(this,{method:"GET",responseType:"json",url:e,headers:{Accept:"application/json"}}));return new g({...m,...t,[p]:!!f.find(t=>e.startsWith(t))})}t=r.pathname.endsWith("/")?`${r.pathname}.well-known/openid-configuration`:`${r.pathname}/.well-known/openid-configuration`;let n=i.format({...r,pathname:t}),s=l(await c.call(this,{method:"GET",responseType:"json",url:n,headers:{Accept:"application/json"}}));return new g({...m,...s,[p]:!!f.find(e=>n.startsWith(e))})}async reloadJwksUri(){await h.call(this,!0)}[n.custom](){return`${this.constructor.name} ${n(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}e.exports=g},87883:(e,t,r)=>{let n=r(22680);e.exports=new n({max:100})},49631:(e,t,r)=>{let n=r(57310),{format:i}=r(73837),s=r(72693),{RPError:o,OPError:a}=r(65180),{BaseClient:l}=r(28347),{random:u,codeChallenge:c}=r(96638),d=r(23009),{resolveResponseType:h,resolveRedirectUri:f}=r(83709);function p(e,t,r={}){e?this.error(e):t?this.success(t,r):this.fail(r)}function m({client:e,params:t={},passReqToCallback:r=!1,sessionKey:i,usePKCE:o=!0,extras:a={}}={},u){if(!(e instanceof l))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof u)throw TypeError("verify callback must be a function");if(!e.issuer||!e.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=e,this._issuer=e.issuer,this._verify=u,this._passReqToCallback=r,this._usePKCE=o,this._key=i||`oidc:${n.parse(this._issuer.issuer).hostname}`,this._params=s(t),delete this._params.state,delete this._params.nonce,this._extras=s(a),this._params.response_type||(this._params.response_type=h.call(e)),this._params.redirect_uri||(this._params.redirect_uri=f.call(e)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let e=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(e&&e.includes("S256"))this._usePKCE="S256";else if(e&&e.includes("plain"))this._usePKCE="plain";else if(e)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=n.parse(e.issuer.issuer).hostname}m.prototype.authenticate=function(e,t){(async()=>{let r=this._client;if(!e.session)throw TypeError("authentication requires session support");let n=r.callbackParams(e),s=this._key,{0:a,length:l}=Object.keys(n);if(0===l||1===l&&"iss"===a){let n={state:u(),...this._params,...t};if(!n.nonce&&n.response_type.includes("id_token")&&(n.nonce=u()),e.session[s]=d(n,"nonce","state","max_age","response_type"),this._usePKCE&&n.response_type.includes("code")){let t=u();switch(e.session[s].code_verifier=t,this._usePKCE){case"S256":n.code_challenge=c(t),n.code_challenge_method="S256";break;case"plain":n.code_challenge=t}}this.redirect(r.authorizationUrl(n));return}let h=e.session[s];if(0===Object.keys(h||{}).length)throw Error(i('did not find expected authorization request details in session, req.session["%s"] is %j',s,h));let{state:f,nonce:m,max_age:g,code_verifier:y,response_type:v}=h;try{delete e.session[s]}catch(e){}let b={redirect_uri:this._params.redirect_uri,...t},_={state:f,nonce:m,max_age:g,code_verifier:y,response_type:v},w=await r.callback(b.redirect_uri,n,_,this._extras),S=this._passReqToCallback,E=this._verify.length>(S?3:2)&&r.issuer.userinfo_endpoint,T=[w,p.bind(this)];if(E){if(!w.access_token)throw new o({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:w});let e=await r.userinfo(w);T.splice(1,0,e)}S&&T.unshift(e),this._verify(...T)})().catch(e=>{e instanceof a&&"server_error"!==e.error&&!e.error.startsWith("invalid")||e instanceof o?this.fail(e):this.error(e)})},e.exports=m},11911:(e,t,r)=>{let n=r(7785),i=r(18162);class s{constructor(e){Object.assign(this,e);let{constructor:t,...r}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,r)}set expires_in(e){this.expires_at=i()+Number(e)}get expires_in(){return Math.max.apply(null,[this.expires_at-i(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(n.decode(this.id_token.split(".")[1]))}}e.exports=s},87:(e,t,r)=>{"use strict";var n=r(6113);function i(e,t){return t=a(e,t),u(e,t)}(t=e.exports=i).sha1=function(e){return i(e)},t.keys=function(e){return i(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},t.MD5=function(e){return i(e,{algorithm:"md5",encoding:"hex"})},t.keysMD5=function(e){return i(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var s=n.getHashes?n.getHashes().slice():["sha1","md5"];s.push("passthrough");var o=["buffer","hex","binary","base64"];function a(e,t){t=t||{};var r={};if(r.algorithm=t.algorithm||"sha1",r.encoding=t.encoding||"hex",r.excludeValues=!!t.excludeValues,r.algorithm=r.algorithm.toLowerCase(),r.encoding=r.encoding.toLowerCase(),r.ignoreUnknown=!0===t.ignoreUnknown,r.respectType=!1!==t.respectType,r.respectFunctionNames=!1!==t.respectFunctionNames,r.respectFunctionProperties=!1!==t.respectFunctionProperties,r.unorderedArrays=!0===t.unorderedArrays,r.unorderedSets=!1!==t.unorderedSets,r.unorderedObjects=!1!==t.unorderedObjects,r.replacer=t.replacer||void 0,r.excludeKeys=t.excludeKeys||void 0,void 0===e)throw Error("Object argument required.");for(var n=0;n<s.length;++n)s[n].toLowerCase()===r.algorithm.toLowerCase()&&(r.algorithm=s[n]);if(-1===s.indexOf(r.algorithm))throw Error('Algorithm "'+r.algorithm+'"  not supported. supported values: '+s.join(", "));if(-1===o.indexOf(r.encoding)&&"passthrough"!==r.algorithm)throw Error('Encoding "'+r.encoding+'"  not supported. supported values: '+o.join(", "));return r}function l(e){return"function"==typeof e&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function u(e,t){if(void 0===(r="passthrough"!==t.algorithm?n.createHash(t.algorithm):new d).write&&(r.write=r.update,r.end=r.update),c(t,r).dispatch(e),r.update||r.end(""),r.digest)return r.digest("buffer"===t.encoding?void 0:t.encoding);var r,i=r.read();return"buffer"===t.encoding?i:i.toString(t.encoding)}function c(e,t,r){r=r||[];var n=function(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")};return{dispatch:function(t){e.replacer&&(t=e.replacer(t));var r=typeof t;return null===t&&(r="null"),this["_"+r](t)},_object:function(t){var i=/\[object (.*)\]/i,s=Object.prototype.toString.call(t),o=i.exec(s);o=(o=o?o[1]:"unknown:["+s+"]").toLowerCase();var a=null;if((a=r.indexOf(t))>=0)return this.dispatch("[CIRCULAR:"+a+"]");if(r.push(t),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(t))return n("buffer:"),n(t);if("object"!==o&&"function"!==o&&"asyncfunction"!==o){if(this["_"+o])this["_"+o](t);else if(e.ignoreUnknown)return n("["+o+"]");else throw Error('Unknown object type "'+o+'"')}else{var u=Object.keys(t);e.unorderedObjects&&(u=u.sort()),!1===e.respectType||l(t)||u.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(u=u.filter(function(t){return!e.excludeKeys(t)})),n("object:"+u.length+":");var c=this;return u.forEach(function(r){c.dispatch(r),n(":"),e.excludeValues||c.dispatch(t[r]),n(",")})}},_array:function(t,i){i=void 0!==i?i:!1!==e.unorderedArrays;var s=this;if(n("array:"+t.length+":"),!i||t.length<=1)return t.forEach(function(e){return s.dispatch(e)});var o=[],a=t.map(function(t){var n=new d,i=r.slice();return c(e,n,i).dispatch(t),o=o.concat(i.slice(r.length)),n.read().toString()});return r=r.concat(o),a.sort(),this._array(a,!1)},_date:function(e){return n("date:"+e.toJSON())},_symbol:function(e){return n("symbol:"+e.toString())},_error:function(e){return n("error:"+e.toString())},_boolean:function(e){return n("bool:"+e.toString())},_string:function(e){n("string:"+e.length+":"),n(e.toString())},_function:function(t){n("fn:"),l(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return n("number:"+e.toString())},_xml:function(e){return n("xml:"+e.toString())},_null:function(){return n("Null")},_undefined:function(){return n("Undefined")},_regexp:function(e){return n("regex:"+e.toString())},_uint8array:function(e){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return n("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return n("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return n("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return n("url:"+e.toString(),"utf8")},_map:function(t){n("map:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_set:function(t){n("set:");var r=Array.from(t);return this._array(r,!1!==e.unorderedSets)},_file:function(e){return n("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return n("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return n("domwindow")},_bigint:function(e){return n("bigint:"+e.toString())},_process:function(){return n("process")},_timer:function(){return n("timer")},_pipe:function(){return n("pipe")},_tcp:function(){return n("tcp")},_udp:function(){return n("udp")},_tty:function(){return n("tty")},_statwatcher:function(){return n("statwatcher")},_securecontext:function(){return n("securecontext")},_connection:function(){return n("connection")},_zlib:function(){return n("zlib")},_context:function(){return n("context")},_nodescript:function(){return n("nodescript")},_httpparser:function(){return n("httpparser")},_dataview:function(){return n("dataview")},_signal:function(){return n("signal")},_fsevent:function(){return n("fsevent")},_tlswrap:function(){return n("tlswrap")}}}function d(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}t.writeToStream=function(e,t,r){return void 0===r&&(r=t,t={}),c(t=a(e,t),r).dispatch(e)}},6053:function(e,t,r){!function(e,n){n(t,r(81706))}(0,function(e,t){var r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,n=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,i=/[\s\n\\/='"\0<>]/,s=/^xlink:?./,o=/["&<]/;function a(e){if(!1===o.test(e+=""))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var l=function(e,t){return String(e).replace(/(\n+)/g,"$1"+(t||"	"))},u=function(e,t,r){return String(e).length>(t||40)||!r&&-1!==String(e).indexOf("\n")||-1!==String(e).indexOf("<")},c={},d=/([A-Z])/g;function h(e){var t="";for(var n in e){var i=e[n];null!=i&&""!==i&&(t&&(t+=" "),t+="-"==n[0]?n:c[n]||(c[n]=n.replace(d,"-$1").toLowerCase()),t="number"==typeof i&&!1===r.test(n)?t+": "+i+"px;":t+": "+i+";")}return t||void 0}function f(e,t){return Array.isArray(t)?t.reduce(f,e):null!=t&&!1!==t&&e.push(t),e}function p(){this.__d=!0}function m(e,t){return{__v:e,context:t,props:e.props,setState:p,forceUpdate:p,__d:!0,__h:[]}}function g(e,t){var r=e.contextType,n=r&&t[r.__c];return null!=r?n?n.props.value:r.__:t}var y=[];function v(e,r,o,c,d,p){if(null==e||"boolean"==typeof e)return"";if("object"!=typeof e)return"function"==typeof e?"":a(e);var b=o.pretty,_=b&&"string"==typeof b?b:"	";if(Array.isArray(e)){for(var w="",S=0;S<e.length;S++)b&&S>0&&(w+="\n"),w+=v(e[S],r,o,c,d,p);return w}if(void 0!==e.constructor)return"";var E,T=e.type,O=e.props,C=!1;if("function"==typeof T){if(C=!0,!o.shallow||!c&&!1!==o.renderRootComponent){if(T===t.Fragment){var k=[];return f(k,e.props.children),v(k,r,o,!1!==o.shallowHighOrder,d,p)}var x,A=e.__c=m(e,r);t.options.__b&&t.options.__b(e);var R=t.options.__r;if(T.prototype&&"function"==typeof T.prototype.render){var I=g(T,r);(A=e.__c=new T(O,I)).__v=e,A._dirty=A.__d=!0,A.props=O,null==A.state&&(A.state={}),null==A._nextState&&null==A.__s&&(A._nextState=A.__s=A.state),A.context=I,T.getDerivedStateFromProps?A.state=Object.assign({},A.state,T.getDerivedStateFromProps(A.props,A.state)):A.componentWillMount&&(A.componentWillMount(),A.state=A._nextState!==A.state?A._nextState:A.__s!==A.state?A.__s:A.state),R&&R(e),x=A.render(A.props,A.state,A.context)}else for(var P=g(T,r),D=0;A.__d&&D++<25;)A.__d=!1,R&&R(e),x=T.call(e.__c,O,P);return A.getChildContext&&(r=Object.assign({},r,A.getChildContext())),t.options.diffed&&t.options.diffed(e),v(x,r,o,!1!==o.shallowHighOrder,d,p)}T=(E=T).displayName||E!==Function&&E.name||function(e){var t=(Function.prototype.toString.call(e).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!t){for(var r=-1,n=y.length;n--;)if(y[n]===e){r=n;break}r<0&&(r=y.push(e)-1),t="UnnamedComponent"+r}return t}(E)}var N,M,j="<"+T;if(O){var L=Object.keys(O);o&&!0===o.sortAttributes&&L.sort();for(var F=0;F<L.length;F++){var U=L[F],B=O[U];if("children"!==U){if(!i.test(U)&&(o&&o.allAttributes||"key"!==U&&"ref"!==U&&"__self"!==U&&"__source"!==U)){if("defaultValue"===U)U="value";else if("defaultChecked"===U)U="checked";else if("defaultSelected"===U)U="selected";else if("className"===U){if(void 0!==O.class)continue;U="class"}else d&&s.test(U)&&(U=U.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===U){if(O.for)continue;U="for"}"style"===U&&B&&"object"==typeof B&&(B=h(B)),"a"===U[0]&&"r"===U[1]&&"boolean"==typeof B&&(B=String(B));var V=o.attributeHook&&o.attributeHook(U,B,r,o,C);if(V||""===V)j+=V;else if("dangerouslySetInnerHTML"===U)M=B&&B.__html;else if("textarea"===T&&"value"===U)N=B;else if((B||0===B||""===B)&&"function"!=typeof B){if(!(!0!==B&&""!==B||(B=U,o&&o.xml))){j=j+" "+U;continue}if("value"===U){if("select"===T){p=B;continue}"option"===T&&p==B&&void 0===O.selected&&(j+=" selected")}j=j+" "+U+'="'+a(B)+'"'}}}else N=B}}if(b){var H=j.replace(/\n\s*/," ");H===j||~H.indexOf("\n")?b&&~j.indexOf("\n")&&(j+="\n"):j=H}if(j+=">",i.test(T))throw Error(T+" is not a valid HTML tag name in "+j);var z,W=n.test(T)||o.voidElements&&o.voidElements.test(T),q=[];if(M)b&&u(M)&&(M="\n"+_+l(M,_)),j+=M;else if(null!=N&&f(z=[],N).length){for(var $=b&&~j.indexOf("\n"),K=!1,J=0;J<z.length;J++){var G=z[J];if(null!=G&&!1!==G){var Q=v(G,r,o,!0,"svg"===T||"foreignObject"!==T&&d,p);if(b&&!$&&u(Q)&&($=!0),Q){if(b){var Y=Q.length>0&&"<"!=Q[0];K&&Y?q[q.length-1]+=Q:q.push(Q),K=Y}else q.push(Q)}}}if(b&&$)for(var X=q.length;X--;)q[X]="\n"+_+l(q[X],_)}if(q.length||M)j+=q.join("");else if(o&&o.xml)return j.substring(0,j.length-1)+" />";return!W||z||M?(b&&~j.indexOf("\n")&&(j+="\n"),j=j+"</"+T+">"):j=j.replace(/>$/," />"),j}var b={shallow:!0};S.render=S;var _=function(e,t){return S(e,t,b)},w=[];function S(e,r,n){r=r||{};var i=t.options.__s;t.options.__s=!0;var s,o=t.h(t.Fragment,null);return o.__k=[e],s=n&&(n.pretty||n.voidElements||n.sortAttributes||n.shallow||n.allAttributes||n.xml||n.attributeHook)?v(e,r,n):x(e,r,!1,void 0,o),t.options.__c&&t.options.__c(e,w),t.options.__s=i,w.length=0,s}function E(e){return null==e||"boolean"==typeof e?null:"string"==typeof e||"number"==typeof e||"bigint"==typeof e?t.h(null,null,e):e}function T(e,t){return"className"===e?"class":"htmlFor"===e?"for":"defaultValue"===e?"value":"defaultChecked"===e?"checked":"defaultSelected"===e?"selected":t&&s.test(e)?e.toLowerCase().replace(/^xlink:?/,"xlink:"):e}function O(e,t){return"style"===e&&null!=t&&"object"==typeof t?h(t):"a"===e[0]&&"r"===e[1]&&"boolean"==typeof t?String(t):t}var C=Array.isArray,k=Object.assign;function x(e,r,s,o,l){if(null==e||!0===e||!1===e||""===e)return"";if("object"!=typeof e)return"function"==typeof e?"":a(e);if(C(e)){var u="";l.__k=e;for(var c=0;c<e.length;c++)u+=x(e[c],r,s,o,l),e[c]=E(e[c]);return u}if(void 0!==e.constructor)return"";e.__=l,t.options.__b&&t.options.__b(e);var d=e.type,h=e.props;if("function"==typeof d){if(d===t.Fragment)f=h.children;else{f=d.prototype&&"function"==typeof d.prototype.render?function(e,r){var n=e.type,i=g(n,r),s=new n(e.props,i);e.__c=s,s.__v=e,s.__d=!0,s.props=e.props,null==s.state&&(s.state={}),null==s.__s&&(s.__s=s.state),s.context=i,n.getDerivedStateFromProps?s.state=k({},s.state,n.getDerivedStateFromProps(s.props,s.state)):s.componentWillMount&&(s.componentWillMount(),s.state=s.__s!==s.state?s.__s:s.state);var o=t.options.__r;return o&&o(e),s.render(s.props,s.state,s.context)}(e,r):function(e,r){var n,i=m(e,r),s=g(e.type,r);e.__c=i;for(var o=t.options.__r,a=0;i.__d&&a++<25;)i.__d=!1,o&&o(e),n=e.type.call(i,e.props,s);return n}(e,r);var f,p=e.__c;p.getChildContext&&(r=k({},r,p.getChildContext()))}var y=x(f=null!=f&&f.type===t.Fragment&&null==f.key?f.props.children:f,r,s,o,e);return t.options.diffed&&t.options.diffed(e),e.__=void 0,t.options.unmount&&t.options.unmount(e),y}var v,b,_="<";if(_+=d,h)for(var w in v=h.children,h){var S=h[w];if(!("key"===w||"ref"===w||"__self"===w||"__source"===w||"children"===w||"className"===w&&"class"in h||"htmlFor"===w&&"for"in h||i.test(w))){if(S=O(w=T(w,s),S),"dangerouslySetInnerHTML"===w)b=S&&S.__html;else if("textarea"===d&&"value"===w)v=S;else if((S||0===S||""===S)&&"function"!=typeof S){if(!0===S||""===S){S=w,_=_+" "+w;continue}if("value"===w){if("select"===d){o=S;continue}"option"!==d||o!=S||"selected"in h||(_+=" selected")}_=_+" "+w+'="'+a(S)+'"'}}}var A=_;if(_+=">",i.test(d))throw Error(d+" is not a valid HTML tag name in "+_);var R="",I=!1;if(b)R+=b,I=!0;else if("string"==typeof v)R+=a(v),I=!0;else if(C(v)){e.__k=v;for(var P=0;P<v.length;P++){var D=v[P];if(v[P]=E(D),null!=D&&!1!==D){var N=x(D,r,"svg"===d||"foreignObject"!==d&&s,o,e);N&&(R+=N,I=!0)}}}else if(null!=v&&!1!==v&&!0!==v){e.__k=[E(v)];var M=x(v,r,"svg"===d||"foreignObject"!==d&&s,o,e);M&&(R+=M,I=!0)}if(t.options.diffed&&t.options.diffed(e),e.__=void 0,t.options.unmount&&t.options.unmount(e),I)_+=R;else if(n.test(d))return A+" />";return _+"</"+d+">"}S.shallowRender=_,e.default=S,e.render=S,e.renderToStaticMarkup=S,e.renderToString=S,e.shallowRender=_})},17956:(e,t,r)=>{e.exports=r(6053).default},81706:(e,t)=>{var r,n,i,s,o,a,l,u,c={},d=[],h=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function f(e,t){for(var r in t)e[r]=t[r];return e}function p(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n){var i,s,o,a={};for(o in t)"key"==o?i=t[o]:"ref"==o?s=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===a[o]&&(a[o]=e.defaultProps[o]);return g(e,a,i,s,null)}function g(e,t,r,s,o){var a={type:e,props:t,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++i:o};return null==o&&null!=n.vnode&&n.vnode(a),a}function y(e){return e.children}function v(e,t){this.props=e,this.context=t}function b(e,t){if(null==t)return e.__?b(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?b(e):null}function _(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return _(e)}}function w(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!S.__r++||a!==n.debounceRendering)&&((a=n.debounceRendering)||l)(S)}function S(){var e,t,r,n,i,s,a,l;for(o.sort(function(e,t){return e.__v.__b-t.__v.__b});e=o.shift();)e.__d&&(t=o.length,n=void 0,i=void 0,a=(s=(r=e).__v).__e,(l=r.__P)&&(n=[],(i=f({},s)).__v=s.__v+1,P(l,s,i,r.__n,void 0!==l.ownerSVGElement,null!=s.__h?[a]:null,n,null==a?b(s):a,s.__h),D(n,s),s.__e!=a&&_(s)),o.length>t&&o.sort(function(e,t){return e.__v.__b-t.__v.__b}));S.__r=0}function E(e,t,r,n,i,s,o,a,l,u){var h,f,p,m,v,_,w,S=n&&n.__k||d,E=S.length;for(r.__k=[],h=0;h<t.length;h++)if(null!=(m=r.__k[h]=null==(m=t[h])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?g(null,m,null,null,m):Array.isArray(m)?g(y,{children:m},null,null,null):m.__b>0?g(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)){if(m.__=r,m.__b=r.__b+1,null===(p=S[h])||p&&m.key==p.key&&m.type===p.type)S[h]=void 0;else for(f=0;f<E;f++){if((p=S[f])&&m.key==p.key&&m.type===p.type){S[f]=void 0;break}p=null}P(e,m,p=p||c,i,s,o,a,l,u),v=m.__e,(f=m.ref)&&p.ref!=f&&(w||(w=[]),p.ref&&w.push(p.ref,null,m),w.push(f,m.__c||v,m)),null!=v?(null==_&&(_=v),"function"==typeof m.type&&m.__k===p.__k?m.__d=l=T(m,l,e):l=O(e,m,p,S,v,l),"function"==typeof r.type&&(r.__d=l)):l&&p.__e==l&&l.parentNode!=e&&(l=b(p))}for(r.__e=_,h=E;h--;)null!=S[h]&&("function"==typeof r.type&&null!=S[h].__e&&S[h].__e==r.__d&&(r.__d=C(n).nextSibling),j(S[h],S[h]));if(w)for(h=0;h<w.length;h++)M(w[h],w[++h],w[++h])}function T(e,t,r){for(var n,i=e.__k,s=0;i&&s<i.length;s++)(n=i[s])&&(n.__=e,t="function"==typeof n.type?T(n,t,r):O(r,n,n,i,n.__e,t));return t}function O(e,t,r,n,i,s){var o,a,l;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==r||i!=s||null==i.parentNode)e:if(null==s||s.parentNode!==e)e.appendChild(i),o=null;else{for(a=s,l=0;(a=a.nextSibling)&&l<n.length;l+=1)if(a==i)break e;e.insertBefore(i,s),o=s}return void 0!==o?o:i.nextSibling}function C(e){var t,r,n;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((r=e.__k[t])&&(n=C(r)))return n}return null}function k(e,t,r,n,i){var s;for(s in r)"children"===s||"key"===s||s in t||A(e,s,null,r[s],n);for(s in t)i&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||r[s]===t[s]||A(e,s,t[s],r[s],n)}function x(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||h.test(t)?r:r+"px"}function A(e,t,r,n,i){var s;e:if("style"===t){if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||x(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||x(e.style,t,r[t])}}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase() in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n||e.addEventListener(t,s?I:R,s):e.removeEventListener(t,s?I:R,s);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,r))}}function R(e){return this.l[e.type+!1](n.event?n.event(e):e)}function I(e){return this.l[e.type+!0](n.event?n.event(e):e)}function P(e,t,r,i,s,o,a,l,u){var c,d,h,p,m,g,b,_,w,S,T,O,C,k,x,A=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(u=r.__h,l=t.__e=r.__e,t.__h=null,o=[l]),(c=n.__b)&&c(t);try{e:if("function"==typeof A){if(_=t.props,w=(c=A.contextType)&&i[c.__c],S=c?w?w.props.value:c.__:i,r.__c?b=(d=t.__c=r.__c).__=d.__E:("prototype"in A&&A.prototype.render?t.__c=d=new A(_,S):(t.__c=d=new v(_,S),d.constructor=A,d.render=L),w&&w.sub(d),d.props=_,d.state||(d.state={}),d.context=S,d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=A.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=f({},d.__s)),f(d.__s,A.getDerivedStateFromProps(_,d.__s))),p=d.props,m=d.state,d.__v=t,h)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==A.getDerivedStateFromProps&&_!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,S)||t.__v===r.__v){for(t.__v!==r.__v&&(d.props=_,d.state=d.__s,d.__d=!1),d.__e=!1,t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(e){e&&(e.__=t)}),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,S),null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,m,g)})}if(d.context=S,d.props=_,d.__P=e,O=n.__r,C=0,"prototype"in A&&A.prototype.render){for(d.state=d.__s,d.__d=!1,O&&O(t),c=d.render(d.props,d.state,d.context),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[]}else do d.__d=!1,O&&O(t),c=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,null!=d.getChildContext&&(i=f(f({},i),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(p,m)),x=null!=c&&c.type===y&&null==c.key?c.props.children:c,E(e,Array.isArray(x)?x:[x],t,r,i,s,o,a,l,u),d.base=t.__e,t.__h=null,d.__h.length&&a.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==o&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=N(r.__e,t,r,i,s,o,a,u);(c=n.diffed)&&c(t)}catch(e){t.__v=null,(u||null!=o)&&(t.__e=l,t.__h=!!u,o[o.indexOf(l)]=null),n.__e(e,t,r)}}function D(e,t){n.__c&&n.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){n.__e(e,t.__v)}})}function N(e,t,n,i,s,o,a,l){var u,d,h,f=n.props,m=t.props,g=t.type,y=0;if("svg"===g&&(s=!0),null!=o){for(;y<o.length;y++)if((u=o[y])&&"setAttribute"in u==!!g&&(g?u.localName===g:3===u.nodeType)){e=u,o[y]=null;break}}if(null==e){if(null===g)return document.createTextNode(m);e=s?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),o=null,l=!1}if(null===g)f===m||l&&e.data===m||(e.data=m);else{if(o=o&&r.call(e.childNodes),d=(f=n.props||c).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!l){if(null!=o)for(f={},y=0;y<e.attributes.length;y++)f[e.attributes[y].name]=e.attributes[y].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(k(e,m,f,s,l),h)t.__k=[];else if(E(e,Array.isArray(y=t.props.children)?y:[y],t,n,i,s&&"foreignObject"!==g,o,a,o?o[0]:n.__k&&b(n,0),l),null!=o)for(y=o.length;y--;)null!=o[y]&&p(o[y]);l||("value"in m&&void 0!==(y=m.value)&&(y!==e.value||"progress"===g&&!y||"option"===g&&y!==f.value)&&A(e,"value",y,f.value,!1),"checked"in m&&void 0!==(y=m.checked)&&y!==e.checked&&A(e,"checked",y,f.checked,!1))}return e}function M(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,r)}}function j(e,t,r){var i,s;if(n.unmount&&n.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||M(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){n.__e(e,t)}i.base=i.__P=null,e.__c=void 0}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&j(i[s],t,r||"function"!=typeof e.type);r||null==e.__e||p(e.__e),e.__=e.__e=e.__d=void 0}function L(e,t,r){return this.constructor(e,r)}function F(e,t,i){var s,o,a;n.__&&n.__(e,t),o=(s="function"==typeof i)?null:i&&i.__k||t.__k,a=[],P(t,e=(!s&&i||t).__k=m(y,null,[e]),o||c,c,void 0!==t.ownerSVGElement,!s&&i?[i]:o?null:t.firstChild?r.call(t.childNodes):null,a,!s&&i?i:o?o.__e:t.firstChild,s),D(a,e)}r=d.slice,n={__e:function(e,t,r,n){for(var i,s,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),o=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},i=0,s=function(e){return null!=e&&void 0===e.constructor},v.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(f({},r),this.props)),e&&f(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),w(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w(this))},v.prototype.render=y,o=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,S.__r=0,u=0,t.Component=v,t.Fragment=y,t.cloneElement=function(e,t,n){var i,s,o,a=f({},e.props);for(o in t)"key"==o?i=t[o]:"ref"==o?s=t[o]:a[o]=t[o];return arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),g(e.type,a,i||e.key,s||e.ref,null)},t.createContext=function(e,t){var r={__c:t="__cC"+u++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n;return this.getChildContext||(r=[],(n={})[t]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(function(e){e.__e=!0,w(e)})},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r},t.createElement=m,t.createRef=function(){return{current:null}},t.h=m,t.hydrate=function e(t,r){F(t,r,e)},t.isValidElement=s,t.options=n,t.render=F,t.toChildArray=function e(t,r){return r=r||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some(function(t){e(t,r)}):r.push(t)),r}},74733:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},50826:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function s(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,s=this.head;null!==s&&i<e;i++)s=s.next;for(;null!==s&&i<t;i++,s=s.next)r.push(s.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,s=this.tail;null!==s&&i>t;i--)s=s.prev;for(;null!==s&&i>e;i--,s=s.prev)r.push(s.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,s=this.head;null!==s&&n<e;n++)s=s.next;for(var o=[],n=0;s&&n<t;n++)o.push(s.value),s=this.removeNode(s);null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<r.length;n++)s=i(this,s,r[n]);return o},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(74733)(n)}catch(e){}},71661:e=>{function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},29894:e=>{function t(e){if(Array.isArray(e))return e}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},38363:(e,t,r)=>{var n=r(71661);function i(e){if(Array.isArray(e))return n(e)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},9529:e=>{function t(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},36644:e=>{function t(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(e){r(e);return}a.done?t(l):Promise.resolve(l).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(i,s){var o=e.apply(r,n);function a(e){t(o,i,s,a,l,"next",e)}function l(e){t(o,i,s,a,l,"throw",e)}a(void 0)})}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},78513:e=>{function t(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},31818:(e,t,r)=>{var n=r(12070),i=r(34471);function s(t,r,o){return i()?e.exports=s=Reflect.construct.bind():e.exports=s=function(e,t,r){var i=[null];i.push.apply(i,t);var s=new(Function.bind.apply(e,i));return r&&n(s,r.prototype),s},e.exports.__esModule=!0,e.exports.default=e.exports,s.apply(null,arguments)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},53388:(e,t,r)=>{var n=r(71817);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},59335:(e,t,r)=>{var n=r(82066),i=r(34471),s=r(27296);function o(e){var t=i();return function(){var r,i=n(e);if(t){var o=n(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return s(this,r)}}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},97307:(e,t,r)=>{var n=r(71817);function i(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},47821:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},82066:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},82522:(e,t,r)=>{var n=r(12070);function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},69286:e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},75936:e=>{function t(e){return -1!==Function.toString.call(e).indexOf("[native code]")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},34471:e=>{function t(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},81006:e=>{function t(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},82784:e=>{function t(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,o,a=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},27867:e=>{function t(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},44233:e=>{function t(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},45455:(e,t,r)=>{var n=r(97307);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},67738:(e,t,r)=>{var n=r(21815);function i(e,t){if(null==e)return{};var r,i,s=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},21815:e=>{function t(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},27296:(e,t,r)=>{var n=r(16347).default,i=r(9529);function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i(e)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},22644:(e,t,r)=>{var n=r(16347).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,s=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=Object.create((t&&t.prototype instanceof m?t:m).prototype);return o(i,"_invoke",{value:T(e,r,new x(n||[]))}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p={};function m(){}function g(){}function y(){}var v={};d(v,l,function(){return this});var b=Object.getPrototypeOf,_=b&&b(b(A([])));_&&_!==r&&s.call(_,l)&&(v=_);var w=y.prototype=m.prototype=Object.create(v);function S(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;function i(r,o,a,l){var u=f(e[r],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==n(d)&&s.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return i("throw",e,a,l)})}l(u.arg)}o(this,"_invoke",{value:function(e,n){function s(){return new t(function(t,r){i(e,n,t,r)})}return r=r?r.then(s,s):s()}})}function T(e,t,r){var n="suspendedStart";return function(i,s){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===i)throw s;return R()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=O(o,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=f(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=TypeError("The iterator does not provide a '"+r+"' method")),p;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):s:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:R}}function R(){return{value:void 0,done:!0}}return g.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:g,configurable:!0}),g.displayName=d(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},S(E.prototype),d(E.prototype,u,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,i,s){void 0===s&&(s=Promise);var o=new E(h(e,r,n,i),s);return t.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(w),d(w,c,"Generator"),d(w,l,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),l=s.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},12070:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},13279:(e,t,r)=>{var n=r(29894),i=r(82784),s=r(27979),o=r(27867);function a(e,t){return n(e)||i(e,t)||s(e,t)||o()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},8238:e=>{function t(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},81586:(e,t,r)=>{var n=r(38363),i=r(81006),s=r(27979),o=r(44233);function a(e){return n(e)||i(e)||s(e)||o()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},67872:(e,t,r)=>{var n=r(16347).default;function i(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},71817:(e,t,r)=>{var n=r(16347).default,i=r(67872);function s(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},16347:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},27979:(e,t,r)=>{var n=r(71661);function i(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},56112:(e,t,r)=>{var n=r(82066),i=r(12070),s=r(75936),o=r(31818);function a(t){var r="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!s(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},7475:(e,t,r)=>{var n=r(22644)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},97967:e=>{function t(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2756:e=>{function t(e,t,r,n,i,s,o){try{var a=e[s](o),l=a.value}catch(e){r(e);return}a.done?t(l):Promise.resolve(l).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise(function(i,s){var o=e.apply(r,n);function a(e){t(o,i,s,a,l,"next",e)}function l(e){t(o,i,s,a,l,"throw",e)}a(void 0)})}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},58121:e=>{function t(e,t){return t.get?t.get.call(e):t.value}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},87841:e=>{function t(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},30984:e=>{function t(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},35183:e=>{function t(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},28117:(e,t,r)=>{var n=r(58121),i=r(35183);function s(e,t){var r=i(e,t,"get");return n(e,r)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},59706:(e,t,r)=>{var n=r(87841),i=r(35183);function s(e,t,r){var s=i(e,t,"set");return n(e,s,r),r}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},68006:(e,t,r)=>{var n=r(87848),i=r(99753);function s(t,r,o){return i()?e.exports=s=Reflect.construct.bind():e.exports=s=function(e,t,r){var i=[null];i.push.apply(i,t);var s=new(Function.bind.apply(e,i));return r&&n(s,r.prototype),s},e.exports.__esModule=!0,e.exports.default=e.exports,s.apply(null,arguments)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},43490:(e,t,r)=>{var n=r(11298);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},74300:(e,t,r)=>{var n=r(11298);function i(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},40066:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},16829:e=>{function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},76847:(e,t,r)=>{var n=r(87848);function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},12272:e=>{function t(e){return e&&e.__esModule?e:{default:e}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},55014:e=>{function t(e){return -1!==Function.toString.call(e).indexOf("[native code]")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},99753:e=>{function t(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7079:(e,t,r)=>{var n=r(54331).default,i=r(97967);function s(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i(e)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},82831:(e,t,r)=>{var n=r(54331).default;function i(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,s=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=Object.create((t&&t.prototype instanceof m?t:m).prototype);return o(i,"_invoke",{value:T(e,r,new x(n||[]))}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p={};function m(){}function g(){}function y(){}var v={};d(v,l,function(){return this});var b=Object.getPrototypeOf,_=b&&b(b(A([])));_&&_!==r&&s.call(_,l)&&(v=_);var w=y.prototype=m.prototype=Object.create(v);function S(e){["next","throw","return"].forEach(function(t){d(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;function i(r,o,a,l){var u=f(e[r],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==n(d)&&s.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return i("throw",e,a,l)})}l(u.arg)}o(this,"_invoke",{value:function(e,n){function s(){return new t(function(t,r){i(e,n,t,r)})}return r=r?r.then(s,s):s()}})}function T(e,t,r){var n="suspendedStart";return function(i,s){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===i)throw s;return R()}for(r.method=i,r.arg=s;;){var o=r.delegate;if(o){var a=O(o,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=f(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=TypeError("The iterator does not provide a '"+r+"' method")),p;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):s:(t.method="throw",t.arg=TypeError("iterator result is not an object"),t.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(s.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:R}}function R(){return{value:void 0,done:!0}}return g.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:g,configurable:!0}),g.displayName=d(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},S(E.prototype),d(E.prototype,u,function(){return this}),t.AsyncIterator=E,t.async=function(e,r,n,i,s){void 0===s&&(s=Promise);var o=new E(h(e,r,n,i),s);return t.isGeneratorFunction(r)?o:o.next().then(function(e){return e.done?e.value:o.next()})},S(w),d(w,c,"Generator"),d(w,l,function(){return this}),d(w,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=s.call(i,"catchLoc"),l=s.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},87848:e=>{function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},72077:(e,t,r)=>{var n=r(54331).default;function i(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},11298:(e,t,r)=>{var n=r(54331).default,i=r(72077);function s(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},54331:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},81044:(e,t,r)=>{var n=r(16829),i=r(87848),s=r(55014),o=r(68006);function a(t){var r="function"==typeof Map?new Map:void 0;return e.exports=a=function(e){if(null===e||!s(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return o(e,arguments,n(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},50075:(e,t,r)=>{var n=r(82831)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},95285:(e,t,r)=>{"use strict";let n,i;r.d(t,{Jn:()=>q,qX:()=>V,Xd:()=>B,Mq:()=>K,C6:()=>J,ZF:()=>$,KN:()=>G});var s=r(47059),o=r(71954),a=r(36348);let l=(e,t)=>t.some(t=>e instanceof t);function u(){return n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c(){return i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let d=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap;function g(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(S(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&d.set(t,e)}).catch(()=>{}),m.set(t,e),t}function y(e){if(h.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});h.set(e,t)}let v={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||f.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return S(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function b(e){v=e(v)}function _(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?c().includes(e)?function(...t){return e.apply(E(this),t),S(d.get(this))}:function(...t){return S(e.apply(E(this),t))}:function(t,...r){let n=e.call(E(this),t,...r);return f.set(n,t.sort?t.sort():[t]),S(n)}}function w(e){return"function"==typeof e?_(e):(e instanceof IDBTransaction&&y(e),l(e,u()))?new Proxy(e,v):e}function S(e){if(e instanceof IDBRequest)return g(e);if(p.has(e))return p.get(e);let t=w(e);return t!==e&&(p.set(e,t),m.set(t,e)),t}let E=e=>m.get(e);function T(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let o=indexedDB.open(e,t),a=S(o);return n&&o.addEventListener("upgradeneeded",e=>{n(S(o.result),e.oldVersion,e.newVersion,S(o.transaction))}),r&&o.addEventListener("blocked",()=>r()),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}let O=["get","getKey","getAll","getAllKeys","count"],C=["put","add","delete","clear"],k=new Map;function x(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(k.get(t))return k.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=C.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||O.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),o=s.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&s.done]))[0]};return k.set(t,s),s}b(e=>({...e,get:(t,r,n)=>x(t,r)||e.get(t,r,n),has:(t,r)=>!!x(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!R(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function R(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let I="@firebase/app",P="0.9.4",D=new o.Yd("@firebase/app"),N="9.17.2",M="[DEFAULT]",j={[I]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},L=new Map,F=new Map;function U(e,t){try{e.container.addComponent(t)}catch(r){D.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function B(e){let t=e.name;if(F.has(t))return D.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(F.set(t,e),L.values()))U(r,e);return!0}function V(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},z=new a.LL("app","Firebase",H);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw z.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q=N;function $(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:M,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw z.create("bad-app-name",{appName:String(i)});if(r||(r=(0,a.aH)()),!r)throw z.create("no-options");let o=L.get(i);if(o){if((0,a.vZ)(r,o.options)&&(0,a.vZ)(n,o.config))return o;throw z.create("duplicate-app",{appName:i})}let l=new s.H0(i);for(let e of F.values())l.addComponent(e);let u=new W(r,n,l);return L.set(i,u),u}function K(e=M){let t=L.get(e);if(!t&&e===M)return $();if(!t)throw z.create("no-app",{appName:e});return t}function J(){return Array.from(L.values())}function G(e,t,r){var n;let i=null!==(n=j[e])&&void 0!==n?n:e;r&&(i+=`-${r}`);let o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){let e=[`Unable to register library "${i}" with version "${t}":`];o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),D.warn(e.join(" "));return}B(new s.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q="firebase-heartbeat-database",Y=1,X="firebase-heartbeat-store",Z=null;function ee(){return Z||(Z=T(Q,Y,{upgrade:(e,t)=>{0===t&&e.createObjectStore(X)}}).catch(e=>{throw z.create("idb-open",{originalErrorMessage:e.message})})),Z}async function et(e){try{return(await ee()).transaction(X).objectStore(X).get(en(e))}catch(e){if(e instanceof a.ZR)D.warn(e.message);else{let t=z.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});D.warn(t.message)}}}async function er(e,t){try{let r=(await ee()).transaction(X,"readwrite"),n=r.objectStore(X);return await n.put(t,en(e)),r.done}catch(e){if(e instanceof a.ZR)D.warn(e.message);else{let t=z.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});D.warn(t.message)}}}function en(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=1024,es=2592e6;class eo{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new eu(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ea();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))?void 0:(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=es}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let e=ea(),{heartbeatsToSend:t,unsentEntries:r}=el(this._heartbeatsCache.heartbeats),n=(0,a.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}}function ea(){return new Date().toISOString().substring(0,10)}function el(e,t=ei){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ec(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),ec(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class eu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,a.hl)()&&(0,a.eu)().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await et(this.app)||{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return er(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return er(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function ec(e){return(0,a.L)(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){B(new s.wA("platform-logger",e=>new A(e),"PRIVATE")),B(new s.wA("heartbeat",e=>new eo(e),"PRIVATE")),G(I,P,""),G(I,P,"esm2017"),G("fire-js","")})(0)},47059:(e,t,r)=>{"use strict";r.d(t,{H0:()=>u,wA:()=>i});var n=r(36348);class i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new n.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(l(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(e){return e===s?void 0:e}function l(e){return"EAGER"===e.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},71954:(e,t,r)=>{"use strict";var n;r.d(t,{Yd:()=>u,in:()=>n});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(n||(n={}));let s={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},o=n.INFO,a={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},l=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=a[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}},36348:(e,t,r)=>{"use strict";r.d(t,{BH:()=>b,L:()=>u,LL:()=>O,P0:()=>y,Sg:()=>_,ZR:()=>T,aH:()=>v,eu:()=>S,hl:()=>w,m9:()=>R,vZ:()=>x});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n={NODE_CLIENT:!1},i=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},s=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4,d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),n.push(r[u],r[c],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):s(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,l=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==o||null==l)throw new a;let u=i<<2|s>>4;if(n.push(u),64!==o){let e=s<<4&240|o>>2;if(n.push(e),64!==l){let e=o<<6&192|l;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let l=function(e){let t=i(e);return o.encodeByteArray(t,!0)},u=function(e){return l(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h=()=>d().__FIREBASE_DEFAULTS__,f=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},p=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&c(e[1]);return t&&JSON.parse(t)},m=()=>{try{return h()||f()||p()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},g=e=>{var t,r;return null===(r=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},y=e=>{let t=g(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},v=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[u(JSON.stringify(r)),u(JSON.stringify(o)),a].join(".")}function w(){try{return"object"==typeof indexedDB}catch(e){return!1}}function S(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E="FirebaseError";class T extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E,Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,O.prototype.create)}}class O{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?C(i,r):"Error",o=`${this.serviceName}: ${s} (${n}).`;return new T(n,o,r)}}function C(e,t){return e.replace(k,(e,r)=>{let n=t[r];return null!=n?String(n):`<${r}?>`})}let k=/\{\$([^}]+)}/g;function x(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(A(r)&&A(s)){if(!x(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function A(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.NODE_CLIENT=!0},97011:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3729);function i({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}let s=n.forwardRef(i)},91242:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3729);function i({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}let s=n.forwardRef(i)},3594:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3729);function i({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}let s=n.forwardRef(i)},12522:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(3729);function i({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}let s=n.forwardRef(i)},69996:(e,t,r)=>{"use strict";function n(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw TypeError("attempted to use private field on non-instance");return e}r.r(t),r.d(t,{_:()=>n,_class_private_field_loose_base:()=>n})},67074:(e,t,r)=>{"use strict";r.r(t),r.d(t,{_:()=>i,_class_private_field_loose_key:()=>i});var n=0;function i(e){return"__private_"+n+++"_"+e}},39694:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})},17824:(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}r.r(t),r.d(t,{_:()=>i,_interop_require_wildcard:()=>i})},76041:(e,t,r)=>{"use strict";r.d(t,{C6:()=>n.C6,Mq:()=>n.Mq,ZF:()=>n.ZF});var n=r(95285),i="firebase",s="9.17.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,n.KN)(i,s,"app")},61794:(e,t,r)=>{"use strict";r.d(t,{ET:()=>pv,hJ:()=>h8,oe:()=>py,JU:()=>h9,ad:()=>fl,cf:()=>pb,Xo:()=>fX,IO:()=>fJ,iE:()=>h7,Bt:()=>pS});var n,i=r(95285),s=r(47059),o=r(71954),a=r(73837),l=r(36348),u=r(6113),c=r(22165),d=r(58715);let h="@firebase/firestore",f="3.8.4";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}p.UNAUTHENTICATED=new p(null),p.GOOGLE_CREDENTIALS=new p("google-credentials-uid"),p.FIRST_PARTY=new p("first-party-uid"),p.MOCK_USER=new p("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m="9.17.2";function g(e){m=e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e){return(0,a.inspect)(e,{depth:100})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v=new o.Yd("@firebase/firestore");function b(){return v.logLevel}function _(e,...t){if(v.logLevel<=o.in.DEBUG){let r=t.map(E);v.debug(`Firestore (${m}): ${e}`,...r)}}function w(e,...t){if(v.logLevel<=o.in.ERROR){let r=t.map(E);v.error(`Firestore (${m}): ${e}`,...r)}}function S(e,...t){if(v.logLevel<=o.in.WARN){let r=t.map(E);v.warn(`Firestore (${m}): ${e}`,...r)}}function E(e){if("string"==typeof e)return e;try{return y(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e="Unexpected state"){let t=`FIRESTORE (${m}) INTERNAL ASSERTION FAILED: `+e;throw w(t),Error(t)}function O(e,t){e||T()}function C(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class x extends l.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(p.UNAUTHENTICATED))}shutdown(){}}class P{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class D{constructor(e){this.authProvider=e,this.currentUser=p.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.tokenCounter,n=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),i=new A;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new A,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.tokenListener),s()};this.authProvider.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?o(e):(_("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new A)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(O("string"==typeof t.accessToken),new R(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let e=this.auth&&this.auth.getUid();return O(null===e||"string"==typeof e),new p(e)}}class N{constructor(e,t,r,n){this.gapi=e,this.sessionIndex=t,this.iamToken=r,this.authTokenFactory=n,this.type="FirstParty",this.user=p.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():(O(!!("object"==typeof this.gapi&&null!==this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty)),this.gapi.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class M{constructor(e,t,r,n){this.gapi=e,this.sessionIndex=t,this.iamToken=r,this.authTokenFactory=n}getToken(){return Promise.resolve(new N(this.gapi,this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(p.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,t){let r=e=>{null!=e.error&&_("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,_("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?n(e):_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(O("string"==typeof e.token),this.latestAppCheckToken=e.token,new j(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}}function F(e){if(!e)return new I;switch(e.type){case"gapi":return new M(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new x(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){return(0,u.randomBytes)(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",n=20;for(;r.length<n;){let i=U(40);for(let s=0;s<i.length;++s)r.length<n&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function V(e,t){return e<t?-1:e>t?1:0}function H(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}function z(e){return e+"\x00"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W=-62135596800,q=1e6;class ${constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new x(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<W||e>=253402300800)throw new x(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $.fromMillis(Date.now())}static fromDate(e){return $.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*q);return new $(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q}_compareTo(e){return this.seconds===e.seconds?V(this.nanoseconds,e.nanoseconds):V(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-W).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new $(0,0))}static max(){return new K(new $(253402300799,1e9-1))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J="__name__";class G{constructor(e,t,r){void 0===t?t=0:t>e.length&&T(),void 0===r?r=e.length-t:r>e.length-t&&T(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===G.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof G?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Q extends G{construct(e,t,r){return new Q(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new Q(t)}static emptyPath(){return new Q([])}}let Y=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class X extends G{construct(e,t,r){return new X(e,t,r)}static isValidIdentifier(e){return Y.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),X.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===J}static keyField(){return new X([J])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new x(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new x(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if(!("\\"===t||"."===t||"`"===t))throw new x(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new x(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new X(t)}static emptyPath(){return new X([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Q.fromString(e))}static fromName(e){return new Z(Q.fromString(e).popFirst(5))}static empty(){return new Z(Q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Q.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Q.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Q(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ee=-1,et=0;class er{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function en(e){return e.fields.find(e=>2===e.kind)}function ei(e){return e.fields.filter(e=>2!==e.kind)}function es(e){let t=ei(e);return 0===t.length?0:t[t.length-1].kind}function eo(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}er.UNKNOWN_ID=-1;class ea{constructor(e,t){this.fieldPath=e,this.kind=t}}function el(e,t){let r=X.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:V(e.kind,t.kind)}class eu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eu(et,eh.min())}}function ec(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new eh(K.fromTimestamp(1e9===n?new $(r+1,0):new $(r,n)),Z.empty(),t)}function ed(e){return new eh(e.readTime,e.key,ee)}class eh{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eh(K.min(),Z.empty(),ee)}static max(){return new eh(K.max(),Z.empty(),ee)}}function ef(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=Z.comparator(e.documentKey,t.documentKey))?r:V(e.largestBatchId,t.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class em{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(e){if(e.code===k.FAILED_PRECONDITION&&e.message===ep)_("LocalStore","Unexpectedly lost primary lease");else throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&T(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ey((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof ey)return t;return ey.resolve(t)}catch(e){return ey.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ey.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ey.reject(t)}static resolve(e){return new ey((t,r)=>{t(e)})}static reject(e){return new ey((t,r)=>{r(e)})}static waitFor(e){return new ey((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=ey.resolve(!1);for(let r of e)t=t.next(e=>e?ey.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new ey((r,n)=>{let i=e.length,s=Array(i),o=0;for(let a=0;a<i;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new ey((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev="SimpleDb",eb=3;class e_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new A,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new eE(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=ex(t.target.error);this.completionDeferred.reject(new eE(e,r))}}static open(e,t,r,n){try{return new e_(t,e.transaction(n,r))}catch(e){throw new eE(t,e)}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(_(ev,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new eO(this.transaction.objectStore(e))}}class ew{constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,12.2===ew.getIOSVersion(getUA())&&w("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _(ev,"Removing database:",e),eC(window.indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!isIndexedDBAvailable())return!1;if(ew.isMockPersistence())return!0;let e=getUA(),t=ew.getIOSVersion(e),r=0<t&&t<10,n=ew.getAndroidVersion(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!i}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}static getAndroidVersion(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}async ensureDb(e){return this.db||(_(ev,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new eE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new x(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new x(k.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new eE(e,n))},n.onupgradeneeded=e=>{_(ev,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.schemaConverter.createOrUpgrade(t,n.transaction,e.oldVersion,this.version).next(()=>{_(ev,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=e_.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),ey.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<eb;if(_(ev,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class eS{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return eC(this.dbCursor.delete())}}class eE extends null{constructor(e,t){super(k.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eT(e){return"IndexedDbTransactionError"===e.name}class eO{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(_(ev,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(_(ev,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eC(r)}add(e){return _(ev,"ADD",this.store.name,e,e),eC(this.store.add(e))}get(e){return eC(this.store.get(e)).next(t=>(void 0===t&&(t=null),_(ev,"GET",this.store.name,e,t),t))}delete(e){return _(ev,"DELETE",this.store.name,e),eC(this.store.delete(e))}count(){return _(ev,"COUNT",this.store.name),eC(this.store.count())}loadAll(e,t){let r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}{let e=this.store.getAll(r.range);return new ey((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new ey((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){_(ev,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let n=this.cursor(r);return this.iterateCursor(n,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.iterateCursor(n,t)}iterateSerial(e){let t=this.cursor({});return new ey((r,n)=>{t.onerror=e=>{n(ex(e.target.error))},t.onsuccess=t=>{let n=t.target.result;if(!n){r();return}e(n.primaryKey,n.value).next(e=>{e?n.continue():r()})}})}iterateCursor(e,t){let r=[];return new ey((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i){n();return}let s=new eS(i),o=t(i.primaryKey,i.value,s);if(o instanceof ey){let e=o.catch(e=>(s.done(),ey.reject(e)));r.push(e)}s.isDone?n():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}}).next(()=>ey.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function eC(e){return new ey((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(ex(e.target.error))}})}let ek=!1;function ex(e){let t=ew.getIOSVersion(getUA());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new x("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ek||(ek=!0,setTimeout(()=>{throw e},0)),e}}return e}let eA="IndexBackiller",eR=null,eI=null,eP=50;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}eD.INVALID=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eN="\x01",eM="\x01",ej="\x10",eL="\x11";function eF(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=eB(t)),t=eU(e.get(r),t);return eB(t)}function eU(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\x00":r+=eN+ej;break;case eN:r+=eN+eL;break;default:r+=n}}return r}function eB(e){return e+eN+eM}function eV(e){let t=e.length;if(O(t>=2),2===t)return O(e.charAt(0)===eN&&e.charAt(1)===eM),Q.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf(eN,s);switch((t<0||t>r)&&T(),e.charAt(t+1)){case eM:let o;let a=e.substring(s,t);0===i.length?o=a:(i+=a,o=i,i=""),n.push(o);break;case ej:i+=e.substring(s,t)+"\x00";break;case eL:i+=e.substring(s,t+1);break;default:T()}s=t+2}return new Q(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eH="remoteDocuments",ez="owner",eW="owner",eq="mutationQueues",e$="userId",eK="mutations",eJ="batchId",eG="userMutationsIndex",eQ=null;function eY(e){return[e]}function eX(e,t){return[e,eF(t)]}function eZ(e,t,r){return[e,eF(t),r]}let e0={},e1="documentMutations",e2="remoteDocumentsV14",e3=null,e6="documentKeyIndex",e4=null,e5="collectionGroupIndex",e8=null,e9="remoteDocumentGlobal",e7="remoteDocumentGlobalKey",te="targets",tt="targetId",tr="queryTargetsIndex",tn=null,ti="targetDocuments",ts=null,to="documentTargetsIndex",ta=null,tl="targetGlobalKey",tu="targetGlobal",tc="collectionParents",td=null,th="clientMetadata",tf="clientId",tp="bundles",tm="bundleId",tg="namedQueries",ty="name",tv="indexConfiguration",tb="indexId",t_="collectionGroupIndex",tw="collectionGroup",tS="indexState",tE=null,tT="sequenceNumberIndex",tO=null,tC="indexEntries",tk=null,tx="documentKeyIndex",tA=null,tR="documentOverlays",tI=null,tP="collectionPathOverlayIndex",tD=null,tN="collectionGroupOverlayIndex",tM=null,tj=[eq,eK,e1,eH,te,ez,tu,ti,th,e9,tc,tp,tg],tL=[...tj,tR],tF=[eq,eK,e1,e2,te,ez,tu,ti,th,e9,tc,tp,tg,tR],tU=tF,tB=[...tU,tv,tS,tC];function tV(e){return 15===e?tB:14===e?tU:13===e?tF:12===e?tL:11===e?tj:void T()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH extends null{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function tz(e,t){let r=C(e);return ew.getStore(r.simpleDbTransaction,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function tq(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function t$(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tK{constructor(e,t){this.comparator=e,this.root=t||tG.EMPTY}insert(e,t){return new tK(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tG.BLACK,null,null))}remove(e){return new tK(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tG.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tJ(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tJ(this.root,e,this.comparator,!1)}getReverseIterator(){return new tJ(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tJ(this.root,e,this.comparator,!0)}}class tJ{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else if(0===i){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tG{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:tG.RED,this.left=null!=n?n:tG.EMPTY,this.right=null!=i?i:tG.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new tG(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return tG.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r;let n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return tG.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,tG.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,tG.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw T();let e=this.left.check();if(e===this.right.check())return e+(this.isRed()?0:1);throw T()}}tG.EMPTY=null,tG.RED=!0,tG.BLACK=!1;class tQ{constructor(){this.size=0}get key(){throw T()}get value(){throw T()}get color(){throw T()}get left(){throw T()}get right(){throw T()}copy(e,t,r,n,i){return this}insert(e,t,r){return new tG(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}tG.EMPTY=new tQ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tY{constructor(e){this.comparator=e,this.data=new tK(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tX(this.data.getIterator())}getIteratorFrom(e){return new tX(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof tY)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new tY(this.comparator);return t.data=e,t}}class tX{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tZ(e,t,r,n,i){let s=e.getIterator(),o=t.getIterator(),a=t0(s),l=t0(o);for(;a||l;){let e=!1,t=!1;if(a&&l){let n=r(a,l);n<0?t=!0:n>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(n(l),l=t0(o)):t?(i(a),a=t0(s)):(a=t0(s),l=t0(o))}}function t0(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.fields=e,e.sort(X.comparator)}static empty(){return new t1([])}unionWith(e){let t=new tY(X.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new t1(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return H(this.fields,e.fields,(e,t)=>e.isEqual(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(e){return Buffer.from(e,"base64").toString("binary")}function t3(e){return Buffer.from(e,"binary").toString("base64")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.binaryString=e}static fromBase64String(e){return new t6(t2(e))}static fromUint8Array(e){return new t6(t4(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t3(this.binaryString)}toUint8Array(){return t5(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return V(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function t4(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function t5(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}t6.EMPTY_BYTE_STRING=new t6("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function t9(e){if(O(!!e),"string"==typeof e){let t=0,r=t8.exec(e);if(O(!!r),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:t7(e.seconds),nanos:t7(e.nanos)}}function t7(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function re(e){return"string"==typeof e?t6.fromBase64String(e):t6.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rt="server_timestamp",rr="__type__",rn="__previous_value__",ri="__local_write_time__";function rs(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[rr])||void 0===r?void 0:r.stringValue)===rt}function ro(e,t){let r={fields:{[rr]:{stringValue:rt},[ri]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(r.fields[rn]=t),{mapValue:r}}function ra(e){let t=e.mapValue.fields[rn];return rs(t)?ra(t):t}function rl(e){let t=t9(e.mapValue.fields[ri].timestampValue);return new $(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,t,r,n,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}let rc="(default)";class rd{constructor(e,t){this.projectId=e,this.database=t||rc}static empty(){return new rd("","")}get isDefaultDatabase(){return this.database===rc}isEqual(e){return e instanceof rd&&e.projectId===this.projectId&&e.database===this.database}}function rh(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new x(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rd(e.options.projectId,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf=-1;function rp(e){return null==e}function rm(e){return 0===e&&1/e==-1/0}function rg(e){return"number"==typeof e&&Number.isInteger(e)&&!rm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry="__max__",rv={mapValue:{fields:{__type__:{stringValue:ry}}}},rb={nullValue:"NULL_VALUE"};function r_(e){if("nullValue"in e)return 0;if("booleanValue"in e)return 1;if("integerValue"in e||"doubleValue"in e)return 2;if("timestampValue"in e)return 3;if("stringValue"in e)return 5;if("bytesValue"in e)return 6;if("referenceValue"in e)return 7;else if("geoPointValue"in e)return 8;else if("arrayValue"in e)return 9;else if(!("mapValue"in e))return T();else return rs(e)?4:rZ(e)?9007199254740991:10}function rw(e,t){if(e===t)return!0;let r=r_(e);if(r!==r_(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rl(e).isEqual(rl(t));case 3:return rS(e,t);case 5:return e.stringValue===t.stringValue;case 6:return rT(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return rE(e,t);case 2:return rO(e,t);case 9:return H(e.arrayValue.values||[],t.arrayValue.values||[],rw);case 10:return rC(e,t);default:return T()}}function rS(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=t9(e.timestampValue),n=t9(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function rE(e,t){return t7(e.geoPointValue.latitude)===t7(t.geoPointValue.latitude)&&t7(e.geoPointValue.longitude)===t7(t.geoPointValue.longitude)}function rT(e,t){return re(e.bytesValue).isEqual(re(t.bytesValue))}function rO(e,t){if("integerValue"in e&&"integerValue"in t)return t7(e.integerValue)===t7(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=t7(e.doubleValue),n=t7(t.doubleValue);return r===n?rm(r)===rm(n):isNaN(r)&&isNaN(n)}return!1}function rC(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(tW(r)!==tW(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!rw(r[e],n[e])))return!1;return!0}function rk(e,t){return void 0!==(e.values||[]).find(e=>rw(e,t))}function rx(e,t){if(e===t)return 0;let r=r_(e),n=r_(t);if(r!==n)return V(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return V(e.booleanValue,t.booleanValue);case 2:return rA(e,t);case 3:return rR(e.timestampValue,t.timestampValue);case 4:return rR(rl(e),rl(t));case 5:return V(e.stringValue,t.stringValue);case 6:return rD(e.bytesValue,t.bytesValue);case 7:return rI(e.referenceValue,t.referenceValue);case 8:return rP(e.geoPointValue,t.geoPointValue);case 9:return rN(e.arrayValue,t.arrayValue);case 10:return rM(e.mapValue,t.mapValue);default:throw T()}}function rA(e,t){let r=t7(e.integerValue||e.doubleValue),n=t7(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function rR(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return V(e,t);let r=t9(e),n=t9(t),i=V(r.seconds,n.seconds);return 0!==i?i:V(r.nanos,n.nanos)}function rI(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=V(r[e],n[e]);if(0!==t)return t}return V(r.length,n.length)}function rP(e,t){let r=V(t7(e.latitude),t7(t.latitude));return 0!==r?r:V(t7(e.longitude),t7(t.longitude))}function rD(e,t){let r=re(e),n=re(t);return r.compareTo(n)}function rN(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=rx(r[e],n[e]);if(t)return t}return V(r.length,n.length)}function rM(e,t){if(e===rv.mapValue&&t===rv.mapValue)return 0;if(e===rv.mapValue)return 1;if(t===rv.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=V(n[e],s[e]);if(0!==t)return t;let o=rx(r[n[e]],i[s[e]]);if(0!==o)return o}return V(n.length,s.length)}function rj(e){return rL(e)}function rL(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return rU(e.timestampValue);if("stringValue"in e)return e.stringValue;if("bytesValue"in e)return rF(e.bytesValue);else if("referenceValue"in e)return rV(e.referenceValue);else if("geoPointValue"in e)return rB(e.geoPointValue);else if("arrayValue"in e)return rz(e.arrayValue);else if("mapValue"in e)return rH(e.mapValue);else return T()}function rF(e){return re(e).toBase64()}function rU(e){let t=t9(e);return`time(${t.seconds},${t.nanos})`}function rB(e){return`geo(${e.latitude},${e.longitude})`}function rV(e){return Z.fromName(e).toString()}function rH(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${rL(e.fields[i])}`;return r+"}"}function rz(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=rL(n);return t+"]"}function rW(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function rq(e){return!!e&&"integerValue"in e}function r$(e){return!!e&&"doubleValue"in e}function rK(e){return rq(e)||r$(e)}function rJ(e){return!!e&&"arrayValue"in e}function rG(e){return!!e&&"nullValue"in e}function rQ(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rY(e){return!!e&&"mapValue"in e}function rX(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return tq(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=rX(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=rX(e.arrayValue.values[r]);return t}}function rZ(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ry}function r0(e){if("nullValue"in e)return rb;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};if("bytesValue"in e)return{bytesValue:""};if("referenceValue"in e)return rW(rd.empty(),Z.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if("mapValue"in e)return{mapValue:{}};else return T()}function r1(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};if("bytesValue"in e)return rW(rd.empty(),Z.empty());if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return{mapValue:{}};else if("mapValue"in e)return rv;else return T()}function r2(e,t){let r=rx(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function r3(e,t){let r=rx(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.value=e}static empty(){return new r6({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!rY(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rX(t)}setAll(e){let t=X.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=rX(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());rY(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rw(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];rY(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(tq(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new r6(rX(this.value))}}function r4(e){let t=[];return tq(e.fields,(e,r)=>{let n=new X([e]);if(rY(r)){let e=r4(r.mapValue).fields;if(0===e.length)t.push(n);else for(let r of e)t.push(n.child(r))}else t.push(n)}),new t1(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,t,r,n,i,s,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new r5(e,0,K.min(),K.min(),K.min(),r6.empty(),0)}static newFoundDocument(e,t,r,n){return new r5(e,1,t,K.min(),r,n,0)}static newNoDocument(e,t){return new r5(e,2,t,K.min(),K.min(),r6.empty(),0)}static newUnknownDocument(e,t){return new r5(e,3,t,K.min(),K.min(),r6.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(K.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=r6.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=r6.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof r5&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new r5(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function r8(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?rx(n,i):T()}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,t){this.position=e,this.inclusive=t}}function r7(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],o=e.position[i];if(n=s.field.isKeyField()?Z.comparator(Z.fromName(o.referenceValue),r.key):rx(o,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function ne(e,t,r){let n=r7(e,t,r);return e.inclusive?n>=0:n>0}function nt(e,t,r){let n=r7(e,t,r);return e.inclusive?n<=0:n<0}function nr(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!rw(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t="asc"){this.field=e,this.dir=t}}function ni(e){return e.field.canonicalString()+e.dir}function ns(e){return`${e.field.canonicalString()} (${e.dir})`}function no(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{}class nl extends na{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new nS(e,t,r):"array-contains"===t?new nC(e,r):"in"===t?new nk(e,r):"not-in"===t?new nx(e,r):"array-contains-any"===t?new nA(e,r):new nl(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new nE(e,r):new nT(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rx(t,this.value)):null!==t&&r_(this.value)===r_(t)&&this.matchesComparison(rx(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return T()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class nu extends na{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new nu(e,t)}matches(e){return nc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let e=this.findFirstMatchingFilter(e=>e.isInequality());return null!==e?e.field:null}findFirstMatchingFilter(e){for(let t of this.getFlattenedFilters())if(e(t))return t;return null}}function nc(e){return"and"===e.op}function nd(e){return"or"===e.op}function nh(e){return nf(e)&&nc(e)}function nf(e){for(let t of e.filters)if(t instanceof nu)return!1;return!0}function np(e){if(e instanceof nl)return e.field.canonicalString()+e.op.toString()+rj(e.value);if(nh(e))return e.filters.map(e=>np(e)).join(",");{let t=e.filters.map(e=>np(e)).join(",");return`${e.op}(${t})`}}function nm(e,t){return e instanceof nl?ng(e,t):e instanceof nu?ny(e,t):void T()}function ng(e,t){return t instanceof nl&&e.op===t.op&&e.field.isEqual(t.field)&&rw(e.value,t.value)}function ny(e,t){return t instanceof nu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&nm(r,t.filters[n]),!0)}function nv(e,t){let r=e.filters.concat(t);return nu.create(r,e.op)}function nb(e){return e instanceof nl?nw(e):e instanceof nu?n_(e):"Filter"}function n_(e){return e.op.toString()+" {"+e.getFilters().map(nb).join(" ,")+"}"}function nw(e){return`${e.field.canonicalString()} ${e.op} ${rj(e.value)}`}class nS extends nl{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}}class nE extends nl{constructor(e,t){super(e,"in",t),this.keys=nO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nT extends nl{constructor(e,t){super(e,"not-in",t),this.keys=nO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nO(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>Z.fromName(e.referenceValue))}class nC extends nl{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rJ(t)&&rk(t.arrayValue,this.value)}}class nk extends nl{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&rk(this.value.arrayValue,t)}}class nx extends nl{constructor(e,t){super(e,"not-in",t)}matches(e){if(rk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!rk(this.value.arrayValue,t)}}class nA extends nl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!rJ(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>rk(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,t=null,r=[],n=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=o,this.memoizedCanonicalId=null}}function nI(e,t=null,r=[],n=[],i=null,s=null,o=null){return new nR(e,t,r,n,i,s,o)}function nP(e){let t=C(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(e=>np(e)).join(",")+"|ob:"+t.orderBy.map(e=>ni(e)).join(","),rp(t.limit)||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>rj(e)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>rj(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function nD(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>nb(e)).join(", ")}]`),rp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>ns(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(e=>rj(e)).join(",")),e.endAt&&(t+=", endAt: "+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(e=>rj(e)).join(",")),`Target(${t})`}function nN(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!no(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!nm(e.filters[r],t.filters[r]))return!1;return!!(e.collectionGroup===t.collectionGroup&&e.path.isEqual(t.path)&&nr(e.startAt,t.startAt))&&nr(e.endAt,t.endAt)}function nM(e){return Z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nj(e,t){return e.filters.filter(e=>e instanceof nl&&e.field.isEqual(t))}function nL(e,t){let r=en(t);if(void 0===r)return null;for(let t of nj(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function nF(e,t){let r=new Map;for(let n of ei(t))for(let t of nj(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function nU(e,t){let r=[],n=!0;for(let i of ei(t)){let t=0===i.kind?nV(e,i.fieldPath,e.startAt):nH(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new r9(r,n)}function nB(e,t){let r=[],n=!0;for(let i of ei(t)){let t=0===i.kind?nH(e,i.fieldPath,e.endAt):nV(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new r9(r,n)}function nV(e,t,r){let n=rb,i=!0;for(let r of nj(e,t)){let e=rb,t=!0;switch(r.op){case"<":case"<=":e=r0(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=rb}0>r2({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>r2({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function nH(e,t,r){let n=rv,i=!0;for(let r of nj(e,t)){let e=rv,t=!0;switch(r.op){case">=":case">":e=r1(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=rv}r3({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];r3({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function nz(e){let t=new tY(X.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(r?1:0)}function nW(e){return null!==e.limit}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nq{constructor(e,t=null,r=[],n=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt,this.endAt}}function n$(e,t,r,n,i,s,o,a){return new nq(e,t,r,n,i,s,o,a)}function nK(e){return new nq(e)}function nJ(e,t){return new nq(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function nG(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nQ(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function nY(e){for(let t of e.filters){let e=t.getFirstInequalityField();if(null!==e)return e}return null}function nX(e){return Z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nZ(e){return null!==e.collectionGroup}function n0(e){let t=C(e);if(null===t.memoizedOrderBy){t.memoizedOrderBy=[];let e=nY(t),r=nQ(t);if(null!==e&&null===r)e.isKeyField()||t.memoizedOrderBy.push(new nn(e)),t.memoizedOrderBy.push(new nn(X.keyField(),"asc"));else{let e=!1;for(let r of t.explicitOrderBy)t.memoizedOrderBy.push(r),r.field.isKeyField()&&(e=!0);if(!e){let e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.memoizedOrderBy.push(new nn(X.keyField(),e))}}}return t.memoizedOrderBy}function n1(e){let t=C(e);if(!t.memoizedTarget){if("F"===t.limitType)t.memoizedTarget=nI(t.path,t.collectionGroup,n0(t),t.filters,t.limit,t.startAt,t.endAt);else{let e=[];for(let r of n0(t)){let t="desc"===r.dir?"asc":"desc";e.push(new nn(r.field,t))}let r=t.endAt?new r9(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new r9(t.startAt.position,t.startAt.inclusive):null;t.memoizedTarget=nI(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}return t.memoizedTarget}function n2(e,t){t.getFirstInequalityField(),nY(e);let r=e.filters.concat([t]);return new nq(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function n3(e,t){let r=e.explicitOrderBy.concat([t]);return new nq(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function n6(e,t,r){return new nq(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function n4(e,t){return new nq(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function n5(e,t){return new nq(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function n8(e,t){return nN(n1(e),n1(t))&&e.limitType===t.limitType}function n9(e){return`${nP(n1(e))}|lt:${e.limitType}`}function n7(e){return`Query(target=${nD(n1(e))}; limitType=${e.limitType})`}function ie(e,t){return t.isFoundDocument()&&it(e,t)&&ir(e,t)&&ii(e,t)&&is(e,t)}function it(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Z.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function ir(e,t){for(let r of n0(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function ii(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function is(e,t){return(!e.startAt||!!nt(e.startAt,n0(e),t))&&(!e.endAt||!!ne(e.endAt,n0(e),t))}function io(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ia(e){return(t,r)=>{let n=!1;for(let i of n0(e)){let e=il(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function il(e,t,r){let n=e.field.isKeyField()?Z.comparator(t.key,r.key):r8(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return T()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e)){n[r]=[e,t];return}n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){tq(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return t$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic=new tK(Z.comparator);function id(){return ic}let ih=new tK(Z.comparator);function ip(...e){let t=ih;for(let r of e)t=t.insert(r.key,r);return t}function im(){return ib()}function ig(e){let t=ih;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function iy(){return ib()}function iv(){return ib()}function ib(){return new iu(e=>e.toString(),(e,t)=>e.isEqual(t))}let i_=new tK(Z.comparator);function iw(){return i_}let iS=new tY(Z.comparator);function iE(...e){let t=iS;for(let r of e)t=t.add(r);return t}let iT=new tY(V);function iO(){return iT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(t)?"-0":t}}function ik(e){return{integerValue:""+e}}function ix(e,t){return rg(t)?ik(t):iC(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this._=void 0}}function iR(e,t,r){return e instanceof iN?ro(r,t):e instanceof iM?ij(e,t):e instanceof iL?iF(e,t):iB(e,t)}function iI(e,t,r){return e instanceof iM?ij(e,t):e instanceof iL?iF(e,t):r}function iP(e,t){return e instanceof iU?rK(t)?t:{integerValue:0}:null}function iD(e,t){return e instanceof iM&&t instanceof iM||e instanceof iL&&t instanceof iL?H(e.elements,t.elements,rw):e instanceof iU&&t instanceof iU?rw(e.operand,t.operand):e instanceof iN&&t instanceof iN}class iN extends iA{}class iM extends iA{constructor(e){super(),this.elements=e}}function ij(e,t){let r=iH(t);for(let t of e.elements)r.some(e=>rw(e,t))||r.push(t);return{arrayValue:{values:r}}}class iL extends iA{constructor(e){super(),this.elements=e}}function iF(e,t){let r=iH(t);for(let t of e.elements)r=r.filter(e=>!rw(e,t));return{arrayValue:{values:r}}}class iU extends iA{constructor(e,t){super(),this.serializer=e,this.operand=t}}function iB(e,t){let r=iP(e,t),n=iV(r)+iV(e.operand);return rq(r)&&rq(e.operand)?ik(n):iC(e.serializer,n)}function iV(e){return t7(e.integerValue||e.doubleValue)}function iH(e){return rJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,t){this.field=e,this.transform=t}}function iW(e,t){return e.field.isEqual(t.field)&&iD(e.transform,t.transform)}function iq(e,t){return void 0===e&&void 0===t||!!e&&!!t&&H(e,t,(e,t)=>iW(e,t))}class i${constructor(e,t){this.version=e,this.transformResults=t}}class iK{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new iK}static exists(e){return new iK(void 0,e)}static updateTime(e){return new iK(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function iJ(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class iG{}function iQ(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new se(e.key,iK.none()):new i1(e.key,e.data,iK.none());{let r=e.data,n=r6.empty(),i=new tY(X.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new i6(e.key,n,new t1(i.toArray()),iK.none())}}function iY(e,t,r){e instanceof i1?i2(e,t,r):e instanceof i6?i4(e,t,r):st(e,t,r)}function iX(e,t,r,n){return e instanceof i1?i3(e,t,r,n):e instanceof i6?i5(e,t,r,n):sr(e,t,r)}function iZ(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=iP(n.transform,e||null);null!=i&&(null===r&&(r=r6.empty()),r.set(n.field,i))}return r||null}function i0(e,t){return!!(e.type===t.type&&e.key.isEqual(t.key)&&e.precondition.isEqual(t.precondition)&&iq(e.fieldTransforms,t.fieldTransforms))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class i1 extends iG{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}function i2(e,t,r){let n=e.value.clone(),i=i9(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function i3(e,t,r,n){if(!iJ(e.precondition,t))return r;let i=e.value.clone(),s=i7(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}class i6 extends iG{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function i4(e,t,r){if(!iJ(e.precondition,t)){t.convertToUnknownDocument(r.version);return}let n=i9(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(i8(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function i5(e,t,r,n){if(!iJ(e.precondition,t))return r;let i=i7(e.fieldTransforms,n,t),s=t.data;return(s.setAll(i8(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function i8(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function i9(e,t,r){let n=new Map;O(e.length===r.length);for(let i=0;i<r.length;i++){let s=e[i],o=s.transform,a=t.data.field(s.field);n.set(s.field,iI(o,a,r[i]))}return n}function i7(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,iR(e,s,t))}return n}class se extends iG{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function st(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function sr(e,t,r){return iJ(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class sn extends iG{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&iY(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=iX(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=iX(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=iv();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,o=this.applyToLocalView(s,i.mutatedFields),a=iQ(s,o=t.has(n.key)?null:o);null!==a&&r.set(n.key,a),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),iE())}isEqual(e){return this.batchId===e.batchId&&H(this.mutations,e.mutations,(e,t)=>i0(e,t))&&H(this.baseMutations,e.baseMutations,(e,t)=>i0(e,t))}}class ss{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){O(e.mutations.length===r.length);let n=iw(),i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new ss(e,t,r,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.count=e}}function sl(e){switch(e){case k.OK:return T();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return T()}}function su(e){return sl(e)&&e!==k.ABORTED}function sc(e){if(void 0===e)return w("GRPC error has no .code"),k.UNKNOWN;switch(e){case n.OK:return k.OK;case n.CANCELLED:return k.CANCELLED;case n.UNKNOWN:return k.UNKNOWN;case n.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case n.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case n.INTERNAL:return k.INTERNAL;case n.UNAVAILABLE:return k.UNAVAILABLE;case n.UNAUTHENTICATED:return k.UNAUTHENTICATED;case n.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case n.NOT_FOUND:return k.NOT_FOUND;case n.ALREADY_EXISTS:return k.ALREADY_EXISTS;case n.PERMISSION_DENIED:return k.PERMISSION_DENIED;case n.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case n.ABORTED:return k.ABORTED;case n.OUT_OF_RANGE:return k.OUT_OF_RANGE;case n.UNIMPLEMENTED:return k.UNIMPLEMENTED;case n.DATA_LOSS:return k.DATA_LOSS;default:return T()}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(n||(n={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sd(K.min(),n,iO(),id(),iE())}}class sh{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sh(r,t,iE(),iE(),iE())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,r,n){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=n}}class sp{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class sm{constructor(e,t,r=t6.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class sg{constructor(){this.pendingResponses=0,this.documentChanges=s_(),this._resumeToken=t6.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=iE(),t=iE(),r=iE();return this.documentChanges.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:T()}}),new sh(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=s_()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let sy="WatchChangeAggregator";class sv{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=id(),this.pendingDocumentTargetMapping=sb(),this.pendingTargetResets=new tY(V)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:T()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,n=this.targetDataForActiveTarget(t);if(n){let e=n.target;if(nM(e)){if(0===r){let r=new Z(e.path);this.removeDocumentFromTarget(t,r,r5.newNoDocument(r,K.min()))}else O(1===r)}else this.getCurrentDocumentCountForTarget(t)!==r&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,n)=>{let i=this.targetDataForActiveTarget(n);if(i){if(r.current&&nM(i.target)){let t=new Z(i.target.path);null!==this.pendingDocumentUpdates.get(t)||this.targetContainsDocument(n,t)||this.removeDocumentFromTarget(n,t,r5.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(n,r.toTargetChange()),r.clearPendingChanges())}});let r=iE();this.pendingDocumentTargetMapping.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||2===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let n=new sd(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=id(),this.pendingDocumentTargetMapping=sb(),this.pendingTargetResets=new tY(V),n}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=this.targetContainsDocument(e,t.key)?2:0;this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let n=this.ensureTargetState(e);this.targetContainsDocument(e,t)?n.addDocumentChange(t,1):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new sg,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new tY(V),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||_(sy,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new sg),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function sb(){return new tK(Z.comparator)}function s_(){return new tK(Z.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sw=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),sS=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),sE=(()=>{let e={};return e.and="AND",e.or="OR",e})();class sT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sO(e){return new x(void 0===e.code?k.UNKNOWN:sc(e.code),e.message||"")}function sC(e,t){return e.useProto3Json||rp(t)?t:{value:t}}function sk(e){let t;return rp(t="object"==typeof e?e.value:e)?null:t}function sx(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function sA(e){let t=t9(e);return new $(t.seconds,t.nanos)}function sR(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function sI(e,t){return e.useProto3Json?(O(void 0===t||"string"==typeof t),t6.fromBase64String(t||"")):(O(void 0===t||t instanceof Uint8Array),t6.fromUint8Array(t||new Uint8Array))}function sP(e,t){return sx(e,t.toTimestamp())}function sD(e){return O(!!e),K.fromTimestamp(sA(e))}function sN(e,t){return sV(e).child("documents").child(t).canonicalString()}function sM(e){let t=Q.fromString(e);return O(oD(t)),t}function sj(e,t){return sN(e.databaseId,t.path)}function sL(e,t){let r=sM(t);if(r.get(1)!==e.databaseId.projectId)throw new x(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new x(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new Z(sH(r))}function sF(e,t){return sN(e.databaseId,t)}function sU(e){let t=sM(e);return 4===t.length?Q.emptyPath():sH(t)}function sB(e){return new Q(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sV(e){return new Q(["projects",e.projectId,"databases",e.database])}function sH(e){return O(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function sz(e,t,r){return{name:sj(e,t),fields:r.value.mapValue.fields}}function sW(e,t){return{name:sj(e,t.key),fields:t.data.value.mapValue.fields,updateTime:sx(e,t.version.toTimestamp()),createTime:sx(e,t.createTime.toTimestamp())}}function sq(e,t,r){let n=sL(e,t.name),i=sD(t.updateTime),s=t.createTime?sD(t.createTime):K.min(),o=new r6({mapValue:{fields:t.fields}}),a=r5.newFoundDocument(n,i,s,o);return r&&a.setHasCommittedMutations(),r?a.setHasCommittedMutations():a}function s$(e){var t;return e.result,e.result.aggregateFields,new r6({mapValue:{fields:null===(t=e.result)||void 0===t?void 0:t.aggregateFields}})}function sK(e,t){O(!!t.found),t.found.name,t.found.updateTime;let r=sL(e,t.found.name),n=sD(t.found.updateTime),i=t.found.createTime?sD(t.found.createTime):K.min(),s=new r6({mapValue:{fields:t.found.fields}});return r5.newFoundDocument(r,n,i,s)}function sJ(e,t){O(!!t.missing),O(!!t.readTime);let r=sL(e,t.missing),n=sD(t.readTime);return r5.newNoDocument(r,n)}function sG(e,t){return"found"in t?sK(e,t):"missing"in t?sJ(e,t):T()}function sQ(e,t){let r;if("targetChange"in t){t.targetChange;let n=sY(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=sI(e,t.targetChange.resumeToken),o=t.targetChange.cause;r=new sm(n,i,s,o&&sO(o)||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=sL(e,n.document.name),s=sD(n.document.updateTime),o=n.document.createTime?sD(n.document.createTime):K.min(),a=new r6({mapValue:{fields:n.document.fields}}),l=r5.newFoundDocument(i,s,o,a);r=new sf(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=sL(e,n.document),s=n.readTime?sD(n.readTime):K.min(),o=r5.newNoDocument(i,s);r=new sf([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=sL(e,n.document);r=new sf([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return T();t.filter;let e=t.filter;e.targetId;let n=new sa(e.count||0);r=new sp(e.targetId,n)}return r}function sY(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:T()}function sX(e){if(!("targetChange"in e))return K.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?K.min():sD(t.readTime)}function sZ(e,t){let r;if(t instanceof i1)r={update:sz(e,t.key,t.value)};else if(t instanceof se)r={delete:sj(e,t.key)};else if(t instanceof i6)r={update:sz(e,t.key,t.data),updateMask:oI(t.fieldMask)};else{if(!(t instanceof sn))return T();r={verify:sj(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>s4(e,t))),t.precondition.isNone||(r.currentDocument=s1(e,t.precondition)),r}function s0(e,t){let r=t.currentDocument?s2(t.currentDocument):iK.none(),n=t.updateTransforms?t.updateTransforms.map(t=>s5(e,t)):[];if(t.update){t.update.name;let i=sL(e,t.update.name),s=new r6({mapValue:{fields:t.update.fields}});return t.updateMask?new i6(i,s,oP(t.updateMask),r,n):new i1(i,s,r,n)}return t.delete?new se(sL(e,t.delete),r):t.verify?new sn(sL(e,t.verify),r):T()}function s1(e,t){return void 0!==t.updateTime?{updateTime:sP(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:T()}function s2(e){return void 0!==e.updateTime?iK.updateTime(sD(e.updateTime)):void 0!==e.exists?iK.exists(e.exists):iK.none()}function s3(e,t){let r=e.updateTime?sD(e.updateTime):sD(t);return r.isEqual(K.min())&&(r=sD(t)),new i$(r,e.transformResults||[])}function s6(e,t){return e&&e.length>0?(O(void 0!==t),e.map(e=>s3(e,t))):[]}function s4(e,t){let r=t.transform;if(r instanceof iN)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof iM)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof iL)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof iU)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw T()}function s5(e,t){let r=null;return"setToServerValue"in t?(O("REQUEST_TIME"===t.setToServerValue),r=new iN):"appendMissingElements"in t?r=new iM(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new iL(t.removeAllFromArray.values||[]):"increment"in t?r=new iU(e,t.increment):T(),new iz(X.fromServerFormat(t.fieldPath),r)}function s8(e,t){return{documents:[sF(e,t.path)]}}function s9(e){return O(1===e.documents.length),n1(nK(sU(e.documents[0])))}function s7(e,t){let r={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(r.parent=sF(e,n),r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r.parent=sF(e,n.popLast()),r.structuredQuery.from=[{collectionId:n.lastSegment()}]);let i=oo(t.filters);i&&(r.structuredQuery.where=i);let s=ou(t.orderBy);s&&(r.structuredQuery.orderBy=s);let o=sC(e,t.limit);return null!==o&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=od(t.startAt)),t.endAt&&(r.structuredQuery.endAt=oh(t.endAt)),r}function oe(e,t,r){let n=s7(e,t),i=[];return r.forEach(e=>{"count"===e.aggregateType?i.push({alias:e.alias.canonicalString(),count:{}}):"avg"===e.aggregateType?i.push({alias:e.alias.canonicalString(),avg:{field:ow(e.fieldPath)}}):"sum"===e.aggregateType&&i.push({alias:e.alias.canonicalString(),sum:{field:ow(e.fieldPath)}})}),{structuredAggregationQuery:{aggregations:i,structuredQuery:n.structuredQuery},parent:n.parent}}function ot(e){let t=sU(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){O(1===n);let e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=oa(r.where));let o=[];r.orderBy&&(o=oc(r.orderBy));let a=null;r.limit&&(a=sk(r.limit));let l=null;r.startAt&&(l=of(r.startAt));let u=null;return r.endAt&&(u=op(r.endAt)),n$(t,i,o,s,a,"F",l,u)}function or(e){return n1(ot(e))}function on(e,t){let r=oi(e,t.purpose);return null==r?null:{"goog-listen-tags":r}}function oi(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return T()}}function os(e,t){let r;let n=t.target;return(r=nM(n)?{documents:s8(e,n)}:{query:s7(e,n)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?r.resumeToken=sR(e,t.resumeToken):t.snapshotVersion.compareTo(K.min())>0&&(r.readTime=sx(e,t.snapshotVersion.toTimestamp())),r}function oo(e){if(0!==e.length)return oO(nu.create(e,"and"))}function oa(e){let t=ol(e);return t instanceof nu&&nh(t)?t.getFilters():[t]}function ol(e){return void 0!==e.unaryFilter?ox(e):void 0!==e.fieldFilter?oA(e):void 0!==e.compositeFilter?oR(e):T()}function ou(e){if(0!==e.length)return e.map(e=>oE(e))}function oc(e){return e.map(e=>oT(e))}function od(e){return{before:e.inclusive,values:e.position}}function oh(e){return{before:!e.inclusive,values:e.position}}function of(e){let t=!!e.before;return new r9(e.values||[],t)}function op(e){let t=!e.before;return new r9(e.values||[],t)}function om(e){return sw[e]}function og(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function oy(e){return sS[e]}function ov(e){return sE[e]}function ob(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return T()}}function o_(e){switch(e){case"AND":return"and";case"OR":return"or";default:return T()}}function ow(e){return{fieldPath:e.canonicalString()}}function oS(e){return X.fromServerFormat(e.fieldPath)}function oE(e){return{field:ow(e.field),direction:om(e.dir)}}function oT(e){return new nn(oS(e.field),og(e.direction))}function oO(e){return e instanceof nl?ok(e):e instanceof nu?oC(e):T()}function oC(e){let t=e.getFilters().map(e=>oO(e));return 1===t.length?t[0]:{compositeFilter:{op:ov(e.op),filters:t}}}function ok(e){if("=="===e.op){if(rQ(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NAN"}};if(rG(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rQ(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NOT_NAN"}};if(rG(e.value))return{unaryFilter:{field:ow(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ow(e.field),op:oy(e.op),value:e.value}}}function ox(e){switch(e.unaryFilter.op){case"IS_NAN":let t=oS(e.unaryFilter.field);return nl.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=oS(e.unaryFilter.field);return nl.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=oS(e.unaryFilter.field);return nl.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=oS(e.unaryFilter.field);return nl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return T()}}function oA(e){return nl.create(oS(e.fieldFilter.field),ob(e.fieldFilter.op),e.fieldFilter.value)}function oR(e){return nu.create(e.compositeFilter.filters.map(e=>ol(e)),o_(e.compositeFilter.op))}function oI(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function oP(e){return new t1((e.fieldPaths||[]).map(e=>X.fromServerFormat(e)))}function oD(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,r,n,i=K.min(),s=K.min(),o=t6.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new oN(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new oN(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new oN(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.remoteSerializer=e}}function oj(e,t){let r;if(t.document)r=sq(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=Z.fromSegments(t.noDocument.path),n=oV(t.noDocument.readTime);r=r5.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return T();let e=Z.fromSegments(t.unknownDocument.path),n=oV(t.unknownDocument.version);r=r5.newUnknownDocument(e,n)}return t.readTime&&r.setReadTime(oU(t.readTime)),r}function oL(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:oF(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=sW(e.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:oB(t.version)};else{if(!t.isUnknownDocument())return T();n.unknownDocument={path:r.path.toArray(),version:oB(t.version)}}return n}function oF(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function oU(e){let t=new $(e[0],e[1]);return K.fromTimestamp(t)}function oB(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function oV(e){let t=new $(e.seconds,e.nanoseconds);return K.fromTimestamp(t)}function oH(e,t,r){let n=r.baseMutations.map(t=>sZ(e.remoteSerializer,t)),i=r.mutations.map(t=>sZ(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}function oz(e,t){let r=(t.baseMutations||[]).map(t=>s0(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){let n=t.mutations[e+1];r.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}let n=t.mutations.map(t=>s0(e.remoteSerializer,t)),i=$.fromMillis(t.localWriteTimeMs);return new si(t.batchId,i,r,n)}function oW(e){let t;let r=oV(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?oV(e.lastLimboFreeSnapshotVersion):K.min();return new oN(t=o$(e.query)?s9(e.query):or(e.query),e.targetId,0,e.lastListenSequenceNumber,r,n,t6.fromBase64String(e.resumeToken))}function oq(e,t){let r;let n=oB(t.snapshotVersion),i=oB(t.lastLimboFreeSnapshotVersion);r=nM(t.target)?s8(e.remoteSerializer,t.target):s7(e.remoteSerializer,t.target);let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nP(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function o$(e){return void 0!==e.documents}function oK(e){return{id:e.bundleId,createTime:oV(e.createTime),version:e.version}}function oJ(e){return{bundleId:e.id,createTime:oB(sD(e.createTime)),version:e.version}}function oG(e){return{name:e.name,query:oY(e.bundledQuery),readTime:oV(e.readTime)}}function oQ(e){return{name:e.name,readTime:oB(sD(e.readTime)),bundledQuery:e.bundledQuery}}function oY(e){let t=ot({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?n6(t,t.limit,"L"):t}function oX(e){return{name:e.name,query:oY(e.bundledQuery),readTime:sD(e.readTime)}}function oZ(e){return{id:e.id,version:e.version,createTime:sD(e.createTime)}}function o0(e,t){return new so(t.largestBatchId,s0(e.remoteSerializer,t.overlayMutation))}function o1(e,t,r){let[n,i,s]=o2(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:sZ(e.remoteSerializer,r.mutation)}}function o2(e,t){let r=t.path.lastSegment();return[e,eF(t.path.popLast()),r]}function o3(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function o6(e,t){let r=t?new eu(t.sequenceNumber,new eh(oV(t.readTime),new Z(eV(t.documentKey)),t.largestBatchId)):eu.empty(),n=e.fields.map(([e,t])=>new ea(X.fromServerFormat(e),t));return new er(e.indexId,e.collectionGroup,n,r)}function o4(e,t,r,n){return{indexId:e,uid:t.uid||"",sequenceNumber:r,readTime:oB(n.readTime),documentKey:eF(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{getBundleMetadata(e,t){return o8(e).get(t).next(e=>{if(e)return oK(e)})}saveBundleMetadata(e,t){return o8(e).put(oJ(t))}getNamedQuery(e,t){return o9(e).get(t).next(e=>{if(e)return oG(e)})}saveNamedQuery(e,t){return o9(e).put(oQ(t))}}function o8(e){return tz(e,tp)}function o9(e){return tz(e,tg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new o7(e,t.uid||"")}getOverlay(e,t){return ae(e).get(o2(this.userId,t)).next(e=>e?o0(this.serializer,e):null)}getOverlays(e,t){let r=iy();return ey.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new so(t,i);n.push(this.saveOverlay(e,s))}),ey.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(eF(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(ae(e).deleteAll(tP,n))}),ey.waitFor(i)}getOverlaysForCollection(e,t,r){let n=iy(),i=eF(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ae(e).loadAll(tP,s).next(e=>{for(let t of e){let e=o0(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i;let s=iy(),o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ae(e).iterate({index:tN,range:o},(e,t,r)=>{let o=o0(this.serializer,t);s.size()<n||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return ae(e).put(o1(this.serializer,this.userId,t))}}function ae(e){return tz(e,tR)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let at=5,ar=10,an=13,ai=15,as=20,ao=25,aa=30,al=37,au=45,ac=50,ad=55,ah=60,af=2;class ap{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,at);else if("booleanValue"in e)this.writeValueTypeLabel(t,ar),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,ai),t.writeNumber(t7(e.integerValue));else if("doubleValue"in e){let r=t7(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,an):(this.writeValueTypeLabel(t,ai),rm(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,as),"string"==typeof r?t.writeString(r):(t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0))}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,aa),t.writeBytes(re(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,au),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?rZ(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):T()}writeIndexString(e,t){this.writeValueTypeLabel(t,ao),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,ad),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,ac),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,al),Z.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,ah),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(af)}}ap.INSTANCE=new ap;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let am="\uD800",ag="\uDBFF",ay=0,av=255,ab=1,a_=255,aw=255,aS=0,aE=64,aT=8,aO=1024;function aC(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function ak(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ax(e){let t=0;for(let r=0;r<8;++r){let n=ak(255&e[r]);if(t+=n,8!==n)break}return t}function aA(e){return Math.ceil((aE-ax(e))/aT)}class aR{constructor(){this.buffer=new Uint8Array(aO),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<am||ag<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<am||ag<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=aA(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=aA(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(a_),this.writeEscapedByteAscending(aw)}writeInfinityDescending(){this.writeEscapedByteDescending(a_),this.writeEscapedByteDescending(aw)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=aC(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=r?255:0;return t}writeByteAscending(e){let t=255&e;t===ay?(this.writeEscapedByteAscending(ay),this.writeEscapedByteAscending(av)):t===a_?(this.writeEscapedByteAscending(a_),this.writeEscapedByteAscending(aS)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===ay?(this.writeEscapedByteDescending(ay),this.writeEscapedByteDescending(av)):t===a_?(this.writeEscapedByteDescending(a_),this.writeEscapedByteDescending(aS)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(ay),this.writeEscapedByteAscending(ab)}writeSeparatorDescending(){this.writeEscapedByteDescending(ay),this.writeEscapedByteDescending(ab)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class aI{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class aP{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class aD{constructor(){this.orderedCode=new aR,this.ascending=new aI(this.orderedCode),this.descending=new aP(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}successor(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new aN(this.indexId,this.documentKey,this.arrayValue,r)}}function aM(e,t){let r=e.indexId-t.indexId;return 0!==r||0!==(r=aj(e.arrayValue,t.arrayValue))||0!==(r=aj(e.directionalValue,t.directionalValue))?r:Z.comparator(e.documentKey,t.documentKey)}function aj(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){for(let t of(this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilter=e:this.equalityFilters.push(e)}}servedByIndex(e){O(e.collectionGroup===this.collectionId);let t=en(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=ei(e),n=0,i=0;for(;n<r.length&&this.hasMatchingEqualityFilter(r[n]);++n);if(n===r.length)return!0;if(void 0!==this.inequalityFilter){let e=r[n];if(!this.matchesFilter(this.inequalityFilter,e)||!this.matchesOrderBy(this.orderBys[i++],e))return!1;++n}for(;n<r.length;++n){let e=r[n];if(i>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[i++],e))return!1}return!0}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(e){var t,r;if(O(e instanceof nl||e instanceof nu),e instanceof nl){if(!(e instanceof nk))return e;{let n=(null===(r=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(t=>nl.create(e.field,"==",t)))||[];return nu.create(n,"or")}}let n=e.filters.map(e=>aF(e));return nu.create(n,e.op)}function aU(e){if(0===e.getFilters().length)return[];let t=aW(aF(e));return(O(aH(t)),aB(t)||aV(t))?[t]:t.getFilters()}function aB(e){return e instanceof nl}function aV(e){return e instanceof nu&&nh(e)}function aH(e){return aB(e)||aV(e)||az(e)}function az(e){if(e instanceof nu&&nd(e)){for(let t of e.getFilters())if(!aB(t)&&!aV(t))return!1;return!0}return!1}function aW(e){if(O(e instanceof nl||e instanceof nu),e instanceof nl)return e;if(1===e.filters.length)return aW(e.filters[0]);let t=e.filters.map(e=>aW(e)),r=nu.create(t,e.op);return aH(r=aG(r))?r:(O(r instanceof nu),O(nc(r)),O(r.filters.length>1),r.filters.reduce((e,t)=>aq(e,t)))}function aq(e,t){let r;return O(e instanceof nl||e instanceof nu),O(t instanceof nl||t instanceof nu),aG(r=e instanceof nl?t instanceof nl?a$(e,t):aJ(e,t):t instanceof nl?aJ(t,e):aK(e,t))}function a$(e,t){return nu.create([e,t],"and")}function aK(e,t){if(O(e.filters.length>0&&t.filters.length>0),nc(e)&&nc(t))return nv(e,t.getFilters());let r=nd(e)?e:t,n=nd(e)?t:e,i=r.filters.map(e=>aq(e,n));return nu.create(i,"or")}function aJ(e,t){if(nc(t))return nv(t,e.getFilters());{let r=t.filters.map(t=>aq(e,t));return nu.create(r,"or")}}function aG(e){if(O(e instanceof nl||e instanceof nu),e instanceof nl)return e;let t=e.getFilters();if(1===t.length)return aG(t[0]);if(nf(e))return e;let r=t.map(e=>aG(e)),n=[];return(r.forEach(t=>{t instanceof nl?n.push(t):t instanceof nu&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length)?n[0]:nu.create(n,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(){this.collectionParentIndex=new aY}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),ey.resolve()}getCollectionParents(e,t){return ey.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return ey.resolve()}deleteFieldIndex(e,t){return ey.resolve()}getDocumentsMatchingTarget(e,t){return ey.resolve(null)}getIndexType(e,t){return ey.resolve(0)}getFieldIndexes(e,t){return ey.resolve([])}getNextCollectionGroupToUpdate(e){return ey.resolve(null)}getMinOffset(e,t){return ey.resolve(eh.min())}getMinOffsetFromCollectionGroup(e,t){return ey.resolve(eh.min())}updateCollectionGroup(e,t,r){return ey.resolve()}updateIndexEntries(e,t){return ey.resolve()}}class aY{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new tY(Q.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new tY(Q.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aX="IndexedDbIndexManager",aZ=new Uint8Array(0);class a0{constructor(e,t){this.user=e,this.databaseId=t,this.collectionParentsCache=new aY,this.targetToDnfSubTargets=new iu(e=>nP(e),(e,t)=>nN(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let i={collectionId:r,parent:eF(n)};return a1(e).put(i)}return ey.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[z(t),""],!1,!0);return a1(e).loadAll(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(eV(n.parent))}return r})}addFieldIndex(e,t){let r=a3(e),n=o3(t);delete n.indexId;let i=r.add(n);if(!t.indexState)return i.next();{let r=a6(e);return i.next(e=>{r.put(o4(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=a3(e),n=a6(e),i=a2(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){let r=a2(e),n=!0,i=new Map;return ey.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(!n)return ey.resolve(null);{let e=iE(),n=[];return ey.forEach(i,(i,s)=>{_(aX,`Using index ${eo(i)} to execute ${nP(t)}`);let o=nL(s,i),a=nF(s,i),l=nU(s,i),u=nB(s,i),c=this.encodeBound(i,s,l),d=this.encodeBound(i,s,u),h=this.encodeValues(i,s,a),f=this.generateIndexRanges(i.indexId,o,c,l.inclusive,d,u.inclusive,h);return ey.forEach(f,i=>r.loadFirst(i,t.limit).next(t=>{t.forEach(t=>{let r=Z.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:aU(nu.create(e.filters,"and")).map(t=>nI(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,n,i,s,o){let a=(null!=t?t.length:1)*Math.max(r.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){let a=t?this.encodeSingleElement(t[c/l]):aZ,d=this.generateLowerBound(e,a,r[c%l],n),h=this.generateUpperBound(e,a,i[c%l],s),f=o.map(t=>this.generateLowerBound(e,a,t,!0));u.push(...this.createRange(d,h,f))}return u}generateLowerBound(e,t,r,n){let i=new aN(e,Z.empty(),t,r);return n?i:i.successor()}generateUpperBound(e,t,r,n){let i=new aN(e,Z.empty(),t,r);return n?i.successor():i}getFieldIndex(e,t){let r=new aL(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.servedByIndex(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.getSubTargets(t);return ey.forEach(n,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<nz(t)&&(r=1):r=0})).next(()=>nW(t)&&n.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new aD;for(let n of ei(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.forKind(n.kind);ap.INSTANCE.writeIndexValue(e,i)}return r.encodedBytes()}encodeSingleElement(e){let t=new aD;return ap.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new aD;return ap.INSTANCE.writeIndexValue(rW(this.databaseId,t),r.forKind(es(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let n=[];n.push(new aD);let i=0;for(let s of ei(e)){let e=r[i++];for(let r of n)if(this.isInFilter(t,s.fieldPath)&&rJ(e))n=this.expandIndexValues(n,s,e);else{let t=r.forKind(s.kind);ap.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(n)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new aD;n.seed(r.encodedBytes()),ap.INSTANCE.writeIndexValue(e,n.forKind(t.kind)),i.push(n)}return i}isInFilter(e,t){return!!e.filters.find(e=>e instanceof nl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=a3(e),n=a6(e);return(t?r.loadAll(t_,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return ey.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(o6(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:V(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=a3(e),i=a6(e);return this.getNextSequenceNumber(e).next(e=>n.loadAll(t_,IDBKeyRange.bound(t,t)).next(t=>ey.forEach(t,t=>i.put(o4(t.indexId,this.user,e,r)))))}updateIndexEntries(e,t){let r=new Map;return ey.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?ey.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),ey.forEach(i,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let i=this.computeIndexEntries(n,r);return t.isEqual(i)?ey.resolve():this.updateEntries(e,n,r,t,i)}))))})}addIndexEntry(e,t,r,n){return a2(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(r,t.key),documentKey:t.key.path.toArray()})}deleteIndexEntry(e,t,r,n){return a2(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.encodeDirectionalKey(r,t.key),t.key.path.toArray()])}getExistingIndexEntries(e,t,r){let n=a2(e),i=new tY(aM);return n.iterate({index:tx,range:IDBKeyRange.only([r.indexId,this.uid,this.encodeDirectionalKey(r,t)])},(e,n)=>{i=i.add(new aN(r.indexId,t,n.arrayValue,n.directionalValue))}).next(()=>i)}computeIndexEntries(e,t){let r=new tY(aM),n=this.encodeDirectionalElements(t,e);if(null==n)return r;let i=en(t);if(null!=i){let s=e.data.field(i.fieldPath);if(rJ(s))for(let i of s.arrayValue.values||[])r=r.add(new aN(t.indexId,e.key,this.encodeSingleElement(i),n))}else r=r.add(new aN(t.indexId,e.key,aZ,n));return r}updateEntries(e,t,r,n,i){_(aX,"Updating index entries for document '%s'",t.key);let s=[];return tZ(n,i,aM,n=>{s.push(this.addIndexEntry(e,t,r,n))},n=>{s.push(this.deleteIndexEntry(e,t,r,n))}),ey.waitFor(s)}getNextSequenceNumber(e){let t=1;return a6(e).iterate({index:tT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>aM(e,t)).filter((e,t,r)=>!t||0!==aM(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=aM(i,e),s=aM(i,t);if(0===r)n[0]=e.successor();else if(r>0&&s<0)n.push(i),n.push(i.successor());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.isRangeMatchable(n[e],n[e+1]))return[];let t=[n[e].indexId,this.uid,n[e].arrayValue,n[e].directionalValue,aZ,[]],r=[n[e+1].indexId,this.uid,n[e+1].arrayValue,n[e+1].directionalValue,aZ,[]];i.push(IDBKeyRange.bound(t,r))}return i}isRangeMatchable(e,t){return aM(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(a4)}getMinOffset(e,t){return ey.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||T())).next(a4)}}function a1(e){return tz(e,tc)}function a2(e){return tz(e,tC)}function a3(e){return tz(e,tv)}function a6(e){return tz(e,tS)}function a4(e){O(0!==e.length);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>ef(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new eh(t.readTime,t.documentKey,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(e,t,r){let n=e.store(eK),i=e.store(e1),s=[],o=IDBKeyRange.only(r.batchId),a=0,l=n.iterate({range:o},(e,t,r)=>(a++,r.delete()));s.push(l.next(()=>{O(1===a)}));let u=[];for(let e of r.mutations){let n=eZ(t,e.key.path,r.batchId);s.push(i.delete(n)),u.push(e.key)}return ey.waitFor(s).next(()=>u)}function a8(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw T();return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.documentKeysByBatchId={}}static forUser(e,t,r,n){return O(""!==e.uid),new a9(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lt(e).iterate({index:eG,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=lr(e),s=lt(e);return s.add({}).next(o=>{O("number"==typeof o);let a=new si(o,t,r,n),l=oH(this.serializer,this.userId,a),u=[],c=new tY((e,t)=>V(e.canonicalString(),t.canonicalString()));for(let e of n){let t=eZ(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,e0))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[o]=a.keys()}),ey.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return lt(e).get(t).next(e=>e?(O(e.userId===this.userId),oz(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?ey.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return lt(e).iterate({index:eG,range:n},(e,t,n)=>{t.userId===this.userId&&(O(t.batchId>=r),i=oz(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=rf;return lt(e).iterate({index:eG,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,rf],[this.userId,Number.POSITIVE_INFINITY]);return lt(e).loadAll(eG,t).next(e=>e.map(e=>oz(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=eX(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return lr(e).iterate({range:n},(r,n,s)=>{let[o,a,l]=r,u=eV(a);if(o!==this.userId||!t.path.isEqual(u)){s.done();return}return lt(e).get(l).next(e=>{if(!e)throw T();O(e.userId===this.userId),i.push(oz(this.serializer,e))})}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tY(V),n=[];return t.forEach(t=>{let i=eX(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=lr(e).iterate({range:s},(e,n,i)=>{let[s,o,a]=e,l=eV(o);if(s!==this.userId||!t.path.isEqual(l)){i.done();return}r=r.add(a)});n.push(o)}),ey.waitFor(n).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=eX(this.userId,r),s=IDBKeyRange.lowerBound(i),o=new tY(V);return lr(e).iterate({range:s},(e,t,i)=>{let[s,a,l]=e,u=eV(a);if(s!==this.userId||!r.isPrefixOf(u)){i.done();return}u.length===n&&(o=o.add(l))}).next(()=>this.lookupMutationBatches(e,o))}lookupMutationBatches(e,t){let r=[],n=[];return t.forEach(t=>{n.push(lt(e).get(t).next(e=>{if(null===e)throw T();O(e.userId===this.userId),r.push(oz(this.serializer,e))}))}),ey.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return a5(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),ey.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ey.resolve();let r=IDBKeyRange.lowerBound(eY(this.userId)),n=[];return lr(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId){r.done();return}{let t=eV(e[1]);n.push(t)}}).next(()=>{O(0===n.length)})})}containsKey(e,t){return a7(e,this.userId,t)}getMutationQueueMetadata(e){return ln(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:rf,lastStreamToken:""})}}function a7(e,t,r){let n=eX(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),o=!1;return lr(e).iterate({range:s,keysOnly:!0},(e,r,n)=>{let[s,a,l]=e;s===t&&a===i&&(o=!0),n.done()}).next(()=>o)}function le(e,t){let r=!1;return ln(e).iterateSerial(n=>a7(e,n,t).next(e=>(e&&(r=!0),ey.resolve(!e)))).next(()=>r)}function lt(e){return tz(e,eK)}function lr(e){return tz(e,e1)}function ln(e){return tz(e,eq)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let li=2;class ls{constructor(e){this.lastId=e}next(){return this.lastId+=li,this.lastId}static forTargetCache(){return new ls(2-li)}static forSyncEngine(){return new ls(1-li)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new ls(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>K.fromTimestamp(new $(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.saveMetadata(e,n)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>la(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(O(t.targetCount>0),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let n=0,i=[];return la(e).iterate((s,o)=>{let a=oW(o);a.sequenceNumber<=t&&null===r.get(a.targetId)&&(n++,i.push(this.removeTargetData(e,a)))}).next(()=>ey.waitFor(i)).next(()=>n)}forEachTarget(e,t){return la(e).iterate((e,r)=>{t(oW(r))})}retrieveMetadata(e){return ll(e).get(tl).next(e=>(O(null!==e),e))}saveMetadata(e,t){return ll(e).put(tl,t)}saveTargetData(e,t){return la(e).put(oq(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=nP(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return la(e).iterate({range:n,index:tr},(e,r,n)=>{let s=oW(r);nN(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=lu(e);return t.forEach(t=>{let s=eF(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),ey.waitFor(n)}removeMatchingKeys(e,t,r){let n=lu(e);return ey.forEach(t,t=>{let i=eF(t.path);return ey.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=lu(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=lu(e),i=iE();return n.iterate({range:r,keysOnly:!0},(e,t,r)=>{let n=new Z(eV(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=eF(t.path),n=IDBKeyRange.bound([r],[z(r)],!1,!0),i=0;return lu(e).iterate({index:to,keysOnly:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}getTargetDataForTarget(e,t){return la(e).get(t).next(e=>e?oW(e):null)}}function la(e){return tz(e,te)}function ll(e){return tz(e,tu)}function lu(e){return tz(e,ti)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ld=-1,lh=41943040;class lf{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lf(e,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}lf.DEFAULT_COLLECTION_PERCENTILE=10,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lf.DEFAULT=new lf(lh,lf.DEFAULT_COLLECTION_PERCENTILE,lf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lf.DISABLED=new lf(ld,0,0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lp="LruGarbageCollector",lm=1048576,lg=null,ly=null;function lv([e,t],[r,n]){let i=V(e,r);return 0===i?V(t,n):i}class lb{constructor(e){this.maxElements=e,this.buffer=new tY(lv),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>lv(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class l_{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ey.resolve(eD.INVALID);let r=new lb(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===ld?(_("LruGarbageCollector","Garbage collection skipped; disabled"),ey.resolve(lc)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lc):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,n,i,s,o,a,l;let u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(_("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,o=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(l=Date.now(),b()<=LogLevel.DEBUG&&_("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${n} in ${o-s}ms
	Removed ${i} targets in ${a-o}ms
	Removed ${e} documents in ${l-a}ms
Total Duration: ${l-u}ms`),ey.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}function lw(e,t){return new l_(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.db=e,this.garbageCollector=lw(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return lO(e,r)}removeReference(e,t,r){return lO(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lO(e,t)}isPinned(e,t){return le(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.forEachOrphanedDocument(e,(s,o)=>{if(o<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,K.min()),lu(e).delete(lE(s))))});n.push(t)}}).next(()=>ey.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lO(e,t)}forEachOrphanedDocument(e,t){let r;let n=lu(e),i=eD.INVALID;return n.iterate({index:to},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==eD.INVALID&&t(new Z(eV(r)),i),i=o,r=s):i=eD.INVALID}).next(()=>{i!==eD.INVALID&&t(new Z(eV(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lE(e){return[0,eF(e.path)]}function lT(e,t){return{targetId:0,path:eF(e.path),sequenceNumber:t}}function lO(e,t){return lu(e).put(lT(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,r5.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?ey.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lI(e).put(r)}removeEntry(e,t,r){return lI(e).delete(lD(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=r5.newInvalidDocument(t);return lI(e).iterate({index:e6,range:IDBKeyRange.only(lP(t))},(e,n)=>{r=this.maybeDecodeDocument(t,n)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:r5.newInvalidDocument(t)};return lI(e).iterate({index:e6,range:IDBKeyRange.only(lP(t))},(e,n)=>{r={document:this.maybeDecodeDocument(t,n),size:a8(n)}}).next(()=>r)}getEntries(e,t){let r=id();return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n)}).next(()=>r)}getSizedEntries(e,t){let r=id(),n=new tK(Z.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i),n=n.insert(e,a8(t))}).next(()=>({documents:r,sizeMap:n}))}forEachDbEntry(e,t,r){if(t.isEmpty())return ey.resolve();let n=new tY(lM);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(lP(n.first()),lP(n.last())),s=n.getIterator(),o=s.getNext();return lI(e).iterate({index:e6,range:i},(e,t,n)=>{let i=Z.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&0>lM(o,i);)r(o,null),o=s.getNext();o&&o.isEqual(i)&&(r(o,t),o=s.hasNext()?s.getNext():null),o?n.skip(lP(o)):n.done()}).next(()=>{for(;o;)r(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n){let i=t.path,s=[i.popLast().toArray(),i.lastSegment(),oF(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lI(e).loadAll(IDBKeyRange.bound(s,o,!0)).next(e=>{let r=id();for(let i of e){let e=this.maybeDecodeDocument(Z.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ie(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=id(),s=lN(t,r),o=lN(t,eh.max());return lI(e).iterate({index:e5,range:IDBKeyRange.bound(s,o,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(Z.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new lA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return lR(e).get(e7).next(e=>(O(!!e),e))}setMetadata(e,t){return lR(e).put(e7,t)}maybeDecodeDocument(e,t){if(t){let e=oj(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(K.min())))return e}return r5.newInvalidDocument(e)}}function lx(e){return new lk(e)}class lA extends null{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new iu(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new tY((e,t)=>V(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let o=this.documentStates.get(i);if(t.push(this.documentCache.removeEntry(e,i,o.readTime)),s.isValidDocument()){let a=oL(this.documentCache.serializer,s);n=n.add(i.path.popLast());let l=a8(a);r+=l-o.size,t.push(this.documentCache.addEntry(e,i,a))}else if(r-=o.size,this.trackRemovals){let r=oL(this.documentCache.serializer,s.convertToNoDocument(K.min()));t.push(this.documentCache.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),ey.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function lR(e){return tz(e,e9)}function lI(e){return tz(e,e2)}function lP(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lD(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],oF(t),r[r.length-1]]}function lN(e,t){let r=t.documentKey.path.toArray();return[e,oF(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function lM(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=V(r[e],n[e]))return i;return(i=V(r.length,n.length))||(i=V(r[r.length-2],n[n.length-2]))?i:V(r[r.length-1],n[n.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lj=15;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&iX(r.mutation,e,t1.empty(),$.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,iE()).next(()=>t))}getLocalViewOfDocuments(e,t,r=iE()){let n=iy();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=ip();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=iy();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,iE()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=id(),s=ib(),o=im();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof i6)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),iX(o.mutation,t,o.mutation.getFieldMask(),$.now())):s.set(t.key,t1.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return o.set(e,new lL(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),o))}recalculateAndSaveOverlays(e,t){let r=ib(),n=new tK((e,t)=>e-t),i=iE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=r.get(e)||t1.empty();o=i.applyToLocalView(s,o),r.set(e,o);let a=(n.get(i.batchId)||iE()).add(e);n=n.insert(i.batchId,a)})}).next(()=>{let s=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),a=n.key,l=n.value,u=iv();l.forEach(e=>{if(!i.has(e)){let n=iQ(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ey.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r){return nX(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nZ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):ey.resolve(iy()),o=ee,a=i;return s.next(t=>ey.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t))?ey.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)})).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,iE())).next(e=>({batchId:o,changes:ig(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(e=>{let t=ip();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r){let n=t.collectionGroup,i=ip();return this.indexManager.getCollectionParents(e,n).next(s=>ey.forEach(s,s=>{let o=nJ(t,s.child(n));return this.getDocumentsMatchingCollectionQuery(e,o,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(n=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n))).next(e=>{n.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,r5.newInvalidDocument(n)))});let r=ip();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&iX(s.mutation,i,t1.empty(),$.now()),ie(t,i)&&(r=r.insert(e,i))}),r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return ey.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,oZ(t)),ey.resolve()}getNamedQuery(e,t){return ey.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,oX(t)),ey.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(){this.overlays=new tK(Z.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return ey.resolve(this.overlays.get(t))}getOverlays(e,t){let r=iy();return ey.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.saveOverlay(e,t,n)}),ey.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.overlayByBatchId.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),ey.resolve()}getOverlaysForCollection(e,t,r){let n=iy(),i=t.length+1,s=new Z(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return ey.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new tK((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iy(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=iy(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return ey.resolve(o)}saveOverlay(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.overlayByBatchId.get(n.largestBatchId).delete(r.key);this.overlayByBatchId.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new so(t,r));let i=this.overlayByBatchId.get(t);void 0===i&&(i=iE(),this.overlayByBatchId.set(t,i)),this.overlayByBatchId.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.refsByKey=new tY(lH.compareByKey),this.refsByTarget=new tY(lH.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new lH(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new lH(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new Z(new Q([])),r=new lH(t,e),n=new lH(t,e+1),i=[];return this.refsByTarget.forEachInRange([r,n],e=>{this.removeRef(e),i.push(e.key)}),i}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new Z(new Q([])),r=new lH(t,e),n=new lH(t,e+1),i=iE();return this.refsByTarget.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new lH(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class lH{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return Z.comparator(e.key,t.key)||V(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return V(e.targetOrBatchId,t.targetOrBatchId)||Z.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new tY(lH.compareByKey)}checkEmpty(e){return ey.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new si(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new lH(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ey.resolve(s)}lookupMutationBatch(e,t){return ey.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=this.indexOfBatchId(r),i=n<0?0:n;return ey.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ey.resolve(0===this.mutationQueue.length?rf:this.nextBatchId-1)}getAllMutationBatches(e){return ey.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new lH(t,0),n=new lH(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,n],e=>{let t=this.findMutationBatch(e.targetOrBatchId);i.push(t)}),ey.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tY(V);return t.forEach(e=>{let t=new lH(e,0),n=new lH(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,n],e=>{r=r.add(e.targetOrBatchId)})}),ey.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;Z.isDocumentKey(i)||(i=i.child(""));let s=new lH(new Z(i),0),o=new tY(V);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.targetOrBatchId)),!0)},s),ey.resolve(this.findMutationBatches(o))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){O(0===this.indexOfExistingBatchId(t.batchId,"removed")),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return ey.forEach(t.mutations,n=>{let i=new lH(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new lH(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(r);return ey.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,ey.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(){return new tK(Z.comparator)}class lq{constructor(e){this.sizer=e,this.docs=lW(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return ey.resolve(r?r.document.mutableCopy():r5.newInvalidDocument(t))}getEntries(e,t){let r=id();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():r5.newInvalidDocument(e))}),ey.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=id(),s=t.path,o=new Z(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=ef(ed(o),r))&&(n.has(o.key)||ie(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ey.resolve(i)}getAllFromCollectionGroup(e,t,r,n){T()}forEachDocumentKey(e,t){return ey.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new lK(this)}getSize(e){return ey.resolve(this.size)}}function l$(e){return new lq(e)}class lK extends lC{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.documentCache.addEntry(e,n)):this.documentCache.removeEntry(r)}),ey.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(e){this.persistence=e,this.targets=new iu(e=>nP(e),nN),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new lV,this.targetCount=0,this.targetIdGenerator=ls.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),ey.resolve()}getLastRemoteSnapshotVersion(e){return ey.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ey.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),ey.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),ey.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new ls(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,ey.resolve()}updateTargetData(e,t){return this.saveTargetData(t),ey.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,ey.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.targets.forEach((s,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),ey.waitFor(i).next(()=>n)}getTargetCount(e){return ey.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return ey.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),ey.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),ey.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),ey.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return ey.resolve(r)}containsKey(e,t){return ey.resolve(this.references.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lG="MemoryPersistence";class lQ{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new eD(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new lJ(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new aQ,this.remoteDocumentCache=l$(r),this.serializer=new oM(t),this.bundleCache=new lU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new lz(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){_(lG,"Starting transaction:",e);let n=new lY(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(n).next(e=>this.referenceDelegate.onTransactionCommitted(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return ey.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class lY extends em{constructor(e){super(),this.currentSequenceNumber=e}}class lX{constructor(e){this.persistence=e,this.localViewReferences=new lV,this._orphanedDocuments=null}static factory(e){return new lX(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw T()}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),ey.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),ey.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),ey.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ey.forEach(this.orphanedDocuments,r=>{let n=Z.fromPath(r);return this.isReferenced(e,n).next(e=>{e||t.removeEntry(n,K.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return ey.or([()=>ey.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,n){let i=new e_("createOrUpgrade",t);r<1&&n>=1&&(l1(e),l2(e),l8(e),l6(e));let s=ey.resolve();return r<3&&n>=3&&(0!==r&&(l9(e),l8(e)),s=s.next(()=>ue(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>l3(e,i))),s=s.next(()=>{ut(e)})),r<5&&n>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(i))),r<6&&n>=6&&(s=s.next(()=>(l5(e),this.addDocumentGlobal(i)))),r<7&&n>=7&&(s=s.next(()=>this.ensureSequenceNumbers(i))),r<8&&n>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,i))),r<9&&n>=9&&(s=s.next(()=>{l7(e)})),r<10&&n>=10&&(s=s.next(()=>this.rewriteCanonicalIds(i))),r<11&&n>=11&&(s=s.next(()=>{ur(e),un(e)})),r<12&&n>=12&&(s=s.next(()=>{us(e)})),r<13&&n>=13&&(s=s.next(()=>l4(e)).next(()=>this.rewriteRemoteDocumentCache(e,i)).next(()=>e.deleteObjectStore(eH))),r<14&&n>=14&&(s=s.next(()=>this.runOverlayMigration(e,i))),r<15&&n>=15&&(s=s.next(()=>ui(e))),s}addDocumentGlobal(e){let t=0;return e.store(eH).iterate((e,r)=>{t+=a8(r)}).next(()=>{let r={byteSize:t};return e.store(e9).put(e7,r)})}removeAcknowledgedMutations(e){let t=e.store(eq),r=e.store(eK);return t.loadAll().next(t=>ey.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,rf],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(eG,n).next(r=>ey.forEach(r,r=>{O(r.userId===t.userId);let n=oz(this.serializer,r);return a5(e,t.userId,n).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(ti),r=e.store(eH);return e.store(tu).get(tl).next(e=>{let n=r=>t.put({targetId:0,path:eF(r),sequenceNumber:e.highestListenSequenceNumber}),i=[];return r.iterate((e,r)=>{let s=new Q(e),o=l0(s);i.push(t.get(o).next(e=>e?ey.resolve():n(s)))}).next(()=>ey.waitFor(i))})}createCollectionParentIndex(e,t){e.createObjectStore(tc,{keyPath:td});let r=t.store(tc),n=new aY,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:eF(n)})}};return t.store(eH).iterate({keysOnly:!0},(e,t)=>i(new Q(e).popLast())).next(()=>t.store(e1).iterate({keysOnly:!0},([e,t,r],n)=>i(eV(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(te);return t.iterate((e,r)=>{let n=oW(r),i=oq(this.serializer,n);return t.put(i)})}rewriteRemoteDocumentCache(e,t){let r=t.store(eH),n=[];return r.iterate((e,r)=>{let i=t.store(e2),s=uo(r).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(o))}).next(()=>ey.waitFor(n))}runOverlayMigration(e,t){let r=t.store(eK),n=lx(this.serializer),i=new lQ(lX.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!==(t=r.get(e.userId))&&void 0!==t?t:iE();oz(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),ey.forEach(r,(e,r)=>{let s=new p(r),o=o7.forUser(this.serializer,s),a=i.getIndexManager(s);return new lF(n,a9.forUser(s,this.serializer,a,i.referenceDelegate),o,a).recalculateAndSaveOverlaysForDocumentKeys(new tH(t,eD.INVALID),e).next()})})}}function l0(e){return[0,eF(e)]}function l1(e){e.createObjectStore(ez)}function l2(e){e.createObjectStore(eq,{keyPath:e$}),e.createObjectStore(eK,{keyPath:eJ,autoIncrement:!0}).createIndex(eG,eQ,{unique:!0}),e.createObjectStore(e1)}function l3(e,t){return t.store(eK).loadAll().next(r=>{e.deleteObjectStore(eK),e.createObjectStore(eK,{keyPath:eJ,autoIncrement:!0}).createIndex(eG,eQ,{unique:!0});let n=t.store(eK),i=r.map(e=>n.put(e));return ey.waitFor(i)})}function l6(e){e.createObjectStore(eH)}function l4(e){let t=e.createObjectStore(e2,{keyPath:e3});t.createIndex(e6,e4),t.createIndex(e5,e8)}function l5(e){e.createObjectStore(e9)}function l8(e){e.createObjectStore(ti,{keyPath:ts}).createIndex(to,ta,{unique:!0}),e.createObjectStore(te,{keyPath:tt}).createIndex(tr,tn,{unique:!0}),e.createObjectStore(tu)}function l9(e){e.deleteObjectStore(ti),e.deleteObjectStore(te),e.deleteObjectStore(tu)}function l7(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function ue(e){let t=e.store(tu),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:K.min().toTimestamp(),targetCount:0};return t.put(tl,r)}function ut(e){e.createObjectStore(th,{keyPath:tf})}function ur(e){e.createObjectStore(tp,{keyPath:tm})}function un(e){e.createObjectStore(tg,{keyPath:ty})}function ui(e){e.createObjectStore(tv,{keyPath:tb,autoIncrement:!0}).createIndex(t_,tw,{unique:!1}),e.createObjectStore(tS,{keyPath:tE}).createIndex(tT,tO,{unique:!1}),e.createObjectStore(tC,{keyPath:tk}).createIndex(tx,tA,{unique:!1})}function us(e){let t=e.createObjectStore(tR,{keyPath:tI});t.createIndex(tP,tD,{unique:!1}),t.createIndex(tN,tM,{unique:!1})}function uo(e){return e.document?new Z(Q.fromString(e.document.name).popFirst(5)):e.noDocument?Z.fromSegments(e.noDocument.path):e.unknownDocument?Z.fromSegments(e.unknownDocument.path):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua="IndexedDbPersistence",ul=null,uu=5e3,uc=4e3,ud=null,uh=null,uf="firestore_zombie",up="main";class um{constructor(e,t,r,n,i,s,o,a,l,u,c=lj){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=i,this.window=s,this.document=o,this.sequenceNumberSyncer=l,this.forceOwningTab=u,this.schemaVersion=c,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!um.isAvailable())throw new x(k.UNIMPLEMENTED,uh);this.referenceDelegate=new lS(this,n),this.dbName=t+up,this.serializer=new oM(a),this.simpleDb=new ew(this.dbName,this.schemaVersion,new lZ(this.serializer)),this.targetCache=new lo(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lx(this.serializer),this.bundleCache=new o5,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===u&&w(ua,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new x(k.FAILED_PRECONDITION,ud);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new eD(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>uy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(eT(e))return _(ua,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _(ua,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return ug(e).get(eW).next(e=>ey.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return uy(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,ul)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=tz(e,th);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,ul),n=e.filter(e=>-1===r.indexOf(e));return ey.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",uc,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?ey.resolve(!0):ug(e).get(eW).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,uu)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new x(k.FAILED_PRECONDITION,ud);return!1}}return!!this.networkEnabled&&!!this.inForeground||uy(e).loadAll().next(e=>void 0===this.filterActiveClients(e,uu).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&_(ua,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[ez,th],e=>{let t=new tH(e,eD.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>uy(e).loadAll().next(e=>this.filterActiveClients(e,ul).map(e=>e.clientId)))}get started(){return this._started}getMutationQueue(e,t){return a9.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new a0(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return o7.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let n;_(ua,"Starting transaction:",e);let i="readonly"===t?"readonly":"readwrite",s=tV(this.schemaVersion);return this.simpleDb.runTransaction(e,i,s,i=>(n=new tH(i,this.listenSequence?this.listenSequence.next():eD.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(n).next(e=>!!e||this.canActAsPrimary(n)).next(t=>{if(!t)throw w(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new x(k.FAILED_PRECONDITION,ep);return r(n)}).next(e=>this.acquireOrExtendPrimaryLease(n).next(()=>e)):this.verifyAllowTabSynchronization(n).next(()=>r(n))).then(e=>(n.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return ug(e).get(eW).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,uu)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new x(k.FAILED_PRECONDITION,ud)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ug(e).put(eW,t)}static isAvailable(){return ew.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=ug(e);return t.get(eW).next(e=>this.isLocalClient(e)?(_(ua,"Releasing primary lease."),t.delete(eW)):ey.resolve())}isWithinAge(e,t){let r=Date.now(),n=r-t,i=r;return!(e<n)&&(!(e>i)||(w(`Detected an update time that is in the future: ${e} > ${i}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied(),isSafari()&&navigator.appVersion.match(/Version\/1[45]/)&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null===(t=this.webStorage)||void 0===t?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return _(ua,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return w(ua,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){w("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${uf}_${this.persistenceKey}_${e}`}}function ug(e){return tz(e,ez)}function uy(e){return tz(e,th)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uv="LocalStore",ub=3e8;class u_{constructor(e,t,r,n){this.persistence=e,this.queryEngine=t,this.serializer=n,this.targetDataByTarget=new tK(V),this.targetIdByTarget=new iu(e=>nP(e),nN),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lF(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function uw(e,t,r,n){return new u_(e,t,r,n)}async function uS(e,t){let r=C(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(i=>(n=i,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let i=[],s=[],o=iE();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return r.localDocuments.getDocuments(e,o).next(e=>({affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}))})})}function uE(e,t){let r,n;let i=C(e),s=$.now(),o=t.reduce((e,t)=>e.add(t.key),iE());return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=id(),l=iE();return i.remoteDocuments.getEntries(e,o).next(e=>{(a=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,a)).next(n=>{r=n;let o=[];for(let e of t){let t=iZ(e,r.get(e.key).overlayedDocument);null!=t&&o.push(new i6(e.key,t,r4(t.value.mapValue),iK.exists(!0)))}return i.mutationQueue.addMutationBatch(e,s,o,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(r,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:ig(r)}))}function uT(e,t){let r=C(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return uU(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,uO(t))).next(()=>r.localDocuments.getDocuments(e,n))})}function uO(e){let t=iE();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function uC(e,t){let r=C(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(O(null!==t),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}function uk(e){let t=C(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function ux(e){let t=C(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function uA(e,t){let r=C(e),n=t.snapshotVersion,i=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=r.targetDataByTarget;let o=[];t.targetChanges.forEach((s,a)=>{let l=i.get(a);if(!l)return;o.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,a).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,a)));let u=l.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?u=u.withResumeToken(t6.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(a,u),uI(l,u,s)&&o.push(r.targetCache.updateTargetData(e,u))});let a=id(),l=iE();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),o.push(uR(e,s,t.documentUpdates).next(e=>{a=e.changedDocuments,l=e.existenceChangedKeys})),!n.isEqual(K.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,n));o.push(t)}return ey.waitFor(o).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(r.targetDataByTarget=i,e))}function uR(e,t,r){let n=iE(),i=iE();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=id();return r.forEach((r,s)=>{let o=e.get(r);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(K.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):_(uv,"Ignoring outdated watch update for ",r,". Current version:",o.version," Watch version:",s.version)}),{changedDocuments:n,existenceChangedKeys:i}})}function uI(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=ub)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function uP(e,t){let r=C(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ey.forEach(t,t=>ey.forEach(t.addedKeys,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>ey.forEach(t.removedKeys,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(eT(e))_(uv,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.targetDataByTarget=r.targetDataByTarget.insert(t,i)}}}function uD(e,t){let r=C(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=rf),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function uN(e,t){let r=C(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function uM(e,t){let r=C(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.targetCache.getTargetData(e,t).next(i=>i?(n=i,ey.resolve(n)):r.targetCache.allocateTargetId(e).next(i=>(n=new oN(t,i,0,e.currentSequenceNumber),r.targetCache.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.targetDataByTarget.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function uj(e,t,r){let n=C(e),i=n.targetIdByTarget.get(r);return void 0!==i?ey.resolve(n.targetDataByTarget.get(i)):n.targetCache.getTargetData(t,r)}async function uL(e,t,r){let n=C(e),i=n.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(eT(e))_(uv,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}function uF(e,t,r){let n=C(e),i=K.min(),s=iE();return n.persistence.runTransaction("Execute query","readonly",e=>uj(n,e,n1(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(e,t,r?i:K.min(),r?s:iE())).next(e=>(uq(n,io(t),e),{documents:e,remoteKeys:s})))}function uU(e,t,r,n){let i=r.batch,s=i.keys(),o=ey.resolve();return s.forEach(e=>{o=o.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);O(null!==s),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}function uB(e,t){let r=C(e),n=C(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>n.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):ey.resolve(null)))}function uV(e,t){C(C(e,u_).mutationQueue).removeCachedMutationKeys(t)}function uH(e){return C(C(e,u_).persistence).getActiveClients()}function uz(e,t){let r=C(e),n=C(r.targetCache),i=r.targetDataByTarget.get(t);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",e=>n.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function uW(e,t){let r=C(e),n=r.collectionGroupReadTime.get(t)||K.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,ec(n,ee),Number.MAX_SAFE_INTEGER)).then(e=>(uq(r,t,e),e))}function uq(e,t,r){let n=e.collectionGroupReadTime.get(t)||K.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.collectionGroupReadTime.set(t,n)}function u$(e){return n1(nK(Q.fromString(`__bundle__/docs/${e}`)))}async function uK(e,t,r,n){let i=C(e),s=iE(),o=id();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let n=t.toMutableDocument(e);n.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),o=o.insert(r,n)}let a=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await uM(i,u$(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>uR(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function uJ(e,t){let r=C(e),n=sD(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}function uG(e,t){let r=C(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}async function uQ(e,t,r=iE()){let n=await uM(e,n1(oY(t.bundledQuery))),i=C(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{let s=sD(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.bundleCache.saveNamedQuery(e,t);let o=n.withResumeToken(t6.EMPTY_BYTE_STRING,s);return i.targetDataByTarget=i.targetDataByTarget.insert(o.targetId,o),i.targetCache.updateTargetData(e,o).next(()=>i.targetCache.removeMatchingKeysForTargetId(e,n.targetId)).next(()=>i.targetCache.addMatchingKeys(e,r,n.targetId)).next(()=>i.bundleCache.saveNamedQuery(e,t))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(){this.initialized=!1}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,n){return this.performQueryUsingIndex(e,t).next(i=>i||this.performQueryUsingRemoteKeys(e,t,n,r)).next(r=>r||this.executeFullCollectionScan(e,t))}performQueryUsingIndex(e,t){if(nG(t))return ey.resolve(null);let r=n1(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=n1(t=n6(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=iE(...n);return this.localDocumentsView.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,i,r.readTime)?this.performQueryUsingIndex(e,n6(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,n){return nG(t)||n.isEqual(K.min())?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next(i=>{let s=this.applyQuery(t,i);return this.needsRefill(t,s,r,n)?this.executeFullCollectionScan(e,t):(b()<=o.in.DEBUG&&_("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),n7(t)),this.appendRemainingResults(e,s,t,ec(n,ee)))})}applyQuery(e,t){let r=new tY(ia(e));return t.forEach((t,n)=>{ie(e,n)&&(r=r.add(n))}),r}needsRefill(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}executeFullCollectionScan(e,t){return b()<=o.in.DEBUG&&_("QueryEngine","Using full collection scan to execute query:",n7(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,eh.min())}appendRemainingResults(e,t,r,n){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uX="firestore_clients";function uZ(e,t){return`${uX}_${e}_${t}`}let u0="firestore_mutations";function u1(e,t,r){let n=`${u0}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let u2="firestore_targets";function u3(e,t){return`${u2}_${e}_${t}`}let u6="firestore_online_state";function u4(e){return`${u6}_${e}`}let u5="firestore_bundle_loaded_v2";function u8(e){return`${u5}_${e}`}let u9="firestore_sequence_number";function u7(e){return`${u9}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ce="SharedClientState";class ct{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static fromWebStorageEntry(e,t,r){let n;let i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(n=new x(i.error.code,i.error.message)),s)?new ct(e,t,i.state,n):(w(ce,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cr{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r;let n=JSON.parse(t),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new x(n.error.code,n.error.message)),i)?new cr(e,n.state,r):(w(ce,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cn{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=iO();for(let e=0;n&&e<r.activeTargetIds.length;++e)n=rg(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new cn(e,i):(w(ce,`Failed to parse client data for instance '${e}': ${t}`),null)}}class ci{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ci(t.clientId,t.onlineState):(w(ce,`Failed to parse online state: ${e}`),null)}}class cs{constructor(){this.activeTargetIds=iO()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}function co(e){let t=eD.INVALID;if(null!=e)try{let r=JSON.parse(e);O("number"==typeof r),t=r}catch(e){w(ce,"Failed to read sequence number from WebStorage",e)}return t}class ca{constructor(){this.localState=new cs,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new cs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{addCallback(e){}shutdown(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(e){return new Promise((t,r)=>{e((e,n)=>{e?r(e):t(n)})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cd="1.7.3",ch="Connection",cf=`gl-node/${process.versions.node} fire/${m} grpc/${cd}`;function cp(e,t,r,n){O(null===t||"OAuth"===t.type);let i=new c.SF;return t&&t.headers.forEach((e,t)=>i.set(t,e)),r&&r.headers.forEach((e,t)=>i.set(t,e)),n&&i.set("X-Firebase-GMPID",n),i.set("X-Goog-Api-Client",cf),i.set("Google-Cloud-Resource-Prefix",e),i.set("x-goog-request-params",e),i}class cm{constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){_(ch,"Creating Firestore stub.");let e=this.databaseInfo.ssl?c.K9.createSsl():c.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,n,i){let s=this.ensureActiveStub(),o=cp(this.databasePath,n,i,this.databaseInfo.appId),a=Object.assign({database:this.databasePath},r);return cc(t=>(_(ch,`RPC '${e}' invoked with request:`,r),s[e](a,o,(r,n)=>{r?(_(ch,`RPC '${e}' failed with error:`,r),t(new x(sc(r.code),r.message))):(_(ch,`RPC '${e}' completed with response:`,n),t(void 0,n))})))}invokeStreamingRPC(e,t,r,n,i,s){let o=[],a=new A;_(ch,`RPC '${e}' invoked (streaming) with request:`,r);let l=this.ensureActiveStub(),u=cp(this.databasePath,n,i,this.databaseInfo.appId),c=Object.assign(Object.assign({},r),{database:this.databasePath}),d=l[e](c,u),h=!1;return d.on("data",t=>{_(ch,`RPC ${e} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(h=!0,a.resolve(o))}),d.on("end",()=>{_(ch,`RPC '${e}' completed.`),h||(h=!0,a.resolve(o))}),d.on("error",t=>{_(ch,`RPC '${e}' failed with error:`,t);let r=sc(t.code);a.reject(new x(r,t.message))}),a.promise}openStream(e,t,r){let n=this.ensureActiveStub(),i=cp(this.databasePath,t,r,this.databaseInfo.appId),s=n[e](i),o=!1,a=e=>{o||(o=!0,l.callOnClose(e),s.end())},l=new cu({sendFn:e=>{if(o)_(ch,"Not sending because gRPC stream is closed:",e);else{_(ch,"GRPC stream sending:",e);try{s.write(e)}catch(t){throw w("Failure sending:",e),w("Error:",t),t}}},closeFn:()=>{_(ch,"GRPC stream closed locally via close()."),a()}});return s.on("data",e=>{o||(_(ch,"GRPC stream received:",e),l.callOnMessage(e))}),s.on("end",()=>{_(ch,"GRPC stream ended."),a()}),s.on("error",e=>{o||(S(ch,"GRPC stream error. Code:",e.code,"Message:",e.message),a(new x(sc(e.code),e.message)))}),_(ch,"Opening GRPC stream"),setTimeout(()=>{l.callOnOpen()},0),l}}let cg={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var cy={nested:cg},cv=Object.freeze({__proto__:null,nested:cg,default:cy});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cb={longs:String,enums:String,defaults:!0,oneofs:!1};function c_(){let e=d.im(cv,cb);return c.Rz(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(e){return new cm(c_(),e)}function cS(){return new cl}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(e){return new sT(e,!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cT="ExponentialBackoff",cO=1e3,cC=1.5,ck=6e4;class cx{constructor(e,t,r=cO,n=cC,i=ck){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=n,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),n=Math.max(0,t-r);n>0&&_(cT,`Backing off for ${n} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,n,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cA="PersistentStream",cR=6e4,cI=1e4;class cP{constructor(e,t,r,n,i,s,o,a){this.queue=e,this.idleTimerId=r,this.healthTimerId=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new cx(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,cR,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(w(t.toString()),w("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===k.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new x(k.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,cI,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>this.onMessage(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return _(cA,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(_(cA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cD extends cP{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onMessage(e){this.backoff.reset();let t=sQ(this.serializer,e),r=sX(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=sB(this.serializer),t.addTarget=os(this.serializer,e);let r=on(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=sB(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class cN extends cP{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onMessage(e){if(O(!!e.streamToken),this.lastStreamToken=e.streamToken,!this.handshakeComplete_)return O(!e.writeResults||0===e.writeResults.length),this.handshakeComplete_=!0,this.listener.onHandshakeComplete();{this.backoff.reset();let t=s6(e.writeResults,e.commitTime),r=sD(e.commitTime);return this.listener.onMutationResult(r,t)}}writeHandshake(){let e={};e.database=sB(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>sZ(this.serializer,e))};this.sendRequest(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{}class cj extends cM{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new x(k.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,i])=>this.connection.invokeRPC(e,t,r,n,i)).catch(e=>{if("FirebaseError"===e.name)throw e.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new x(k.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeStreamingRPC(e,t,r,i,s,n)).catch(e=>{if("FirebaseError"===e.name)throw e.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new x(k.UNKNOWN,e.toString())})}terminate(){this.terminated=!0}}function cL(e,t,r,n){return new cj(e,t,r,n)}async function cF(e,t){let r=C(e),n=sB(r.serializer)+"/documents",i={writes:t.map(e=>sZ(r.serializer,e))};await r.invokeRPC("Commit",n,i)}async function cU(e,t){let r=C(e),n=sB(r.serializer)+"/documents",i={documents:t.map(e=>sj(r.serializer,e))},s=await r.invokeStreamingRPC("BatchGetDocuments",n,i,t.length),o=new Map;s.forEach(e=>{let t=sG(r.serializer,e);o.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=o.get(e.toString());O(!!t),a.push(t)}),a}async function cB(e,t,r){let n=C(e),i=oe(n.serializer,n1(t),r),s=i.parent;n.connection.shouldResourcePathBeIncludedInRequest||delete i.parent;let o=(await n.invokeStreamingRPC("RunAggregationQuery",s,i,1)).filter(e=>!!e.result);return O(1===o.length),s$(o[0])}function cV(e,t,r){let n=C(e);return n.verifyInitialized(),new cN(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}function cH(e,t,r){let n=C(e);return n.verifyInitialized(),new cD(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cz="OnlineStateTracker",cW=1,cq=1e4;class c${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",cq,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${cq/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=cW&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${cW} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(w(t),this.shouldWarnClientIsOffline=!1):_(cz,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cK="RemoteStore",cJ=10;class cG{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=i,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{c5(this)&&(_(cK,"Restarting streams for network reachability change."),await dg(this))})}),this.onlineStateTracker=new c$(r,n)}}function cQ(e,t,r,n,i){return new cG(e,t,r,n,i)}async function cY(e){if(c5(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function cX(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function cZ(e){let t=C(e);_(cK,"RemoteStore shutting down."),t.offlineCauses.add(5),await cX(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function c0(e,t){let r=C(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),c4(r)?c6(r):db(r).isOpen()&&c2(r,t))}function c1(e,t){let r=C(e),n=db(r);r.listenTargets.delete(t),n.isOpen()&&c3(r,t),0===r.listenTargets.size&&(n.isOpen()?n.markIdle():c5(r)&&r.onlineStateTracker.set("Unknown"))}function c2(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),db(e).watch(t)}function c3(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),db(e).unwatch(t)}function c6(e){e.watchChangeAggregator=new sv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null}),db(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function c4(e){return c5(e)&&!db(e).isStarted()&&e.listenTargets.size>0}function c5(e){return 0===C(e).offlineCauses.size}function c8(e){e.watchChangeAggregator=void 0}async function c9(e){e.listenTargets.forEach((t,r)=>{c2(e,t)})}async function c7(e,t){c8(e),c4(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),c6(e)):e.onlineStateTracker.set("Unknown")}async function de(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof sm&&2===t.state&&t.cause){try{await di(e,t)}catch(r){_(cK,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await dt(e,r)}return}if(t instanceof sf?e.watchChangeAggregator.handleDocumentChange(t):t instanceof sp?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(K.min()))try{let t=await ux(e.localStore);r.compareTo(t)>=0&&await dn(e,r)}catch(t){_(cK,"Failed to raise snapshot:",t),await dt(e,t)}}async function dt(e,t,r){if(eT(t))e.offlineCauses.add(1),await cX(e),e.onlineStateTracker.set("Offline"),r||(r=()=>ux(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{_(cK,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await cY(e)});else throw t}function dr(e,t){return t().catch(r=>dt(e,r,t))}function dn(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(n);i&&e.listenTargets.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach(t=>{let r=e.listenTargets.get(t);r&&(e.listenTargets.set(t,r.withResumeToken(t6.EMPTY_BYTE_STRING,r.snapshotVersion)),c3(e,t),c2(e,new oN(r.target,t,1,r.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function di(e,t){let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function ds(e){let t=C(e),r=d_(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:rf;for(;da(t);)try{let e=await uD(t.localStore,n);if(null===e){0===t.writePipeline.length&&r.markIdle();break}n=e.batchId,dl(t,e)}catch(e){await dt(t,e)}du(t)&&dc(t)}function da(e){return c5(e)&&e.writePipeline.length<cJ}function dl(e,t){e.writePipeline.push(t);let r=d_(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function du(e){return c5(e)&&!d_(e).isStarted()&&e.writePipeline.length>0}function dc(e){d_(e).start()}async function dd(e){d_(e).writeHandshake()}async function dh(e){let t=d_(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function df(e,t,r){let n=e.writePipeline.shift(),i=ss.from(n,t,r);await dr(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ds(e)}async function dp(e,t){t&&d_(e).handshakeComplete&&await dm(e,t),du(e)&&dc(e)}async function dm(e,t){if(su(t.code)){let r=e.writePipeline.shift();d_(e).inhibitBackoff(),await dr(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await ds(e)}}async function dg(e){let t=C(e);t.offlineCauses.add(4),await cX(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await cY(t)}async function dy(e,t){let r=C(e);r.asyncQueue.verifyOperationInProgress(),_(cK,"RemoteStore received new credentials");let n=c5(r);r.offlineCauses.add(3),await cX(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await cY(r)}async function dv(e,t){let r=C(e);t?(r.offlineCauses.delete(2),await cY(r)):t||(r.offlineCauses.add(2),await cX(r),r.onlineStateTracker.set("Unknown"))}function db(e){return e.watchStream||(e.watchStream=cH(e.datastore,e.asyncQueue,{onOpen:c9.bind(null,e),onClose:c7.bind(null,e),onWatchChange:de.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),c4(e)?c6(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),c8(e))})),e.watchStream}function d_(e){return e.writeStream||(e.writeStream=cV(e.datastore,e.asyncQueue,{onOpen:dd.bind(null,e),onClose:dp.bind(null,e),onHandshakeComplete:dh.bind(null,e),onMutationResult:df.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await ds(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(_(cK,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dw="AsyncQueue";class dS{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new A,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,r,n,i){let s=new dS(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new x(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dE(e,t){if(w(dw,`${t}: ${e}`),eT(e))return new x(k.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){e?this.comparator=(t,r)=>e(t,r)||Z.comparator(t.key,r.key):this.comparator=(e,t)=>Z.comparator(e.key,t.key),this.keyedMap=ip(),this.sortedSet=new tK(this.comparator)}static emptySet(e){return new dT(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dT)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new dT;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.changeMap=new tK(Z.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):T()}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class dC{constructor(e,t,r,n,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new dC(e,t,dT.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!n8(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.viewSnap=void 0,this.listeners=[]}}function dx(){return new dA}class dA{constructor(){this.queries=new iu(e=>n9(e),n8),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}}async function dR(e,t){let r=C(e),n=t.query,i=!1,s=r.queries.get(n);if(s||(i=!0,s=new dk),i)try{s.viewSnap=await r.onListen(n)}catch(r){let e=dE(r,`Initialization of query '${n7(t.query)}' failed`);t.onError(e);return}r.queries.set(n,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&dM(r)}async function dI(e,t){let r=C(e),n=t.query,i=!1,s=r.queries.get(n);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return r.queries.delete(n),r.onUnlisten(n)}function dP(e,t){let r=C(e),n=!1;for(let e of t){let t=e.query,i=r.queries.get(t);if(i){for(let t of i.listeners)t.onViewSnapshot(e)&&(n=!0);i.viewSnap=e}}n&&dM(r)}function dD(e,t,r){let n=C(e),i=n.queries.get(t);if(i)for(let e of i.listeners)e.onError(r);n.queries.delete(t)}function dN(e,t){let r=C(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(n=!0)}),n&&dM(r)}function dM(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}class dj{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new dC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache)return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=dC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=n}static fromSnapshot(e,t){let r=iE(),n=iE();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new dL(e,t.fromCache,r,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.serializer=e}toDocumentKey(e){return sL(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?sq(this.serializer,e.document,!1):r5.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return sD(e)}}class dU{constructor(e,t,r){this.bundleMetadata=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dB(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=Q.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new dF(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.toDocumentKey(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||iE()).add(e);t.set(r,n)}}return t}async complete(){let e=await uK(this.localStore,new dF(this.serializer),this.documents,this.bundleMetadata.id),t=this.getQueryDocumentMapping(this.documents);for(let e of this.queries)await uQ(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}}}function dB(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function dV(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.key=e}}class dz{constructor(e){this.key=e}}class dW{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=iE(),this.mutatedKeys=iE(),this.docComparator=ia(e),this.documentSet=new dT(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new dO,n=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,s=n,o=!1,a="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=ie(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(r.track({type:3,doc:c}),f=!0):!this.shouldWaitForSyncedDocument(u,c)&&(r.track({type:2,doc:c}),f=!0,(a&&this.docComparator(c,a)>0||l&&0>this.docComparator(c,l))&&(o=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:o,mutatedKeys:i}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){let n=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let i=e.changeSet.getChanges();i.sort((e,t)=>dq(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r);let s=t?this.updateLimboDocuments():[],o=0===this.limboDocuments.size&&this.current?1:0,a=o!==this.syncState;return(this.syncState=o,0!==i.length||a)?{snapshot:new dC(this.query,e.documentSet,n,i,e.mutatedKeys,0===o,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:s}:{limboChanges:s}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new dO,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=iE(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new dz(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new dH(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=iE();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return dC.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function dq(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return T()}};return r(e)-r(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d$="SyncEngine";class dK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dJ{constructor(e){this.key=e,this.receivedDocument=!1}}class dG{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new iu(e=>n9(e),n8),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new tK(Z.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new lV,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ls.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function dQ(e,t,r,n,i,s,o){let a=new dG(e,t,r,n,i,s);return o&&(a._isPrimaryClient=!0),a}async function dY(e,t){let r,n;let i=hf(e),s=i.queryViewsByQuery.get(t);if(s)r=s.targetId,i.sharedClientState.addLocalQueryTarget(r),n=s.view.computeInitialSnapshot();else{let e=await uM(i.localStore,n1(t));i.isPrimaryClient&&c0(i.remoteStore,e);let s=i.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,n=await dX(i,t,r,"current"===s,e.resumeToken)}return n}async function dX(e,t,r,n,i){e.applyDocChanges=(t,r,n)=>ho(e,t,r,n);let s=await uF(e.localStore,t,!0),o=new dW(t,s.remoteKeys),a=o.computeDocChanges(s.documents),l=sh.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);hr(e,r,u.limboChanges);let c=new dK(t,r,o);return e.queryViewsByQuery.set(t,c),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),u.snapshot}async function dZ(e,t){let r=C(e),n=r.queryViewsByQuery.get(t),i=r.queriesByTarget.get(n.targetId);if(i.length>1){r.queriesByTarget.set(n.targetId,i.filter(e=>!n8(e,t))),r.queryViewsByQuery.delete(t);return}r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(n.targetId),r.sharedClientState.isActiveQueryTarget(n.targetId)||await uL(r.localStore,n.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(n.targetId),c1(r.remoteStore,n.targetId),he(r,n.targetId)}).catch(eg)):(he(r,n.targetId),await uL(r.localStore,n.targetId,!0))}async function d0(e,t,r){let n=hp(e);try{let e=await uE(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),d9(n,e.batchId,r),await hs(n,e.changes),await ds(n.remoteStore)}catch(t){let e=dE(t,"Failed to persist write");r.reject(e)}}async function d1(e,t){let r=C(e);try{let e=await uA(r.localStore,t);t.targetChanges.forEach((e,t)=>{let n=r.activeLimboResolutionsByTarget.get(t);n&&(O(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.receivedDocument=!0:e.modifiedDocuments.size>0?O(n.receivedDocument):e.removedDocuments.size>0&&(O(n.receivedDocument),n.receivedDocument=!1))}),await hs(r,e,t)}catch(e){await eg(e)}}function d2(e,t,r){let n=C(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.queryViewsByQuery.forEach((r,n)=>{let i=n.view.applyOnlineStateChange(t);i.snapshot&&e.push(i.snapshot)}),dN(n.eventManager,t),e.length&&n.syncEngineListener.onWatchChange(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function d3(e,t,r){let n=C(e);n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.activeLimboResolutionsByTarget.get(t),s=i&&i.key;if(s){let e=new tK(Z.comparator);e=e.insert(s,r5.newNoDocument(s,K.min()));let r=iE().add(s),i=new sd(K.min(),new Map,new tY(V),e,r);await d1(n,i),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),hi(n)}else await uL(n.localStore,t,!1).then(()=>he(n,t,r)).catch(eg)}async function d6(e,t){let r=C(e),n=t.batch.batchId;try{let e=await uT(r.localStore,t);d7(r,n,null),d5(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await hs(r,e)}catch(e){await eg(e)}}async function d4(e,t,r){let n=C(e);try{let e=await uC(n.localStore,t);d7(n,t,r),d5(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await hs(n,e)}catch(e){await eg(e)}}function d5(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function d8(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new x(k.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function d9(e,t,r){let n=e.mutationUserCallbacks[e.currentUser.toKey()];n||(n=new tK(V)),n=n.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=n}function d7(e,t,r){let n=C(e),i=n.mutationUserCallbacks[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=i}}function he(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||ht(e,t)})}function ht(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(c1(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),hi(e))}function hr(e,t,r){for(let n of r)n instanceof dH?(e.limboDocumentRefs.addReference(n.key,t),hn(e,n)):n instanceof dz?(_(d$,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||ht(e,n.key)):T()}function hn(e,t){let r=t.key,n=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(n)||(_(d$,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),hi(e))}function hi(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new Z(Q.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new dJ(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),c0(e.remoteStore,new oN(n1(nK(r.path)),n,2,eD.INVALID))}}async function hs(e,t,r){let n=C(e),i=[],s=[],o=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((e,a)=>{o.push(n.applyDocChanges(a,t,r).then(e=>{if((e||r)&&n.isPrimaryClient&&n.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);let t=dL.fromSnapshot(a.targetId,e);s.push(t)}}))}),await Promise.all(o),n.syncEngineListener.onWatchChange(i),await uP(n.localStore,s))}async function ho(e,t,r,n){let i=t.view.computeDocChanges(r);i.needsRefill&&(i=await uF(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,i)));let s=n&&n.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return hr(e,t.targetId,o.limboChanges),o.snapshot}async function ha(e,t){let r=C(e);if(!r.currentUser.isEqual(t)){_(d$,"User change. New user:",t.toKey());let e=await uS(r.localStore,t);r.currentUser=t,d8(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await hs(r,e.affectedDocuments)}}function hl(e,t){let r=C(e),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return iE().add(n.key);{let e=iE(),n=r.queriesByTarget.get(t);if(!n)return e;for(let t of n){let n=r.queryViewsByQuery.get(t);e=e.unionWith(n.view.syncedDocuments)}return e}}async function hu(e,t){let r=C(e),n=await uF(r.localStore,t.query,!0),i=t.view.synchronizeWithPersistedState(n);return r.isPrimaryClient&&hr(r,t.targetId,i.limboChanges),i}function hc(e){let t=C(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{c1(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new tK(Z.comparator)}async function hd(e,t,r){let n=C(e),i=[],s=[];for(let e of t){let t;let r=n.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await uM(n.localStore,n1(r[0])),r)){let t=n.queryViewsByQuery.get(e),r=await hu(n,t);r.snapshot&&s.push(r.snapshot)}else{let r=await uz(n.localStore,e);t=await uM(n.localStore,r),await dX(n,hh(r),e,!1,t.resumeToken)}i.push(t)}return n.syncEngineListener.onWatchChange(s),i}function hh(e){return n$(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hf(e){let t=C(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=d3.bind(null,t),t.syncEngineListener.onWatchChange=dP.bind(null,t.eventManager),t.syncEngineListener.onWatchError=dD.bind(null,t.eventManager),t}function hp(e){let t=C(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=d6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=d4.bind(null,t),t}async function hm(e,t,r){try{let n=await t.getMetadata();if(await uJ(e.localStore,n))return await t.close(),r._completeWith(dV(n)),Promise.resolve(new Set);r._updateProgress(dB(n));let i=new dU(n,e.localStore,t.serializer),s=await t.nextElement();for(;s;){let e=await i.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let o=await i.complete();return await hs(e,o.changedDocs,void 0),await uG(e.localStore,n),r._completeWith(o.progress),Promise.resolve(o.changedCollectionGroups)}catch(e){return S(d$,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cE(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uw(this.persistence,new uY,e.initialUser,this.serializer)}createPersistence(e){return new lQ(lX.factory,this.serializer)}createSharedClientState(e){return new ca}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>d2(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ha.bind(null,this.syncEngine),await dv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return dx()}createDatastore(e){let t=cE(e.databaseInfo.databaseId),r=cw(e.databaseInfo);return cL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return cQ(this.localStore,this.datastore,e.asyncQueue,e=>d2(this.syncEngine,e,0),cS())}createSyncEngine(e,t){return dQ(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return cZ(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hv=10240;function hb(e,t=hv){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(e,t,r){if(!r)throw new x(k.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function hw(e,t,r,n){if(!0===t&&!0===n)throw new x(k.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function hS(e){if(!Z.isDocumentKey(e))throw new x(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hE(e){if(Z.isDocumentKey(e))throw new x(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hT(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function hO(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{let t=hC(e);return t?`a custom ${t} object`:"an object"}}if("function"==typeof e)return"a function";return T()}function hC(e){return e.constructor?e.constructor.name:null}function hk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new x(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=hO(e);throw new x(k.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(e,t){if(!(e instanceof Uint8Array))throw new x(k.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${hO(e)}`);return hb(e,t)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return new TextEncoder}function hR(){return new TextDecoder("utf-8")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.observer.error?this.scheduleEvent(this.observer.error,e):w("Uncaught Error in snapshot listener:",e.toString())}mute(){this.muted=!0}scheduleEvent(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new A,this.buffer=new Uint8Array,this.textDecoder=hR(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new hP(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function hN(e,t){return new hD(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let t=await cU(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new se(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=Z.fromPath(t);this.mutations.push(new sn(r,this.precondition(r)))}),await cF(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=K.min();else throw T();let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new x(k.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?iK.none():t.isEqual(K.min())?iK.exists(!1):iK.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return iK.exists(!0);if(t.isEqual(K.min()))throw new x(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return iK.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hj="FirestoreClient",hL=100;class hF{constructor(e,t,r,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=p.UNAUTHENTICATED,this.clientId=B.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async e=>{_(hj,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(_(hj,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:hL}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new x(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new A;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=dE(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function hU(e,t){e.asyncQueue.verifyOperationInProgress(),_(hj,"Initializing OfflineComponentProvider");let r=await e.getConfiguration();await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await uS(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function hB(e,t){e.asyncQueue.verifyOperationInProgress();let r=await hV(e);_(hj,"Initializing OnlineComponentProvider");let n=await e.getConfiguration();await t.initialize(r,n),e.setCredentialChangeListener(e=>dy(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>dy(t.remoteStore,r)),e.onlineComponents=t}async function hV(e){return e.offlineComponents||(_(hj,"Using default OfflineComponentProvider"),await hU(e,new hg)),e.offlineComponents}async function hH(e){return e.onlineComponents||(_(hj,"Using default OnlineComponentProvider"),await hB(e,new hy)),e.onlineComponents}function hz(e){return hH(e).then(e=>e.remoteStore)}function hW(e){return hH(e).then(e=>e.syncEngine)}function hq(e){return hH(e).then(e=>e.datastore)}async function h$(e){let t=await hH(e),r=t.eventManager;return r.onListen=dY.bind(null,t.syncEngine),r.onUnlisten=dZ.bind(null,t.syncEngine),r}function hK(e,t,r,n){let i=new hI(n),s=new dj(t,i,r);return e.asyncQueue.enqueueAndForget(async()=>dR(await h$(e),s)),()=>{i.mute(),e.asyncQueue.enqueueAndForget(async()=>dI(await h$(e),s))}}function hJ(e,t){let r=new A;return e.asyncQueue.enqueueAndForget(async()=>d0(await hW(e),t,r)),r.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hG="ComponentProvider",hQ=new Map;function hY(e){let t=hQ.get(e);t&&(_(hG,"Removing Datastore"),hQ.delete(e),t.terminate())}function hX(e,t,r,n){return new ru(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,n.useFetchStreams)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hZ="firestore.googleapis.com",h0=!0;class h1{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new x(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hZ,this.ssl=h0}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:h0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=lh;else{if(e.cacheSizeBytes!==ld&&e.cacheSizeBytes<lm)throw new x(k.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${lm}`);this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new x(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new x(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h1(e),void 0!==e.credentials&&(this._authCredentials=F(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return hY(this),Promise.resolve()}}function h3(e,t,r,n={}){var i;let s=(e=hk(e,h2))._getSettings();if(s.host!==hZ&&s.host!==t&&S("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${r}`,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=p.MOCK_USER;else{t=(0,l.Sg)(n.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new x(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new p(s)}e._authCredentials=new P(new R(t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new h5(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new h6(this.firestore,e,this._key)}}class h4{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new h4(this.firestore,e,this._query)}}class h5 extends h4{constructor(e,t,r){super(e,t,nK(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new h6(this.firestore,null,new Z(e))}withConverter(e){return new h5(this.firestore,e,this._path)}}function h8(e,t,...r){if(e=(0,l.m9)(e),h_("collection","path",t),e instanceof h2){let n=Q.fromString(t,...r);return hE(n),new h5(e,null,n)}{if(!(e instanceof h6)&&!(e instanceof h5))throw new x(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(Q.fromString(t,...r));return hE(n),new h5(e.firestore,null,n)}}function h9(e,t,...r){if(e=(0,l.m9)(e),1==arguments.length&&(t=B.newId()),h_("doc","path",t),e instanceof h2){let n=Q.fromString(t,...r);return hS(n),new h6(e,null,new Z(n))}{if(!(e instanceof h6)&&!(e instanceof h5))throw new x(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(Q.fromString(t,...r));return hS(n),new h6(e.firestore,e instanceof h5?e.converter:null,new Z(n))}}function h7(e,t){return e=(0,l.m9)(e),t=(0,l.m9)(t),e instanceof h4&&t instanceof h4&&e.firestore===t.firestore&&n8(e._query,t._query)&&e.converter===t.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fe="AsyncQueue";class ft{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new cx(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new A;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(eT(e))_(fe,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,w("INTERNAL UNHANDLED ERROR: ",fn(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let n=dS.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(n),n}verifyNotFailed(){this.failure&&T()}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function fr(){return new ft}function fn(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi=11,fs=20,fo=22;class fa extends h2{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=fr(),this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fc(this),this._firestoreClient.terminate()}}function fl(e,t){let r="object"==typeof e?e:(0,i.Mq)(),n="string"==typeof e?e:t||rc,s=(0,i.qX)(r,"firestore").getImmediate({identifier:n});if(!s._initialized){let e=(0,l.P0)("firestore");e&&h3(s,...e)}return s}function fu(e){return e._firestoreClient||fc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function fc(e){var t;let r=e._freezeSettings(),n=hX(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new hF(e._authCredentials,e._appCheckCredentials,e._queue,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(e,t=!0){g(i.Jn),(0,i.Xd)(new s.wA("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new fa(new D(e.getProvider("auth-internal")),new L(e.getProvider("app-check-internal")),rh(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),(0,i.KN)(h,f,e),(0,i.KN)(h,f,"esm2017")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=/^[_a-zA-Z][_a-zA-Z0-9]*(?:\.[_a-zA-Z][_a-zA-Z0-9]*)*$/;class ff{constructor(e){this.alias=e}static isValidAlias(e){return fh.test(e)}canonicalString(){let e=this.alias.replace(/\\/g,"\\\\").replace(/`/g,"\\`");return ff.isValidAlias(e)||(e="`"+e+"`"),e}}class fp{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertValue(this._data.value)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fm(t6.fromBase64String(e))}catch(e){throw new x(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fm(t6.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new x(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new X(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return V(this._lat,e._lat)||V(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fb=/^__.*__$/;class f_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new i6(e,this.data,this.fieldMask,t,this.fieldTransforms):new i1(e,this.data,t,this.fieldTransforms)}}class fw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new i6(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw T()}}class fE{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new fE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return fB(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(fS(this.dataSource)&&fb.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class fT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cE(e)}createContext(e,t,r,n=!1){return new fE({dataSource:e,methodName:t,targetDoc:r,path:X.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fO(e){let t=e._freezeSettings(),r=cE(e._databaseId);return new fT(e._databaseId,!!t.ignoreUndefinedProperties,r)}function fC(e,t,r,n,i,s={}){let o,a;let l=e.createContext(s.merge||s.mergeFields?2:0,t,r,i);fj("Data must be an object, but it was:",l,n);let u=fI(n,l);if(s.merge)o=new t1(l.fieldMask),a=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=fL(t,n,r);if(!l.contains(i))throw new x(k.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);fV(e,i)||e.push(i)}o=new t1(e),a=l.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,a=l.fieldTransforms;return new f_(new r6(u),o,a)}class fk extends null{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof fk}}class fx extends fy{_toFieldTransform(e){return new iz(e.path,new iN)}isEqual(e){return e instanceof fx}}function fA(e,t,r,n=!1){return fR(r,e.createContext(n?4:3,t))}function fR(e,t){if(fM(e=(0,l.m9)(e)))return fj("Unsupported field value:",t,e),fI(e,t);if(e instanceof fy)return fD(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return fN(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return fP(e,t)}function fI(e,t){let r={};return t$(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tq(e,(e,n)=>{let i=fR(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function fP(e,t){let r=[],n=0;for(let i of e){let e=fR(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}function fD(e,t){if(!fS(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function fN(e,t){if(null===(e=(0,l.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ix(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=$.fromDate(e);return{timestampValue:sx(t.serializer,r)}}if(e instanceof $){let r=new $(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sx(t.serializer,r)}}if(e instanceof fv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof fm)return{bytesValue:sR(t.serializer,e._byteString)};else if(e instanceof h6){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:sN(e.firestore._databaseId||t.databaseId,e._key.path)}}else throw t.createError(`Unsupported field value: ${hO(e)}`)}function fM(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof $)&&!(e instanceof fv)&&!(e instanceof fm)&&!(e instanceof h6)&&!(e instanceof fy)}function fj(e,t,r){if(!fM(r)||!hT(r)){let n=hO(r);if("an object"===n)throw t.createError(e+" a custom object");throw t.createError(e+" "+n)}}function fL(e,t,r){if((t=(0,l.m9)(t))instanceof fg)return t._internalPath;if("string"==typeof t)return fU(e,t);throw fB("Field path arguments must be of type string or ",e,!1,void 0,r)}let fF=RegExp("[~\\*/\\[\\]]");function fU(e,t,r){if(t.search(fF)>=0)throw fB(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new fg(...t.split("."))._internalPath}catch(n){throw fB(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function fB(e,t,r,n,i){let s=n&&!n.isEmpty(),o=void 0!==i,a=`Function ${t}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new x(k.INVALID_ARGUMENT,a+e+l)}function fV(e,t){return e.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new h6(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(fW("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fz extends fH{data(){return super.data()}}function fW(e,t){return"string"==typeof t?fU(e,t):t instanceof fg?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new x(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class f${}class fK extends f${}function fJ(e,t,...r){let n=[];for(let i of(t instanceof f$&&n.push(t),ps(n=n.concat(r)),n))e=i._apply(e);return e}class fG extends fK{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fG(e,t,r)}_apply(e){let t=this._parse(e);return pe(e._query,t),new h4(e.firestore,e.converter,n2(e._query,t))}_parse(e){let t=fO(e.firestore);return f3(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class fQ extends f${constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fQ(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:nu.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(pt(e._query,t),new h4(e.firestore,e.converter,n2(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fY extends fK{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fY(e,t)}_apply(e){let t=f6(e._query,this._field,this._direction);return new h4(e.firestore,e.converter,n3(e._query,t))}}function fX(e,t="asc"){let r=t,n=fW("orderBy",e);return fY._create(n,r)}class fZ extends null{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fZ(e,t,r)}_apply(e){return new h4(e.firestore,e.converter,n6(e._query,this._limit,this._limitType))}}class f0 extends null{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new f0(e,t,r)}_apply(e){let t=f2(e,this.type,this._docOrFields,this._inclusive);return new h4(e.firestore,e.converter,n4(e._query,t))}}class f1 extends null{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new f1(e,t,r)}_apply(e){let t=f2(e,this.type,this._docOrFields,this._inclusive);return new h4(e.firestore,e.converter,n5(e._query,t))}}function f2(e,t,r,n){if(r[0]=getModularInstance(r[0]),r[0]instanceof fH)return f4(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=fO(e.firestore);return f5(e._query,e.firestore._databaseId,i,t,r,n)}}function f3(e,t,r,n,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new x(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){f9(o,s);let t=[];for(let r of o)t.push(f8(n,e,r));a={arrayValue:{values:t}}}else a=f8(n,e,o)}else("in"===s||"not-in"===s||"array-contains-any"===s)&&f9(o,s),a=fA(r,t,o,"in"===s||"not-in"===s);return nl.create(i,s,a)}function f6(e,t,r){if(null!==e.startAt)throw new x(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new x(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let n=new nn(t,r);return pn(e,n),n}function f4(e,t,r,n,i){if(!n)throw new x(k.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of n0(e))if(r.field.isKeyField())s.push(rW(t,n.key));else{let e=n.data.field(r.field);if(rs(e))throw new x(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new x(k.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new r9(s,i)}function f5(e,t,r,n,i,s){let o=e.explicitOrderBy;if(i.length>o.length)throw new x(k.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let a=[];for(let s=0;s<i.length;s++){let l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new x(k.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!nZ(e)&&-1!==l.indexOf("/"))throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(Q.fromString(l));if(!Z.isDocumentKey(r))throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new Z(r);a.push(rW(t,i))}else{let e=fA(r,n,l);a.push(e)}}return new r9(a,s)}function f8(e,t,r){if("string"==typeof(r=(0,l.m9)(r))){if(""===r)throw new x(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nZ(t)&&-1!==r.indexOf("/"))throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(Q.fromString(r));if(!Z.isDocumentKey(n))throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return rW(e,new Z(n))}if(r instanceof h6)return rW(e,r._key);throw new x(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hO(r)}.`)}function f9(e,t){if(!Array.isArray(e)||0===e.length)throw new x(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function f7(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function pe(e,t){if(t.isInequality()){let r=nY(e),n=t.field;if(null!==r&&!r.isEqual(n))throw new x(k.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${n.toString()}'`);let i=nQ(e);null!==i&&pi(e,n,i)}let r=pr(e.filters,f7(t.op));if(null!==r){if(r===t.op)throw new x(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);throw new x(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}}function pt(e,t){let r=e;for(let e of t.getFlattenedFilters())pe(r,e),r=n2(r,e)}function pr(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}function pn(e,t){if(null===nQ(e)){let r=nY(e);null!==r&&pi(e,r,t.field)}}function pi(e,t,r){if(!r.isEqual(t))throw new x(k.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}function ps(e){let t=e.filter(e=>e instanceof fQ).length,r=e.filter(e=>e instanceof fG).length;if(t>1||t>0&&r>0)throw new x(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{convertValue(e,t="none"){switch(r_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return t7(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(re(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw T()}}convertObject(e,t){let r={};return tq(e.fields,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertGeoPoint(e){return new fv(t7(e.latitude),t7(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ra(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){let t=t9(e);return new $(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Q.fromString(e);O(oD(r));let n=new rd(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return n.isEqual(t)||w(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(e){return pu(e,["next","error","complete"])}function pu(e,t){if("object"!=typeof e||null===e)return!1;let r=e;for(let e of t)if(e in r&&"function"==typeof r[e])return!0;return!1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pd extends fH{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(fW("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ph extends pd{data(e={}){return super.data(e)}}class pf{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new pc(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ph(this._firestore,this._userDataWriter,r.key,r,new pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=pp(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pp(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new ph(e._firestore,e._userDataWriter,r.doc.key,r.doc,new pc(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new ph(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:pm(t.type),doc:n,oldIndex:i,newIndex:s}})}}function pm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return T()}}class pg extends po{constructor(e){super(),this.firestore=e}convertBytes(e){return new fm(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new h6(this.firestore,null,t)}}function py(e){return p_(hk(e.firestore,fa),[new se(e._key,iK.none())])}function pv(e,t){let r=hk(e.firestore,fa),n=h9(e),i=pa(e.converter,t);return p_(r,[fC(fO(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,iK.exists(!1))]).then(()=>n)}function pb(e,...t){var r,n,i;let s,o,a;e=(0,l.m9)(e);let u={includeMetadataChanges:!1},c=0;"object"==typeof t[0]&&!pl(t[c])&&(u=t[c],c++);let d={includeMetadataChanges:u.includeMetadataChanges};if(pl(t[c])){let e=t[c];t[c]=null===(r=e.next)||void 0===r?void 0:r.bind(e),t[c+1]=null===(n=e.error)||void 0===n?void 0:n.bind(e),t[c+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}if(e instanceof h6)o=hk(e.firestore,fa),a=nK(e._key.path),s={next:r=>{t[c]&&t[c](pw(o,e,r))},error:t[c+1],complete:t[c+2]};else{let r=hk(e,h4);o=hk(r.firestore,fa),a=r._query;let n=new pg(o);s={next:e=>{t[c]&&t[c](new pf(o,n,r,e))},error:t[c+1],complete:t[c+2]},fq(e._query)}return hK(fu(o),a,d,s)}function p_(e,t){return hJ(fu(e),t)}function pw(e,t,r){let n=r.docs.get(t._key),i=new pg(e);return new pd(e,i,t._key,n,new pc(r.hasPendingWrites,r.fromCache),t.converter)}function pS(){return new fx("serverTimestamp")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fd("node")},44669:(e,t,r)=>{"use strict";r.d(t,{x7:()=>ep,Am:()=>F});var n=r(3729);let i={data:""},s=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||i,o=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a=/\/\*[^]*?\*\/|  +/g,l=/\n+/g,u=(e,t)=>{let r="",n="",i="";for(let s in e){let o=e[s];"@"==s[0]?"i"==s[1]?r=s+" "+o+";":n+="f"==s[1]?u(o,s):s+"{"+u(o,"k"==s[1]?"":t)+"}":"object"==typeof o?n+=u(o,t?t.replace(/([^,])+/g,e=>s.replace(/(^:.*)|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=o&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=u.p?u.p(s,o):s+":"+o+";")}return r+(t&&i?t+"{"+i+"}":i)+n},c={},d=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+d(e[r]);return t}return e},h=(e,t,r,n,i)=>{let s=d(e),h=c[s]||(c[s]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(s));if(!c[h]){let t=s!==e?e:(e=>{let t,r,n=[{}];for(;t=o.exec(e.replace(a,""));)t[4]?n.shift():t[3]?(r=t[3].replace(l," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(l," ").trim();return n[0]})(e);c[h]=u(i?{["@keyframes "+h]:t}:t,r?"":"."+h)}let f=r&&c.g?c.g:null;return r&&(c.g=c[h]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[h],t,n,f),h},f=(e,t,r)=>e.reduce((e,n,i)=>{let s=t[i];if(s&&s.call){let e=s(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":u(e,""):!1===e?"":e}return e+n+(null==s?"":s)},"");function p(e){let t=this||{},r=e.call?e(t.p):e;return h(r.unshift?r.raw?f(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,s(t.target),t.g,t.o,t.k)}p.bind({g:1});let m,g,y,v=p.bind({k:1});function b(e,t,r,n){u.p=t,m=e,g=r,y=n}function _(e,t){let r=this||{};return function(){let n=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;r.p=Object.assign({theme:g&&g()},a),r.o=/ *go\d+/.test(l),a.className=p.apply(r,n)+(l?" "+l:""),t&&(a.ref=o);let u=e;return e[0]&&(u=a.as||e,delete a.as),y&&u[0]&&y(a),m(u,a)}return t?t(i):i}}var w=e=>"function"==typeof e,S=(e,t)=>w(e)?e(t):e,E=(()=>{let e=0;return()=>(++e).toString()})(),T=(()=>{let e;return()=>{if(void 0===e&&"u">typeof window){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),O=20,C=new Map,k=1e3,x=e=>{if(C.has(e))return;let t=setTimeout(()=>{C.delete(e),D({type:4,toastId:e})},k);C.set(e,t)},A=e=>{let t=C.get(e);t&&clearTimeout(t)},R=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,O)};case 1:return t.toast.id&&A(t.toast.id),{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return e.toasts.find(e=>e.id===r.id)?R(e,{type:1,toast:r}):R(e,{type:0,toast:r});case 3:let{toastId:n}=t;return n?x(n):e.toasts.forEach(e=>{x(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},I=[],P={toasts:[],pausedAt:void 0},D=e=>{P=R(P,e),I.forEach(e=>{e(P)})},N={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},M=(e={})=>{let[t,r]=(0,n.useState)(P);(0,n.useEffect)(()=>(I.push(r),()=>{let e=I.indexOf(r);e>-1&&I.splice(e,1)}),[t]);let i=t.toasts.map(t=>{var r,n;return{...e,...e[t.type],...t,duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||N[t.type],style:{...e.style,...null==(n=e[t.type])?void 0:n.style,...t.style}}});return{...t,toasts:i}},j=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||E()}),L=e=>(t,r)=>{let n=j(t,e,r);return D({type:2,toast:n}),n.id},F=(e,t)=>L("blank")(e,t);F.error=L("error"),F.success=L("success"),F.loading=L("loading"),F.custom=L("custom"),F.dismiss=e=>{D({type:3,toastId:e})},F.remove=e=>D({type:4,toastId:e}),F.promise=(e,t,r)=>{let n=F.loading(t.loading,{...r,...null==r?void 0:r.loading});return e.then(e=>(F.success(S(t.success,e),{id:n,...r,...null==r?void 0:r.success}),e)).catch(e=>{F.error(S(t.error,e),{id:n,...r,...null==r?void 0:r.error})}),e};var U=(e,t)=>{D({type:1,toast:{id:e,height:t}})},B=()=>{D({type:5,time:Date.now()})},V=e=>{let{toasts:t,pausedAt:r}=M(e);(0,n.useEffect)(()=>{if(r)return;let e=Date.now(),n=t.map(t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(r<0){t.visible&&F.dismiss(t.id);return}return setTimeout(()=>F.dismiss(t.id),r)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[t,r]);let i=(0,n.useCallback)(()=>{r&&D({type:6,time:Date.now()})},[r]),s=(0,n.useCallback)((e,r)=>{let{reverseOrder:n=!1,gutter:i=8,defaultPosition:s}=r||{},o=t.filter(t=>(t.position||s)===(e.position||s)&&t.height),a=o.findIndex(t=>t.id===e.id),l=o.filter((e,t)=>t<a&&e.visible).length;return o.filter(e=>e.visible).slice(...n?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+i,0)},[t]);return{toasts:t,handlers:{updateHeight:U,startPause:B,endPause:i,calculateOffset:s}}},H=v`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,z=v`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,W=v`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,q=_("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${H} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${z} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${W} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,$=v`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,K=_("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${$} 1s linear infinite;
`,J=v`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,G=v`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Q=_("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${J} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${G} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Y=_("div")`
  position: absolute;
`,X=_("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Z=v`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ee=_("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Z} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,et=({toast:e})=>{let{icon:t,type:r,iconTheme:i}=e;return void 0!==t?"string"==typeof t?n.createElement(ee,null,t):t:"blank"===r?null:n.createElement(X,null,n.createElement(K,{...i}),"loading"!==r&&n.createElement(Y,null,"error"===r?n.createElement(q,{...i}):n.createElement(Q,{...i})))},er=e=>`
0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,en=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}
`,ei="0%{opacity:0;} 100%{opacity:1;}",es="0%{opacity:1;} 100%{opacity:0;}",eo=_("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ea=_("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,el=(e,t)=>{let r=e.includes("top")?1:-1,[n,i]=T()?[ei,es]:[er(r),en(r)];return{animation:t?`${v(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${v(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},eu=n.memo(({toast:e,position:t,style:r,children:i})=>{let s=e.height?el(e.position||t||"top-center",e.visible):{opacity:0},o=n.createElement(et,{toast:e}),a=n.createElement(ea,{...e.ariaProps},S(e.message,e));return n.createElement(eo,{className:e.className,style:{...s,...r,...e.style}},"function"==typeof i?i({icon:o,message:a}):n.createElement(n.Fragment,null,o,a))});b(n.createElement);var ec=({id:e,className:t,style:r,onHeightUpdate:i,children:s})=>{let o=n.useCallback(t=>{if(t){let r=()=>{i(e,t.getBoundingClientRect().height)};r(),new MutationObserver(r).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return n.createElement("div",{ref:o,className:t,style:r},s)},ed=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:T()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}},eh=p`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ef=16,ep=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:i,children:s,containerStyle:o,containerClassName:a})=>{let{toasts:l,handlers:u}=V(r);return n.createElement("div",{style:{position:"fixed",zIndex:9999,top:ef,left:ef,right:ef,bottom:ef,pointerEvents:"none",...o},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(r=>{let o=r.position||t,a=ed(o,u.calculateOffset(r,{reverseOrder:e,gutter:i,defaultPosition:t}));return n.createElement(ec,{id:r.id,key:r.id,onHeightUpdate:u.updateHeight,className:r.visible?eh:"",style:a},"custom"===r.type?S(r.message,r):s?s(r):n.createElement(eu,{toast:r,position:o}))}))}},14066:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>eu});var n=r(3729),i=r(8145);let s=new WeakMap,o={},a={},l=()=>{},u=l(),c=Object,d=e=>e===u,h=e=>"function"==typeof e,f=(e,t)=>({...e,...t}),p="undefined",m=typeof window!=p,g=typeof document!=p,y=()=>m&&typeof window.requestAnimationFrame!=p,v=(e,t)=>{let r=s.get(e);return[()=>e.get(t)||o,n=>{if(!d(t)){let i=e.get(t);t in a||(a[t]=i),r[5](t,f(i,n),i||o)}},r[6],()=>!d(t)&&t in a?a[t]:e.get(t)||o]},b=new WeakMap,_=0,w=e=>{let t,r;let n=typeof e,i=e&&e.constructor,s=i==Date;if(c(e)!==e||s||i==RegExp)t=s?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=b.get(e))return t;if(t=++_+"~",b.set(e,t),i==Array){for(r=0,t="@";r<e.length;r++)t+=w(e[r])+",";b.set(e,t)}if(i==c){t="#";let n=c.keys(e).sort();for(;!d(r=n.pop());)d(e[r])||(t+=r+":"+w(e[r])+",");b.set(e,t)}}return t},S=!0,E=()=>S,[T,O]=m&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[l,l],C={isOnline:E,isVisible:()=>{let e=g&&document.visibilityState;return d(e)||"hidden"!==e}},k={initFocus:e=>(g&&document.addEventListener("visibilitychange",e),T("focus",e),()=>{g&&document.removeEventListener("visibilitychange",e),O("focus",e)}),initReconnect:e=>{let t=()=>{S=!0,e()},r=()=>{S=!1};return T("online",t),T("offline",r),()=>{O("online",t),O("offline",r)}}},x=!n.useId,A=!m||"Deno"in window,R=e=>y()?window.requestAnimationFrame(e):setTimeout(e,1),I=A?n.useEffect:n.useLayoutEffect,P="undefined"!=typeof navigator&&navigator.connection,D=!A&&P&&(["slow-2g","2g"].includes(P.effectiveType)||P.saveData),N=e=>{if(h(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?w(e):"",t]},M=0,j=()=>++M,L=0,F=1,U=2;var B={FOCUS_EVENT:0,RECONNECT_EVENT:1,MUTATE_EVENT:2,ERROR_REVALIDATE_EVENT:3};async function V(...e){let[t,r,n,i]=e,o=f({populateCache:!0,throwOnError:!0},"boolean"==typeof i?{revalidate:i}:i||{}),a=o.populateCache,l=o.rollbackOnError,c=o.optimisticData,p=!1!==o.revalidate,m=e=>"function"==typeof l?l(e):!1!==l,g=o.throwOnError;if(h(r)){let e=r,n=[],i=t.keys();for(let r=i.next();!r.done;r=i.next()){let i=r.value;!/^\$(inf|sub)\$/.test(i)&&e(t.get(i)._k)&&n.push(i)}return Promise.all(n.map(y))}return y(r);async function y(r){let i;let[o]=N(r);if(!o)return;let[l,f]=v(t,o),[y,b,_]=s.get(t),w=y[o],S=()=>p&&(delete _[o],w&&w[0])?w[0](U).then(()=>l().data):l().data;if(e.length<3)return S();let E=n,T=j();b[o]=[T,0];let O=!d(c),C=l(),k=C.data,x=C._c,A=d(x)?k:x;if(O&&f({data:c=h(c)?c(A):c,_c:A}),h(E))try{E=E(A)}catch(e){i=e}if(E&&h(E.then)){if(E=await E.catch(e=>{i=e}),T!==b[o][0]){if(i)throw i;return E}i&&O&&m(i)&&(a=!0,f({data:E=A,_c:u}))}a&&!i&&(h(a)&&(E=a(E,A)),f({data:E,_c:u})),b[o][1]=j();let R=await S();if(f({_c:u}),i){if(g)throw i;return}return a?R:E}}let H=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},z=(e,t)=>{if(!s.has(e)){let r=f(k,t),n={},i=V.bind(u,e),o=l,a={},c=(e,t)=>{let r=a[e]||[];return a[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},d=(t,r,n)=>{e.set(t,r);let i=a[t];if(i)for(let e of i)e(r,n)},h=()=>{if(!s.has(e)&&(s.set(e,[n,{},{},{},i,d,c]),!A)){let t=r.initFocus(setTimeout.bind(u,H.bind(u,n,L))),i=r.initReconnect(setTimeout.bind(u,H.bind(u,n,F)));o=()=>{t&&t(),i&&i(),s.delete(e)}}};return h(),[e,i,h,o]}return[e,s.get(e)[4]]},W=(e,t,r,n,i)=>{let s=r.errorRetryCount,o=i.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*r.errorRetryInterval;(d(s)||!(o>s))&&setTimeout(n,a,i)},q=(e,t)=>w(e)==w(t),[$,K]=z(new Map),J=f({onLoadingSlow:l,onSuccess:l,onError:l,onErrorRetry:W,onDiscarded:l,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:D?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:D?5e3:3e3,compare:q,isPaused:()=>!1,cache:$,mutate:K,fallback:{}},C),G=(e,t)=>{let r=f(e,t);if(t){let{use:n,fallback:i}=e,{use:s,fallback:o}=t;n&&s&&(r.use=n.concat(s)),i&&o&&(r.fallback=f(i,o))}return r},Q=(0,n.createContext)({}),Y=e=>{let{value:t}=e,r=(0,n.useContext)(Q),i=h(t),s=(0,n.useMemo)(()=>i?t(r):t,[i,r,t]),o=(0,n.useMemo)(()=>i?s:G(r,s),[i,r,s]),a=s&&s.provider,l=(0,n.useRef)(u);a&&!l.current&&(l.current=z(a(o.cache||$),s));let c=l.current;return c&&(o.cache=c[0],o.mutate=c[1]),I(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,n.createElement)(Q.Provider,f(e,{value:o}))},X=m&&window.__SWR_DEVTOOLS_USE__,Z=X?window.__SWR_DEVTOOLS_USE__:[],ee=()=>{X&&(window.__SWR_DEVTOOLS_REACT__=n)},et=e=>h(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],er=()=>f(J,(0,n.useContext)(Q)),en=e=>(t,r,n)=>{let i=r&&((...e)=>{let n=N(t)[0],[,,,i]=s.get($),o=i[n];return o?(delete i[n],o):r(...e)});return e(t,i,n)},ei=Z.concat(en),es=e=>function(...t){let r=er(),[n,i,s]=et(t),o=G(r,s),a=e,{use:l}=o,u=(l||[]).concat(ei);for(let e=u.length;e--;)a=u[e](a);return a(n,i||o.fetcher||null,o)},eo=(e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let e=n.indexOf(r);e>=0&&(n[e]=n[n.length-1],n.pop())}};ee();let ea={dedupe:!0},el=(e,t,r)=>{let{cache:o,compare:a,suspense:l,fallbackData:c,revalidateOnMount:p,revalidateIfStale:m,refreshInterval:g,refreshWhenHidden:y,refreshWhenOffline:b,keepPreviousData:_}=r,[w,S,E]=s.get(o),[T,O]=N(e),C=(0,n.useRef)(!1),k=(0,n.useRef)(!1),P=(0,n.useRef)(T),D=(0,n.useRef)(t),M=(0,n.useRef)(r),L=()=>M.current,F=()=>L().isVisible()&&L().isOnline(),[U,H,z,W]=v(o,T),q=(0,n.useRef)({}).current,$=d(c)?r.fallback[T]:c,K=(e,t)=>{let r=!0;for(let n in q){let i=n;"data"===i?a(t[i],e[i])||d(e[i])&&a(t[i],er)||(r=!1):t[i]!==e[i]&&(r=!1)}return r},J=(0,n.useMemo)(()=>{let e=!!T&&!!t&&(d(p)?!L().isPaused()&&!l&&(!!d(m)||m):p),r=t=>{let r=f(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},n=U(),i=W(),s=r(n),o=n===i?s:r(i),a=s;return[()=>{let e=r(U());return K(e,a)?a:a=e},()=>o]},[o,T]),G=(0,i.useSyncExternalStore)((0,n.useCallback)(e=>z(T,(t,r)=>{K(r,t)||e()}),[o,T]),J[0],J[1]),Q=!C.current,Y=w[T]&&w[T].length>0,X=G.data,Z=d(X)?$:X,ee=G.error,et=(0,n.useRef)(Z),er=_?d(X)?et.current:X:Z,en=(!Y||!!d(ee))&&(Q&&!d(p)?p:!L().isPaused()&&(l?!d(Z)&&m:d(Z)||m)),ei=!!(T&&t&&Q&&en),es=d(G.isValidating)?ei:G.isValidating,el=d(G.isLoading)?ei:G.isLoading,eu=(0,n.useCallback)(async e=>{let t,n;let i=D.current;if(!T||!i||k.current||L().isPaused())return!1;let s=!0,o=e||{},l=!E[T]||!o.dedupe,c=()=>x?!k.current&&T===P.current&&C.current:T===P.current,f={isValidating:!1,isLoading:!1},p=()=>{H(f)},m=()=>{let e=E[T];e&&e[1]===n&&delete E[T]},g={isValidating:!0};d(U().data)&&(g.isLoading=!0);try{if(l&&(H(g),r.loadingTimeout&&d(U().data)&&setTimeout(()=>{s&&c()&&L().onLoadingSlow(T,r)},r.loadingTimeout),E[T]=[i(O),j()]),[t,n]=E[T],t=await t,l&&setTimeout(m,r.dedupingInterval),!E[T]||E[T][1]!==n)return l&&c()&&L().onDiscarded(T),!1;f.error=u;let e=S[T];if(!d(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return p(),l&&c()&&L().onDiscarded(T),!1;let o=U().data;f.data=a(o,t)?o:t,l&&c()&&L().onSuccess(t,T,r)}catch(r){m();let e=L(),{shouldRetryOnError:t}=e;!e.isPaused()&&(f.error=r,l&&c()&&(e.onError(r,T,e),(!0===t||h(t)&&t(r))&&F()&&e.onErrorRetry(r,T,e,e=>{let t=w[T];t&&t[0]&&t[0](B.ERROR_REVALIDATE_EVENT,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0})))}return s=!1,p(),!0},[T,o]),ec=(0,n.useCallback)((...e)=>V(o,P.current,...e),[]);if(I(()=>{D.current=t,M.current=r,d(X)||(et.current=X)}),I(()=>{if(!T)return;let e=eu.bind(u,ea),t=0,r=eo(T,w,(r,n={})=>{if(r==B.FOCUS_EVENT){let r=Date.now();L().revalidateOnFocus&&r>t&&F()&&(t=r+L().focusThrottleInterval,e())}else if(r==B.RECONNECT_EVENT)L().revalidateOnReconnect&&F()&&e();else if(r==B.MUTATE_EVENT)return eu();else if(r==B.ERROR_REVALIDATE_EVENT)return eu(n)});return k.current=!1,P.current=T,C.current=!0,H({_k:O}),en&&(d(Z)||A?e():R(e)),()=>{k.current=!0,r()}},[T]),I(()=>{let e;function t(){let t=h(g)?g(Z):g;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!U().error&&(y||L().isVisible())&&(b||L().isOnline())?eu(ea).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,y,b,T]),(0,n.useDebugValue)(er),l&&d(Z)&&T){if(!x&&A)throw Error("Fallback data is required when using suspense in SSR.");throw D.current=t,M.current=r,k.current=!1,d(ee)?eu(ea):ee}return{mutate:ec,get data(){return q.data=!0,er},get error(){return q.error=!0,ee},get isValidating(){return q.isValidating=!0,es},get isLoading(){return q.isLoading=!0,el}}};c.defineProperty(Y,"defaultValue",{value:J});var eu=es(el)},46783:(e,t,r)=>{"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.r(t),r.d(t,{_:()=>n,_interop_require_default:()=>n})},38883:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},53242:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},88681:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},58702:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},81513:e=>{"use strict";e.exports={i8:"1.7.3"}},87658:e=>{"use strict";e.exports=JSON.parse('{"name":"openid-client","version":"5.4.0","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/node-openid-client","repository":"panva/node-openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.10.0","lru-cache":"^6.0.0","object-hash":"^2.0.1","oidc-token-hash":"^5.0.1"},"devDependencies":{"@types/node":"^16.11.5","@types/passport":"^1.0.7","base64url":"^3.0.1","chai":"^4.2.0","jose2":"npm:jose@^2.0.5","mocha":"^10.1.0","nock":"^13.0.2","prettier":"^2.4.1","readable-mock-req":"^0.2.2","sinon":"^9.2.0","timekeeper":"^2.2.0"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')},56541:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},89987:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},57674:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},73795:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};