(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{9474:function(e,t,a){Promise.resolve().then(a.bind(a,1210)),Promise.resolve().then(a.bind(a,2788))},1210:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var s=a(7437),n=a(2265);let l=n.forwardRef(function({title:e,titleId:t,...a},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 12.75 3 3m0 0 3-3m-3 3v-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});var i=a(8121),r=a(1126),o=a(8106),d=a(4793),u=function(e){let{message:t}=e,a="ChatGPT"===t.user.name;return(0,s.jsx)("div",{className:"py-5 text-white ".concat(a&&"bg-[#434654]"),children:(0,s.jsxs)("div",{className:"flex space-x-5 px-10 max-w-2xl mx-auto ",children:[(0,s.jsx)("img",{src:t.user.avatar,alt:"",className:"h-8 w-8 rounded-full"}),(0,s.jsx)("p",{className:"pt-1 text-sm",children:t.text})]})})},c=function(e){var t;let{chatId:a}=e,{data:c}=(0,r.useSession)(),m=(0,n.useRef)(null),[h]=(0,o.Kx)(c&&(0,i.IO)((0,i.hJ)(d.db,"users",null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.email,"chats",a,"messages"),(0,i.Xo)("createdAt","asc"))),v=()=>{var e;null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};return(0,n.useEffect)(()=>{v()},[null==h?void 0:h.docs.length]),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:[(null==h?void 0:h.empty)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"=mt-10 text-center text-white",children:"Type a message below to get started!"}),(0,s.jsx)(l,{className:"h-10 w-10 mx-auto mt-5 text-white animate-bounce"})]}),null==h?void 0:h.docs.map(e=>(0,s.jsx)(u,{message:e.data()},e.id)),(0,s.jsx)("div",{ref:m})]})}},2788:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(7437),n=a(2265);let l=n.forwardRef(function({title:e,titleId:t,...a},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,n.createElement("path",{d:"M3.478 2.404a.75.75 0 0 0-.926.941l2.432 7.905H13.5a.75.75 0 0 1 0 1.5H4.984l-2.432 7.905a.75.75 0 0 0 .926.94 60.519 60.519 0 0 0 18.445-8.986.75.75 0 0 0 0-1.218A60.517 60.517 0 0 0 3.478 2.404Z"}))});var i=a(8121),r=a(1126),o=a(963),d=a(4793),u=a(2066),c=a(7809),m=function(e){let{chatId:t}=e,[a,m]=(0,n.useState)(""),{data:h}=(0,r.useSession)(),{data:v}=(0,c.ZP)("model",{fallbackData:"text-davinci-003"}),f=async e=>{var s,n,l,r,u;if(e.preventDefault(),!a)return;let c=a.trim();m("");let f={text:c,createdAt:(0,i.Bt)(),user:{_id:null==h?void 0:null===(s=h.user)||void 0===s?void 0:s.email,name:null==h?void 0:null===(n=h.user)||void 0===n?void 0:n.name,avatar:(null==h?void 0:null===(l=h.user)||void 0===l?void 0:l.image)||"https://ui-avatars.com/api/?name=".concat(null==h?void 0:null===(r=h.user)||void 0===r?void 0:r.name)}};await (0,i.ET)((0,i.hJ)(d.db,"users",null==h?void 0:null===(u=h.user)||void 0===u?void 0:u.email,"chats",t,"messages"),f);let p=o.Am.loading("ChatGPT is thinking...");await fetch("/api/askQuestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:c,chatId:t,model:v,session:h})}).then(()=>{o.Am.success("ChatGPT has responded!",{id:p})})};return(0,s.jsxs)("div",{className:"bg-slate-800 text-gray-400    rounded-md text-sm focus:outline-none",children:[(0,s.jsxs)("form",{onSubmit:f,className:"p-5 space-x-5 flex",children:[(0,s.jsx)("input",{className:"bg-transparent focus:outline-none flex-1 disabled:cursor-not-allowed disabled:text-gray-300",disabled:!h,value:a,onChange:e=>m(e.target.value),type:"text",placeholder:"Type your message here..."}),(0,s.jsx)("button",{disabled:!a||!h,type:"submit",className:"bg-[#11A37F] hover:opacity-50 text-white font-bold px-4 py-2 rounded disabled:bg-gray-300 disabled:cursor-not-allowed",children:(0,s.jsx)(l,{className:"h-4 w-4 -rotate-45 mf-1"})})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)(u.Z,{})})]})}},2066:function(e,t,a){"use strict";var s=a(7437),n=a(7809),l=a(9262);let i=()=>fetch("/api/getEngines").then(e=>e.json());t.Z=function(){let{data:e,isLoading:t}=(0,n.ZP)("models",i),{data:a,mutate:r}=(0,n.ZP)("model",{fallbackData:"text-davinci-003"});return(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(l.ZP,{className:"mt-2",options:null==e?void 0:e.modelOptions,defaultValue:a,placeholder:a,isSearchable:!0,isLoading:t,menuPosition:"fixed",classNames:{control:e=>"bg-slate-800  border-[#434654]"},onChange:e=>r(e.value)})})}},4793:function(e,t,a){"use strict";a.d(t,{db:function(){return i}});var s=a(6142),n=a(8121);let l=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyAq95sHH8SOfCrpE7Lo2kmq995-HPmAuxQ",authDomain:"chartgpt-messenger-ed3bb.firebaseapp.com",projectId:"chartgpt-messenger-ed3bb",storageBucket:"chartgpt-messenger-ed3bb.appspot.com",messagingSenderId:"950601888774",appId:"1:950601888774:web:677918d13804beaa013f87"}),i=(0,n.ad)(l)}},function(e){e.O(0,[358,161,273,971,69,744],function(){return e(e.s=9474)}),_N_E=e.O()}]);